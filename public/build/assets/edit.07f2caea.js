new Vue({el:"#app",data(){return{currentYear:new Date().getFullYear()-15,lastYear:new Date().getFullYear()-45,selectionDay:31,errors:{gender:"",date_of_birth:"",residence_prefecture:"",current_salary:""},isLoading:!1,isSuccess:!1,isEditCompletedModal:!1,isShowFlashMessage:!1,input:{gender:"",DOByear:"",DOBmonth:"",DOBday:"",residence_prefecture:"",current_salary:""}}},mounted(){this.getData()},methods:{range:function(e,t){return Array(t-e+1).fill().map((r,a)=>e+a)},updateDateSelection(){this.input.DOByear!==0&&this.input.DOBmonth!==0&&(this.selectionDay=new Date(this.input.DOByear,this.input.DOBmonth,0).getDate(),this.input.DOBday>this.selectionDay&&(this.input.DOBday=""))},changeLoadingDisplay(e=!1){this.isLoading=e},getData(){axios.get("/members/get_user_data").then(e=>{let t=e.data,r=t.user.date_of_birth,a=new Date(r);this.input.gender=t.user.gender,this.input.residence_prefecture=t.user.residence_prefecture,this.input.current_salary=t.user.current_salary,this.input.DOByear=a.getFullYear(),this.input.DOBmonth=a.getMonth()+1,this.input.DOBday=a.getDate()})},async submitEdit(){const e=this.prepareDataForEdit();axios.put("/members/profile/update",e).then(t=>{this.isSuccess=!0,window.location.href="/members/profile/edit"}).catch(t=>{this.errors=t.response.data.errors})},prepareDataForEdit(){return this.changeLoadingDisplay(!0),this.errors=null,this.isSuccess=!1,this.isEditCompletedModal=!0,this.input.date_of_birth=this.input.DOByear+"-"+this.input.DOBmonth+"-"+this.input.DOBday,this.input}}});
