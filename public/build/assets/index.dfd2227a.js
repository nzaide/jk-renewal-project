new Vue({el:"#app",data(){return{getAdminAccounts:{data:[],currentPage:1,lastPage:null,defaultUrl:"/api/admin/admins",total:0},isElementVisible:!0,roles,search:""}},created(){setTimeout(()=>this.isElementVisible=!1,3e3),this.fetchData("getAdminAccounts")},methods:{changeToActive(e){let s=document.getElementsByClassName("role-buttons");for(let o=0;o<s.length;o++)s[o].classList.remove("bg-light");let a=e.target;a.classList.add("bg-light"),document.getElementById("mainForm").action=a.dataset.action,document.getElementsByName("_method")[0].value=a.dataset.method,document.getElementById("role").value=a.dataset.role;const t=document.getElementById("confirmationModal"),n=t.querySelector("#confirmationMsg"),l=t.querySelector('input[name="_method"]');switch(a.dataset.method){case"PUT":n.innerHTML="change role to "+this.roles[a.dataset.role];break;case"DELETE":n.innerHTML="delete";break}l.value=a.dataset.method},setAdminIds(){let e=new FormData(document.getElementById("tableForm"));document.getElementById("ids").value=e.getAll("ids[]")},selectPage(e){this.fetchData("getAdminAccounts",e)},async fetchData(e,s=null,a=""){s||(s=this[e].defaultUrl+"?search="+a),this[e].data=[];const t=await(await fetch(s)).json();t.data.forEach(n=>{this[e].data.push(n)}),this[e].currentPage=t.current_page,this[e].startPage=t.from,this[e].lastPage=t.last_page,this[e].prevPageUrl=t.prev_page_url,this[e].nextPageUrl=t.next_page_url,this[e].links=t.links,this[e].total=t.total}}});
