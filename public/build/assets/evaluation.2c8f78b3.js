new Vue({el:"#app",data(){return{evaluations:{data:[],pagination:null,currentPage:null,lastPage:null,total:null},count:{funny:null,sympathy:null},sort:"updated_at",baseURL:window.location.origin}},watch:{sort:function(a){this.fetchData(void 0,a)}},created(){this.fetchData(void 0,"updated_at")},methods:{activeStat(a){switch(!0){case a.url==null:return"pagination__item pagination__item--disabled";case a.active:return"pagination__item pagination__item--active";default:return"pagination__item"}},changePage(a){a!=null&&this.fetchData(a),window.scrollTo(0,this.$refs.dataList.offsetTop)},async react(a,e,t,i){if(a==e)return!1;const s=await fetch(this.baseURL+"/api/evaluations/react/"+this.evaluations.data[t].id+"/"+i);if(s.status=="200"){const n=await s.json();i=="sympathy"?this.evaluations.data[t].sympathy_users_count=n:i=="funny"&&(this.evaluations.data[t].funny_users_count=n),this.$refs[i+"-"+t][0].classList.toggle("active")}},async fetchData(a="/api/evaluations/",e){e!=null&&(a=this.baseURL+a+e);let t=await(await fetch(a)).json();this.evaluations.data=t.data,this.evaluations.pagination=t.links,this.evaluations.currentPage=t.current_page,this.evaluations.lastPage=t.last_page,this.evaluations.total=t.total,this.$refs.dataList.style.display="block"}}});
