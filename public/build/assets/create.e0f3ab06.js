import{a as zV}from"./index.561c04ad.js";import{g as fV}from"./selection.86645f9d.js";var gV={exports:{}};(function(Rn){(function(){var $s=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},Gc=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Sc=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},ki=function(e,n){return pu(function(o,r){return e.eq(n(o),n(r))})},pu=function(e){return{eq:e}},bf=pu(function(e,n){return e===n}),wn=bf,qc=function(e){return pu(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e.eq(n[a],o[a]))return!1;return!0})},V2=function(e,n){return ki(qc(e),function(o){return Sc(o,n)})},Ei=function(e){return pu(function(n,o){var r=Object.keys(n),a=Object.keys(o);if(!V2(wn).eq(r,a))return!1;for(var u=r.length,f=0;f<u;f++){var p=r[f];if(!e.eq(n[p],o[p]))return!1}return!0})},vf=pu(function(e,n){if(e===n)return!0;var o=$s(e),r=$s(n);return o!==r?!1:Gc(o)?e===n:o==="array"?qc(vf).eq(e,n):o==="object"?Ei(vf).eq(e,n):!1});const Ai=Object.getPrototypeOf,Jr=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Ti=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Jr(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},Ar=e=>n=>Ti(n)===e,nt=e=>n=>typeof n===e,_i=e=>n=>e===n,Sl=(e,n)=>hn(e)&&Jr(e,n,(o,r)=>Ai(o)===r),X=Ar("string"),hn=Ar("object"),Vh=e=>Sl(e,Object),xn=Ar("array"),te=_i(null),Wt=nt("boolean"),dr=_i(void 0),en=e=>e==null,Se=e=>!en(e),q=nt("function"),kc=nt("number"),kn=(e,n)=>{if(xn(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},dt=()=>{},bu=(e,n)=>(...o)=>e(n.apply(null,o)),A=(e,n)=>o=>e(n(o)),Oe=e=>()=>e,no=e=>e,Ct=(e,n)=>e===n;function Ce(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Zh=e=>n=>!e(n),qo=e=>()=>{throw new Error(e)},In=e=>e(),mr=e=>{e()},pn=Oe(!1),Ae=Oe(!0);class R{constructor(n,o){this.tag=n,this.value=o}static some(n){return new R(!0,n)}static none(){return R.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?R.some(n(this.value)):R.none()}bind(n){return this.tag?n(this.value):R.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:R.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n!=null?n:"Called getOrDie on None")}static from(n){return Se(n)?R.some(n):R.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}R.singletonNone=new R(!1);const yf=Array.prototype.slice,gb=Array.prototype.indexOf,Xt=Array.prototype.push,Ks=(e,n)=>gb.call(e,n),Xs=(e,n)=>{const o=Ks(e,n);return o===-1?R.none():R.some(o)},$n=(e,n)=>Ks(e,n)>-1,Yt=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return!0}return!1},Jt=(e,n)=>{const o=e.length,r=new Array(o);for(let a=0;a<o;a++){const u=e[a];r[a]=n(u,a)}return r},ve=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];n(a,o)}},So=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},Ys=(e,n)=>{const o=[],r=[];for(let a=0,u=e.length;a<u;a++){const f=e[a];(n(f,a)?o:r).push(f)}return{pass:o,fail:r}},mt=(e,n)=>{const o=[];for(let r=0,a=e.length;r<a;r++){const u=e[r];n(u,r)&&o.push(u)}return o},fa=(e,n,o)=>(So(e,(r,a)=>{o=n(o,r,a)}),o),oo=(e,n,o)=>(ve(e,(r,a)=>{o=n(o,r,a)}),o),hb=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++){const u=e[r];if(n(u,r))return R.some(u);if(o(u,r))break}return R.none()},Ko=(e,n)=>hb(e,n,pn),kl=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const a=e[o];if(n(a,o))return R.some(o)}return R.none()},Oi=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!xn(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Xt.apply(n,e[o])}return n},ga=(e,n)=>Oi(Jt(e,n)),vu=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const a=e[o];if(n(a,o)!==!0)return!1}return!0},Fr=e=>{const n=yf.call(e,0);return n.reverse(),n},ko=(e,n)=>mt(e,o=>!$n(n,o)),Cf=(e,n)=>{const o={};for(let r=0,a=e.length;r<a;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Xo=(e,n)=>{const o=yf.call(e,0);return o.sort(n),o},Lo=(e,n)=>n>=0&&n<e.length?R.some(e[n]):R.none(),Tr=e=>Lo(e,0),Ua=e=>Lo(e,e.length-1),Js=q(Array.from)?Array.from:e=>yf.call(e),El=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return R.none()},Z2=(e,n)=>{const o=[],r=q(n)?a=>Yt(o,u=>n(u,a)):a=>$n(o,a);for(let a=0,u=e.length;a<u;a++){const f=e[a];r(f)||o.push(f)}return o},gn=Object.keys,Uh=Object.hasOwnProperty,En=(e,n)=>{const o=gn(e);for(let r=0,a=o.length;r<a;r++){const u=o[r],f=e[u];n(f,u)}},at=(e,n)=>tn(e,(o,r)=>({k:r,v:n(o,r)})),tn=(e,n)=>{const o={};return En(e,(r,a)=>{const u=n(r,a);o[u.k]=u.v}),o},vs=e=>(n,o)=>{e[o]=n},Kc=(e,n,o,r)=>{En(e,(a,u)=>{(n(a,u)?o:r)(a,u)})},GS=(e,n)=>{const o={},r={};return Kc(e,n,vs(o),vs(r)),{t:o,f:r}},Yo=(e,n)=>{const o={};return Kc(e,n,vs(o),dt),o},wf=(e,n)=>{const o=[];return En(e,(r,a)=>{o.push(n(r,a))}),o},Eo=e=>wf(e,no),Bn=(e,n)=>Pt(e,n)?R.from(e[n]):R.none(),Pt=(e,n)=>Uh.call(e,n),Ir=(e,n)=>Pt(e,n)&&e[n]!==void 0&&e[n]!==null,Al=(e,n,o=vf)=>Ei(o).eq(e,n),mo=e=>{const n={};return ve(e,o=>{n[o]={}}),gn(n)},Wh=e=>e.length!==void 0,pb=Array.isArray,qS=e=>{if(pb(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},ys=(e,n,o)=>{if(!e)return!1;if(o=o||e,Wh(e)){for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Pt(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},yu=(e,n)=>{const o=[];return ys(e,(r,a)=>{o.push(n(r,a,e))}),o},Cu=(e,n)=>{const o=[];return ys(e,(r,a)=>{(!n||n(r,a,e))&&o.push(r)}),o},Fe=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},_r=(e,n,o,r)=>{let a=dr(o)?e[0]:o;for(let u=0;u<e.length;u++)a=n.call(r,a,e[u],u);return a},xf=(e,n,o)=>{for(let r=0,a=e.length;r<a;r++)if(n.call(o,e[r],r,e))return r;return-1},wu=e=>e[e.length-1],Xc=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},Hn=(e,n,o,r)=>{const a=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!a,f=e.isiOS()||e.isAndroid(),p=f||r("(pointer:coarse)"),y=a||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!y,_=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,M=!x&&!y&&!_;return{isiPad:Oe(a),isiPhone:Oe(u),isTablet:Oe(y),isPhone:Oe(x),isTouch:Oe(p),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:Oe(_),isDesktop:Oe(M)}},bb=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},KS=(e,n)=>{const o=bb(e,n);if(!o)return{major:0,minor:0};const r=a=>Number(n.replace(o,"$"+a));return ze(r(1),r(2))},Tl=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?jh():KS(e,o)},jh=()=>ze(0,0),ze=(e,n)=>({major:e,minor:n}),Sf={nu:ze,detect:Tl,unknown:jh},xu=(e,n)=>El(n.brands,o=>{const r=o.brand.toLowerCase();return Ko(e,a=>{var u;return r===((u=a.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(a=>({current:a.name,version:Sf.nu(parseInt(o.version,10),0)}))}),vb=(e,n)=>{const o=String(n).toLowerCase();return Ko(e,r=>r.search(o))},U2=(e,n)=>vb(e,n).map(o=>{const r=Sf.detect(o.versionRegexes,n);return{current:o.name,version:r}}),W2=(e,n)=>vb(e,n).map(o=>{const r=Sf.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Gh=(e,n)=>e.substring(n),Qr=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,qh=(e,n)=>Ho(e,n)?Gh(e,n.length):e,Ns=(e,n,o=0,r)=>{const a=e.indexOf(n,o);return a!==-1?dr(r)?!0:a+n.length<=r:!1},Ho=(e,n)=>Qr(e,n,0),_l=(e,n)=>Qr(e,n,e.length-n.length),kf=e=>n=>n.replace(e,""),bn=kf(/^\s+|\s+$/g),XS=kf(/^\s+/g),Ef=kf(/\s+$/g),ha=e=>e.length>0,Ao=e=>!ha(e),Di=(e,n)=>n<=0?"":new Array(n+1).join(e),Qs=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?R.none():R.some(o)},yb=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pa=e=>n=>Ns(n,e),Kh=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ns(e,"edge/")&&Ns(e,"chrome")&&Ns(e,"safari")&&Ns(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,yb],search:e=>Ns(e,"chrome")&&!Ns(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ns(e,"msie")||Ns(e,"trident")},{name:"Opera",versionRegexes:[yb,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pa("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pa("firefox")},{name:"Safari",versionRegexes:[yb,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ns(e,"safari")||Ns(e,"mobile/"))&&Ns(e,"applewebkit")}],Su=[{name:"Windows",search:pa("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ns(e,"iphone")||Ns(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pa("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pa("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pa("linux"),versionRegexes:[]},{name:"Solaris",search:pa("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pa("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pa("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Cb={browsers:Oe(Kh),oses:Oe(Su)},j2="Edge",Wn="Chromium",Af="IE",Yc="Opera",Tf="Firefox",Xh="Safari",Zd=()=>ba({current:void 0,version:Sf.unknown()}),ba=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isEdge:r(j2),isChromium:r(Wn),isIE:r(Af),isOpera:r(Yc),isFirefox:r(Tf),isSafari:r(Xh)}},Ud={unknown:Zd,nu:ba,edge:Oe(j2),chromium:Oe(Wn),ie:Oe(Af),opera:Oe(Yc),firefox:Oe(Tf),safari:Oe(Xh)},_f="Windows",G2="iOS",To="Android",ec="Linux",q2="macOS",wb="Solaris",xb="FreeBSD",Yh="ChromeOS",Sb=()=>K2({current:void 0,version:Sf.unknown()}),K2=e=>{const n=e.current,o=e.version,r=a=>()=>n===a;return{current:n,version:o,isWindows:r(_f),isiOS:r(G2),isAndroid:r(To),isMacOS:r(q2),isLinux:r(ec),isSolaris:r(wb),isFreeBSD:r(xb),isChromeOS:r(Yh)}},tc={unknown:Sb,nu:K2,windows:Oe(_f),ios:Oe(G2),android:Oe(To),linux:Oe(ec),macos:Oe(q2),solaris:Oe(wb),freebsd:Oe(xb),chromeos:Oe(Yh)},YS={detect:(e,n,o)=>{const r=Cb.browsers(),a=Cb.oses(),u=n.bind(y=>xu(r,y)).orThunk(()=>U2(r,e)).fold(Ud.unknown,Ud.nu),f=W2(a,e).fold(tc.unknown,tc.nu),p=Hn(f,u,e,o);return{browser:u,os:f,deviceType:p}}},X2=e=>window.matchMedia(e).matches;let JS=Xc(()=>YS.detect(navigator.userAgent,R.from(navigator.userAgentData),X2));const Lr=()=>JS(),QS=navigator.userAgent,Hr=Lr(),er=Hr.browser,Wa=Hr.os,Ri=Hr.deviceType,Ot=QS.indexOf("Windows Phone")!==-1,ln={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:er.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!er.isIE(),windowsPhone:Ot,browser:{current:er.current,version:er.version,isChromium:er.isChromium,isEdge:er.isEdge,isFirefox:er.isFirefox,isIE:er.isIE,isOpera:er.isOpera,isSafari:er.isSafari},os:{current:Wa.current,version:Wa.version,isAndroid:Wa.isAndroid,isChromeOS:Wa.isChromeOS,isFreeBSD:Wa.isFreeBSD,isiOS:Wa.isiOS,isLinux:Wa.isLinux,isMacOS:Wa.isMacOS,isSolaris:Wa.isSolaris,isWindows:Wa.isWindows},deviceType:{isDesktop:Ri.isDesktop,isiPad:Ri.isiPad,isiPhone:Ri.isiPhone,isPhone:Ri.isPhone,isTablet:Ri.isTablet,isTouch:Ri.isTouch,isWebView:Ri.isWebView}},Yn=/^\s*|\s*$/g,Or=e=>en(e)?"":(""+e).replace(Yn,""),Wd=(e,n)=>n?n==="array"&&pb(e)?!0:typeof e===n:e!==void 0,Cs=(e,n,o={})=>{const r=X(e)?e.split(n||","):e||[];let a=r.length;for(;a--;)o[r[a]]={};return o},ek=Pt,Eb=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const a in r)if(Pt(r,a)){const u=r[a];u!==void 0&&(e[a]=u)}}return e},Bi=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),ys(e,(a,u)=>n.call(r,a,u,o)===!1?!1:(Bi(a,n,o,r),!0)))},we={trim:Or,isArray:pb,is:Wd,toArray:qS,makeMap:Cs,each:ys,map:yu,grep:Cu,inArray:Fe,hasOwn:ek,extend:Eb,walk:Bi,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,a=o.length;r<a&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>xn(e)?e:e===""?[]:yu(e.split(n||","),Or),_addCacheSuffix:e=>{const n=ln.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},Ol=(e,n,o=Ct)=>e.exists(r=>o(r,n)),Ps=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Fs=(e,n,o)=>e.isSome()&&n.isSome()?R.some(o(e.getOrDie(),n.getOrDie())):R.none(),Ab=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?R.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):R.none(),Vt=(e,n)=>e?R.some(n):R.none();typeof window<"u"||Function("return this;")();const ku=8,jd=9,Tb=11,Jo=1,Dl=3,so=e=>e.dom.nodeName.toLowerCase(),Rl=e=>e.dom.nodeType,zn=e=>n=>Rl(n)===e,tk=e=>Rl(e)===ku||so(e)==="#comment",Nn=zn(Jo),Ro=zn(Dl),$i=zn(jd),Of=zn(Tb),Df=e=>n=>Nn(n)&&so(n)===e,Bo=(e,n,o)=>{if(X(o)||Wt(o)||kc(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Mo=(e,n,o)=>{Bo(e.dom,n,o)},Dr=(e,n)=>{const o=e.dom;En(n,(r,a)=>{Bo(o,a,r)})},is=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},va=(e,n)=>R.from(is(e,n)),Rf=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},ls=(e,n)=>{e.dom.removeAttribute(n)},Bf=e=>{const n=e.dom.attributes;return n==null||n.length===0},Mf=e=>oo(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),Bl=(e,n)=>{const o=is(e,n);return o===void 0||o===""?[]:o.split(" ")},Eu=(e,n,o)=>{const a=Bl(e,n).concat([o]);return Mo(e,n,a.join(" ")),!0},nk=(e,n,o)=>{const r=mt(Bl(e,n),a=>a!==o);return r.length>0?Mo(e,n,r.join(" ")):ls(e,n),!1},Au=e=>e.dom.classList!==void 0,Tu=e=>Bl(e,"class"),Jh=(e,n)=>Eu(e,"class",n),fr=(e,n)=>nk(e,"class",n),ja=(e,n)=>$n(Tu(e),n)?fr(e,n):Jh(e,n),Gd=(e,n)=>{Au(e)?e.dom.classList.add(n):Jh(e,n)},_b=e=>{(Au(e)?e.dom.classList:Tu(e)).length===0&&ls(e,"class")},$f=(e,n)=>{Au(e)?e.dom.classList.remove(n):fr(e,n),_b(e)},Ob=(e,n)=>{const o=Au(e)?e.dom.classList.toggle(n):ja(e,n);return _b(e),o},Qh=(e,n)=>Au(e)&&e.dom.classList.contains(n),Ga=e=>e.style!==void 0&&q(e.style.getPropertyValue),Y2=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const a="HTML does not have a single root node";throw console.error(a,e),new Error(a)}return Nf(r.childNodes[0])},J2=(e,n)=>{const r=(n||document).createElement(e);return Nf(r)},Q2=(e,n)=>{const r=(n||document).createTextNode(e);return Nf(r)},Nf=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},G={fromHtml:Y2,fromTag:J2,fromText:Q2,fromDom:Nf,fromPoint:(e,n,o)=>R.from(e.dom.elementFromPoint(n,o)).map(Nf)},_u=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let a=n(e);do a=a.bind(r);while(a.isSome());return o},Jc=(e,n)=>{const o=e.dom;if(o.nodeType!==Jo)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},ep=e=>e.nodeType!==Jo&&e.nodeType!==jd&&e.nodeType!==Tb||e.childElementCount===0,ty=(e,n)=>{const o=n===void 0?document:n.dom;return ep(o)?[]:Jt(o.querySelectorAll(e),G.fromDom)},ny=(e,n)=>{const o=n===void 0?document:n.dom;return ep(o)?R.none():R.from(o.querySelector(e)).map(G.fromDom)},vn=(e,n)=>e.dom===n.dom,tr=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Db=e=>G.fromDom(e.dom.ownerDocument),Ni=e=>$i(e)?e:Db(e),Rb=e=>G.fromDom(Ni(e).dom.documentElement),Ou=e=>G.fromDom(Ni(e).dom.defaultView),Ec=e=>R.from(e.dom.parentNode).map(G.fromDom),oy=e=>R.from(e.dom.parentElement).map(G.fromDom),sy=(e,n)=>{const o=q(n)?n:pn;let r=e.dom;const a=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=G.fromDom(u);if(a.push(f),o(f)===!0)break;r=u}return a},ry=e=>{const n=o=>mt(o,r=>!vn(e,r));return Ec(e).map(ws).map(n).getOr([])},nc=e=>R.from(e.dom.previousSibling).map(G.fromDom),Pf=e=>R.from(e.dom.nextSibling).map(G.fromDom),tp=e=>Fr(_u(e,nc)),Bb=e=>_u(e,Pf),ws=e=>Jt(e.dom.childNodes,G.fromDom),Ff=(e,n)=>{const o=e.dom.childNodes;return R.from(o[n]).map(G.fromDom)},Mb=e=>Ff(e,0),np=e=>Ff(e,e.dom.childNodes.length-1),Du=e=>e.dom.childNodes.length,cy=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return G.fromDom(n)},op=e=>Of(e)&&Se(e.dom.host),oc=q(Element.prototype.attachShadow)&&q(Node.prototype.getRootNode),ok=Oe(oc),qa=oc?e=>G.fromDom(e.dom.getRootNode()):Ni,qd=e=>op(e)?e:cy(Ni(e)),Ml=e=>op(e)?e:G.fromDom(Ni(e).dom.body),Ka=e=>{const n=qa(e);return op(n)?R.some(n):R.none()},ay=e=>G.fromDom(e.dom.host),iy=e=>{if(ok()&&Se(e.target)){const n=G.fromDom(e.target);if(Nn(n)&&$b(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Tr(o)}}return R.from(e.target)},$b=e=>Se(e.dom.shadowRoot),$l=e=>{const n=Ro(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return Ka(G.fromDom(n)).fold(()=>o.body.contains(n),A($l,ay))},sp=(e,n,o)=>{if(!X(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Ga(e)&&e.style.setProperty(n,o)},Ru=(e,n)=>{Ga(e)&&e.style.removeProperty(n)},ly=(e,n,o)=>{const r=e.dom;sp(r,n,o)},Nb=(e,n)=>{const o=e.dom;En(n,(r,a)=>{sp(o,a,r)})},Pi=(e,n)=>{const o=e.dom,a=window.getComputedStyle(o).getPropertyValue(n);return a===""&&!$l(e)?uy(o,n):a},uy=(e,n)=>Ga(e)?e.style.getPropertyValue(n):"",Kd=(e,n)=>{const o=e.dom,r=uy(o,n);return R.from(r).filter(a=>a.length>0)},Pb=e=>{const n={},o=e.dom;if(Ga(o))for(let r=0;r<o.style.length;r++){const a=o.style.item(r);n[a]=o.style[a]}return n},Xa=(e,n)=>{const o=e.dom;Ru(o,n),Ol(va(e,"style").map(bn),"")&&ls(e,"style")},xs=e=>e.dom.offsetWidth,qn=(e,n)=>{Ec(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},sc=(e,n)=>{Pf(e).fold(()=>{Ec(e).each(a=>{zo(a,n)})},r=>{qn(r,n)})},Ac=(e,n)=>{Mb(e).fold(()=>{zo(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},zo=(e,n)=>{e.dom.appendChild(n.dom)},Xd=(e,n)=>{qn(e,n),zo(n,e)},sk=(e,n)=>{ve(n,(o,r)=>{const a=r===0?e:n[r-1];sc(a,o)})},St=(e,n)=>{ve(n,o=>{zo(e,o)})},Jn=e=>{e.dom.textContent="",ve(ws(e),n=>{un(n)})},un=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},Is=e=>{const n=ws(e);n.length>0&&sk(e,n),un(e)},Ls=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,ws(G.fromDom(r))},dy=e=>Jt(e,G.fromDom),If=e=>e.dom.innerHTML,rp=(e,n)=>{const r=Db(e).dom,a=G.fromDom(r.createDocumentFragment()),u=Ls(n,r);St(a,u),Jn(e),zo(e,a)},Nl=e=>{const n=G.fromTag("div"),o=G.fromDom(e.dom.cloneNode(!0));return zo(n,o),If(n)},cp=(e,n,o,r,a,u,f)=>({target:e,x:n,y:o,stop:r,prevent:a,kill:u,raw:f}),u_=e=>{const n=G.fromDom(iy(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),a=bu(r,o);return cp(n,e.clientX,e.clientY,o,r,a,e)},d_=(e,n)=>o=>{e(o)&&n(u_(o))},fo=(e,n,o,r,a)=>{const u=d_(o,r);return e.dom.addEventListener(n,u,a),{unbind:Ce(fy,e,n,u,a)}},my=(e,n,o,r)=>fo(e,n,o,r,!1),fy=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Fb=(e,n)=>({left:e,top:n,translate:(r,a)=>Fb(e+r,n+a)}),Lf=Fb,m_=e=>{const n=e.getBoundingClientRect();return Lf(n.left,n.top)},ap=(e,n)=>e!==void 0?e:n!==void 0?n:0,ro=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,a=n.documentElement;if(o===e.dom)return Lf(o.offsetLeft,o.offsetTop);const u=ap(r==null?void 0:r.pageYOffset,a.scrollTop),f=ap(r==null?void 0:r.pageXOffset,a.scrollLeft),p=ap(a.clientTop,o.clientTop),y=ap(a.clientLeft,o.clientLeft);return Ft(e).translate(f-y,u-p)},Ft=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?Lf(r.offsetLeft,r.offsetTop):$l(e)?m_(n):Lf(0,0)},zr=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Lf(o,r)},Yd=(e,n,o)=>{const a=(o!==void 0?o.dom:document).defaultView;a&&a.scrollTo(e,n)},Jd=(e,n)=>{Lr().browser.isSafari()&&q(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},Ib=e=>{const n=e===void 0?window:e;return Lr().browser.isFirefox()?R.none():R.from(n.visualViewport)},Hf=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),gy=e=>{const n=e===void 0?window:e,o=n.document,r=zr(G.fromDom(o));return Ib(n).fold(()=>{const a=n.document.documentElement,u=a.clientWidth,f=a.clientHeight;return Hf(r.left,r.top,u,f)},a=>Hf(Math.max(a.pageLeft,r.left),Math.max(a.pageTop,r.top),a.width,a.height))},Pl=e=>n=>!!n&&n.nodeType===e,Bu=e=>!!e&&!Object.getPrototypeOf(e),Ue=Pl(1),hy=e=>{const n=e.toLowerCase();return o=>Se(o)&&o.nodeName.toLowerCase()===n},Tc=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return $n(n,r)}return!1}},rc=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if(Ue(r)){const a=r.ownerDocument.defaultView;if(a)for(let u=0;u<o.length;u++){const f=a.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},py=e=>n=>Ue(n)&&n.hasAttribute(e),Fl=(e,n)=>o=>Ue(o)&&o.getAttribute(e)===n,ya=e=>Ue(e)&&e.hasAttribute("data-mce-bogus"),rk=e=>Ue(e)&&e.getAttribute("data-mce-bogus")==="all",Ya=e=>Ue(e)&&e.tagName==="TABLE",Lb=e=>n=>!!(Ue(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ip=Tc(["textarea","input"]),ke=Pl(3),Hb=Pl(4),by=Pl(7),Ca=Pl(8),zf=Pl(9),zb=Pl(11),go=hy("br"),vy=hy("img"),_c=Lb("true"),Qn=Lb("false"),Rr=Tc(["td","th"]),ot=Tc(["td","th","caption"]),Ss=Tc(["video","audio","object","embed"]),Vb=hy("li"),ck=Lr().browser,yy=e=>Ko(e,Nn),Zb=e=>ck.isFirefox()&&so(e)==="table"?yy(ws(e)).filter(n=>so(n)==="caption").bind(n=>yy(Bb(n)).map(o=>{const r=o.dom.offsetTop,a=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=a?-u:0})).getOr(0):0,Oc=(e,n)=>e.children&&$n(e.children,n),lp=(e,n,o)=>{let r=0,a=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Pi(G.fromDom(e),"position")==="static"){const p=n.getBoundingClientRect();return r=p.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,a=p.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:a}}let f=n;for(;f&&f!==o&&f.nodeType&&!Oc(f,o);){const p=f;r+=p.offsetLeft||0,a+=p.offsetTop||0,f=p.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!Oc(f,o);)r-=f.scrollLeft||0,a-=f.scrollTop||0,f=f.parentNode;a+=Zb(G.fromDom(n))}return{x:r,y:a}};var Vf=(e,n,o,r,a)=>e(o,r)?R.some(o):q(a)&&a(o)?R.none():n(o,r,a);const ho=(e,n,o)=>{let r=e.dom;const a=q(o)?o:pn;for(;r.parentNode;){r=r.parentNode;const u=G.fromDom(r);if(n(u))return R.some(u);if(a(u))break}return R.none()},wa=(e,n,o)=>Vf((a,u)=>u(a),ho,e,n,o),up=(e,n)=>{const o=e.dom;return o.parentNode?Zf(G.fromDom(o.parentNode),r=>!vn(e,r)&&n(r)):R.none()},Zf=(e,n)=>{const o=a=>n(G.fromDom(a));return Ko(e.dom.childNodes,o).map(G.fromDom)},ak=(e,n)=>{const o=r=>{for(let a=0;a<r.childNodes.length;a++){const u=G.fromDom(r.childNodes[a]);if(n(u))return R.some(u);const f=o(r.childNodes[a]);if(f.isSome())return f}return R.none()};return o(e.dom)},Uf=(e,n,o)=>ho(e,r=>Jc(r,n),o),Il=(e,n)=>ny(n,e),Mu=(e,n,o)=>Vf((a,u)=>Jc(a,u),Uf,e,n,o),Qd=(e,n={})=>{let o=0;const r={},a=G.fromDom(e),u=Ni(a),f=n.maxLoadTime||5e3,p=I=>{n.referrerPolicy=I},y=I=>{zo(qd(a),I)},x=I=>{const Z=qd(a);Il(Z,"#"+I).each(un)},_=I=>Bn(r,I).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=I=>new Promise((Z,U)=>{let K;const J=we._addCacheSuffix(I),de=_(J);r[J]=de,de.count++;const he=(tt,kt)=>{ve(tt,mr),de.status=kt,de.passed=[],de.failed=[],K&&(K.onload=null,K.onerror=null,K=null)},De=()=>he(de.passed,2),be=()=>he(de.failed,3),ae=(tt,kt)=>{tt()||(Date.now()-Je<f?setTimeout(kt):be())},ie=()=>{ae(()=>{const tt=e.styleSheets;let kt=tt.length;for(;kt--;){const fn=tt[kt].ownerNode;if(fn&&K&&fn.id===K.id)return De(),!0}return!1},ie)};if(Z&&de.passed.push(Z),U&&de.failed.push(U),de.status===1)return;if(de.status===2){De();return}if(de.status===3){be();return}de.status=1;const Re=G.fromTag("link",u.dom);Dr(Re,{rel:"stylesheet",type:"text/css",id:de.id});const Je=Date.now();n.contentCssCors&&Mo(Re,"crossOrigin","anonymous"),n.referrerPolicy&&Mo(Re,"referrerpolicy",n.referrerPolicy),K=Re.dom,K.onload=ie,K.onerror=be,y(Re),Mo(Re,"href",J)}),B=I=>Promise.allSettled(Jt(I,U=>M(U).then(Oe(U)))).then(U=>{const K=Ys(U,J=>J.status==="fulfilled");return K.fail.length>0?Promise.reject(Jt(K.fail,J=>J.reason)):Jt(K.pass,J=>J.value)}),H=I=>{const Z=we._addCacheSuffix(I);Bn(r,Z).each(U=>{--U.count===0&&(delete r[Z],x(U.id))})};return{load:M,loadAll:B,unload:H,unloadAll:I=>{ve(I,Z=>{H(Z)})},_setReferrerPolicy:p}},$u=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=qa(o).dom;return R.from(e.get(u)).getOrThunk(()=>{const f=Qd(u,r);return e.set(u,f),f})}}})();class jt{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,a){if(n){if(!a&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const a=n.parentNode;if(a&&a!==this.rootNode)return a}}}const Ja=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],gr=["td","th"],Nu=["thead","tbody","tfoot"],Dc=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],wy=["h1","h2","h3","h4","h5","h6"],ks=["li","dd","dt"],nr=["ul","ol","dl"],Ub=["pre","script","textarea","style"],pe=["pre"].concat(wy),us=e=>{let n;return o=>(n=n||Cf(e,Ae),Pt(n,so(o)))},xa=us(Ja),Qo=e=>so(e)==="table",em=e=>Nn(e)&&!xa(e),Pu=e=>Nn(e)&&so(e)==="br",Fi=us(Dc),Wb=us(nr),cc=us(ks),dp=us(Nu),hr=us(gr),nn=us(Ub),Ii=us(pe),Fu=e=>Ii(e)||em(e),pr=(e,n,o)=>Uf(e,n,o).isSome(),Iu="\uFEFF",Vo="\xA0",tm=e=>e===Iu,Vr=e=>e.replace(/\uFEFF/g,""),jb=(e,n)=>{let o=[];return ve(ws(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(jb(r,n))}),o},ee=(e,n)=>ty(n,e),Gb=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?R.from(u.dom.nodeValue):R.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Ro,"text"),ac=e=>Gb.get(e),Li=e=>Gb.getOption(e),ic=e=>{const n=[];let o=e.dom;for(;o;)n.push(G.fromDom(o)),o=o.lastChild;return n},es=e=>{const n=ee(e,"br"),o=mt(ic(e).slice(-1),Pu);n.length===o.length&&ve(o,un)},qb=()=>{const e=G.fromTag("br");return Mo(e,"data-mce-bogus","1"),e},Hi=e=>{Jn(e),zo(e,qb())},Kb=e=>{np(e).each(n=>{nc(n).each(o=>{xa(e)&&Pu(n)&&xa(o)&&un(n)})})},Ye=Iu,Xb=tm,Es=Vr,Yb=Ue,Ll=ke,Lu=e=>(Ll(e)&&(e=e.parentNode),Yb(e)&&e.hasAttribute("data-mce-caret")),nm=e=>Ll(e)&&Xb(e.data),As=e=>Lu(e)||nm(e),Hl=e=>e.firstChild!==e.lastChild||!go(e.firstChild),om=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ye),u=e.parentNode;if(n){const f=e.previousSibling;if(Ll(f)){if(As(f))return f;if(jf(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(a,e)}else{const f=e.nextSibling;if(Ll(f)){if(As(f))return f;if(Wf(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(a,e.nextSibling):u==null||u.appendChild(a)}return a},mp=e=>{const n=e.container();return ke(n)?n.data.charAt(e.offset())===Ye||e.isAtStart()&&nm(n.previousSibling):!1},fp=e=>{const n=e.container();return ke(n)?n.data.charAt(e.offset()-1)===Ye||e.isAtEnd()&&nm(n.nextSibling):!1},xy=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(qb().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Wf=e=>Ll(e)&&e.data[0]===Ye,jf=e=>Ll(e)&&e.data[e.data.length-1]===Ye,Gf=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];ya(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},sm=e=>e&&e.hasAttribute("data-mce-caret")?(Gf(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Jb=e=>Lu(e.startContainer),zl=_c,ik=Qn,lk=go,uk=ke,dk=Tc(["script","style","textarea"]),Zo=Tc(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Qa=Tc(["table"]),qf=As,Br=e=>qf(e)?!1:uk(e)?!dk(e.parentNode):Zo(e)||lk(e)||Qa(e)||Hs(e),Kf=e=>Ue(e)&&e.getAttribute("unselectable")==="true",Hs=e=>!Kf(e)&&ik(e),ei=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Hs(o))return!1;if(zl(o))return!0}return!0},rm=e=>Hs(e)?!oo(Js(e.getElementsByTagName("*")),(n,o)=>n||zl(o),!1):!1,gp=e=>Zo(e)||rm(e),ti=(e,n)=>Br(e)&&ei(e,n),Vl=/^[ \t\r\n]*$/,Hu=e=>Vl.test(e),Xf=e=>" \f	\v".indexOf(e)!==-1,Sy=e=>e===`
`||e==="\r",zu=(e,n)=>n<e.length&&n>=0?Sy(e[n]):!1,cm=(e,n=4,o=!0,r=!0)=>{const a=Di(" ",n),u=e.replace(/\t/g,a);return oo(u,(p,y)=>Xf(y)||y===Vo?p.pcIsSpace||p.str===""&&o||p.str.length===u.length-1&&r||zu(u,p.str.length+1)?{pcIsSpace:!1,str:p.str+Vo}:{pcIsSpace:!0,str:p.str+" "}:{pcIsSpace:Sy(y),str:p.str+y},{pcIsSpace:!1,str:""}).str},Yf=(e,n)=>{const o=G.fromDom(n),r=G.fromDom(e);return pr(r,"pre,code",Ce(vn,o))},ky=(e,n)=>ke(e)&&Hu(e.data)&&!Yf(e,n),Jf=e=>Ue(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),hp=(e,n)=>Br(e)&&!ky(e,n)||Jf(e)||Ey(e),Ey=py("data-mce-bookmark"),po=py("data-mce-bogus"),mk=Fl("data-mce-bogus","all"),Zl=(e,n)=>{let o=0;if(hp(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const a=new jt(r,e);do{if(n){if(mk(r)){r=a.next(!0);continue}if(po(r)){r=a.next();continue}}if(go(r)){o++,r=a.next();continue}if(hp(r,e))return!1;r=a.next()}while(r);return o<=1}},$o=(e,n=!0)=>Zl(e.dom,n),Qb=e=>e.nodeName.toLowerCase()==="span",Sa=(e,n)=>Se(e)&&(hp(e,n)||em(G.fromDom(e))),lc=(e,n)=>{const o=new jt(e,n).prev(!1),r=new jt(e,n).next(!1),a=dr(o)||Sa(o,n),u=dr(r)||Sa(r,n);return a&&u},zi=e=>Qb(e)&&e.getAttribute("data-mce-type")==="bookmark",Qf=(e,n)=>ke(e)&&e.data.length>0&&lc(e,n),fk=e=>Ue(e)?e.childNodes.length>0:!1,pp=e=>zb(e)||zf(e),eg=(e,n,o)=>{var r;const a=o||n;if(Ue(n)&&zi(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)eg(e,u[f],a);if(Ue(n)){const f=n.childNodes;f.length===1&&zi(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!pp(n)&&!hp(n,a)&&!fk(n)&&!Qf(n,a)&&e.remove(n),n},bp=we.makeMap,vp=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,yp=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,e0=/[<>&\"\']/g,tg=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Vi={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"},ea={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ul={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ng=e=>{const n=G.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},og=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let a=0;a<r.length;a+=2){const u=String.fromCharCode(parseInt(r[a],n));if(!ea[u]){const f="&"+r[a+1]+";";o[u]=f,o[f]=u}}return o}else return},sg=og("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Cp=(e,n)=>e.replace(n?vp:yp,o=>ea[o]||o),Ay=e=>(""+e).replace(e0,n=>ea[n]||n),t0=(e,n)=>e.replace(n?vp:yp,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":ea[o]||"&#"+o.charCodeAt(0)+";"),am=(e,n,o)=>{const r=o||sg;return e.replace(n?vp:yp,a=>ea[a]||r[a]||a)},uc={encodeRaw:Cp,encodeAllRaw:Ay,encodeNumeric:t0,encodeNamed:am,getEncodeFunc:(e,n)=>{const o=og(n)||sg,r=(f,p)=>f.replace(p?vp:yp,y=>ea[y]!==void 0?ea[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),a=(f,p)=>am(f,p,o),u=bp(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?a:am:u.numeric?t0:Cp},decode:e=>e.replace(tg,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):Vi[o]||String.fromCharCode(o)):Ul[n]||sg[n]||ng(n))},im={},Zi={},gk={},Vu=we.makeMap,Bt=we.each,wp=we.extend,xp=we.explode,Ty=we.inArray,fe=(e,n)=>(e=we.trim(e),e?e.split(n||" "):[]),ni=(e,n={})=>{const o=Vu(e," ",Vu(e.toUpperCase()," "));return wp(o,n)},rg=e=>ni("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),Sp=e=>{const n={};let o,r,a,u;const f=(y,x="",_="")=>{const M=fe(_),B=fe(y);let H=B.length;for(;H--;){const V=fe([o,x].join(" "));n[B[H]]={attributes:Cf(V,()=>({})),attributesOrder:V,children:Cf(M,Oe(gk))}}},p=(y,x)=>{const _=fe(y),M=fe(x);let B=_.length;for(;B--;){const H=n[_[B]];for(let V=0,I=M.length;V<I;V++)H.attributes[M[V]]={},H.attributesOrder.push(M[V])}};if(im[e])return im[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",a="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav",a+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),e!=="html5-strict"){o+=" xml:lang";const y="acronym applet basefont big font strike tt";a=[a,y].join(" "),Bt(fe(y),_=>{f(_,"",a)});const x="center dir isindex noframes";r=[r,x].join(" "),u=[r,a].join(" "),Bt(fe(x),_=>{f(_,"",u)})}return u=u||[r,a].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("address dt dd div caption","",u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",a),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",a),f("q","cite",a),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",a),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:a),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[a,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",a),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[a,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",a),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",a),f("progress","value max",a),f("meter","value min max low high optimum",a),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(p("script","language xml:space"),p("style","xml:space"),p("object","declare classid code codebase codetype archive standby align border hspace vspace"),p("embed","align name hspace vspace"),p("param","valuetype type"),p("a","charset name rev shape coords"),p("br","clear"),p("applet","codebase archive code object alt name width height align hspace vspace"),p("img","name longdesc align border hspace vspace"),p("iframe","longdesc frameborder marginwidth marginheight scrolling align"),p("font basefont","size color face"),p("input","usemap align"),p("select"),p("textarea"),p("h1 h2 h3 h4 h5 h6 div p legend caption","align"),p("ul","type compact"),p("li","type"),p("ol dl menu dir","compact"),p("pre","width xml:space"),p("hr","align noshade size width"),p("isindex","prompt"),p("table","summary width frame rules cellspacing cellpadding align bgcolor"),p("col","width align char charoff valign"),p("colgroup","width align char charoff valign"),p("thead","align char charoff valign"),p("tr","align char charoff valign bgcolor"),p("th","axis align char charoff valign nowrap bgcolor width height"),p("form","accept"),p("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),p("tfoot","align char charoff valign"),p("tbody","align char charoff valign"),p("area","nohref"),p("body","background bgcolor text link vlink alink")),e!=="html4"&&(p("input button select textarea","autofocus"),p("input textarea","placeholder"),p("a","download"),p("link script img","crossorigin"),p("img","loading"),p("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&ve([n.video,n.audio],y=>{delete y.children.audio,delete y.children.video}),Bt(fe("a form meter progress dfn"),y=>{n[y]&&delete n[y].children[y]}),delete n.caption.children.table,delete n.script,im[e]=n,n},n0=(e,n)=>{if(e){const o={};return X(e)&&(e={"*":e}),Bt(e,(r,a)=>{o[a]=o[a.toUpperCase()]=n==="map"?Vu(r,/[, ]/):xp(r,/[, ]/)}),o}else return},Rc=(e={})=>{var n;const o={},r={};let a=[];const u={},f={},p=(pt,wt,Sn)=>{const An=e[pt];if(An)return Vu(An,/[, ]/,Vu(An.toUpperCase(),/[, ]/));{let rs=Zi[pt];return rs||(rs=ni(wt,Sn),Zi[pt]=rs),rs}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",x=Sp(y);e.verify_html===!1&&(e.valid_elements="*[*]");const _=n0(e.valid_styles),M=n0(e.invalid_styles,"map"),B=n0(e.valid_classes,"map"),H=p("whitespace_elements","pre script noscript style textarea video audio iframe object code"),V=p("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),I=p("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Z=p("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),U="td th iframe video audio object script code",K=p("non_empty_elements",U+" pre",I),J=p("move_caret_before_on_enter_elements",U+" table",I),de=p("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),he=p("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",de),De=p("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");Bt("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),pt=>{f[pt]=new RegExp("</"+pt+"[^>]*>","gi")});const be=pt=>new RegExp("^"+pt.replace(/([?+*])/g,".$1")+"$"),ae=pt=>{const wt=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Sn=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,An=/[*?+]/;if(pt){const rs=fe(pt,",");let to,Xn;o["@"]&&(to=o["@"].attributes,Xn=o["@"].attributesOrder);for(let Go=0,qs=rs.length;Go<qs;Go++){let cs=wt.exec(rs[Go]);if(cs){const bl=cs[1],Va=cs[2],vl=cs[3],yl=cs[5],Cl={},wl=[],io={attributes:Cl,attributesOrder:wl};if(bl==="#"&&(io.paddEmpty=!0),bl==="-"&&(io.removeEmpty=!0),cs[4]==="!"&&(io.removeEmptyAttrs=!0),to&&(En(to,(Za,xl)=>{Cl[xl]=Za}),Xn&&wl.push(...Xn)),yl){const Za=fe(yl,"|");for(let xl=0,Lh=Za.length;xl<Lh;xl++)if(cs=Sn.exec(Za[xl]),cs){const Si={},Wc=cs[1],ur=cs[2].replace(/[\\:]:/g,":"),da=cs[3],ma=cs[4];if(Wc==="!"&&(io.attributesRequired=io.attributesRequired||[],io.attributesRequired.push(ur),Si.required=!0),Wc==="-"){delete Cl[ur],wl.splice(Ty(wl,ur),1);continue}if(da&&(da==="="&&(io.attributesDefault=io.attributesDefault||[],io.attributesDefault.push({name:ur,value:ma}),Si.defaultValue=ma),da==="~"&&(io.attributesForced=io.attributesForced||[],io.attributesForced.push({name:ur,value:ma}),Si.forcedValue=ma),da==="<"&&(Si.validValues=Vu(ma,"?"))),An.test(ur)){const hf=Si;io.attributePatterns=io.attributePatterns||[],hf.pattern=be(ur),io.attributePatterns.push(hf)}else Cl[ur]||wl.push(ur),Cl[ur]=Si}}if(!to&&Va==="@"&&(to=Cl,Xn=wl),vl&&(io.outputName=Va,o[vl]=io),An.test(Va)){const Za=io;Za.pattern=be(Va),a.push(Za)}else o[Va]=io}}}},ie=pt=>{a=[],ve(gn(o),wt=>{delete o[wt]}),ae(pt),Bt(x,(wt,Sn)=>{r[Sn]=wt.children})},Re=pt=>{const wt=/^(~)?(.+)$/;pt&&(delete Zi.text_block_elements,delete Zi.block_elements,Bt(fe(pt,","),Sn=>{const An=wt.exec(Sn);if(An){const rs=An[1]==="~",to=rs?"span":"div",Xn=An[2];if(r[Xn]=r[to],u[Xn]=to,K[Xn.toUpperCase()]={},K[Xn]={},rs||(he[Xn.toUpperCase()]={},he[Xn]={}),!o[Xn]){let Go=o[to];Go=wp({},Go),delete Go.removeEmptyAttrs,delete Go.removeEmpty,o[Xn]=Go}Bt(r,(Go,qs)=>{Go[to]&&(r[qs]=Go=wp({},r[qs]),Go[Xn]=Go[to])})}}))},Je=pt=>{const wt=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete im[y],pt&&Bt(fe(pt,","),Sn=>{const An=wt.exec(Sn);if(An){const rs=An[1];let to;rs?to=r[An[2]]:to=r[An[2]]={"#comment":{}},to=r[An[2]],Bt(fe(An[3],"|"),Xn=>{rs==="-"?delete to[Xn]:to[Xn]={}})}})},tt=pt=>{const wt=o[pt];if(wt)return wt;let Sn=a.length;for(;Sn--;){const An=a[Sn];if(An.pattern.test(pt))return An}};e.valid_elements?ie(e.valid_elements):(Bt(x,(pt,wt)=>{o[wt]={attributes:pt.attributes,attributesOrder:pt.attributesOrder},r[wt]=pt.children}),Bt(fe("strong/b em/i"),pt=>{const wt=fe(pt,"/");o[wt[1]].outputName=wt[0]}),Bt(De,(pt,wt)=>{o[wt]&&(e.padd_empty_block_inline_children&&(o[wt].paddInEmptyBlock=!0),o[wt].removeEmpty=!0)}),Bt(fe("ol ul blockquote a table tbody"),pt=>{o[pt]&&(o[pt].removeEmpty=!0)}),Bt(fe("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),pt=>{o[pt].paddEmpty=!0}),Bt(fe("span"),pt=>{o[pt].removeEmptyAttrs=!0})),Re(e.custom_elements),Je(e.valid_children),ae(e.extended_valid_elements),Je("+ol[ul|ol],+ul[ul|ol]"),Bt({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(pt,wt)=>{o[wt]&&(o[wt].parentsRequired=fe(pt))}),e.invalid_elements&&Bt(xp(e.invalid_elements),pt=>{o[pt]&&delete o[pt]}),tt("span")||ae("span[!data-mce-type|*]");const kt=Oe(_),qt=Oe(M),fn=Oe(B),Dn=Oe(Z),Ms=Oe(he),_e=Oe(de),At=Oe(De),$t=Oe(Object.seal(I)),vt=Oe(V),Do=Oe(K),je=Oe(J),yt=Oe(H),ut=Oe(Object.seal(f)),Pe=(pt,wt)=>{const Sn=r[pt.toLowerCase()];return!!(Sn&&Sn[wt.toLowerCase()])},Nt=(pt,wt)=>{const Sn=tt(pt);if(Sn)if(wt){if(Sn.attributes[wt])return!0;const An=Sn.attributePatterns;if(An){let rs=An.length;for(;rs--;)if(An[rs].pattern.test(wt))return!0}}else return!0;return!1},_t=Oe(u);return{type:y,children:r,elements:o,getValidStyles:kt,getValidClasses:fn,getBlockElements:Ms,getInvalidStyles:qt,getVoidElements:$t,getTextBlockElements:_e,getTextInlineElements:At,getBoolAttrs:Dn,getElementRule:tt,getSelfClosingElements:vt,getNonEmptyElements:Do,getMoveCaretBeforeOnEnterElements:je,getWhitespaceElements:yt,getSpecialElements:ut,isValidChild:Pe,isValid:Nt,getCustomElements:_t,addValidElements:ae,setValidElements:ie,addCustomElements:Re,addValidChildren:Je}},lm=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,a=/\s+$/,u={};let f,p;const y=Iu;n&&(f=n.getValidStyles(),p=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let M=0;M<x.length;M++)u[x[M]]=y+M,u[y+M]=x[M];const _={parse:M=>{const B={};let H=!1;const V=e.url_converter,I=e.url_converter_scope||_,Z=(ae,ie,Re)=>{const Je=B[ae+"-top"+ie];if(!Je)return;const tt=B[ae+"-right"+ie];if(!tt)return;const kt=B[ae+"-bottom"+ie];if(!kt)return;const qt=B[ae+"-left"+ie];if(!qt)return;const fn=[Je,tt,kt,qt];let Dn=fn.length-1;for(;Dn--&&fn[Dn]===fn[Dn+1];);Dn>-1&&Re||(B[ae+ie]=Dn===-1?fn[0]:fn.join(" "),delete B[ae+"-top"+ie],delete B[ae+"-right"+ie],delete B[ae+"-bottom"+ie],delete B[ae+"-left"+ie])},U=ae=>{const ie=B[ae];if(!ie)return;const Re=ie.split(" ");let Je=Re.length;for(;Je--;)if(Re[Je]!==Re[0])return!1;return B[ae]=Re[0],!0},K=(ae,ie,Re,Je)=>{!U(ie)||!U(Re)||!U(Je)||(B[ae]=B[ie]+" "+B[Re]+" "+B[Je],delete B[ie],delete B[Re],delete B[Je])},J=ae=>(H=!0,u[ae]),de=(ae,ie)=>(H&&(ae=ae.replace(/\uFEFF[0-9]/g,Re=>u[Re])),ie||(ae=ae.replace(/\\([\'\";:])/g,"$1")),ae),he=ae=>String.fromCharCode(parseInt(ae.slice(1),16)),De=ae=>ae.replace(/\\[0-9a-f]+/gi,he),be=(ae,ie,Re,Je,tt,kt)=>{if(tt=tt||kt,tt)return tt=de(tt),"'"+tt.replace(/\'/g,"\\'")+"'";if(ie=de(ie||Re||Je||""),!e.allow_script_urls){const qt=ie.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(qt)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(qt))return""}return V&&(ie=V.call(I,ie,"style")),"url('"+ie.replace(/\'/g,"\\'")+"')"};if(M){M=M.replace(/[\u0000-\u001F]/g,""),M=M.replace(/\\[\"\';:\uFEFF]/g,J).replace(/\"[^\"]+\"|\'[^\']+\'/g,ie=>ie.replace(/[;:]/g,J));let ae;for(;ae=r.exec(M);){r.lastIndex=ae.index+ae[0].length;let ie=ae[1].replace(a,"").toLowerCase(),Re=ae[2].replace(a,"");if(ie&&Re){if(ie=De(ie),Re=De(Re),ie.indexOf(y)!==-1||ie.indexOf('"')!==-1||!e.allow_script_urls&&(ie==="behavior"||/expression\s*\(|\/\*|\*\//.test(Re)))continue;ie==="font-weight"&&Re==="700"?Re="bold":(ie==="color"||ie==="background-color")&&(Re=Re.toLowerCase()),Re=Re.replace(o,be),B[ie]=H?de(Re,!0):Re}}Z("border","",!0),Z("border","-width"),Z("border","-color"),Z("border","-style"),Z("padding",""),Z("margin",""),K("border","border-width","border-style","border-color"),B.border==="medium none"&&delete B.border,B["border-image"]==="none"&&delete B["border-image"]}return B},serialize:(M,B)=>{let H="";const V=(Z,U)=>{const K=U[Z];if(K)for(let J=0,de=K.length;J<de;J++){const he=K[J],De=M[he];De&&(H+=(H.length>0?" ":"")+he+": "+De+";")}},I=(Z,U)=>{if(!p||!U)return!0;let K=p["*"];return K&&K[Z]?!1:(K=p[U],!(K&&K[Z]))};return B&&f?(V("*",f),V(B,f)):En(M,(Z,U)=>{Z&&I(U,B)&&(H+=(H.length>0?" ":"")+U+": "+Z+";")}),H}};return _},Zu={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},o0=e=>e instanceof Event||q(e.initEvent),Zr=e=>e.isDefaultPrevented===Ae||e.isDefaultPrevented===pn,bo=e=>en(e.preventDefault)||o0(e),ka=(e,n)=>{const o=n!=null?n:{};for(const r in e)Pt(Zu,r)||(o[r]=e[r]);return Se(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},s0=(e,n,o,r)=>{var a;const u=ka(n,r);return u.type=e,en(u.target)&&(u.target=(a=u.srcElement)!==null&&a!==void 0?a:o),bo(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Ae,q(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Ae,q(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Ae,u.stopPropagation()},Zr(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?Ae:pn,u.isPropagationStopped=u.cancelBubble===!0?Ae:pn,u.isImmediatePropagationStopped=pn)),u},Ui="mce-data-",hk=/^(?:mouse|contextmenu)|click/,Wi=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},oi=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},_y=e=>Se(e)&&hk.test(e.type),um=(e,n)=>{const o=s0(e.type,e,document,n);if(_y(e)&&dr(e.pageX)&&!dr(e.clientX)){const r=o.target.ownerDocument||document,a=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(a&&a.scrollLeft||u&&u.scrollLeft||0)-(a&&a.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(a&&a.scrollTop||u&&u.scrollTop||0)-(a&&a.clientTop||u&&u.clientTop||0)}return o},pk=(e,n,o)=>{const r=e.document,a={type:"ready"};if(o.domLoaded){n(a);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{oi(e,"DOMContentLoaded",f),oi(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(a)),e=null};u()?f():Wi(e,"DOMContentLoaded",f),o.domLoaded||Wi(e,"load",f)};class Uu{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=Ui+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,a){const u=this;let f;const p=window,y=B=>{u.executeHandlers(um(B||p.event),x)};if(!n||ke(n)||Ca(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),a=a||n;const _=o.split(" ");let M=_.length;for(;M--;){let B=_[M],H=y,V=!1,I=!1;if(B==="DOMContentLoaded"&&(B="ready"),u.domLoaded&&B==="ready"&&n.readyState==="complete"){r.call(a,um({type:B}));continue}!u.hasFocusIn&&(B==="focusin"||B==="focusout")&&(V=!0,I=B==="focusin"?"focus":"blur",H=Z=>{const U=um(Z||p.event);U.type=U.type==="focus"?"focusin":"focusout",u.executeHandlers(U,x)}),f=u.events[x][B],f?B==="ready"&&u.domLoaded?r(um({type:B})):f.push({func:r,scope:a}):(u.events[x][B]=f=[{func:r,scope:a}],f.fakeName=I,f.capture=V,f.nativeHandler=H,B==="ready"?pk(n,H,u):Wi(n,I||B,H,V))}return n=f=null,r}unbind(n,o,r){if(!n||ke(n)||Ca(n))return this;const a=n[this.expando];if(a){let u=this.events[a];if(o){const f=o.split(" ");let p=f.length;for(;p--;){const y=f[p],x=u[y];if(x){if(r){let _=x.length;for(;_--;)if(x[_].func===r){const M=x.nativeHandler,B=x.fakeName,H=x.capture,V=x.slice(0,_).concat(x.slice(_+1));V.nativeHandler=M,V.fakeName=B,V.capture=H,u[y]=V}}(!r||x.length===0)&&(delete u[y],oi(n,x.fakeName||y,x.nativeHandler,x.capture))}}}else En(u,(f,p)=>{oi(n,f.fakeName||p,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Pt(u,f))return this;delete this.events[a];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||ke(n)||Ca(n))return this;const a=um({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(a,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!a.isPropagationStopped());return this}clean(n){if(!n||ke(n)||Ca(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],a=r&&r[n.type];if(a)for(let u=0,f=a.length;u<f;u++){const p=a[u];if(p&&p.func.call(p.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}Uu.Event=new Uu;const si=we.each,bk=we.grep,dm="data-mce-style",Oy=we.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Wu=(e,n,o)=>{en(o)||o===""?ls(e,n):Mo(e,n,o)},Ke=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),mm=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,a=e.previousSibling;a;a=a.previousSibling){const u=a.nodeType;n&&ke(a)&&(u===r||!a.data.length)||(o++,r=u)}return o},r0=(e,n)=>{const o=is(n,"style"),r=e.serialize(e.parse(o),so(n));Wu(n,dm,r)},c0=(e,n)=>kc(e)?Pt(Oy,n)?e+"":e+"px":e,cg=(e,n,o)=>{const r=Ke(n);en(o)||o===""?Xa(e,r):ly(e,r,c0(o,r))},kp=(e,n,o)=>{const r=n.keep_values,a={set:(f,p,y)=>{const x=G.fromDom(f);q(n.url_converter)&&Se(p)&&(p=n.url_converter.call(n.url_converter_scope||o(),String(p),y,f));const _="data-mce-"+y;Wu(x,_,p),Wu(x,y,p)},get:(f,p)=>{const y=G.fromDom(f);return is(y,"data-mce-"+p)||is(y,p)}},u={style:{set:(f,p)=>{const y=G.fromDom(f);r&&Wu(y,dm,p),ls(y,"style"),X(p)&&Nb(y,e.parse(p))},get:f=>{const p=G.fromDom(f),y=is(p,dm)||is(p,"style");return e.serialize(e.parse(y),so(p))}}};return r&&(u.href=u.src=a),u},yn=(e,n={})=>{const o={},r=window,a={};let u=0;const f=!0,p=!0,y=$u.forElement(G.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),x=[],_=n.schema?n.schema:Rc({}),M=lm({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),B=n.ownEvents?new Uu:Uu.Event,H=_.getBlockElements(),V=ne=>X(ne)?Pt(H,ne):Ue(ne)&&Pt(H,ne.nodeName),I=ne=>ne&&e&&X(ne)?e.getElementById(ne):ne,Z=ne=>{const re=I(ne);return Se(re)?G.fromDom(re):null},U=(ne,re,Ee="")=>{let xe;const et=Z(ne);if(Se(et)&&Nn(et)){const Kt=Hh[re];Kt&&Kt.get?xe=Kt.get(et.dom,re):xe=is(et,re)}return Se(xe)?xe:Ee},K=ne=>{const re=I(ne);return en(re)?[]:re.attributes},J=(ne,re,Ee)=>{vt(ne,xe=>{if(Ue(xe)){const et=G.fromDom(xe),Kt=Ee===""?null:Ee,jn=is(et,re),Gn=Hh[re];Gn&&Gn.set?Gn.set(et.dom,Kt,re):Wu(et,re,Kt),jn!==Kt&&n.onSetAttrib&&n.onSetAttrib({attrElm:et.dom,attrName:re,attrValue:Kt})}})},de=(ne,re)=>ne.cloneNode(re),he=()=>n.root_element||e.body,De=ne=>{const re=gy(ne);return{x:re.x,y:re.y,w:re.width,h:re.height}},be=(ne,re)=>lp(e.body,I(ne),re),ae=(ne,re,Ee)=>{vt(ne,xe=>{const et=G.fromDom(xe);cg(et,re,Ee),n.update_styles&&r0(M,et)})},ie=(ne,re)=>{vt(ne,Ee=>{const xe=G.fromDom(Ee);En(re,(et,Kt)=>{cg(xe,Kt,et)}),n.update_styles&&r0(M,xe)})},Re=(ne,re,Ee)=>{const xe=I(ne);if(!(en(xe)||!Ue(xe)))return Ee?Pi(G.fromDom(xe),Ke(re)):(re=re.replace(/-(\D)/g,(et,Kt)=>Kt.toUpperCase()),re==="float"&&(re="cssFloat"),xe.style?xe.style[re]:void 0)},Je=ne=>{const re=I(ne);if(!re)return{w:0,h:0};let Ee=Re(re,"width"),xe=Re(re,"height");return(!Ee||Ee.indexOf("px")===-1)&&(Ee="0"),(!xe||xe.indexOf("px")===-1)&&(xe="0"),{w:parseInt(Ee,10)||re.offsetWidth||re.clientWidth,h:parseInt(xe,10)||re.offsetHeight||re.clientHeight}},tt=ne=>{const re=I(ne),Ee=be(re),xe=Je(re);return{x:Ee.x,y:Ee.y,w:xe.w,h:xe.h}},kt=(ne,re)=>{if(!ne)return!1;const Ee=xn(ne)?ne:[ne];return Yt(Ee,xe=>Jc(G.fromDom(xe),re))},qt=(ne,re,Ee,xe)=>{const et=[];let Kt=I(ne);xe=xe===void 0;const jn=Ee||(he().nodeName!=="BODY"?he().parentNode:null);if(X(re))if(re==="*")re=Ue;else{const Gn=re;re=wc=>kt(wc,Gn)}for(;Kt&&!(Kt===jn||en(Kt.nodeType)||zf(Kt)||zb(Kt));){if(!re||re(Kt))if(xe)et.push(Kt);else return[Kt];Kt=Kt.parentNode}return xe?et:null},fn=(ne,re,Ee)=>{const xe=qt(ne,re,Ee,!1);return xe&&xe.length>0?xe[0]:null},Dn=(ne,re,Ee)=>{let xe=re;if(ne){X(re)&&(xe=et=>kt(et,re));for(let et=ne[Ee];et;et=et[Ee])if(q(xe)&&xe(et))return et}return null},Ms=(ne,re)=>Dn(ne,re,"nextSibling"),_e=(ne,re)=>Dn(ne,re,"previousSibling"),At=ne=>q(ne.querySelectorAll),$t=(ne,re)=>{var Ee,xe;const et=(xe=(Ee=I(re))!==null&&Ee!==void 0?Ee:n.root_element)!==null&&xe!==void 0?xe:e;return At(et)?Js(et.querySelectorAll(ne)):[]},vt=function(ne,re,Ee){const xe=Ee!=null?Ee:this;if(xn(ne)){const et=[];return si(ne,(Kt,jn)=>{const Gn=I(Kt);Gn&&et.push(re.call(xe,Gn,jn))}),et}else{const et=I(ne);return et?re.call(xe,et):!1}},Do=(ne,re)=>{vt(ne,Ee=>{En(re,(xe,et)=>{J(Ee,et,xe)})})},je=(ne,re)=>{vt(ne,Ee=>{const xe=G.fromDom(Ee);rp(xe,re)})},yt=(ne,re,Ee,xe,et)=>vt(ne,Kt=>{const jn=X(re)?e.createElement(re):re;return Se(Ee)&&Do(jn,Ee),xe&&(!X(xe)&&xe.nodeType?jn.appendChild(xe):X(xe)&&je(jn,xe)),et?jn:Kt.appendChild(jn)}),ut=(ne,re,Ee)=>yt(e.createElement(ne),ne,re,Ee,!0),Pe=uc.decode,Nt=uc.encodeAllRaw,_t=(ne,re,Ee="")=>{let xe="<"+ne;for(const et in re)Ir(re,et)&&(xe+=" "+et+'="'+Nt(re[et])+'"');return Ao(Ee)&&Pt(_.getVoidElements(),ne)?xe+" />":xe+">"+Ee+"</"+ne+">"},pt=ne=>{const re=e.createElement("div"),Ee=e.createDocumentFragment();Ee.appendChild(re),ne&&(re.innerHTML=ne);let xe;for(;xe=re.firstChild;)Ee.appendChild(xe);return Ee.removeChild(re),Ee},wt=(ne,re)=>vt(ne,Ee=>{const xe=G.fromDom(Ee);return re&&ve(ws(xe),et=>{Ro(et)&&et.dom.length===0?un(et):qn(xe,et)}),un(xe),xe.dom}),Sn=ne=>vt(ne,re=>{const Ee=re.attributes;for(let xe=Ee.length-1;xe>=0;xe--)re.removeAttributeNode(Ee.item(xe))}),An=ne=>M.parse(ne),rs=(ne,re)=>M.serialize(ne,re),to=ne=>{if(pf!==yn.DOM&&e===document){if(o[ne])return;o[ne]=!0}let re=e.getElementById("mceDefaultStyles");if(!re){re=e.createElement("style"),re.id="mceDefaultStyles",re.type="text/css";const Ee=e.head;Ee.firstChild?Ee.insertBefore(re,Ee.firstChild):Ee.appendChild(re)}re.styleSheet?re.styleSheet.cssText+=ne:re.appendChild(e.createTextNode(ne))},Xn=ne=>{ne||(ne=""),ve(ne.split(","),re=>{a[re]=!0,y.load(re).catch(dt)})},Go=(ne,re,Ee)=>{vt(ne,xe=>{if(Ue(xe)){const et=G.fromDom(xe),Kt=re.split(" ");ve(Kt,jn=>{Se(Ee)?(Ee?Gd:$f)(et,jn):Ob(et,jn)})}})},qs=(ne,re)=>{Go(ne,re,!0)},cs=(ne,re)=>{Go(ne,re,!1)},bl=(ne,re)=>{const Ee=Z(ne),xe=re.split(" ");return Se(Ee)&&vu(xe,et=>Qh(Ee,et))},Va=ne=>{vt(ne,re=>Xa(G.fromDom(re),"display"))},vl=ne=>{vt(ne,re=>ly(G.fromDom(re),"display","none"))},yl=ne=>{const re=Z(ne);return Se(re)&&Ol(Kd(re,"display"),"none")},Cl=ne=>(ne||"mce_")+u++,wl=ne=>{const re=Z(ne);return Se(re)?Ue(re.dom)?re.dom.outerHTML:Nl(re):""},io=(ne,re)=>{vt(ne,Ee=>{Ue(Ee)&&(Ee.outerHTML=re)})},Za=(ne,re)=>{const Ee=I(re);return vt(ne,xe=>{const et=Ee==null?void 0:Ee.parentNode,Kt=Ee==null?void 0:Ee.nextSibling;return et&&(Kt?et.insertBefore(xe,Kt):et.appendChild(xe)),xe})},xl=(ne,re,Ee)=>vt(re,xe=>{var et;const Kt=xn(re)?ne.cloneNode(!0):ne;return Ee&&si(bk(xe.childNodes),jn=>{Kt.appendChild(jn)}),(et=xe.parentNode)===null||et===void 0||et.replaceChild(Kt,xe),xe}),Lh=(ne,re)=>{if(ne.nodeName!==re.toUpperCase()){const Ee=ut(re);return si(K(ne),xe=>{J(Ee,xe.nodeName,U(ne,xe.nodeName))}),xl(Ee,ne,!0),Ee}else return ne},Si=(ne,re)=>{let Ee=ne;for(;Ee;){let xe=re;for(;xe&&Ee!==xe;)xe=xe.parentNode;if(Ee===xe)break;Ee=Ee.parentNode}return!Ee&&ne.ownerDocument?ne.ownerDocument.documentElement:Ee},Wc=ne=>{if(Ue(ne)){const re=ne.nodeName.toLowerCase()==="a"&&!U(ne,"href")&&U(ne,"id");if(U(ne,"name")||U(ne,"data-mce-bookmark")||re)return!0}return!1},ur=(ne,re)=>{let Ee=0;if(Wc(ne))return!1;const xe=ne.firstChild;if(xe){const et=new jt(xe,ne),Kt=_?_.getWhitespaceElements():{},jn=re||(_?_.getNonEmptyElements():null);let Gn=xe;do{if(Ue(Gn)){const wc=Gn.getAttribute("data-mce-bogus");if(wc){Gn=et.next(wc==="all");continue}const fb=Gn.nodeName.toLowerCase();if(jn&&jn[fb]){if(fb==="br"){Ee++,Gn=et.next();continue}return!1}if(Wc(Gn))return!1}if(Ca(Gn)||ke(Gn)&&!Hu(Gn.data)||ke(Gn)&&Gn.parentNode&&Kt[Gn.parentNode.nodeName]&&Hu(Gn.data))return!1;Gn=et.next()}while(Gn)}return Ee<=1},da=()=>e.createRange(),ma=(ne,re,Ee)=>{let xe=da(),et,Kt;if(ne&&re&&ne.parentNode&&re.parentNode){const jn=ne.parentNode;return xe.setStart(jn,mm(ne)),xe.setEnd(re.parentNode,mm(re)),et=xe.extractContents(),xe=da(),xe.setStart(re.parentNode,mm(re)+1),xe.setEnd(jn,mm(ne)+1),Kt=xe.extractContents(),jn.insertBefore(eg(pf,et),ne),Ee?jn.insertBefore(Ee,ne):jn.insertBefore(re,ne),jn.insertBefore(eg(pf,Kt),ne),wt(ne),Ee||re}else return},hf=(ne,re,Ee,xe)=>{if(xn(ne)){let et=ne.length;const Kt=[];for(;et--;)Kt[et]=hf(ne[et],re,Ee,xe);return Kt}else return n.collect&&(ne===e||ne===r)&&x.push([ne,re,Ee,xe]),B.bind(ne,re,Ee,xe||pf)},L2=(ne,re,Ee)=>{if(xn(ne)){let xe=ne.length;const et=[];for(;xe--;)et[xe]=L2(ne[xe],re,Ee);return et}else{if(x.length>0&&(ne===e||ne===r)){let xe=x.length;for(;xe--;){const[et,Kt,jn]=x[xe];ne===et&&(!re||re===Kt)&&(!Ee||Ee===jn)&&B.unbind(et,Kt,jn)}}return B.unbind(ne,re,Ee)}},Vd=(ne,re,Ee)=>B.dispatch(ne,re,Ee),hu=(ne,re,Ee)=>B.dispatch(ne,re,Ee),H2=ne=>{if(ne&&Ue(ne)){const re=ne.getAttribute("data-mce-contenteditable");return re&&re!=="inherit"?re:ne.contentEditable!=="inherit"?ne.contentEditable:null}else return null},pf={doc:e,settings:n,win:r,files:a,stdMode:f,boxModel:p,styleSheetLoader:y,boundEvents:x,styles:M,schema:_,events:B,isBlock:V,root:null,clone:de,getRoot:he,getViewPort:De,getRect:tt,getSize:Je,getParent:fn,getParents:qt,get:I,getNext:Ms,getPrev:_e,select:$t,is:kt,add:yt,create:ut,createHTML:_t,createFragment:pt,remove:wt,setStyle:ae,getStyle:Re,setStyles:ie,removeAllAttribs:Sn,setAttrib:J,setAttribs:Do,getAttrib:U,getPos:be,parseStyle:An,serializeStyle:rs,addStyle:to,loadCSS:Xn,addClass:qs,removeClass:cs,hasClass:bl,toggleClass:Go,show:Va,hide:vl,isHidden:yl,uniqueId:Cl,setHTML:je,getOuterHTML:wl,setOuterHTML:io,decode:Pe,encode:Nt,insertAfter:Za,replace:xl,rename:Lh,findCommonAncestor:Si,run:vt,getAttribs:K,isEmpty:ur,createRng:da,nodeIndex:mm,split:ma,bind:hf,unbind:L2,fire:hu,dispatch:Vd,getContentEditable:H2,getContentEditableParent:ne=>{const re=he();let Ee=null;for(let xe=ne;xe&&xe!==re&&(Ee=H2(xe),Ee===null);xe=xe.parentNode);return Ee},destroy:()=>{if(x.length>0){let ne=x.length;for(;ne--;){const[re,Ee,xe]=x[ne];B.unbind(re,Ee,xe)}}En(a,(ne,re)=>{y.unload(re),delete a[re]})},isChildOf:(ne,re)=>ne===re||re.contains(ne),dumpRng:ne=>"startContainer: "+ne.startContainer.nodeName+", startOffset: "+ne.startOffset+", endContainer: "+ne.endContainer.nodeName+", endOffset: "+ne.endOffset},Hh=kp(M,n,Oe(pf));return pf};yn.DOM=yn(document),yn.nodeIndex=mm;const ag=yn.DOM,ju=0,a0=1,Gu=2,Dy=3;class Ea{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const a=ag;let u;const f=()=>{a.remove(x),u&&(u.onerror=u.onload=u=null)},p=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},x=a.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=we._addCacheSuffix(n),this.settings.referrerPolicy&&a.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=p,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===Gu}markDone(n){this.states[n]=Gu}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=ju),new Promise((a,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:a,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,x)=>{Bn(o.scriptLoadedCallbacks,x).each(_=>{ve(_,M=>M[y](x))}),delete o.scriptLoadedCallbacks[x]},a=y=>{const x=mt(y,_=>_.status==="rejected");return x.length>0?Promise.reject(ga(x,({reason:_})=>xn(_)?_:[_])):Promise.resolve()},u=y=>Promise.allSettled(Jt(y,x=>o.states[x]===Gu?(r("resolve",x),Promise.resolve()):o.states[x]===Dy?(r("reject",x),Promise.reject(x)):(o.states[x]=a0,o.loadScript(x).then(()=>{o.states[x]=Gu,r("resolve",x);const _=o.queue;return _.length>0?(o.queue=[],u(_).then(a)):Promise.resolve()},()=>(o.states[x]=Dy,r("reject",x),Promise.reject(x)))))),f=y=>(o.loading=!0,u(y).then(x=>{o.loading=!1;const _=o.queueLoadedCallbacks.shift();return R.from(_).each(mr),a(x)})),p=mo(n);return o.loading?new Promise((y,x)=>{o.queueLoadedCallbacks.push(()=>f(p).then(y,x))}):f(p)}}Ea.ScriptLoader=new Ea;const _o=e=>{let n=e;return{get:()=>n,set:a=>{n=a}}},Ep=e=>hn(e)&&Pt(e,"raw"),Ry=e=>xn(e)&&e.length>1,ji={},i0=_o("en"),vk=()=>Bn(ji,i0.get()),ta={getData:()=>at(ji,e=>({...e})),setCode:e=>{e&&i0.set(e)},getCode:()=>i0.get(),add:(e,n)=>{let o=ji[e];o||(ji[e]=o={}),En(n,(r,a)=>{o[a.toLowerCase()]=r})},translate:e=>{const n=vk().getOr({}),o=f=>q(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,a=f=>{const p=o(f);return Bn(n,p.toLowerCase()).map(o).getOr(p)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(Ep(e))return o(e.raw);if(Ry(e)){const f=e.slice(1),p=a(e[0]).replace(/\{([0-9]+)\}/g,(y,x)=>Pt(f,x)?o(f[x]):y);return u(p)}return u(a(e))},isRtl:()=>vk().bind(e=>Bn(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Pt(ji,e)},eo=()=>{const e=[],n={},o={},r=[],a=(I,Z)=>{const U=mt(r,K=>K.name===I&&K.state===Z);ve(U,K=>K.resolve())},u=I=>Pt(n,I),f=I=>Pt(o,I),p=I=>{if(o[I])return o[I].instance},y=(I,Z)=>{const U=ta.getCode(),K=","+(Z||"")+",";!U||Z&&K.indexOf(","+U+",")===-1||Ea.ScriptLoader.add(n[I]+"/langs/"+U+".js")},x=(I,Z)=>{eo.languageLoad!==!1&&(u(I)?y(I,Z):V(I,"loaded").then(()=>y(I,Z)))},_=(I,Z)=>(e.push(Z),o[I]={instance:Z},a(I,"added"),Z),M=I=>{delete n[I],delete o[I]},B=(I,Z)=>X(Z)?X(I)?{prefix:"",resource:Z,suffix:""}:{prefix:I.prefix,resource:Z,suffix:I.suffix}:Z,H=(I,Z)=>{if(n[I])return Promise.resolve();let U=X(Z)?Z:Z.prefix+Z.resource+Z.suffix;U.indexOf("/")!==0&&U.indexOf("://")===-1&&(U=eo.baseURL+"/"+U),n[I]=U.substring(0,U.lastIndexOf("/"));const K=()=>(a(I,"loaded"),Promise.resolve());return o[I]?K():Ea.ScriptLoader.add(U).then(K)},V=(I,Z="added")=>Z==="added"&&f(I)||Z==="loaded"&&u(I)?Promise.resolve():new Promise(U=>{r.push({name:I,state:Z,resolve:U})});return{items:e,urls:n,lookup:o,get:p,requireLangPack:x,add:_,remove:M,createUrl:B,load:H,waitFor:V}};eo.languageLoad=!0,eo.baseURL="",eo.PluginManager=eo(),eo.ThemeManager=eo(),eo.ModelManager=eo();const Ck=e=>{const n=_o(R.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(R.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:p=>{o(),n.set(R.some(p))}}},wk=e=>{const n=_o(R.none()),o=()=>n.get().each(p=>clearInterval(p));return{clear:()=>{o(),n.set(R.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:p=>{o(),n.set(R.some(setInterval(p,e)))}}},Gi=()=>{const e=Ck(dt);return{...e,on:o=>e.get().each(o)}},_p=(e,n)=>{let o=null;return{cancel:()=>{te(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{te(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},l0=(e,n)=>{let o=null;const r=()=>{te(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},qi=Oe("mce-annotation"),Ki=Oe("data-mce-annotation"),Xi=Oe("data-mce-annotation-uid"),qu=Oe("data-mce-annotation-active"),Ku=Oe("data-mce-annotation-classes"),No=Oe("data-mce-annotation-attrs"),By=e=>n=>vn(n,e),Op=(e,n)=>{const o=e.selection.getRng(),r=G.fromDom(o.startContainer),a=G.fromDom(e.getBody()),u=n.fold(()=>"."+qi(),y=>`[${Ki()}="${y}"]`),f=Ff(r,o.startOffset).getOr(r);return Mu(f,u,By(a)).bind(y=>va(y,`${Xi()}`).bind(x=>va(y,`${Ki()}`).map(_=>{const M=Mr(e,x);return{uid:x,name:_,elements:M}})))},xk=e=>Nn(e)&&Qh(e,qi()),My=(e,n)=>Rf(e,"data-mce-bogus")||pr(e,'[data-mce-bogus="all"]',By(n)),Mr=(e,n)=>{const o=G.fromDom(e.getBody()),r=ee(o,`[${Xi()}="${n}"]`);return mt(r,a=>!My(a,o))},ri=(e,n)=>{const o=G.fromDom(e.getBody()),r=ee(o,`[${Ki()}="${n}"]`),a={};return ve(r,u=>{if(!My(u,o)){const f=is(u,Xi()),p=Bn(a,f).getOr([]);a[f]=p.concat([u])}}),a},Sk=(e,n)=>{const o=_o({}),r=()=>({listeners:[],previous:Gi()}),a=(M,B)=>{u(M,H=>(B(H),H))},u=(M,B)=>{const H=o.get(),V=Bn(H,M).getOrThunk(r),I=B(V);H[M]=I,o.set(H)},f=(M,B,H)=>{a(M,V=>{ve(V.listeners,I=>I(!0,M,{uid:B,nodes:Jt(H,Z=>Z.dom)}))})},p=M=>{a(M,B=>{ve(B.listeners,H=>H(!1,M))})},y=(M,B)=>{ve(Mr(e,M),H=>{B?Mo(H,qu(),"true"):ls(H,qu())})},x=l0(()=>{const M=Xo(n.getNames());ve(M,B=>{u(B,H=>{const V=H.previous.get();return Op(e,R.some(B)).fold(()=>{V.each(I=>{p(B),H.previous.clear(),y(I,!1)})},({uid:I,name:Z,elements:U})=>{Ol(V,I)||(V.each(K=>y(K,!1)),f(Z,I,U),H.previous.set(I),y(I,!0))}),{previous:H.previous,listeners:H.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(M,B)=>{u(M,H=>({previous:H.previous,listeners:H.listeners.concat([B])}))}}},$y=(e,n)=>{const o=Ki(),r=u=>R.from(u.attr(o)).bind(n.lookup),a=u=>{var f,p;u.attr(Xi(),null),u.attr(Ki(),null),u.attr(qu(),null);const y=R.from(u.attr(No())).map(B=>B.split(",")).getOr([]),x=R.from(u.attr(Ku())).map(B=>B.split(",")).getOr([]);ve(y,B=>u.attr(B,null));const _=(p=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&p!==void 0?p:[],M=ko(_,[qi()].concat(x));u.attr("class",M.length>0?M.join(" "):null),u.attr(Ku(),null),u.attr(No(),null)};e.serializer.addTempAttr(qu()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(p=>{p.persistent===!1&&(f.name==="span"?f.unwrap():a(f))})})},kk=()=>{const e={};return{register:(a,u)=>{e[a]={name:a,settings:u}},lookup:a=>Bn(e,a).map(u=>u.settings),getNames:()=>gn(e)}};let Ny=0;const Dp=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return Ny++,e+"_"+r+Ny+String(o)},Py=(e,n)=>{ve(n,o=>{Gd(e,o)})},Ek=(e,n)=>{ve(n,o=>{$f(e,o)})},fm=(e,n)=>G.fromDom(e.dom.cloneNode(n)),Xu=e=>fm(e,!1),u0=e=>fm(e,!0),Fy=(e,n)=>{const o=G.fromTag(n),r=Mf(e);return Dr(o,r),o},ds=(e,n)=>{const o=Fy(e,n);sc(e,o);const r=ws(e);return St(o,r),un(e),o},lg=(e,n,o=pn)=>{const r=new jt(e,n),a=u=>{let f;do f=r[u]();while(f&&!ke(f)&&!o(f));return R.from(f).filter(ke)};return{current:()=>R.from(r.current()).filter(ke),next:()=>a("next"),prev:()=>a("prev"),prev2:()=>a("prev2")}},Vn=(e,n)=>{const o=n||(f=>e.isBlock(f)||go(f)||Qn(f)),r=(f,p,y,x)=>{if(ke(f)){const _=x(f,p,f.data);if(_!==-1)return R.some({container:f,offset:_})}return y().bind(_=>r(_.container,_.offset,y,x))};return{backwards:(f,p,y,x)=>{const _=lg(f,x!=null?x:e.getRoot(),o);return r(f,p,()=>_.prev().map(M=>({container:M,offset:M.length})),y).getOrNull()},forwards:(f,p,y,x)=>{const _=lg(f,x!=null?x:e.getRoot(),o);return r(f,p,()=>_.next().map(M=>({container:M,offset:0})),y).getOrNull()}}},Ts=Math.round,mc=e=>e?{left:Ts(e.left),top:Ts(e.top),bottom:Ts(e.bottom),right:Ts(e.right),width:Ts(e.width),height:Ts(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},fc=(e,n)=>(e=mc(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),Ak=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,Iy=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,ug=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:Iy(n.top-e.bottom,e,n)},or=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:Iy(n.bottom-e.top,e,n),Yu=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,Tk=e=>oo(e,(n,o)=>n.fold(()=>R.some(o),r=>{const a=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),p=Math.max(o.bottom,r.bottom);return R.some({top:u,right:f,bottom:p,left:a,width:f-a,height:p-u})}),R.none()),d0=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),a=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-a)*(o-a))},m0=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),Ly=(e,n,o)=>Math.min(Math.max(e,n),o),dg=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},Yi=(e,n)=>{if(Ue(e)&&e.hasChildNodes()){const o=e.childNodes,r=Ly(n,0,o.length-1);return o[r]}else return e},Hy=(e,n)=>{if(!(n<0&&Ue(e)&&e.hasChildNodes()))return Yi(e,n)},zy=new RegExp("[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962-\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2-\u09E3\u0A01-\u0A02\u0A3C\u0A41-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D\u0A51\u0A70-\u0A71\u0A75\u0A81-\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7-\u0AC8\u0ACD\u0AE2-\u0AE3\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B57\u0B62-\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56\u0C62-\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC-\u0CCD\u0CD5-\u0CD6\u0CE2-\u0CE3\u0D01\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62-\u0D63\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86-\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039-\u103A\u103D-\u103E\u1058-\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B4-\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193B\u1A17-\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABD\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80-\u1B81\u1BA2-\u1BA5\u1BA8-\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8-\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8-\u1CF9\u1DC0-\u1DF5\u1DFC-\u1DFF\u200C-\u200D\u20D0-\u20DC\u20DD-\u20E0\u20E1\u20E2-\u20E4\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u302E-\u302F\u3099-\u309A\uA66F\uA670-\uA672\uA674-\uA67D\uA69E-\uA69F\uA6F0-\uA6F1\uA802\uA806\uA80B\uA825-\uA826\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9E5\uAA29-\uAA2E\uAA31-\uAA32\uAA35-\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7-\uAAB8\uAABE-\uAABF\uAAC1\uAAEC-\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E-\uFF9F]"),Vy=e=>X(e)&&e.charCodeAt(0)>=768&&zy.test(e),Zy=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},_k=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},Uy=Ue,Ok=Br,Wy=rc("display","block table"),jy=rc("float","left right"),mg=_k(Uy,Ok,Zh(jy)),Dk=Zh(rc("white-space","pre pre-line pre-wrap")),gm=ke,f0=go,Gy=yn.nodeIndex,vo=Hy,hm=e=>e?e.createRange():yn.DOM.createRng(),Rp=e=>X(e)&&/[\r\n\t ]/.test(e),qy=e=>!!e.setStart&&!!e.setEnd,pm=e=>{const n=e.startContainer,o=e.startOffset;if(Rp(e.toString())&&Dk(n.parentNode)&&ke(n)){const r=n.data;if(Rp(r[o-1])||Rp(r[o+1]))return!0}return!1},br=e=>{const n=e.ownerDocument,o=hm(n),r=n.createTextNode(Vo),a=e.parentNode;a.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=mc(o.getBoundingClientRect());return a.removeChild(r),u},Bc=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,a=e.endOffset;if(n===o&&ke(o)&&r===0&&a===1){const u=e.cloneRange();return u.setEndAfter(o),Ur(u)}else return null},Ky=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Ur=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=mc(r[0]):o=mc(e.getBoundingClientRect()),!qy(e)&&f0(e)&&Ky(o)?br(e):Ky(o)&&qy(e)&&(n=Bc(e))!==null&&n!==void 0?n:o},Ju=(e,n)=>{const o=fc(e,n);return o.width=1,o.right=o.left+1,o},bm=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&Ak(f,n[n.length-1])||n.push(f))},r=(f,p)=>{const y=hm(f.ownerDocument);if(p<f.data.length){if(Vy(f.data[p]))return;if(Vy(f.data[p-1])&&(y.setStart(f,p),y.setEnd(f,p+1),!pm(y))){o(Ju(Ur(y),!1));return}}p>0&&(y.setStart(f,p-1),y.setEnd(f,p),pm(y)||o(Ju(Ur(y),!1))),p<f.data.length&&(y.setStart(f,p),y.setEnd(f,p+1),pm(y)||o(Ju(Ur(y),!0)))},a=e.container(),u=e.offset();if(gm(a))return r(a,u),n;if(Uy(a))if(e.isAtEnd()){const f=vo(a,u);gm(f)&&r(f,f.data.length),mg(f)&&!f0(f)&&o(Ju(Ur(f),!1))}else{const f=vo(a,u);if(gm(f)&&r(f,0),mg(f)&&e.isAtEnd())return o(Ju(Ur(f),!1)),n;const p=vo(e.container(),e.offset()-1);mg(p)&&!f0(p)&&(Wy(p)||Wy(f)||!mg(f))&&o(Ju(Ur(p),!1)),mg(f)&&o(Ju(Ur(f),!0))}return n},le=(e,n,o)=>{const r=()=>(gm(e),n===0),a=()=>gm(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const _=hm(e.ownerDocument);return _.setStart(e,n),_.setEnd(e,n),_},f=()=>(o||(o=bm(le(e,n))),o),p=()=>f().length>0,y=_=>_&&e===_.container()&&n===_.offset(),x=_=>vo(e,_?n-1:n);return{container:Oe(e),offset:Oe(n),toRange:u,getClientRects:f,isVisible:p,isAtStart:r,isAtEnd:a,isEqual:y,getNode:x}};le.fromRangeStart=e=>le(e.startContainer,e.startOffset),le.fromRangeEnd=e=>le(e.endContainer,e.endOffset),le.after=e=>le(e.parentNode,Gy(e)+1),le.before=e=>le(e.parentNode,Gy(e)),le.isAbove=(e,n)=>Fs(Tr(n.getClientRects()),Ua(e.getClientRects()),ug).getOr(!1),le.isBelow=(e,n)=>Fs(Ua(n.getClientRects()),Tr(e.getClientRects()),or).getOr(!1),le.isAtStart=e=>e?e.isAtStart():!1,le.isAtEnd=e=>e?e.isAtEnd():!1,le.isTextPosition=e=>e?ke(e.container()):!1,le.isElementPosition=e=>!le.isTextPosition(e);const fg=(e,n)=>{ke(n)&&n.data.length===0&&e.remove(n)},gg=(e,n,o)=>{n.insertNode(o),fg(e,o.previousSibling),fg(e,o.nextSibling)},Rk=(e,n,o)=>{const r=R.from(o.firstChild),a=R.from(o.lastChild);n.insertNode(o),r.each(u=>fg(e,u.previousSibling)),a.each(u=>fg(e,u.nextSibling))},Uo=(e,n,o)=>{zb(o)?Rk(e,n,o):gg(e,n,o)},ms=ke,vm=ya,Xy=yn.nodeIndex,g0=e=>{const n=e.parentNode;return vm(n)?g0(n):n},hg=e=>e?_r(e.childNodes,(n,o)=>(vm(o)&&o.nodeName!=="BR"?n=n.concat(hg(o)):n.push(o),n),[]):[],Wl=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&ms(o);)n+=o.data.length;return n},h0=e=>n=>e===n,ym=e=>{let n,o;n=hg(g0(e)),o=xf(n,h0(e),e),n=n.slice(0,o+1);const r=_r(n,(a,u,f)=>(ms(u)&&ms(n[f-1])&&a++,a),0);return n=Cu(n,Tc([e.nodeName])),o=xf(n,h0(e),e),o-r},Bp=e=>(ms(e)?"text()":e.nodeName.toLowerCase())+"["+ym(e)+"]",Cm=(e,n,o)=>{const r=[];for(let a=n.parentNode;a&&a!==e&&!(o&&o(a));a=a.parentNode)r.push(a);return r},p0=(e,n)=>{let o=[],r=n.container(),a=n.offset(),u;if(ms(r))u=Wl(r,a);else{const p=r.childNodes;a>=p.length?(u="after",a=p.length-1):u="before",r=p[a]}o.push(Bp(r));let f=Cm(e,r);return f=Cu(f,Zh(ya)),o=o.concat(yu(f,p=>Bp(p))),o.reverse().join("/")+","+u},Yy=(e,n,o)=>{let r=hg(e);return r=Cu(r,(a,u)=>!ms(a)||!ms(r[u-1])),r=Cu(r,Tc([n])),r[o]},Jy=(e,n)=>{let o=e,r=0;for(;ms(o);){const a=o.data.length;if(n>=r&&n<=r+a){e=o,n=n-r;break}if(!ms(o.nextSibling)){e=o,n=a;break}r+=a,o=o.nextSibling}return ms(e)&&n>e.data.length&&(n=e.data.length),le(e,n)},Qy=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),a=o.length>1?o[1]:"before",u=_r(r,(f,p)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(p);return y?(y[1]==="text()"&&(y[1]="#text"),Yy(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!ms(u)&&u.parentNode){let f;return a==="after"?f=Xy(u)+1:f=Xy(u),le(u.parentNode,f)}return Jy(u,parseInt(a,10))},wm=Qn,Bk=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let a=n.previousSibling;a&&ke(a);a=a.previousSibling)r+=e(a.data).length;return r},Mp=(e,n,o,r,a)=>{const u=a?r.startContainer:r.endContainer;let f=a?r.startOffset:r.endOffset;const p=[],y=e.getRoot();if(ke(u))p.push(o?Bk(n,u,f):f);else{let x=0;const _=u.childNodes;f>=_.length&&_.length&&(x=1,f=Math.max(0,_.length-1)),p.push(e.nodeIndex(_[f],o)+x)}for(let x=u;x&&x!==y;x=x.parentNode)p.push(e.nodeIndex(x,o));return p},eC=(e,n,o,r)=>{const a=n.dom,u=Mp(a,e,o,r,!0),f=n.isForward(),p=Jb(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...p};{const y=Mp(a,e,o,r,!1);return{start:u,end:y,forward:f,...p}}},vr=(e,n,o)=>{let r=0;return we.each(e.select(n),a=>{if(a.getAttribute("data-mce-bogus")!=="all"){if(a===o)return!1;r++;return}}),r},tC=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if(Ue(o)&&o.nodeName==="TR"){const a=o.childNodes;o=a[Math.min(n?r:r-1,a.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},nC=e=>(tC(e,!0),tC(e,!1),e),pg=(e,n)=>{if(Ue(e)&&(e=Yi(e,n),wm(e)))return e;if(As(e)){ke(e)&&Lu(e)&&(e=e.parentNode);let o=e.previousSibling;if(wm(o)||(o=e.nextSibling,wm(o)))return o}},Qu=e=>pg(e.startContainer,e.startOffset)||pg(e.endContainer,e.endOffset),ed=(e,n,o)=>{const r=o.getNode(),a=o.getRng();if(r.nodeName==="IMG"||wm(r)){const f=r.nodeName;return{name:f,index:vr(o.dom,f,r)}}const u=Qu(a);if(u){const f=u.tagName;return{name:f,index:vr(o.dom,f,u)}}return eC(e,o,n,a)},Gt=e=>{const n=e.getRng();return{start:p0(e.dom.getRoot(),le.fromRangeStart(n)),end:p0(e.dom.getRoot(),le.fromRangeEnd(n)),forward:e.isForward()}},Wr=e=>({rng:e.getRng(),forward:e.isForward()}),jl=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},$p=(e,n)=>{const o=e.dom;let r=e.getRng();const a=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),p=f.nodeName,y=e.isForward();if(p==="IMG")return{name:p,index:vr(o,p,f)};const x=nC(r.cloneRange());if(!u){x.collapse(!1);const M=jl(o,a+"_end",n);Uo(o,x,M)}r=nC(r),r.collapse(!0);const _=jl(o,a+"_start",n);return Uo(o,r,_),e.moveToBookmark({id:a,keep:!0,forward:y}),{id:a,forward:y}},Mn=(e,n,o=!1)=>n===2?ed(Es,o,e):n===3?Gt(e):n?Wr(e):$p(e,!1),bg=Ce(ed,no,!0),xm=e=>{const n=u=>u(e),o=Oe(e),r=()=>a,a={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Ae,isError:pn,map:u=>Zn.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>R.some(e)};return a},fs=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,a)=>r(e),isValue:pn,isError:Ae,map:n,mapError:r=>Zn.error(r(e)),bind:n,exists:pn,forall:Ae,getOr:no,or:no,getOrThunk:In,orThunk:In,getOrDie:qo(String(e)),each:dt,toOptional:R.none};return o},Zn={value:xm,error:fs,fromOption:(e,n)=>e.fold(()=>fs(n),xm)},ci={generate:e=>{if(!xn(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return ve(e,(r,a)=>{const u=gn(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],p=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!xn(p))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const x=y.length;if(x!==p.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+p.length+" ("+p+"), got "+x);return{fold:(...M)=>{if(M.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+M.length);return M[a].apply(null,y)},match:M=>{const B=gn(M);if(n.length!==B.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+B.join(","));if(!vu(n,V=>$n(B,V)))throw new Error("Not all branches were specified when using match. Specified: "+B.join(", ")+`
Required: `+n.join(", "));return M[f].apply(null,y)},log:M=>{console.log(M,{constructors:n,constructor:f,params:y})}}}}),o}};ci.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Np=e=>{const n=[],o=[];return ve(e,r=>{r.fold(a=>{n.push(a)},a=>{o.push(a)})}),{errors:n,values:o}},v0=e=>e.type==="inline-command"||e.type==="inline-format",y0=e=>e.type==="block-command"||e.type==="block-format",C0=e=>{const n=r=>Zn.error({message:r,pattern:e}),o=(r,a,u)=>{if(e.format!==void 0){let f;if(xn(e.format)){if(!vu(e.format,X))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(X(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return Zn.value(a(f))}else return e.cmd!==void 0?X(e.cmd)?Zn.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!hn(e))return n("Raw pattern is not an object");if(!X(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!X(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,a=e.end;return a.length===0&&(a=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:a,format:u}),(u,f)=>({type:"inline-command",start:r,end:a,cmd:u,value:f}))}else return e.replacement!==void 0?X(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Zn.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,a)=>({type:"block-command",start:e.start,cmd:r,value:a}))},w0=e=>mt(e,y0),x0=e=>mt(e,v0),oC=(e,n)=>({inlinePatterns:x0(e),blockPatterns:w0(e),dynamicPatternsLookup:n}),vg=e=>{const n=Np(Jt(e,C0));return ve(n.errors,o=>console.error(o.message,o.pattern)),n.values},Sm=e=>n=>{const o=e(n);return vg(o)},jr=Lr().deviceType,Mk=jr.isTouch(),_s=yn.DOM,$k=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return oo(n,(o,r)=>{const a=r.split("="),u=a[0],f=a.length>1?a[1]:u;return o[bn(u)]=bn(f),o},{})},Ji=e=>Sl(e,RegExp),We=e=>n=>n.options.get(e),Pp=e=>X(e)||hn(e),km=(e,n="")=>o=>{const r=X(o);if(r)if(o.indexOf("=")!==-1){const a=$k(o);return{value:Bn(a,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},S0=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:km(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:km(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=X(o)&&ha(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=$n(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Wt(o)?{valid:!0,value:o}:X(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||X(o)||kn(o,X);return r?X(o)?{value:Jt(o.split(","),bn),valid:r}:xn(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:el(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=X(o)||kn(o,X);return r?{value:xn(o)?o:Jt(o.split(","),bn),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Wt(o)||X(o);return r?o===!1||jr.isiPhone()||jr.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!Mk}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||X(o)||q(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||X(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean"}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:Pp}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:Pp}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:Pp}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>X(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>kn(o,hn)||o===!1?{value:vg(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>q(o)?{value:Sm(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>kn(o,Ji)?{value:o,valid:!0}:Ji(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:ta.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:_s.getAttrib(e.getElement(),"placeholder")})})},k0=We("iframe_attrs"),sC=We("doctype"),rC=We("document_base_url"),Nk=We("body_id"),zs=We("body_class"),Os=We("content_security_policy"),sr=We("br_in_pre"),Un=We("forced_root_block"),Vs=We("forced_root_block_attrs"),gs=We("newline_behavior"),Fp=We("br_newline_selector"),Ip=We("no_newline_selector"),cC=We("keep_styles"),E0=We("end_container_on_empty_block"),yg=We("automatic_uploads"),Em=We("images_reuse_filename"),A0=We("images_replace_blob_uris"),Lp=We("icons"),Pk=We("icons_url"),g_=We("images_upload_url"),Fk=We("images_upload_base_path"),Ik=We("images_upload_credentials"),Lk=We("images_upload_handler"),T0=We("content_css_cors"),_0=We("referrer_policy"),aC=We("language"),Hk=We("language_url"),iC=We("indent_use_margin"),lC=We("indentation"),Me=We("content_css"),zk=We("content_style"),ts=We("font_css"),Vk=We("directionality"),uC=We("inline_boundaries_selector"),dC=We("object_resizing"),na=We("resize_img_proportional"),h_=We("placeholder"),mC=We("event_root"),Qi=We("service_message"),nd=We("theme"),O0=We("theme_url"),yr=We("model"),Ta=We("model_url"),od=We("inline_boundaries"),_a=We("formats"),Zk=We("preview_styles"),Cg=We("format_empty_lines"),Wo=We("format_noneditable_selector"),fC=We("custom_ui_selector"),el=We("inline"),Hp=We("hidden_input"),gC=We("submit_patch"),hC=We("add_form_submit_trigger"),Uk=We("add_unload_trigger"),Wk=We("custom_undo_redo_levels"),pC=We("disable_nodechange"),bC=We("readonly"),vC=We("content_css_cors"),Gl=We("plugins"),yC=We("external_plugins"),D0=We("block_unsupported_drop"),R0=We("visual"),sd=We("visual_table_class"),rd=We("visual_anchor_class"),wg=We("iframe_aria_text"),jk=We("setup"),CC=We("init_instance_callback"),Gk=We("urlconverter_callback"),B0=We("auto_focus"),qk=We("browser_spellcheck"),cd=We("protect"),Kn=We("paste_block_drop"),Am=We("paste_data_images"),rr=We("paste_preprocess"),wC=We("paste_postprocess"),xC=We("paste_webkit_styles"),SC=We("paste_remove_styles_if_webkit"),zp=We("paste_merge_formats"),xg=We("smart_paste"),kC=We("paste_as_text"),p_=We("paste_tab_spaces"),ad=We("allow_html_data_urls"),Kk=We("text_patterns"),Xk=We("text_patterns_lookup"),EC=We("noneditable_class"),Yk=We("editable_class"),AC=We("noneditable_regexp"),M0=We("preserve_cdata"),Jk=e=>e.options.isSet("text_patterns_lookup"),Qk=e=>we.explode(e.options.get("font_size_style_values")),e3=e=>we.explode(e.options.get("font_size_classes")),t3=e=>e.options.get("encoding")==="xml",$0=e=>we.explode(e.options.get("images_file_types")),n3=We("table_tab_navigation"),Sg=Ue,Vp=ke,N0=e=>{const n=e.parentNode;n&&n.removeChild(e)},P0=e=>{const n=Es(e);return{count:e.length-n.length,text:n}},F0=e=>{let n;for(;(n=e.data.lastIndexOf(Ye))!==-1;)e.deleteData(n,1)},ql=(e,n)=>(nl(e),n),id=(e,n)=>{const o=P0(e.data.substr(0,n.offset())),r=P0(e.data.substr(n.offset()));return(o.text+r.text).length>0?(F0(e),le(e,n.offset()-o.count)):n},Kl=(e,n)=>{const o=n.container(),r=Xs(Js(o.childNodes),e).map(a=>a<n.offset()?le(o,n.offset()-1):n).getOr(n);return nl(e),r},kg=(e,n)=>Vp(e)&&n.container()===e?id(e,n):ql(e,n),TC=(e,n)=>n.container()===e.parentNode?Kl(e,n):ql(e,n),tl=(e,n)=>le.isTextPosition(n)?kg(e,n):TC(e,n),nl=e=>{Sg(e)&&As(e)&&(Hl(e)?e.removeAttribute("data-mce-caret"):N0(e)),Vp(e)&&(F0(e),e.data.length===0&&N0(e))},o3=Qn,Xl=Ss,Zp=Rr,s3="*[contentEditable=false],video,audio,embed,object",I0=(e,n,o)=>{const r=fc(n.getBoundingClientRect(),o);let a,u;if(e.tagName==="BODY"){const p=e.ownerDocument.documentElement;a=e.scrollLeft||p.scrollLeft,u=e.scrollTop||p.scrollTop}else{const p=e.getBoundingClientRect();a=e.scrollLeft-p.left,u=e.scrollTop-p.top}r.left+=a,r.right+=a,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},r3=e=>{var n,o;const r=ee(G.fromDom(e),s3);for(let a=0;a<r.length;a++){const u=r[a].dom;let f=u.previousSibling;if(jf(f)){const p=f.data;p.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(p.length-1,1)}f=u.nextSibling,Wf(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},c3=(e,n,o,r)=>{const a=Gi();let u,f;const p=Un(e),y=e.dom,x=(I,Z)=>{let U;if(_(),Zp(Z))return null;if(o(Z)){const K=xy(p,Z,I),J=I0(n,Z,I);y.setStyle(K,"top",J.top),f=K;const de=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(de,{...J}),y.add(n,de),a.set({caret:de,element:Z,before:I}),I&&y.addClass(de,"mce-visual-caret-before"),M(),U=Z.ownerDocument.createRange(),U.setStart(K,0),U.setEnd(K,0)}else return f=om(Z,I),U=Z.ownerDocument.createRange(),Eg(f.nextSibling)?(U.setStart(f,0),U.setEnd(f,0)):(U.setStart(f,1),U.setEnd(f,1)),U;return U},_=()=>{r3(n),f&&(nl(f),f=null),a.on(I=>{y.remove(I.caret),a.clear()}),u&&(clearInterval(u),u=void 0)},M=()=>{u=setInterval(()=>{a.on(I=>{r()?y.toggleClass(I.caret,"mce-visual-caret-hidden"):y.addClass(I.caret,"mce-visual-caret-hidden")})},500)};return{show:x,hide:_,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{a.on(I=>{const Z=I0(n,I.element,I.before);y.setStyles(I.caret,{...Z})})},destroy:()=>clearInterval(u)}},L0=()=>ln.browser.isFirefox(),Eg=e=>o3(e)||Xl(e),Ag=e=>Eg(e)||Ya(e)&&L0(),_C=_c,H0=Qn,OC=Ss,DC=rc("display","block table table-cell table-caption list-item"),Tg=As,z0=Lu,Up=Ue,Wp=ke,V0=Br,Yl=e=>e>0,Jl=e=>e<0,_g=(e,n)=>{let o;for(;o=e(n);)if(!z0(o))return o;return null},Tm=(e,n,o,r,a)=>{const u=new jt(e,r),f=H0(e)||z0(e);let p;if(Jl(n)){if(f&&(p=_g(u.prev.bind(u),!0),o(p)))return p;for(;p=_g(u.prev.bind(u),a);)if(o(p))return p}if(Yl(n)){if(f&&(p=_g(u.next.bind(u),!0),o(p)))return p;for(;p=_g(u.next.bind(u),a);)if(o(p))return p}return null},b_=(e,n)=>{const o=a=>_C(a.dom),r=a=>a.dom===n;return ho(G.fromDom(e),o,r).map(a=>a.dom).getOr(n)},Oa=(e,n)=>{for(;e&&e!==n;){if(DC(e))return e;e=e.parentNode}return null},Mc=(e,n,o)=>Oa(e.container(),o)===Oa(n.container(),o),Z0=(e,n)=>{if(!n)return R.none();const o=n.container(),r=n.offset();return Up(o)?R.from(o.childNodes[r+e]):R.none()},jp=(e,n)=>{var o;const a=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)),a},a3=(e,n,o)=>Oa(n,e)===Oa(o,e),RC=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let a=o;for(;a&&a!==n;){let u=a[r];if(u&&Tg(u)&&(u=u[r]),H0(u)||OC(u)){if(a3(n,u,a))return u;break}if(V0(u))break;a=a.parentNode}return null},Og=Ce(jp,!0),ld=Ce(jp,!1),_m=(e,n,o)=>{let r;const a=Ce(RC,!0,n),u=Ce(RC,!1,n),f=o.startContainer,p=o.startOffset;if(Lu(f)){const y=Wp(f)?f.parentNode:f,x=y.getAttribute("data-mce-caret");if(x==="before"&&(r=y.nextSibling,Ag(r)))return Og(r);if(x==="after"&&(r=y.previousSibling,Ag(r)))return ld(r)}if(!o.collapsed)return o;if(ke(f)){if(Tg(f)){if(e===1){if(r=u(f),r)return Og(r);if(r=a(f),r)return ld(r)}if(e===-1){if(r=a(f),r)return ld(r);if(r=u(f),r)return Og(r)}return o}if(jf(f)&&p>=f.data.length-1)return e===1&&(r=u(f),r)?Og(r):o;if(Wf(f)&&p<=1)return e===-1&&(r=a(f),r)?ld(r):o;if(p===f.data.length)return r=u(f),r?Og(r):o;if(p===0)return r=a(f),r?ld(r):o}return o},BC=(e,n)=>Z0(e?0:-1,n).filter(H0),Dg=(e,n,o)=>{const r=_m(e,n,o);return e===-1?le.fromRangeStart(r):le.fromRangeEnd(r)},Gp=e=>R.from(e.getNode()).map(G.fromDom),i3=e=>R.from(e.getNode(!0)).map(G.fromDom),Zs=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},U0=(e,n)=>{const o=Mc(e,n);return!o&&go(e.getNode())?!0:o};var yo;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(yo||(yo={}));const Rg=Qn,ai=ke,MC=Ue,qp=go,ud=Br,Kp=gp,Om=ti,l3=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},Dm=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,dd=(e,n)=>{if(Yl(e)){if(ud(n.previousSibling)&&!ai(n.previousSibling))return le.before(n);if(ai(n))return le(n,0)}if(Jl(e)){if(ud(n.nextSibling)&&!ai(n.nextSibling))return le.after(n);if(ai(n))return le(n,n.data.length)}return Jl(e)?qp(n)?le.before(n):le.after(n):le.before(n)},$C=(e,n)=>{const o=n.nextSibling;return o&&ud(o)?ai(o)?le(o,0):le.before(o):W0(yo.Forwards,le.after(n),e)},W0=(e,n,o)=>{let r,a,u,f;if(!MC(o)||!n)return null;if(n.isEqual(le.after(o))&&o.lastChild){if(f=le.after(o.lastChild),Jl(e)&&ud(o.lastChild)&&MC(o.lastChild))return qp(o.lastChild)?le.before(o.lastChild):f}else f=n;const p=f.container();let y=f.offset();if(ai(p)){if(Jl(e)&&y>0)return le(p,--y);if(Yl(e)&&y<p.length)return le(p,++y);r=p}else{if(Jl(e)&&y>0&&(a=Dm(p,y-1),ud(a)))return!Kp(a)&&(u=Tm(a,e,Om,a),u)?ai(u)?le(u,u.data.length):le.after(u):ai(a)?le(a,a.data.length):le.before(a);if(Yl(e)&&y<p.childNodes.length&&(a=Dm(p,y),ud(a)))return qp(a)?$C(o,a):!Kp(a)&&(u=Tm(a,e,Om,a),u)?ai(u)?le(u,0):le.before(u):ai(a)?le(a,0):le.after(a);r=a||f.getNode()}if(r&&(Yl(e)&&f.isAtEnd()||Jl(e)&&f.isAtStart())&&(r=Tm(r,e,Ae,o,!0),Om(r,o)))return dd(e,r);a=r&&Tm(r,e,Om,o);const x=wu(mt(l3(p,o),Rg));return x&&(!a||!x.contains(a))?(Yl(e)?f=le.after(x):f=le.before(x),f):a?dd(e,a):null},ii=e=>({next:n=>W0(yo.Forwards,n,e),prev:n=>W0(yo.Backwards,n,e)}),j0=(e,n,o)=>{const r=e?le.before(o):le.after(o);return $r(e,n,r)},Us=e=>go(e)?le.before(e):le.after(e),u3=e=>le.isTextPosition(e)?e.offset()===0:Br(e.getNode()),Rm=e=>{if(le.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return Br(e.getNode(!0))},d3=(e,n)=>!le.isTextPosition(e)&&!le.isTextPosition(n)&&e.getNode()===n.getNode(!0),G0=e=>!le.isTextPosition(e)&&go(e.getNode()),NC=(e,n,o)=>e?!d3(n,o)&&!G0(n)&&Rm(n)&&u3(o):!d3(o,n)&&u3(n)&&Rm(o),$r=(e,n,o)=>{const r=ii(n);return R.from(e?r.next(o):r.prev(o))},Bg=(e,n,o)=>$r(e,n,o).bind(r=>Mc(o,r,n)&&NC(e,o,r)?$r(e,n,r):R.some(r)),q0=(e,n,o,r)=>Bg(e,n,o).bind(a=>r(a)?q0(e,n,a,r):R.some(a)),Mg=(e,n)=>{const o=e?n.firstChild:n.lastChild;return ke(o)?R.some(le(o,e?0:o.data.length)):o?Br(o)?R.some(e?le.before(o):Us(o)):j0(e,n,o):R.none()},Cr=Ce($r,!0),gc=Ce($r,!1),Po=Ce(Mg,!0),hc=Ce(Mg,!1),Xp="_mce_caret",$c=e=>Ue(e)&&e.id===Xp,Bm=(e,n)=>{let o=n;for(;o&&o!==e;){if($c(o))return o;o=o.parentNode}return null},v_=e=>X(e.start),$g=e=>Pt(e,"rng"),Yp=e=>Pt(e,"id"),K0=e=>Pt(e,"name"),X0=e=>we.isArray(e.start),Mm=e=>!K0(e)&&Wt(e.forward)?e.forward:!0,Y0=(e,n)=>(Ue(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),PC=(e,n)=>{const o=R.from(Qy(e.getRoot(),n.start)),r=R.from(Qy(e.getRoot(),n.end));return Fs(o,r,(a,u)=>{const f=e.createRng();return f.setStart(a.container(),a.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Mm(n)}})},J0=(e,n)=>{var o;const a=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Ye);e.appendChild(a),n.setStart(a,0),n.setEnd(a,0)},Q0=e=>!e.hasChildNodes(),Ng=(e,n)=>hc(e).fold(pn,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),Jp=(e,n,o)=>Q0(n)&&Bm(e,n)?(J0(n,o),!0):!1,ev=(e,n,o,r)=>{const a=o[n?"start":"end"],u=e.getRoot();if(a){let f=u,p=a[0];for(let y=a.length-1;f&&y>=1;y--){const x=f.childNodes;if(Jp(u,f,r))return!0;if(a[y]>x.length-1)return Jp(u,f,r)?!0:Ng(f,r);f=x[a[y]]}ke(f)&&(p=Math.min(a[0],f.data.length)),Ue(f)&&(p=Math.min(a[0],f.childNodes.length)),n?r.setStart(f,p):r.setEnd(f,p)}return!0},tv=e=>ke(e)&&e.data.length>0,FC=(e,n,o)=>{const r=e.get(o.id+"_"+n),a=r==null?void 0:r.parentNode,u=o.keep;if(r&&a){let f,p;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,p=1):tv(r.nextSibling)?(f=r.nextSibling,p=0):tv(r.previousSibling)?(f=r.previousSibling,p=r.previousSibling.data.length):(f=a,p=e.nodeIndex(r)+1):(f=a,p=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,p=1):tv(r.previousSibling)?(f=r.previousSibling,p=r.previousSibling.data.length):(f=a,p=e.nodeIndex(r)):(f=a,p=e.nodeIndex(r)),!u){const y=r.previousSibling,x=r.nextSibling;we.each(we.grep(r.childNodes),M=>{ke(M)&&(M.data=M.data.replace(/\uFEFF/g,""))});let _;for(;_=e.get(o.id+"_"+n);)e.remove(_,!0);if(ke(x)&&ke(y)&&!ln.browser.isOpera()){const M=y.data.length;y.appendData(x.data),e.remove(x),f=y,p=M}}return R.some(le(f,p))}else return R.none()},m3=(e,n)=>{const o=e.createRng();return ev(e,!0,n,o)&&ev(e,!1,n,o)?R.some({range:o,forward:Mm(n)}):R.none()},Qp=(e,n)=>{const o=FC(e,"start",n),r=FC(e,"end",n);return Fs(o,r.or(o),(a,u)=>{const f=e.createRng();return f.setStart(Y0(e,a.container()),a.offset()),f.setEnd(Y0(e,u.container()),u.offset()),{range:f,forward:Mm(n)}})},f3=(e,n)=>R.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),g3=(e,n)=>{const o=e.dom;if(n){if(X0(n))return m3(o,n);if(v_(n))return PC(o,n);if(Yp(n))return Qp(o,n);if(K0(n))return f3(o,n);if($g(n))return R.some({range:n.rng,forward:Mm(n)})}return R.none()},y_=(e,n,o)=>Mn(e,n,o),C_=(e,n)=>{g3(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},cr=e=>Ue(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Pg=(e=>n=>e===n)(Vo),Fg=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,e1=e=>!Fg(e)&&!Pg(e)&&!tm(e),nv=e=>({value:e}),IC=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},p3=e=>{const n=IC(e.red)+IC(e.green)+IC(e.blue);return nv(n)},wr=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,ov=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,$m=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),ol=(e,n,o,r)=>{const a=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),p=parseFloat(r);return $m(a,u,f,p)},Ig=e=>{if(e==="transparent")return R.some($m(0,0,0,0));const n=wr.exec(e);if(n!==null)return R.some(ol(n[1],n[2],n[3],"1"));const o=ov.exec(e);return o!==null?R.some(ol(o[1],o[2],o[3],o[4])):R.none()},md=e=>Ig(e).map(p3).map(n=>"#"+n.value).getOr(e),t1=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},b3=e=>ga(e,n=>{const o=dg(n);return o?[G.fromDom(o)]:[]}),v3=e=>t1(e).length>1,n1=e=>mt(b3(e),hr),Ql=e=>ee(e,"td[data-mce-selected],th[data-mce-selected]"),o1=(e,n)=>{const o=Ql(n);return o.length>0?o:n1(e)},eu=e=>o1(t1(e.selection.getSel()),G.fromDom(e.getBody())),Ws=(e,n)=>Uf(e,"table",n),LC=e=>{const n=e.startContainer,o=e.startOffset;return ke(n)?o===0?R.some(G.fromDom(n)):R.none():R.from(n.childNodes[o]).map(G.fromDom)},oa=e=>{const n=e.endContainer,o=e.endOffset;return ke(n)?o===n.data.length?R.some(G.fromDom(n)):R.none():R.from(n.childNodes[o-1]).map(G.fromDom)},HC=e=>Mb(e).fold(Oe([e]),n=>[e].concat(HC(n))),Lg=e=>np(e).fold(Oe([e]),n=>so(n)==="br"?nc(n).map(o=>[e].concat(Lg(o))).getOr([]):[e].concat(Lg(n))),s1=(e,n)=>Fs(LC(n),oa(n),(o,r)=>{const a=Ko(HC(e),Ce(vn,o)),u=Ko(Lg(e),Ce(vn,r));return a.isSome()&&u.isSome()}).getOr(!1),sv=(e,n,o,r)=>{const a=o,u=new jt(o,a),f=Yo(e.schema.getMoveCaretBeforeOnEnterElements(),(y,x)=>!$n(["td","th","table"],x.toLowerCase()));let p=o;do{if(ke(p)&&we.trim(p.data).length!==0){r?n.setStart(p,0):n.setEnd(p,p.data.length);return}if(f[p.nodeName]){r?n.setStartBefore(p):p.nodeName==="BR"?n.setEndBefore(p):n.setEndAfter(p);return}}while(p=r?u.next():u.prev());a.nodeName==="BODY"&&(r?n.setStart(a,0):n.setEnd(a,a.childNodes.length))},Hg=e=>{const n=e.selection.getSel();return Se(n)&&n.rangeCount>0},rv=(e,n)=>{const o=eu(e);o.length>0?ve(o,r=>{const a=r.dom,u=e.dom.createRng();u.setStartBefore(a),u.setEndAfter(a),n(u,!0)}):n(e.selection.getRng(),!1)},zC=(e,n,o)=>{const r=$p(e,n);o(r),e.moveToBookmark(r)},Nm=e=>kc(e==null?void 0:e.nodeType),Pm=e=>Ue(e)&&!cr(e)&&!$c(e)&&!ya(e),y3=(e,n)=>{if(Pm(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},tu=e=>e.isContentEditable===!0,r1=(e,n,o)=>{const{selection:r,dom:a}=e,u=r.getNode(),f=Qn(u);zC(r,!0,()=>{n()}),f&&Qn(u)&&a.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&C3(a,r)},C3=(e,n)=>{var o,r;const a=n.getRng(),{startContainer:u,startOffset:f}=a,p=n.getNode();if(!y3(e,p)&&Ue(u)){const y=u.childNodes,x=e.getRoot();let _;if(f<y.length){const M=y[f];_=new jt(M,(o=e.getParent(M,e.isBlock))!==null&&o!==void 0?o:x)}else{const M=y[y.length-1];_=new jt(M,(r=e.getParent(M,e.isBlock))!==null&&r!==void 0?r:x),_.next(!0)}for(let M=_.current();M;M=_.next()){if(e.getContentEditable(M)==="false")return;if(ke(M)&&!c1(M)){a.setStart(M,0),n.setRng(a);return}}}},cv=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if(Ue(e)||!c1(e))return e}},zg=(e,n)=>(Nm(n)&&(n=n.nodeName),!!e.schema.getTextBlockElements()[n.toLowerCase()]),nu=(e,n,o)=>e.schema.isValidChild(n,o),c1=(e,n=!1)=>{if(Se(e)&&ke(e)){const o=n?e.data.replace(/ /g,"\xA0"):e.data;return Hu(o)}else return!1},w_=e=>Se(e)&&ke(e)&&e.length===0,w3=(e,n)=>{const o="[data-mce-cef-wrappable]",r=Wo(e),a=Ao(r)?o:`${o},${r}`;return Jc(G.fromDom(n),a)},VC=(e,n)=>{const o=e.dom;return Pm(n)&&o.getContentEditable(n)==="false"&&w3(e,n)&&o.select('[contenteditable="true"]',n).length===0},ou=(e,n)=>q(e)?e(n):(Se(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),a1=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),It=(e,n)=>{if(en(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=md(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},li=(e,n,o)=>{const r=e.getStyle(n,o);return It(r,o)},su=(e,n)=>{let o;return e.getParent(n,r=>Ue(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},ru=(e,n,o)=>e.getParents(n,o,e.getRoot()),av=(e,n,o)=>{const r=e.formatter.get(n);return Se(r)&&Yt(r,o)},Fm=(e,n)=>av(e,n,r=>{const a=u=>q(u)||u.length>1&&u.charAt(0)==="%";return Yt(["styles","attributes"],u=>Bn(r,u).exists(f=>{const p=xn(f)?f:Eo(f);return Yt(p,a)}))}),ZC=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],a=u=>Yo(u,(f,p)=>Yt(r,y=>y===p));return av(e,n,u=>{const f=a(u);return av(e,o,p=>{const y=a(p);return Al(f,y)})})},sa=e=>Ir(e,"block"),i1=e=>sa(e)&&e.wrapper===!0,iv=e=>sa(e)&&e.wrapper!==!0,xr=e=>Ir(e,"selector"),ns=e=>Ir(e,"inline"),lv=e=>xr(e)&&ns(e)&&Ol(Bn(e,"mixed"),!0),Im=e=>xr(e)&&e.expand!==!1&&!ns(e),Vg=cr,UC=ru,uv=c1,x3=zg,Zg=e=>go(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,S3=(e,n)=>{let o=n;for(;o;){if(Ue(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},WC=(e,n,o,r)=>{const a=n.data;for(let u=o;e?u>=0:u<a.length;e?u--:u++)if(r(a.charAt(u)))return e?u+1:u;return-1},jC=(e,n,o)=>WC(e,n,o,r=>Pg(r)||Fg(r)),k3=(e,n,o)=>WC(e,n,o,e1),GC=(e,n,o,r,a,u)=>{let f;const p=e.getParent(o,e.isBlock)||n,y=(_,M,B)=>{const H=Vn(e),V=a?H.backwards:H.forwards;return R.from(V(_,M,(I,Z)=>Vg(I.parentNode)?-1:(f=I,B(a,I,Z)),p))};return y(o,r,jC).bind(_=>u?y(_.container,_.offset+(a?-1:0),k3):R.some(_)).orThunk(()=>f?R.some({container:f,offset:a?0:f.length}):R.none())},qC=(e,n,o,r,a)=>{const u=r[a];ke(r)&&Ao(r.data)&&u&&(r=u);const f=UC(e,r);for(let p=0;p<f.length;p++)for(let y=0;y<n.length;y++){const x=n[y];if(!(Se(x.collapsed)&&x.collapsed!==o.collapsed)&&xr(x)&&e.is(f[p],x.selector))return f[p]}return r},KC=(e,n,o,r)=>{var a;let u=o;const f=e.dom,p=f.getRoot(),y=n[0];if(sa(y)&&(u=y.wrapper?null:f.getParent(o,y.block,p)),!u){const x=(a=f.getParent(o,"LI,TD,TH"))!==null&&a!==void 0?a:p;u=f.getParent(ke(o)?o.parentNode:o,_=>_!==p&&x3(e,_),x)}if(u&&sa(y)&&y.wrapper&&(u=UC(f,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!f.isBlock(u[r])&&(u=u[r],!a1(u,"br")););return u||o},fd=(e,n,o,r)=>{const a=o.parentNode;return Se(o[r])?!1:a===n||en(a)||e.isBlock(a)?!0:fd(e,n,a,r)},l1=(e,n,o,r,a)=>{let u=o;const f=a?"previousSibling":"nextSibling",p=e.getRoot();if(ke(o)&&!uv(o)&&(a?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const x=ke(y)&&!fd(e,p,y,f);if(!Vg(y)&&!Zg(y)&&!uv(y,x))return u}if(u===p||u.parentNode===p){o=u;break}u=u.parentNode}return o},XC=e=>Vg(e.parentNode)||Vg(e),Lm=(e,n,o,r=!1)=>{let{startContainer:a,startOffset:u,endContainer:f,endOffset:p}=n;const y=e.dom,x=o[0];return Ue(a)&&a.hasChildNodes()&&(a=Yi(a,u),ke(a)&&(u=0)),Ue(f)&&f.hasChildNodes()&&(f=Yi(f,n.collapsed?p:p-1),ke(f)&&(p=f.data.length)),a=S3(y,a),f=S3(y,f),XC(a)&&(a=Vg(a)?a:a.parentNode,n.collapsed?a=a.previousSibling||a:a=a.nextSibling||a,ke(a)&&(u=n.collapsed?a.length:0)),XC(f)&&(f=Vg(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,ke(f)&&(p=n.collapsed?0:f.length)),n.collapsed&&(GC(y,e.getBody(),a,u,!0,r).each(({container:B,offset:H})=>{a=B,u=H}),GC(y,e.getBody(),f,p,!1,r).each(({container:B,offset:H})=>{f=B,p=H})),(ns(x)||x.block_expand)&&((!ns(x)||!ke(a)||u===0)&&(a=l1(y,o,a,u,!0)),(!ns(x)||!ke(f)||p===f.data.length)&&(f=l1(y,o,f,p,!1))),Im(x)&&(a=qC(y,o,n,a,"previousSibling"),f=qC(y,o,n,f,"nextSibling")),(sa(x)||xr(x))&&(a=KC(e,o,a,"previousSibling"),f=KC(e,o,f,"nextSibling"),sa(x)&&(y.isBlock(a)||(a=l1(y,o,a,u,!0)),y.isBlock(f)||(f=l1(y,o,f,p,!1)))),Ue(a)&&a.parentNode&&(u=y.nodeIndex(a),a=a.parentNode),Ue(f)&&f.parentNode&&(p=y.nodeIndex(f)+1,f=f.parentNode),{startContainer:a,startOffset:u,endContainer:f,endOffset:p}},Ug=(e,n,o)=>{var r;const a=n.startOffset,u=Yi(n.startContainer,a),f=n.endOffset,p=Yi(n.endContainer,f-1),y=Z=>{const U=Z[0];ke(U)&&U===u&&a>=U.data.length&&Z.splice(0,1);const K=Z[Z.length-1];return f===0&&Z.length>0&&K===p&&ke(K)&&Z.splice(Z.length-1,1),Z},x=(Z,U,K)=>{const J=[];for(;Z&&Z!==K;Z=Z[U])J.push(Z);return J},_=(Z,U)=>e.getParent(Z,K=>K.parentNode===U,U),M=(Z,U,K)=>{const J=K?"nextSibling":"previousSibling";for(let de=Z,he=de.parentNode;de&&de!==U;de=he){he=de.parentNode;const De=x(de===Z?de:de[J],J);De.length&&(K||De.reverse(),o(y(De)))}};if(u===p)return o(y([u]));const B=(r=e.findCommonAncestor(u,p))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,p))return M(u,B,!0);if(e.isChildOf(p,u))return M(p,B);const H=_(u,B)||u,V=_(p,B)||p;M(u,H,!0);const I=x(H===u?H:H.nextSibling,"nextSibling",V===p?V.nextSibling:V);I.length&&o(y(I)),M(p,V)},u1=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],E3=e=>Ro(e)&&ac(e)===Ye,A3=(e,n,o,r)=>Ec(n).fold(()=>"skipping",a=>r==="br"||E3(n)?"valid":xk(n)?"existing":$c(n.dom)?"caret":Yt(u1,u=>Jc(n,u))?"valid-block":!nu(e,o,r)||!nu(e,so(a),o)?"invalid-child":"valid"),T3=(e,n)=>{const o=Lm(e,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},YC=(e,n,o,r,a,u)=>{const{uid:f=n,...p}=o;Gd(e,qi()),Mo(e,`${Xi()}`,f),Mo(e,`${Ki()}`,r);const{attributes:y={},classes:x=[]}=a(f,p);if(Dr(e,y),Py(e,x),u){x.length>0&&Mo(e,`${Ku()}`,x.join(","));const _=gn(y);_.length>0&&Mo(e,`${No()}`,_.join(","))}},Ie=e=>{$f(e,qi()),ls(e,`${Xi()}`),ls(e,`${Ki()}`),ls(e,`${qu()}`);const n=va(e,`${No()}`).map(r=>r.split(",")).getOr([]),o=va(e,`${Ku()}`).map(r=>r.split(",")).getOr([]);ve(n,r=>ls(e,r)),Ek(e,o),ls(e,`${Ku()}`),ls(e,`${No()}`)},Fo=(e,n,o,r,a)=>{const u=G.fromTag("span",e);return YC(u,n,o,r,a,!1),u},Hm=(e,n,o,r,a,u)=>{const f=[],p=Fo(e.getDoc(),o,u,r,a),y=Gi(),x=()=>{y.clear()},_=()=>y.get().getOrThunk(()=>{const V=Xu(p);return f.push(V),y.set(V),V}),M=V=>{ve(V,B)},B=V=>{switch(A3(e,V,"span",so(V))){case"invalid-child":{x();const Z=ws(V);M(Z),x();break}case"valid-block":{x(),YC(V,o,u,r,a,!0);break}case"valid":{const Z=_();Xd(V,Z);break}}},H=V=>{const I=Jt(V,G.fromDom);M(I)};return Ug(e.dom,n,V=>{x(),H(V)}),f},hs=(e,n,o,r)=>{e.undoManager.transact(()=>{const a=e.selection,u=a.getRng(),f=eu(e).length>0,p=Dp("mce-annotation");if(u.collapsed&&!f&&T3(e,u),a.getRng().collapsed&&!f){const y=Fo(e.getDoc(),p,r,n,o.decorate);rp(y,Vo),a.getRng().insertNode(y.dom),a.select(y.dom)}else zC(a,!1,()=>{rv(e,y=>{Hm(e,y,p,n,o.decorate,r)})})})},pc=e=>{const n=kk();$y(e,n);const o=Sk(e,n),r=Df("span"),a=u=>{ve(u,f=>{r(f)?Is(f):Ie(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(p=>{hs(e,u,p,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{const f=e.selection.getBookmark();Op(e,R.some(u)).each(({elements:p})=>{a(p)}),e.selection.moveToBookmark(f)},removeAll:u=>{const f=e.selection.getBookmark();En(ri(e,u),(p,y)=>{a(p)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=ri(e,u);return at(f,p=>Jt(p,y=>y.dom))}}},gd=e=>({getBookmark:Ce(y_,e),moveToBookmark:Ce(C_,e)});gd.isBookmarkNode=cr;const zm=(e,n,o)=>o.collapsed?!1:Yt(o.getClientRects(),r=>Yu(r,e,n)),d1=(e,n)=>e.dispatch("PreProcess",n),_3=(e,n)=>e.dispatch("PostProcess",n),JC=e=>{e.dispatch("remove")},QC=e=>{e.dispatch("detach")},ew=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},O3=(e,n,o,r,a)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:a})},D3=(e,n,o,r,a)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:a})},tw=e=>{e.dispatch("PreInit")},dv=e=>{e.dispatch("PostRender")},hd=e=>{e.dispatch("Init")},m1=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},Wg=(e,n,o)=>{e.dispatch(n,o)},f1=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},pd=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},mv=(e,n)=>e.dispatch("BeforeSetContent",n),nw=(e,n)=>e.dispatch("SetContent",n),bd=(e,n)=>e.dispatch("BeforeGetContent",n),jg=(e,n)=>e.dispatch("GetContent",n),R3=(e,n)=>{e.dispatch("AutocompleterStart",n)},B3=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},sl=e=>{e.dispatch("AutocompleterEnd")},M3=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),ow=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),Gg=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Qe={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Qe.metaKeyPressed(e),metaKeyPressed:e=>ln.os.isMacOS()||ln.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},ui="data-mce-selected",js="table,img,figure.image,hr,video,span.mce-preview-object",ra=Math.abs,Nc=Math.round,Vm={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},fv=e=>e.type==="longpress"||e.type.indexOf("touch")===0,sw=(e,n)=>{const o=n.dom,r=n.getDoc(),a=document,u=n.getBody();let f,p,y,x,_,M,B,H,V,I,Z,U,K,J,de,he,De;const be=Pe=>Se(Pe)&&(vy(Pe)||o.is(Pe,"figure.image")),ae=Pe=>Ss(Pe)||o.hasClass(Pe,"mce-preview-object"),ie=(Pe,Nt)=>{if(fv(Pe)){const _t=Pe.touches[0];return be(Pe.target)&&!zm(_t.clientX,_t.clientY,Nt)}else return be(Pe.target)&&!zm(Pe.clientX,Pe.clientY,Nt)},Re=Pe=>{const Nt=Pe.target;ie(Pe,n.selection.getRng())&&!Pe.isDefaultPrevented()&&n.selection.select(Nt)},Je=Pe=>o.hasClass(Pe,"mce-preview-object")&&Se(Pe.firstElementChild)?[Pe,Pe.firstElementChild]:o.is(Pe,"figure.image")?[Pe.querySelector("img")]:[Pe],tt=Pe=>{const Nt=dC(n);return!Nt||Pe.getAttribute("data-mce-resize")==="false"||Pe===n.getBody()?!1:o.hasClass(Pe,"mce-preview-object")&&Se(Pe.firstElementChild)?Jc(G.fromDom(Pe.firstElementChild),Nt):Jc(G.fromDom(Pe),Nt)},kt=Pe=>ae(Pe)?o.create("img",{src:ln.transparentSrc}):Pe.cloneNode(!0),qt=(Pe,Nt,_t)=>{if(Se(_t)){const pt=Je(Pe);ve(pt,wt=>{wt.style[Nt]||!n.schema.isValid(wt.nodeName.toLowerCase(),Nt)?o.setStyle(wt,Nt,_t):o.setAttrib(wt,Nt,""+_t)})}},fn=(Pe,Nt,_t)=>{qt(Pe,"width",Nt),qt(Pe,"height",_t)},Dn=Pe=>{let Nt,_t,pt,wt,Sn;Nt=Pe.screenX-M,_t=Pe.screenY-B,J=Nt*x[2]+I,de=_t*x[3]+Z,J=J<5?5:J,de=de<5?5:de,(be(f)||ae(f))&&na(n)!==!1?pt=!Qe.modifierPressed(Pe):pt=Qe.modifierPressed(Pe),pt&&(ra(Nt)>ra(_t)?(de=Nc(J*U),J=Nc(de/U)):(J=Nc(de/U),de=Nc(J*U))),fn(p,J,de),wt=x.startPos.x+Nt,Sn=x.startPos.y+_t,wt=wt>0?wt:0,Sn=Sn>0?Sn:0,o.setStyles(y,{left:wt,top:Sn,display:"block"}),y.innerHTML=J+" &times; "+de,x[2]<0&&p.clientWidth<=J&&o.setStyle(p,"left",H+(I-J)),x[3]<0&&p.clientHeight<=de&&o.setStyle(p,"top",V+(Z-de)),Nt=u.scrollWidth-he,_t=u.scrollHeight-De,Nt+_t!==0&&o.setStyles(y,{left:wt-Nt,top:Sn-_t}),K||(O3(n,f,I,Z,"corner-"+x.name),K=!0)},Ms=()=>{const Pe=K;K=!1,Pe&&(qt(f,"width",J),qt(f,"height",de)),o.unbind(r,"mousemove",Dn),o.unbind(r,"mouseup",Ms),a!==r&&(o.unbind(a,"mousemove",Dn),o.unbind(a,"mouseup",Ms)),o.remove(p),o.remove(y),o.remove(_),_e(f),Pe&&(D3(n,f,J,de,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},_e=Pe=>{je();const Nt=o.getPos(Pe,u),_t=Nt.x,pt=Nt.y,wt=Pe.getBoundingClientRect(),Sn=wt.width||wt.right-wt.left,An=wt.height||wt.bottom-wt.top;f!==Pe&&($t(),f=Pe,J=de=0);const rs=n.dispatch("ObjectSelected",{target:Pe});tt(Pe)&&!rs.isDefaultPrevented()?En(Vm,(to,Xn)=>{const Go=cs=>{const bl=Je(f)[0];M=cs.screenX,B=cs.screenY,I=bl.clientWidth,Z=bl.clientHeight,U=Z/I,x=to,x.name=Xn,x.startPos={x:Sn*to[0]+_t,y:An*to[1]+pt},he=u.scrollWidth,De=u.scrollHeight,_=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(_,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),p=kt(f),o.addClass(p,"mce-clonedresizable"),o.setAttrib(p,"data-mce-bogus","all"),p.contentEditable="false",o.setStyles(p,{left:_t,top:pt,margin:0}),fn(p,Sn,An),p.removeAttribute(ui),u.appendChild(p),o.bind(r,"mousemove",Dn),o.bind(r,"mouseup",Ms),a!==r&&(o.bind(a,"mousemove",Dn),o.bind(a,"mouseup",Ms)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},I+" &times; "+Z)};let qs=o.get("mceResizeHandle"+Xn);qs&&o.remove(qs),qs=o.add(u,"div",{id:"mceResizeHandle"+Xn,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Xn+"-resize; margin:0; padding:0"}),o.bind(qs,"mousedown",cs=>{cs.stopImmediatePropagation(),cs.preventDefault(),Go(cs)}),to.elm=qs,o.setStyles(qs,{left:Sn*to[0]+_t-qs.offsetWidth/2,top:An*to[1]+pt-qs.offsetHeight/2})}):$t(!1)},At=_p(_e,0),$t=(Pe=!0)=>{At.cancel(),je(),f&&Pe&&f.removeAttribute(ui),En(Vm,(Nt,_t)=>{const pt=o.get("mceResizeHandle"+_t);pt&&(o.unbind(pt),o.remove(pt))})},vt=(Pe,Nt)=>o.isChildOf(Pe,Nt),Do=Pe=>{if(K||n.removed||n.composing)return;const Nt=Pe.type==="mousedown"?Pe.target:e.getNode(),_t=Mu(G.fromDom(Nt),js).map(wt=>wt.dom).getOrUndefined(),pt=Se(_t)?o.getAttrib(_t,ui,"1"):"1";if(ve(o.select(`img[${ui}],hr[${ui}]`),wt=>{wt.removeAttribute(ui)}),Se(_t)&&vt(_t,u)){yt();const wt=e.getStart(!0);if(vt(wt,_t)&&vt(e.getEnd(!0),_t)){o.setAttrib(_t,ui,pt),At.throttle(_t);return}}$t()},je=()=>{En(Vm,Pe=>{Pe.elm&&(o.unbind(Pe.elm),delete Pe.elm)})},yt=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{yt(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Do),n.on("keyup compositionend",Pe=>{f&&f.nodeName==="TABLE"&&Do(Pe)}),n.on("hide blur",$t),n.on("contextmenu longpress",Re,!0)}),n.on("remove",je),{isResizable:tt,showResizeRect:_e,hideResizeRect:$t,updateResizeRect:Do,destroy:()=>{At.cancel(),f=p=_=null}}},gv=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},$3=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},g1=(e,n,o)=>{const r=e.document.createRange();return gv(r,n),$3(r,o),r},hv=(e,n,o,r,a)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,a),u},vd=ci.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),pv=(e,n,o)=>n(G.fromDom(o.startContainer),o.startOffset,G.fromDom(o.endContainer),o.endOffset),rw=(e,n)=>n.match({domRange:o=>({ltr:Oe(o),rtl:R.none}),relative:(o,r)=>({ltr:Xc(()=>g1(e,o,r)),rtl:Xc(()=>R.some(g1(e,r,o)))}),exact:(o,r,a,u)=>({ltr:Xc(()=>hv(e,o,r,a,u)),rtl:Xc(()=>R.some(hv(e,a,u,o,r)))})}),h1=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(a=>a.collapsed===!1).map(a=>vd.rtl(G.fromDom(a.endContainer),a.endOffset,G.fromDom(a.startContainer),a.startOffset)).getOrThunk(()=>pv(e,vd.ltr,o)):pv(e,vd.ltr,o)},bv=(e,n)=>{const o=rw(e,n);return h1(e,o)};vd.ltr,vd.rtl;const Da={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},cw=(e,n,o)=>{var r,a;return R.from((a=(r=e.dom).caretPositionFromPoint)===null||a===void 0?void 0:a.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return R.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),R.some(f)})},aw=(e,n,o)=>{var r,a;return R.from((a=(r=e.dom).caretRangeFromPoint)===null||a===void 0?void 0:a.call(r,n,o))},yd=(()=>document.caretPositionFromPoint?cw:document.caretRangeFromPoint?aw:R.none)(),Cd=(e,n,o)=>{const r=G.fromDom(e.document);return yd(r,n,o).map(a=>Da.create(G.fromDom(a.startContainer),a.startOffset,G.fromDom(a.endContainer),a.endOffset))},Zm=ci.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),vv=(e,n,o,r)=>e.fold(n,o,r),ca=e=>e.fold(no,no,no),wd=Zm.before,iw=Zm.on,qg=Zm.after,Ra={before:wd,on:iw,after:qg,cata:vv,getStart:ca},p1=ci.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),lw=e=>p1.exact(e.start,e.soffset,e.finish,e.foffset),N3=e=>e.match({domRange:n=>G.fromDom(n.startContainer),relative:(n,o)=>Ra.getStart(n),exact:(n,o,r,a)=>n}),P3=p1.domRange,F3=p1.relative,Pc=p1.exact,Sr=e=>{const n=N3(e);return Ou(n)},cu=Da.create,Kg={domRange:P3,relative:F3,exact:Pc,exactFromRange:lw,getWin:Sr,range:cu},b1=(e,n)=>{const o=so(e);return o==="input"?Ra.after(e):$n(["br","img"],o)?n===0?Ra.before(e):Ra.after(e):Ra.on(e,n)},I3=(e,n)=>{const o=e.fold(Ra.before,b1,Ra.after),r=n.fold(Ra.before,b1,Ra.after);return Kg.relative(o,r)},Ut=(e,n,o,r)=>{const a=b1(e,n),u=b1(o,r);return Kg.relative(a,u)},L3=e=>e.match({domRange:n=>{const o=G.fromDom(n.startContainer),r=G.fromDom(n.endContainer);return Ut(o,n.startOffset,r,n.endOffset)},relative:I3,exact:Ut}),v1=(e,n)=>{const r=(n||document).createDocumentFragment();return ve(e,a=>{r.appendChild(a.dom)}),G.fromDom(r)},yv=e=>{const n=Kg.getWin(e).dom,o=(a,u,f,p)=>hv(n,a,u,f,p),r=L3(e);return bv(n,r).match({ltr:o,rtl:o})},uw=(e,n,o)=>Cd(e,n,o),H3=(e,n,o)=>{const r=Ou(G.fromDom(o));return uw(r.dom,e,n).map(a=>{const u=o.createRange();return u.setStart(a.start.dom,a.soffset),u.setEnd(a.finish.dom,a.foffset),u}).getOrUndefined()},y1=(e,n)=>Se(e)&&Se(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,z3=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},V3=(e,n,o)=>z3(e,n,o)!==null,x_=(e,n,o)=>V3(e,n,r=>r.nodeName===o),dw=(e,n)=>As(e)&&!V3(e,n,$c),Cv=(e,n,o)=>{const r=n.parentNode;if(r){const a=new jt(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=a[o?"prev":"next"]();)if(go(u))return!0}return!1},mw=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},S_=(e,n)=>{let o=n;for(;o&&o!==e;){if(Qn(o))return!0;o=o.parentNode}return!1},fw=(e,n,o,r,a)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),p=a.parentNode;let y,x;if(!p)return R.none();const _=e.getParent(p,e.isBlock)||u;if(r&&go(a)&&n&&e.isEmpty(_))return R.some(le(p,e.nodeIndex(a)));const M=new jt(a,_);for(;x=M[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||dw(x,u))return R.none();if(ke(x)&&x.data.length>0)return x_(x,u,"A")?R.none():R.some(le(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return R.none();y=x}return Ca(y)?R.none():o&&y?R.some(le(y,0)):R.none()},C1=(e,n,o,r)=>{const a=e.getRoot();let u,f=!1,p=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const x=Ue(p)&&y===p.childNodes.length,_=e.schema.getNonEmptyElements();let M=o;if(As(p))return R.none();if(Ue(p)&&y>p.childNodes.length-1&&(M=!1),zf(p)&&(p=a,y=0),p===a){if(M&&(u=p.childNodes[y>0?y-1:0],u&&(As(u)||_[u.nodeName]||Ya(u))))return R.none();if(p.hasChildNodes()){if(y=Math.min(!M&&y>0?y-1:y,p.childNodes.length-1),p=p.childNodes[y],y=ke(p)&&x?p.data.length:0,!n&&p===a.lastChild&&Ya(p)||S_(a,p)||As(p))return R.none();if(p.hasChildNodes()&&!Ya(p)){u=p;const B=new jt(p,a);do{if(Qn(u)||As(u)){f=!1;break}if(ke(u)&&u.data.length>0){y=M?0:u.data.length,p=u,f=!0;break}if(_[u.nodeName.toLowerCase()]&&!ot(u)){y=e.nodeIndex(u),p=u.parentNode,M||y++,f=!0;break}}while(u=M?B.next():B.prev())}}}return n&&(ke(p)&&y===0&&fw(e,x,n,!0,p).each(B=>{p=B.container(),y=B.offset(),f=!0}),Ue(p)&&(u=p.childNodes[y],u||(u=p.childNodes[y-1]),u&&go(u)&&!mw(u,"A")&&!Cv(e,u,!1)&&!Cv(e,u,!0)&&fw(e,x,n,!0,u).each(B=>{p=B.container(),y=B.offset(),f=!0}))),M&&!n&&ke(p)&&y===p.data.length&&fw(e,x,n,!1,p).each(B=>{p=B.container(),y=B.offset(),f=!0}),f&&p?R.some(le(p,y)):R.none()},wv=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),a=le.fromRangeStart(n);return C1(e,o,!0,r).each(u=>{(!o||!le.isAbove(a,u))&&r.setStart(u.container(),u.offset())}),o||C1(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),y1(n,r)?R.none():R.some(r)},w1=(e,n)=>e.splitText(n),x1=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,a=e.endOffset;if(n===r&&ke(n)){if(o>0&&o<n.data.length)if(r=w1(n,o),n=r.previousSibling,a>o){a=a-o;const u=w1(r,a).previousSibling;n=r=u,a=u.data.length,o=0}else a=0}else if(ke(n)&&o>0&&o<n.data.length&&(n=w1(n,o),o=0),ke(r)&&a>0&&a<r.data.length){const u=w1(r,a).previousSibling;r=u,a=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:a}},st=e=>({walk:(a,u)=>Ug(e,a,u),split:x1,normalize:a=>wv(e,a).fold(pn,u=>(a.setStart(u.startContainer,u.startOffset),a.setEnd(u.endContainer,u.endOffset),!0))});st.compareRanges=y1,st.getCaretRangeFromPoint=H3,st.getSelectedNode=dg,st.getNode=Yi;const gw=((e,n)=>{const o=(p,y)=>{if(!kc(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const x=p.dom;Ga(x)&&(x.style[e]=y+"px")},r=p=>{const y=n(p);if(y<=0||y===null){const x=Pi(p,e);return parseFloat(x)||0}return y},a=r,u=(p,y)=>oo(y,(x,_)=>{const M=Pi(p,_),B=M===void 0?0:parseInt(M,10);return isNaN(B)?x:x+B},0);return{set:o,get:r,getOuter:a,aggregate:u,max:(p,y,x)=>{const _=u(p,x);return y>_?y-_:0}}})("height",e=>{const n=e.dom;return $l(e)?n.getBoundingClientRect().height:n.offsetHeight}),hw=e=>gw.get(e),xd=()=>G.fromDom(document),pw=(e,n)=>e.view(n).fold(Oe([]),r=>{const a=e.owner(r),u=pw(e,a);return[r].concat(u)}),Z3=(e,n)=>{const o=n.owner(e);return pw(n,o)};var Sv=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?R.none():R.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(G.fromDom)},owner:e=>Ni(e)});const W3=e=>{const n=xd(),o=zr(n),r=Z3(e,Sv),a=Ft(e),u=fa(r,(f,p)=>{const y=Ft(p);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return Lf(u.left+a.left+o.left,u.top+a.top+o.top)},kv=e=>so(e)==="textarea",S1=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),Ev=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},vw=(e,n)=>{const o=ws(e);if(o.length===0||kv(e))return{element:e,offset:n};if(n<o.length&&!kv(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return kv(r)?{element:e,offset:n}:so(r)==="img"?{element:r,offset:1}:Ro(r)?{element:r,offset:ac(r).length}:{element:r,offset:ws(r).length}}},yw=(e,n)=>{const o=ro(e),r=hw(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},j3=(e,n)=>{const o=vw(e,n),r=G.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Ye+"</span>");return qn(o.element,r),yw(r,()=>un(r))},Cw=e=>yw(G.fromDom(e),dt),ww=(e,n,o,r)=>{Sd(e,(a,u)=>cn(e,n,o,r),o)},xw=(e,n,o,r,a)=>{const u={elm:r.element.dom,alignToTop:a};if(S1(e,u))return;const f=zr(n).top;o(n,f,r,a),Ev(e,u)},cn=(e,n,o,r)=>{const a=G.fromDom(e.getBody()),u=G.fromDom(e.getDoc());xs(a);const f=j3(G.fromDom(o.startContainer),o.startOffset);xw(e,u,n,f,r),f.cleanup()},Sw=(e,n,o,r)=>{const a=G.fromDom(e.getDoc());xw(e,a,o,Cw(n),r)},Sd=(e,n,o)=>{const r=o.startContainer,a=o.startOffset,u=o.endContainer,f=o.endOffset;n(G.fromDom(r),G.fromDom(u));const p=e.dom.createRng();p.setStart(r,a),p.setEnd(u,f),e.selection.setRng(o)},Ba=(e,n,o,r)=>{const a=e.pos;if(o)Yd(a.left,a.top,r);else{const u=a.top-n+e.height;Yd(a.left,u,r)}},k1=(e,n,o,r,a)=>{const u=o+n,f=r.pos.top,p=r.bottom,y=p-f>=o;f<n?Ba(r,o,a!==!1,e):f>u?Ba(r,o,y?a!==!1:a===!0,e):p>u&&!y&&Ba(r,o,a===!0,e)},kr=(e,n,o,r)=>{const a=Ou(e).dom.innerHeight;k1(e,n,a,o,r)},Xg=(e,n,o,r)=>{const a=Ou(e).dom.innerHeight;k1(e,n,a,o,r);const u=W3(o.element),f=gy(window);u.top<f.y?Jd(o.element,r!==!1):u.top>f.bottom&&Jd(o.element,r===!0)},Yg=(e,n,o)=>ww(e,kr,n,o),E1=(e,n,o)=>Sw(e,n,kr,o),kd=(e,n,o)=>ww(e,Xg,n,o),Av=(e,n,o)=>Sw(e,n,Xg,o),G3=(e,n,o)=>{(e.inline?E1:Av)(e,n,o)},Jg=(e,n,o)=>{(e.inline?Yg:kd)(e,n,o)},kw=e=>e.dom.focus(),Zt=e=>{const n=qa(e).dom;return e.dom===n.activeElement},Fc=(e=xd())=>R.from(e.dom.activeElement).map(G.fromDom),Um=e=>Fc(qa(e)).filter(n=>e.dom.contains(n.dom)),l=(e,n)=>{const o=Ro(n)?ac(n).length:ws(n).length+1;return e>o?o:e<0?0:e},m=e=>Kg.range(e.start,l(e.soffset,e.start),e.finish,l(e.foffset,e.finish)),h=(e,n)=>!Bu(n.dom)&&(tr(e,n)||vn(e,n)),v=e=>n=>h(e,n.start)&&h(e,n.finish),w=e=>e.inline,k=e=>Kg.range(G.fromDom(e.startContainer),e.startOffset,G.fromDom(e.endContainer),e.endOffset),D=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?R.none():R.from(n.getRangeAt(0))).map(k)},F=e=>{const n=Ou(e);return D(n.dom).filter(v(e))},L=(e,n)=>R.from(n).filter(v(e)).map(m),W=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),R.some(n)}catch{return R.none()}},Q=e=>{const n=w(e)?F(G.fromDom(e.getBody())):R.none();e.bookmark=n.isSome()?n:e.bookmark},ye=e=>(e.bookmark?e.bookmark:R.none()).bind(o=>L(G.fromDom(e.getBody()),o)).bind(W),Be=e=>{ye(e).each(n=>e.selection.setRng(n))},me={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},Ne=(e,n)=>(kc(n)||(n=0),setTimeout(e,n)),ge=(e,n)=>(kc(n)||(n=0),setInterval(e,n)),He={setEditorTimeout:(e,n,o)=>Ne(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=ge(()=>{e.removed?clearInterval(r):n()},o);return r}},gt=e=>e.type==="nodechange"&&e.selectionChange,Et=(e,n)=>{const o=()=>{n.throttle()};yn.DOM.bind(document,"mouseup",o),e.on("remove",()=>{yn.DOM.unbind(document,"mouseup",o)})},Ln=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},Ds=(e,n)=>{Ln(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{gt(o)||Q(e)})},Co=e=>{const n=_p(()=>{Q(e)},0);e.on("init",()=>{e.inline&&Et(e,n),Ds(e,n)}),e.on("remove",()=>{n.cancel()})};let ps;const di=yn.DOM,Qg=e=>Ue(e)&&me.isEditorUIElement(e),A1=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Ed=(e,n)=>{const o=fC(e);return di.getParent(n,a=>Qg(a)||(o?e.dom.is(a,o):!1))!==null},Cn=e=>{try{const n=qa(G.fromDom(e.getElement()));return Fc(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},ar=(e,n)=>{const o=n.editor;Co(o),o.on("focusin",()=>{const r=e.focusedEditor;r!==o&&(r&&r.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:r}),o.focus(!0))}),o.on("focusout",()=>{He.setEditorTimeout(o,()=>{const r=e.focusedEditor;!Ed(o,Cn(o))&&r===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),ps||(ps=r=>{const a=e.activeEditor;a&&iy(r).each(u=>{const f=u;f.ownerDocument===document&&f!==document.body&&!Ed(a,f)&&e.focusedEditor===a&&(a.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},di.bind(document,"focusin",ps))},Rs=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&ps&&(di.unbind(document,"focusin",ps),ps=null)},aa=e=>{e.on("AddEditor",Ce(ar,e)),e.on("RemoveEditor",Ce(Rs,e))},bc=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),Wm=e=>e.collapsed?R.from(Yi(e.startContainer,e.startOffset)).map(G.fromDom):R.none(),ir=(e,n)=>Wm(n).bind(o=>dp(o)?R.some(o):tr(e,o)?R.none():R.some(e)),eh=(e,n)=>{ir(G.fromDom(e.getBody()),n).bind(o=>Po(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},au=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},Ma=e=>Zt(e)||Um(e).isSome(),Bs=e=>Se(e.iframeElement)&&Zt(G.fromDom(e.iframeElement)),q3=e=>{const n=e.getBody();return n&&Ma(G.fromDom(n))},K3=e=>{const n=qa(G.fromDom(e.getElement()));return Fc(n).filter(o=>!A1(o.dom)&&Ed(e,o.dom)).isSome()},Ad=e=>e.inline?q3(e):Bs(e),X3=e=>Ad(e)||K3(e),Y3=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),Se(e.bookmark)&&!Ad(e)&&ye(e).each(u=>{e.selection.setRng(u),r=u});const a=bc(e,n.getNode());if(a&&e.dom.isChildOf(a,o)){au(a),eh(e,r),th(e);return}e.inline||(ln.browser.isOpera()||au(o),e.getWin().focus()),(ln.browser.isFirefox()||e.inline)&&(au(o),eh(e,r)),th(e)},th=e=>e.editorManager.setActive(e),J3=(e,n)=>{e.removed||(n?th(e):Y3(e))},jm=(e,n,o,r,a)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return R.from(u).map(G.fromDom).map(p=>!r||!n.collapsed?Ff(p,a(p,f)).getOr(p):p).bind(p=>Nn(p)?R.some(p):Ec(p).filter(Nn)).map(p=>p.dom).getOr(e)},Tv=(e,n,o=!1)=>jm(e,n,!0,o,(r,a)=>Math.min(Du(r),a)),Q3=(e,n,o=!1)=>jm(e,n,!1,o,(r,a)=>a>0?a-1:a),k_=(e,n)=>{const o=e;for(;e&&ke(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},E_=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const a=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-a<2&&o.hasChildNodes()&&(f=o.childNodes[a]),ke(o)&&ke(r)&&(o.length===a?o=k_(o.nextSibling,!0):o=o.parentNode,u===0?r=k_(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const p=ke(f)?f.parentNode:f;return Ue(p)?p:e},A_=(e,n,o,r)=>{const a=[],u=e.getRoot(),f=e.getParent(o||Tv(u,n,n.collapsed),e.isBlock),p=e.getParent(r||Q3(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&a.push(f),f&&p&&f!==p){let y=f;const x=new jt(f,u);for(;(y=x.next())&&y!==p;)e.isBlock(y)&&a.push(y)}return p&&f!==p&&p!==u&&a.push(p),a},C6=(e,n,o)=>R.from(n).bind(r=>R.from(r.parentNode).map(a=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(a,u),f.setEnd(a,u+1),o&&(sv(e,f,r,!0),sv(e,f,r,!1)),f})),e4=(e,n)=>Jt(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),w6=e=>so(e)==="img"?1:Li(e).fold(()=>ws(e).length,n=>n.length),x6=e=>Li(e).filter(n=>n.trim().length!==0||n.indexOf(Vo)>-1).isSome(),S6=["img","br"],_v=e=>x6(e)||$n(S6,so(e)),k6=e=>ak(e,_v),E6=e=>t4(e,_v),t4=(e,n)=>{const o=r=>{const a=ws(r);for(let u=a.length-1;u>=0;u--){const f=a[u];if(n(f))return R.some(f);const p=o(f);if(p.isSome())return p}return R.none()};return o(e)},T_="[data-mce-autocompleter]",__=(e,n)=>{if(n4(G.fromDom(e.getBody())).isNone()){const o=G.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());zo(o,G.fromDom(n.extractContents())),n.insertNode(o.dom),Ec(o).each(r=>r.dom.normalize()),E6(o).map(r=>{e.selection.setCursorLocation(r.dom,w6(r))})}},O_=e=>Mu(e,T_),n4=e=>Il(e,T_),A6=(e,n)=>n4(n).each(o=>{const r=e.selection.getBookmark();Is(o),e.selection.moveToBookmark(r)}),T6={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ew=(e,n,o)=>{const r=o?"lastChild":"firstChild",a=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[a];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[a],u)return u}},_6=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Hu(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},Ov=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class Gr{constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(n,o){const r=new Gr(n,T6[n]||1);return o&&En(o,(a,u)=>{r.attr(u,a)}),r}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!X(n))return Se(n)&&En(n,(u,f)=>{r.attr(f,u)}),r;const a=r.attributes;if(a){if(o!==void 0){if(o===null){if(n in a.map){delete a.map[n];let u=a.length;for(;u--;)if(a[u].name===n)return a.splice(u,1),r}return r}if(n in a.map){let u=a.length;for(;u--;)if(a[u].name===n){a[u].value=o;break}}else a.push({name:n,value:o});return a.map[n]=o,r}return a.map[n]}}clone(){const n=this,o=new Gr(n.name,n.type),r=n.attributes;if(r){const a=[];a.map={};for(let u=0,f=r.length;u<f;u++){const p=r[u];p.name!=="id"&&(a[a.length]={name:p.name,value:p.value},a.map[p.name]=p.value)}o.attributes=a}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,a=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):a&&(a.next=r),o.lastChild===n?(o.lastChild=a,a&&(a.next=null)):r&&(r.prev=a),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const a=o.parent||this;return r?(o===a.firstChild?a.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===a.lastChild?a.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=a,n}getAll(n){const o=this,r=[];for(let a=o.firstChild;a;a=Ew(a,o))a.name===n&&r.push(a);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let a=n.firstChild;a;a=Ew(a,n))o.push(a);let r=o.length;for(;r--;){const a=o[r];a.parent=a.firstChild=a.lastChild=a.next=a.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var a;const u=this;let f=u.firstChild;if(Ov(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||Ov(f))return!1}if(f.type===8||f.type===3&&!_6(f)||f.type===3&&f.parent&&o[f.parent.name]&&Hu((a=f.value)!==null&&a!==void 0?a:"")||r&&r(f))return!1}while(f=Ew(f,u));return!0}walk(n){return Ew(this,null,n)}}const D_=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),o4=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&D_(r,o)){const a=r.indexOf("[endif]",o);return r.indexOf(">",a)}else if(n){const a=r.indexOf(">",o);return a!==-1?a:r.length}else{const a=/--!?>/g;a.lastIndex=o;const u=a.exec(e);return u?u.index+u[0].length:r.length}},R_=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,a=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,p=o;for(;f!==0;)for(r.lastIndex=p;;){const y=r.exec(n);if(y===null)return p;if(y[1]==="!"){Ho(y[2],"--")?p=o4(n,!1,y.index+3):p=o4(n,!0,y.index+1);break}else{a.lastIndex=r.lastIndex;const x=a.exec(n);if(te(x)||x.index!==r.lastIndex)continue;y[1]==="/"?f-=1:Pt(u,y[2])||(f+=1),p=r.lastIndex+x[0].length;break}}return p},O6=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},B_=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let a=O6(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(a);){const p=o.lastIndex,y=f[0].length;let x;u[f[1]]?x=p:x=R_(r,a,p),a=a.substring(0,p-y)+a.substring(x),o.lastIndex=p-y}return Es(a)},D6=B_,R6=(e,n)=>{const o=Un(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s|\xA0|<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},B6=(e,n)=>{const o=e.getDoc(),r=qa(G.fromDom(e.getBody())),a=G.fromTag("div",o);Mo(a,"data-mce-bogus","all"),Nb(a,{position:"fixed",left:"-9999999px",top:"0"}),rp(a,n.innerHTML);const u=ee(a,"[data-mce-bogus]");ve(u,y=>{is(y,"data-mce-bogus")==="all"?un(y):Pu(y)?(qn(y,G.fromText(Iu)),un(y)):Is(y)});const f=Ml(r);zo(f,a);const p=Es(a.dom.innerText);return un(a),p},M6=(e,n,o)=>{let r;return n.format==="raw"?r=we.trim(D6(e.serializer,o.innerHTML)):n.format==="text"?r=B6(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=R6(e,e.serializer.serialize(o,n)),n.format!=="text"&&!nn(G.fromDom(o))&&X(r)?we.trim(r):r},$6=(e,n)=>R.from(e.getBody()).fold(Oe(n.format==="tree"?new Gr("body",11):""),o=>M6(e,n,o)),M_=we.makeMap,$_=e=>{const n=[];e=e||{};const o=e.indent,r=M_(e.indent_before||""),a=M_(e.indent_after||""),u=uc.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(p,y,x)=>{if(o&&r[p]&&n.length>0){const _=n[n.length-1];_.length>0&&_!==`
`&&n.push(`
`)}if(n.push("<",p),y)for(let _=0,M=y.length;_<M;_++){const B=y[_];n.push(" ",B.name,'="',u(B.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&a[p]&&n.length>0){const _=n[n.length-1];_.length>0&&_!==`
`&&n.push(`
`)}},end:p=>{let y;n.push("</",p,">"),o&&a[p]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(p,y)=>{p.length>0&&(n[n.length]=y?p:u(p))},cdata:p=>{n.push("<![CDATA[",p,"]]>")},comment:p=>{n.push("<!--",p,"-->")},pi:(p,y)=>{y?n.push("<?",p," ",u(y),"?>"):n.push("<?",p,"?>"),o&&n.push(`
`)},doctype:p=>{n.push("<!DOCTYPE",p,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},Gm=(e={},n=Rc())=>{const o=$_(e);return e.validate="validate"in e?e.validate:!0,{serialize:a=>{const u=e.validate,f={3:y=>{var x;o.text((x=y.value)!==null&&x!==void 0?x:"",y.raw)},8:y=>{var x;o.comment((x=y.value)!==null&&x!==void 0?x:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var x;o.doctype((x=y.value)!==null&&x!==void 0?x:"")},4:y=>{var x;o.cdata((x=y.value)!==null&&x!==void 0?x:"")},11:y=>{let x=y;if(x=x.firstChild)do p(x);while(x=x.next)}};o.reset();const p=y=>{var x;const _=f[y.type];if(_)_(y);else{const M=y.name,B=M in n.getVoidElements();let H=y.attributes;if(u&&H&&H.length>1){const V=[];V.map={};const I=n.getElementRule(y.name);if(I){for(let Z=0,U=I.attributesOrder.length;Z<U;Z++){const K=I.attributesOrder[Z];if(K in H.map){const J=H.map[K];V.map[K]=J,V.push({name:K,value:J})}}for(let Z=0,U=H.length;Z<U;Z++){const K=H[Z].name;if(!(K in V.map)){const J=H.map[K];V.map[K]=J,V.push({name:K,value:J})}}H=V}}if(o.start(M,H,B),!B){let V=y.firstChild;if(V){(M==="pre"||M==="textarea")&&V.type===3&&((x=V.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do p(V);while(V=V.next)}o.end(M)}}};return a.type===1&&!e.inner?p(a):a.type===3?f[3](a):f[11](a),o.getContent()}}},N_=new Set;ve(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{N_.add(n)});const P_=["font","text-decoration","text-emphasis"],T1=(e,n)=>gn(e.parseStyle(e.getAttrib(n,"style"))),F_=e=>N_.has(e),I_=(e,n)=>vu(T1(e,n),o=>!F_(o)),N6=e=>mt(e,n=>Yt(P_,o=>Ho(n,o))),P6=(e,n,o)=>{const r=T1(e,n),a=T1(e,o),u=f=>{var p,y;const x=(p=e.getStyle(n,f))!==null&&p!==void 0?p:"",_=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return ha(x)&&ha(_)&&x!==_};return Yt(r,f=>{const p=y=>Yt(y,x=>x===f);if(!p(a)&&p(P_)){const y=N6(a);return Yt(y,u)}else return u(f)})},L_=(e,n,o)=>R.from(o.container()).filter(ke).exists(r=>{const a=e?0:-1;return n(r.data.charAt(o.offset()+a))}),s4=Ce(L_,!0,Fg),r4=Ce(L_,!1,Fg),F6=e=>{const n=e.container();return ke(n)&&(n.data.length===0||Xb(n.data)&&gd.isBookmarkNode(n.parentNode))},Td=(e,n)=>o=>Z0(e?0:-1,o).filter(n).isSome(),H_=e=>vy(e)&&Pi(G.fromDom(e),"display")==="block",c4=e=>Qn(e)&&!rk(e),z_=Td(!0,H_),I6=Td(!1,H_),Dv=Td(!0,Ss),Rv=Td(!1,Ss),V_=Td(!0,Ya),Z_=Td(!1,Ya),qm=Td(!0,c4),Km=Td(!1,c4),L6=e=>e.slice(0,-1),H6=(e,n,o)=>tr(n,e)?L6(sy(e,r=>o(r)||vn(r,n))):[],U_=(e,n)=>H6(e,n,pn),_d=(e,n)=>[e].concat(U_(e,n)),a4=(e,n,o)=>q0(e,n,o,F6),W_=(e,n)=>Ko(_d(G.fromDom(n.container()),e),xa),j_=(e,n,o)=>a4(e,n.dom,o).forall(r=>W_(n,o).fold(()=>!Mc(r,o,n.dom),a=>!Mc(r,o,n.dom)&&tr(a,G.fromDom(r.container())))),G_=(e,n,o)=>W_(n,o).fold(()=>a4(e,n.dom,o).forall(r=>!Mc(r,o,n.dom)),r=>a4(e,r.dom,o).isNone()),i4=Ce(G_,!1),q_=Ce(G_,!0),z6=Ce(j_,!1),V6=Ce(j_,!0),rt=e=>Gp(e).exists(Pu),Bv=(e,n,o)=>{const r=mt(_d(G.fromDom(o.container()),n),xa),a=Tr(r).getOr(n);return $r(e,a.dom,o).filter(rt)},Aw=(e,n)=>Gp(n).exists(Pu)||Bv(!0,e,n).isSome(),l4=(e,n)=>i3(n).exists(Pu)||Bv(!1,e,n).isSome(),u4=Ce(Bv,!1),Z6=Ce(Bv,!0),K_=e=>le.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),X_=(e,n)=>{const o=mt(_d(G.fromDom(n.container()),e),xa);return Tr(o).getOr(e)},Y_=(e,n)=>K_(n)?r4(n):r4(n)||gc(X_(e,n).dom,n).exists(r4),J_=(e,n)=>K_(n)?s4(n):s4(n)||Cr(X_(e,n).dom,n).exists(s4),Tw=e=>$n(["pre","pre-wrap"],e),_w=e=>Gp(e).bind(n=>wa(n,Nn)).exists(n=>Tw(Pi(n,"white-space"))),Y9=(e,n)=>gc(e.dom,n).isNone(),U6=(e,n)=>Cr(e.dom,n).isNone(),Dt=(e,n)=>Y9(e,n)||U6(e,n)||i4(e,n)||q_(e,n)||l4(e,n)||Aw(e,n),W6=e=>Se(e)&&Qn(e)&&DC(e),Lt=(e,n)=>o=>W6(new jt(o,e)[n]()),Q_=(e,n)=>{const o=Cr(e.dom,n).getOr(n),r=Lt(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},J9=(e,n)=>{const o=gc(e.dom,n).getOr(n),r=Lt(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},Q9=(e,n)=>_w(n)?!1:Dt(e,n)||Y_(e,n)||J_(e,n),Mv=(e,n)=>_w(n)?!1:i4(e,n)||z6(e,n)||l4(e,n)||Y_(e,n)||J9(e,n),ez=e=>{const n=e.container(),o=e.offset();return ke(n)&&o<n.data.length?le(n,o+1):e},Ow=(e,n)=>_w(n)?!1:q_(e,n)||V6(e,n)||Aw(e,n)||J_(e,n)||Q_(e,n),d4=(e,n)=>Mv(e,n)||Ow(e,ez(n)),eO=(e,n)=>Pg(e.charAt(n)),ht=(e,n)=>Fg(e.charAt(n)),j6=e=>{const n=e.container();return ke(n)&&Ns(n.data,Vo)},G6=e=>{const n=e.split("");return Jt(n,(o,r)=>Pg(o)&&r>0&&r<n.length-1&&e1(n[r-1])&&e1(n[r+1])?" ":o).join("")},tO=(e,n,o)=>{const r=n.data,a=le(n,0);return!o&&eO(r,0)&&!d4(e,a)?(n.data=" "+r.slice(1),!0):o&&ht(r,0)&&Mv(e,a)?(n.data=Vo+r.slice(1),!0):!1},$v=e=>{const n=e.data,o=G6(n);return o!==n?(e.data=o,!0):!1},m4=(e,n,o)=>{const r=n.data,a=le(n,r.length-1);return!o&&eO(r,r.length-1)&&!d4(e,a)?(n.data=r.slice(0,-1)+" ",!0):o&&ht(r,r.length-1)&&Ow(e,a)?(n.data=r.slice(0,-1)+Vo,!0):!1},q6=(e,n)=>{const o=n.container();if(!ke(o))return R.none();if(j6(n)){const r=tO(e,o,!1)||$v(o)||m4(e,o,!1);return Vt(r,n)}else if(d4(e,n)){const r=tO(e,o,!0)||m4(e,o,!0);return Vt(r,n)}else return R.none()},K6=e=>{const n=G.fromDom(e.getBody());e.selection.isCollapsed()&&q6(n,le.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},nO=(e,n,o)=>{if(o===0)return;const r=G.fromDom(e),a=ho(r,xa).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&Ow(a,le(e,e.data.length)),p=n===0&&Mv(a,le(e,0));e.replaceData(n,o,cm(u,4,p,f))},Nv=(e,n)=>{const o=e.data.slice(n),r=o.length-XS(o).length;nO(e,n,r)},f4=(e,n)=>{const o=e.data.slice(0,n),r=o.length-Ef(o).length;nO(e,n-r,r)},oO=(e,n,o,r=!0)=>{const a=Ef(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),un(G.fromDom(f)),o&&Nv(u,a),u},tz=(e,n)=>{const o=e.container(),r=e.offset();return!le.isTextPosition(e)&&o===n.parentNode&&r>le.before(n).offset()},X6=(e,n)=>tz(n,e)?le(n.container(),n.offset()-1):n,Y6=e=>ke(e)?le(e,0):le.before(e),J6=e=>ke(e)?le(e,e.data.length):le.after(e),sO=e=>Br(e.previousSibling)?R.some(J6(e.previousSibling)):e.previousSibling?hc(e.previousSibling):R.none(),g4=e=>Br(e.nextSibling)?R.some(Y6(e.nextSibling)):e.nextSibling?Po(e.nextSibling):R.none(),Q6=(e,n)=>R.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>gc(e,le.before(o))).orThunk(()=>Cr(e,le.after(n))),Qt=(e,n)=>Cr(e,le.after(n)).orThunk(()=>gc(e,le.before(n))),rO=(e,n)=>sO(n).orThunk(()=>g4(n)).orThunk(()=>Q6(e,n)),Dw=(e,n)=>g4(n).orThunk(()=>sO(n)).orThunk(()=>Qt(e,n)),cO=(e,n,o)=>e?Dw(n,o):rO(n,o),aO=(e,n,o)=>cO(e,n,o).map(Ce(X6,o)),h4=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},iO=e=>n=>n.dom===e,lO=(e,n)=>n&&Pt(e.schema.getBlockElements(),so(n)),eN=e=>{if($o(e)){const n=G.fromHtml('<br data-mce-bogus="1">');return Jn(e),zo(e,n),R.some(le.before(n.dom))}else return R.none()},uO=(e,n,o)=>{const r=nc(e).filter(Ro),a=Pf(e).filter(Ro);return un(e),Ab(r,a,n,(u,f,p)=>{const y=u.dom,x=f.dom,_=y.data.length;return oO(y,x,o),p.container()===x?le(y,_):p}).orThunk(()=>(o&&(r.each(u=>f4(u.dom,u.dom.length)),a.each(u=>Nv(u.dom,0))),n))},tN=(e,n)=>Pt(e.schema.getTextInlineElements(),so(n)),nh=(e,n,o,r=!0)=>{const a=aO(n,e.getBody(),o.dom),u=ho(o,Ce(lO,e),iO(e.getBody())),f=uO(o,a,tN(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(eN).fold(()=>{r&&h4(e,n,f)},p=>{r&&h4(e,n,R.some(p))})},nN=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,oN=e=>nN.test(e),oh=(e,n)=>Jc(G.fromDom(n),uC(e)),sN=e=>{var n;return yn.DOM.getStyle(e,"direction",!0)==="rtl"||oN((n=e.textContent)!==null&&n!==void 0?n:"")},rN=(e,n,o)=>mt(yn.DOM.getParents(o.container(),"*",n),e),Xm=(e,n,o)=>{const r=rN(e,n,o);return R.from(r[r.length-1])},p4=(e,n,o)=>{const r=Oa(n,e),a=Oa(o,e);return Se(r)&&r===a},b4=e=>mp(e)||fp(e),$a=(e,n)=>{const o=n.container(),r=n.offset();return e?nm(o)?ke(o.nextSibling)?le(o.nextSibling,0):le.after(o):mp(n)?le(o,r+1):n:nm(o)?ke(o.previousSibling)?le(o.previousSibling,o.previousSibling.data.length):le.before(o):fp(n)?le(o,r-1):n},dO=Ce($a,!0),mO=Ce($a,!1),fO=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},cN=e=>{e.execCommand("delete")},gO=e=>fO(e,"Delete"),aN=e=>fO(e,"ForwardDelete"),iN=e=>n=>Ol(Ec(n),e,vn),hO=e=>Fi(e)||cc(e),Rw=(e,n)=>tr(e,n)?wa(n,hO,iN(e)):R.none(),v4=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},sh=(e,n,o)=>Fs(Po(o),hc(o),(r,a)=>{const u=$a(!0,r),f=$a(!1,a),p=$a(!1,n);return e?Cr(o,p).exists(y=>y.isEqual(f)&&n.isEqual(u)):gc(o,p).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),pO=e=>(tk(e)?nc(e):np(e)).bind(pO).orThunk(()=>R.some(e)),y4=(e,n,o,r=!0)=>{var a;n.deleteContents();const u=pO(o).getOr(o),f=G.fromDom((a=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&a!==void 0?a:o.dom);if(f.dom===e.getBody()?v4(e,r):$o(f)&&(Hi(f),r&&e.selection.setCursorLocation(f.dom,0)),!vn(o,f)){const p=Ol(Ec(f),o)?[]:ry(f);ve(p.concat(ws(o)),y=>{!vn(y,f)&&!tr(y,f)&&$o(y)&&un(y)})}},lN=e=>n=>vn(e,n),C4=e=>ee(e,"td,th"),bO=(e,n)=>{const o=x=>Ws(G.fromDom(x),n),r=o(e.startContainer),a=o(e.endContainer),u=r.isSome(),f=a.isSome(),p=Fs(r,a,vn).getOr(!1);return{startTable:r,endTable:a,isStartInTable:u,isEndInTable:f,isSameTable:p,isMultiTable:!p&&u&&f}},Bw=(e,n)=>({start:e,end:n}),vO=(e,n,o)=>({rng:e,table:n,cells:o}),_1=ci.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),lr=(e,n)=>Mu(G.fromDom(e),"td,th",n),yO=e=>!vn(e.start,e.end),CO=(e,n)=>Ws(e.start,n).bind(o=>Ws(e.end,n).bind(r=>Vt(vn(o,r),o))),uN=(e,n)=>!yO(e)&&CO(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),dN=(e,n)=>{const o=lr(e.startContainer,n),r=lr(e.endContainer,n);return Fs(o,r,Bw)},mN=e=>n=>Ws(n,e).bind(o=>Ua(C4(o)).map(r=>Bw(n,r))),rh=e=>n=>Ws(n,e).bind(o=>Tr(C4(o)).map(r=>Bw(r,n))),w4=e=>n=>CO(n,e).map(o=>vO(n,o,C4(o))),wO=(e,n,o,r)=>{if(o.collapsed||!e.forall(yO))return R.none();if(n.isSameTable){const a=e.bind(w4(r));return R.some({start:a,end:a})}else{const a=lr(o.startContainer,r),u=lr(o.endContainer,r),f=a.bind(mN(r)).bind(w4(r)),p=u.bind(rh(r)).bind(w4(r));return R.some({start:f,end:p})}},wo=(e,n)=>kl(e,o=>vn(o,n)),O1=e=>Fs(wo(e.cells,e.rng.start),wo(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),nz=(e,n,o)=>e.exists(r=>uN(r,o)&&s1(r.start,n)),qr=(e,n)=>{const{startTable:o,endTable:r}=n,a=e.cloneRange();return o.each(u=>a.setStartAfter(u.dom)),r.each(u=>a.setEndBefore(u.dom)),a},Pn=(e,n,o,r)=>wO(e,n,o,r).bind(({start:a,end:u})=>a.or(u)).bind(a=>{const{isSameTable:u}=n,f=O1(a).getOr([]);if(u&&a.cells.length===f.length)return R.some(_1.fullTable(a.table));if(f.length>0){if(u)return R.some(_1.partialTable(f,R.none()));{const p=qr(o,n);return R.some(_1.partialTable(f,R.some({...n,rng:p})))}}else return R.none()}),mi=(e,n,o,r)=>wO(e,n,o,r).bind(({start:a,end:u})=>{const f=a.bind(O1).getOr([]),p=u.bind(O1).getOr([]);if(f.length>0&&p.length>0){const y=qr(o,n);return R.some(_1.multiTable(f,p,y))}else return R.none()}),fN=(e,n)=>{const o=lN(e),r=dN(n,o),a=bO(n,o);return nz(r,n,o)?r.map(u=>_1.singleCellTable(n,u.start)):a.isMultiTable?mi(r,a,n,o):Pn(r,a,n,o)},x4=e=>ve(e,n=>{ls(n,"contenteditable"),Hi(n)}),S4=(e,n)=>R.from(e.dom.getParent(n,e.dom.isBlock)).map(G.fromDom),k4=(e,n,o)=>{o.each(r=>{n?un(r):(Hi(r),e.selection.setCursorLocation(r.dom,0))})},Mw=(e,n,o,r)=>{const a=o.cloneRange();r?(a.setStart(o.startContainer,o.startOffset),a.setEndAfter(n.dom.lastChild)):(a.setStartBefore(n.dom.firstChild),a.setEnd(o.endContainer,o.endOffset)),Pv(e,a,n,!1).each(u=>u())},E4=e=>{const n=eu(e),o=G.fromDom(e.selection.getNode());Rr(o.dom)&&$o(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&Yt(n,r=>vn(r,o))&&Mo(o,"data-mce-selected","1")},xO=(e,n,o)=>R.some(()=>{const r=e.selection.getRng(),a=o.bind(({rng:u,isStartInTable:f})=>{const p=S4(e,f?u.endContainer:u.startContainer);u.deleteContents(),k4(e,f,p.filter($o));const y=f?n[0]:n[n.length-1];return Mw(e,y,r,f),$o(y)?R.none():R.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);x4(a),E4(e)}),gN=(e,n,o,r)=>R.some(()=>{const a=e.selection.getRng(),u=n[0],f=o[o.length-1];Mw(e,u,a,!0),Mw(e,f,a,!1);const p=$o(u)?n:n.slice(1),y=$o(f)?o:o.slice(0,-1);x4(p.concat(y)),r.deleteContents(),E4(e)}),Pv=(e,n,o,r=!0)=>R.some(()=>{y4(e,n,o,r)}),SO=(e,n)=>R.some(()=>nh(e,!1,n)),rl=(e,n,o)=>fN(n,o).bind(r=>r.fold(Ce(Pv,e),Ce(SO,e),Ce(xO,e),Ce(gN,e))),hN=(e,n)=>Nw(e,n),pN=(e,n,o,r)=>A4(n,r).fold(()=>rl(e,n,o),a=>hN(e,a)),oz=(e,n,o)=>{const r=G.fromDom(e.getBody()),a=e.selection.getRng();return o.length!==0?xO(e,o,R.none()):pN(e,r,a,n)},$w=(e,n)=>Ko(_d(n,e),hr),A4=(e,n)=>Ko(_d(n,e),Df("caption")),Fv=(e,n,o,r,a)=>Bg(o,e.getBody(),a).bind(u=>$w(n,G.fromDom(u.getNode())).bind(f=>vn(f,r)?R.none():R.some(dt))),Nw=(e,n)=>R.some(()=>{Hi(n),e.selection.setCursorLocation(n.dom,0)}),D1=(e,n,o,r)=>Po(e.dom).bind(a=>hc(e.dom).map(u=>n?o.isEqual(a)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(a))).getOr(!0),Na=(e,n)=>Nw(e,n),Iv=(e,n,o)=>A4(e,G.fromDom(o.getNode())).fold(()=>R.some(dt),r=>Vt(!vn(r,n),dt)),Fn=(e,n,o,r,a)=>Bg(o,e.getBody(),a).fold(()=>R.some(dt),u=>D1(r,o,a,u)?Na(e,r):Iv(n,r,u)),Lv=(e,n,o,r)=>{const a=le.fromRangeStart(e.selection.getRng());return $w(o,r).bind(u=>$o(u)?Nw(e,u):Fv(e,o,n,u,a))},kO=(e,n,o,r)=>{const a=le.fromRangeStart(e.selection.getRng());return $o(r)?Nw(e,r):Fn(e,o,n,r,a)},T4=(e,n)=>e?V_(n):Z_(n),_4=(e,n)=>{const o=le.fromRangeStart(e.selection.getRng());return T4(n,o)||$r(n,e.getBody(),o).exists(r=>T4(n,r))},O4=(e,n,o)=>{const r=G.fromDom(e.getBody());return A4(r,o).fold(()=>Lv(e,n,r,o).orThunk(()=>Vt(_4(e,n),dt)),a=>kO(e,n,r,a))},Hv=(e,n)=>{const o=G.fromDom(e.selection.getStart(!0)),r=eu(e);return e.selection.isCollapsed()&&r.length===0?O4(e,n,o):oz(e,o,r)},Od=(e,n)=>{let o=n;for(;o&&o!==e;){if(_c(o)||Qn(o))return o;o=o.parentNode}return null},Pw=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],D4=we.each,Fw=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const p=x=>{const _={};return D4(n.getAttribs(x),M=>{const B=M.nodeName.toLowerCase();B!=="style"&&!a(B)&&(_[B]=n.getAttrib(x,B))}),_},y=(x,_)=>{for(const M in x)if(Pt(x,M)){const B=_[M];if(dr(B)||x[M]!==B)return!1;delete _[M]}for(const M in _)if(Pt(_,M))return!1;return!0};return Ue(u)&&Ue(f)&&(!y(p(u),p(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!cr(u)&&!cr(f)},a=u=>Yt(Pw,f=>Ho(u,f))||o.has(u);return{compare:r,isAttributeInternal:a}},EO=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},R4=(e,n,o,r)=>{const a=o.name;for(let u=0,f=e.length;u<f;u++){const p=e[u];if(p.name===a){const y=r.nodes[a];y?y.nodes.push(o):r.nodes[a]={filter:p,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const p=n[u],y=p.name;if(y in o.attributes.map){const x=r.attributes[y];x?x.nodes.push(o):r.attributes[y]={filter:p,nodes:[o]}}}},AO=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&EO(o,a=>{R4(e,n,a,r)}),r},B4=(e,n)=>{const o=(r,a)=>{En(r,u=>{const f=Js(u.nodes);ve(u.filter.callbacks,p=>{for(let y=f.length-1;y>=0;y--){const x=f[y];(!(a?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||en(x.parent))&&f.splice(y,1)}f.length>0&&p(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},ch=(e,n,o,r={})=>{const a=AO(e,n,o);B4(a,r)},Iw=(e,n,o,r)=>{if(n.insert&&o[r.name]){const a=new Gr("br",1);a.attr("data-mce-bogus","1"),r.empty().append(a)}else r.empty().append(new Gr("#text",3)).value=Vo},M4=e=>{var n;return TO(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===Vo},TO=(e,n)=>{const o=e==null?void 0:e.firstChild;return Se(o)&&o===e.lastChild&&o.name===n},bN=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},R1=(e,n,o,r)=>r.isEmpty(n,o,a=>bN(e,a)),_O=(e,n)=>Se(e)&&(e.name in n||e.name==="br"),Lw=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const a of r)o&&!n.isValidChild(o.name,a.name)&&Lw(a,n,o);e.unwrap()}},B1=(e,n,o=dt)=>{const r=n.getTextBlockElements(),a=n.getNonEmptyElements(),u=n.getWhitespaceElements(),f=we.makeMap("tr,td,th,tbody,thead,tfoot,table"),p=new Set;for(let y=0;y<e.length;y++){const x=e[y];let _,M,B;if(!x.parent||p.has(x))continue;if(r[x.name]&&x.parent.name==="li"){let V=x.next;for(;V&&r[V.name];){V.name="li",p.add(V),x.parent.insert(V,x.parent);V=V.next}x.unwrap();continue}const H=[x];for(_=x.parent;_&&!n.isValidChild(_.name,x.name)&&!f[_.name];_=_.parent)H.push(_);if(_&&H.length>1)if(n.isValidChild(_.name,x.name)){H.reverse(),M=H[0].clone(),o(M);let V=M;for(let I=0;I<H.length-1;I++){n.isValidChild(V.name,H[I].name)?(B=H[I].clone(),o(B),V.append(B)):B=V;for(let Z=H[I].firstChild;Z&&Z!==H[I+1];){const U=Z.next;B.append(Z),Z=U}V=B}R1(n,a,u,M)?_.insert(x,H[0],!0):(_.insert(M,H[0],!0),_.insert(x,M)),_=H[0],(R1(n,a,u,_)||TO(_,"br"))&&_.empty().remove()}else Lw(x,n);else if(x.parent){if(x.name==="li"){let V=x.prev;if(V&&(V.name==="ul"||V.name==="ol")){V.append(x);continue}if(V=x.next,V&&(V.name==="ul"||V.name==="ol")&&V.firstChild){V.insert(x,V.firstChild,!0);continue}const I=new Gr("ul",1);o(I),x.wrap(I);continue}if(n.isValidChild(x.parent.name,"div")&&n.isValidChild("div",x.name)){const V=new Gr("div",1);o(V),x.wrap(V)}else Lw(x,n)}}},OO=(e,n,o,r)=>{const a=document.createRange();return a.setStart(e,n),a.setEnd(o,r),a},DO=e=>{const n=le.fromRangeStart(e),o=le.fromRangeEnd(e),r=e.commonAncestorContainer;return $r(!1,r,o).map(a=>!Mc(n,o,r)&&Mc(n,a,r)?OO(n.container(),n.offset(),a.container(),a.offset()):e).getOr(e)},Hw=e=>e.collapsed?e:DO(e),RO=e=>Se(e.firstChild)&&e.firstChild===e.lastChild,BO=e=>e.name==="br"||e.value===Vo,MO=(e,n)=>e.getBlockElements()[n.name]&&RO(n)&&BO(n.firstChild),$O=(e,n)=>{const o=e.getNonEmptyElements();return Se(n)&&(n.isEmpty(o)||MO(e,n))},NO=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),$O(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},PO=e=>{var n,o;const r=e.firstChild,a=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),a&&a.id==="mce_marker"&&((o=a.parentNode)===null||o===void 0||o.removeChild(a)),e},FO=(e,n,o)=>{const r=n.serialize(o),a=e.createFragment(r);return PO(a)},IO=e=>{var n;return mt((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},LO=e=>e.data===Vo||go(e),HO=e=>Se(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&LO(e.firstChild),zO=e=>!e.firstChild||HO(e),$4=e=>e.length>0&&zO(e[e.length-1])?e.slice(0,-1):e,M1=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},VO=(e,n)=>!!M1(e,n),ZO=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},zw=(e,n)=>{const o=le.before(e),a=ii(n).next(o);return a?a.toRange():null},Vw=(e,n)=>{const o=le.after(e),a=ii(n).prev(o);return a?a.toRange():null},zv=(e,n,o,r)=>{const a=ZO(e,r),u=e.parentNode;return u&&(u.insertBefore(a[0],e),we.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(a[1],e),u.removeChild(e)),Vw(n[n.length-1],o)},N4=(e,n,o)=>{const r=e.parentNode;return r&&we.each(n,a=>{r.insertBefore(a,e)}),zw(e,o)},UO=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),Vw(n[0],o)),Vv=(e,n,o,r)=>{const a=FO(n,e,r),u=M1(n,o.startContainer),f=$4(IO(a.firstChild)),p=1,y=2,x=n.getRoot(),_=M=>{const B=le.fromRangeStart(o),H=ii(n.getRoot()),V=M===p?H.prev(B):H.next(B),I=V==null?void 0:V.getNode();return I?M1(n,I)!==u:!0};return u?_(p)?N4(u,f,x):_(y)?UO(u,f,x,n):zv(u,f,x,o):null},P4=["pre"],F4=(e,n,o,r)=>{var a;const u=n.firstChild,f=n.lastChild,p=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===p,x=$n(P4,u.name);if(y&&x){const _=u.attr("contenteditable")!=="false",M=((a=e.getParent(o,e.isBlock))===null||a===void 0?void 0:a.nodeName.toLowerCase())===u.name,B=R.from(Od(r,o)).forall(_c);return _&&M&&B}else return!1},ah=Rr,WO=(e,n,o)=>{if(Se(o)){const r=e.getParent(n.endContainer,ah);return o===r&&s1(G.fromDom(o),n)}else return!1},vN=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const a=o.firstChild,u=o.lastChild;!a||a===u&&a.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},jO=(e,n)=>{R.from(e.getParent(n,"td,th")).map(G.fromDom).each(Kb)},GO=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const a=e.getBody(),u=Fw(e);we.each(r.select("*[data-mce-fragment]"),f=>{if(Se(o[f.nodeName.toLowerCase()])&&I_(r,f)){for(let y=f.parentElement;Se(y)&&y!==a&&!P6(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},yN=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},sz=e=>{we.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},CN=e=>!!e.getAttribute("data-mce-fragment"),I4=(e,n)=>Se(n)&&!e.schema.getVoidElements()[n.nodeName],cl=(e,n)=>{var o,r,a;let u;const f=e.dom,p=e.selection;if(!n)return;p.scrollIntoView(n);const y=Od(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),p.select(y);return}let x=f.createRng();const _=n.previousSibling;if(ke(_)){x.setStart(_,(r=(o=_.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const H=n.nextSibling;ke(H)&&(_.appendData(H.data),(a=H.parentNode)===null||a===void 0||a.removeChild(H))}else x.setStartBefore(n),x.setEndBefore(n);const M=H=>{let V=le.fromRangeStart(H);return V=ii(e.getBody()).next(V),V==null?void 0:V.toRange()},B=f.getParent(n,f.isBlock);f.remove(n),B&&f.isEmpty(B)&&(Jn(G.fromDom(B)),x.setStart(B,0),x.setEnd(B,0),!ah(B)&&!CN(B)&&(u=M(x))?(x=u,f.remove(B)):f.add(B,f.create("br",{"data-mce-bogus":"1"}))),p.setRng(x)},L4=e=>{const n=e.dom,o=Hw(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,ah);WO(n,o,r)?Pv(e,o,G.fromDom(r)):e.getDoc().execCommand("Delete",!1)},Zw=(e,n,o)=>{var r,a,u;const f=e.selection,p=e.dom,y=e.parser,x=o.merge,_=Gm({validate:!0},e.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,M);let B=f.getRng();const H=B.startContainer,V=e.getBody();H===V&&f.isCollapsed()&&p.isBlock(V.firstChild)&&I4(e,V.firstChild)&&p.isEmpty(V.firstChild)&&(B=p.createRng(),B.setStart(V.firstChild,0),B.setEnd(V.firstChild,0),f.setRng(B)),f.isCollapsed()||L4(e);const I=f.getNode(),Z={context:I.nodeName.toLowerCase(),data:o.data,insert:!0},U=y.parse(n,Z);if(o.paste===!0&&NO(e.schema,U)&&VO(p,I))return B=Vv(_,p,f.getRng(),U),B&&f.setRng(B),n;o.paste===!0&&F4(p,U,I,e.getBody())&&((r=U.firstChild)===null||r===void 0||r.unwrap()),yN(U);let K=U.lastChild;if(K&&K.attr("id")==="mce_marker"){const J=K;for(K=K.prev;K;K=K.walk(!0))if(K.type===3||!p.isBlock(K.name)){K.parent&&e.schema.isValidChild(K.parent.name,"span")&&K.parent.insert(J,K,K.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(I),!Z.invalid)n=_.serialize(U),vN(e,n,I);else{e.selection.setContent(M);let J=f.getNode(),de;const he=e.getBody();for(zf(J)?J=de=he:de=J;de&&de!==he;)J=de,de=de.parentNode;n=J===he?he.innerHTML:p.getOuterHTML(J);const De=y.parse(n);for(let Re=De;Re;Re=Re.walk())if(Re.attr("id")==="mce_marker"){Re.replace(U);break}const be=U.children(),ae=(u=(a=U.parent)===null||a===void 0?void 0:a.name)!==null&&u!==void 0?u:De.name;U.unwrap();const ie=mt(be,Re=>!e.schema.isValidChild(ae,Re.name));B1(ie,e.schema),ch(y.getNodeFilters(),y.getAttributeFilters(),De),n=_.serialize(De),J===he?p.setHTML(he,n):p.setOuterHTML(J,n)}return GO(e,x),cl(e,p.get("mce_marker")),sz(e.getBody()),jO(p,f.getStart()),n},$1=e=>e instanceof Gr,wN=e=>{Ad(e)&&Po(e.getBody()).each(n=>{const o=n.getNode(),r=Ya(o)?Po(o).getOr(n):n;e.selection.setRng(r.toRange())})},Uw=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&wN(e)},xN=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const a='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+a+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+a+"</li>");const u=Un(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=a,o=e.dom.createHTML(u,Vs(e),o)):o||(o=a),Uw(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=Gm({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const a=nn(G.fromDom(n))?o:we.trim(o);return Uw(e,a,r.no_selection),{content:a,html:a}}},qO=(e,n,o,r)=>{ch(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const a=Gm({validate:!1},e.schema).serialize(o),u=nn(G.fromDom(n))?a:we.trim(a);return Uw(e,u,r.no_selection),{content:o,html:u}},H4=(e,n,o)=>R.from(e.getBody()).map(r=>$1(n)?qO(e,r,n,o):xN(e,r,n,o)).getOr({content:n,html:$1(o.content)?"":o.content}),SN=(e,n)=>up(e,n).isSome(),z4=e=>q(e)?e:pn,kN=(e,n,o)=>{let r=e.dom;const a=z4(o);for(;r.parentNode;){r=r.parentNode;const u=G.fromDom(r),f=n(u);if(f.isSome())return f;if(a(u))break}return R.none()},ih=(e,n,o)=>{const r=n(e),a=z4(o);return r.orThunk(()=>a(e)?R.none():kN(e,n,a))},Ww=a1,KO=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let a=0;a<r.length;a++){const u=r[a];if(xr(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},jw=(e,n,o,r,a)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,p=>KO(e,p,o)?!0:p.parentNode===u||!!iu(e,p,o,r,!0));return!!iu(e,f,o,r,a)},Gw=(e,n,o)=>ns(o)&&Ww(n,o.inline)||sa(o)&&Ww(n,o.block)?!0:xr(o)?Ue(n)&&e.is(n,o.selector):!1,XO=(e,n,o,r,a,u)=>{const f=o[r],p=r==="attributes";if(q(o.onmatch))return o.onmatch(n,o,r);if(f){if(Wh(f)){for(let y=0;y<f.length;y++)if(p?e.getAttrib(n,f[y]):li(e,n,f[y]))return!0}else for(const y in f)if(Pt(f,y)){const x=p?e.getAttrib(n,y):li(e,n,y),_=ou(f[y],u),M=en(x)||Ao(x);if(M&&en(_))continue;if(a&&M&&!o.exact||(!a||o.exact)&&!Ww(x,It(_,y)))return!1}}return!0},iu=(e,n,o,r,a)=>{const u=e.formatter.get(o),f=e.dom;if(u&&Ue(n))for(let p=0;p<u.length;p++){const y=u[p];if(Gw(e.dom,n,y)&&XO(f,n,y,"attributes",a,r)&&XO(f,n,y,"styles",a,r)){const x=y.classes;if(x){for(let _=0;_<x.length;_++)if(!e.dom.hasClass(n,ou(x[_],r)))return}return y}}},V4=(e,n,o,r,a)=>{if(r)return jw(e,r,n,o,a);if(r=e.selection.getNode(),jw(e,r,n,o,a))return!0;const u=e.selection.getStart();return!!(u!==r&&jw(e,u,n,o,a))},EN=(e,n,o)=>{const r=[],a={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let p=0;p<n.length;p++){const y=n[p];!a[y]&&iu(e,f,y,o)&&(a[y]=!0,r.push(y))}},e.dom.getRoot()),r},YO=(e,n)=>{const o=a=>vn(a,G.fromDom(e.getBody())),r=(a,u)=>iu(e,a.dom,u)?R.some(u):R.none();return R.from(e.selection.getStart(!0)).bind(a=>ih(G.fromDom(a),u=>El(n,f=>r(u,f)),o)).getOrNull()},AN=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o){const a=e.selection.getStart(),u=ru(r,a);for(let f=o.length-1;f>=0;f--){const p=o[f];if(!xr(p))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],p.selector))return!0}}return!1},Z4=(e,n,o)=>oo(o,(r,a)=>{const u=Fm(e,a);return e.formatter.matchNode(n,a,{},u)?r.concat([a]):r},[]),fi=Ye,TN=(e,n)=>e.importNode(n,!0),_N=e=>{const n=[];let o=e;for(;o;){if(ke(o)&&o.data!==fi||o.childNodes.length>1)return[];Ue(o)&&n.push(o),o=o.firstChild}return n},Zv=e=>_N(e).length>0,U4=e=>{if(e){const n=new jt(e,e);for(let o=n.current();o;o=n.next())if(ke(o))return o}return null},qw=e=>{const n=G.fromTag("span");return Dr(n,{id:Xp,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&zo(n,G.fromText(fi)),n},ON=e=>{const n=U4(e);return n&&n.data.charAt(0)===fi&&n.deleteData(0,1),n},Kw=(e,n,o=!0)=>{const r=e.dom,a=e.selection;if(Zv(n))nh(e,!1,G.fromDom(n),o);else{const u=a.getRng(),f=r.getParent(n,r.isBlock),p=u.startContainer,y=u.startOffset,x=u.endContainer,_=u.endOffset,M=ON(n);r.remove(n,!0),p===M&&y>0&&u.setStart(M,y-1),x===M&&_>0&&u.setEnd(M,_-1),f&&r.isEmpty(f)&&Hi(G.fromDom(f)),a.setRng(u)}},W4=(e,n,o=!0)=>{const r=e.dom,a=e.selection;if(n)Kw(e,n,o);else if(n=Bm(e.getBody(),a.getStart()),!n)for(;n=r.get(Xp);)Kw(e,n,!1)},N1=(e,n,o)=>{var r,a;const u=e.dom,f=u.getParent(o,Ce(zg,e));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(es(G.fromDom(o)),u.isEmpty(o)?(a=o.parentNode)===null||a===void 0||a.replaceChild(n,o):u.insertAfter(n,o))},j4=(e,n)=>(e.appendChild(n),n),G4=(e,n)=>{var o;const r=fa(e,(u,f)=>j4(u,f.cloneNode(!1)),n),a=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return j4(r,a.createTextNode(fi))},JO=(e,n,o,r,a,u)=>{const f=e.formatter,p=e.dom,y=mt(gn(f.get()),M=>M!==r&&!Ns(M,"removeformat")),x=Z4(e,o,y);if(mt(x,M=>!ZC(e,M,r)).length>0){const M=o.cloneNode(!1);return p.add(n,M),f.remove(r,a,M,u),p.remove(M),R.some(M)}else return R.none()},Xw=(e,n,o)=>{let r;const a=e.selection,u=e.formatter.get(n);if(!u)return;const f=a.getRng();let p=f.startOffset;const x=f.startContainer.nodeValue;r=Bm(e.getBody(),a.getStart());const _=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&p>0&&p<x.length&&_.test(x.charAt(p))&&_.test(x.charAt(p-1))){const M=a.getBookmark();f.collapse(!0);let B=Lm(e,f,u);B=x1(B),e.formatter.apply(n,o,B),a.moveToBookmark(M)}else{let M=r?U4(r):null;(!r||(M==null?void 0:M.data)!==fi)&&(r=TN(e.getDoc(),qw(!0).dom),M=r.firstChild,f.insertNode(r),p=1),e.formatter.apply(n,o,r),a.setCursorLocation(M,p)}},QO=(e,n,o,r)=>{const a=e.dom,u=e.selection;let f=!1;const p=e.formatter.get(n);if(!p)return;const y=u.getRng(),x=y.startContainer,_=y.startOffset;let M=x;ke(x)&&(_!==x.data.length&&(f=!0),M=M.parentNode);const B=[];let H;for(;M;){if(iu(e,M,n,o,r)){H=M;break}M.nextSibling&&(f=!0),B.push(M),M=M.parentNode}if(!!H)if(f){const V=u.getBookmark();y.collapse(!0);let I=Lm(e,y,p,!0);I=x1(I),e.formatter.remove(n,o,I,r),u.moveToBookmark(V)}else{const V=Bm(e.getBody(),H),I=qw(!1).dom;N1(e,I,V!=null?V:H);const Z=JO(e,I,H,n,o,r),U=G4(B.concat(Z.toArray()),I);V&&Kw(e,V,!1),u.setCursorLocation(U,1),a.isEmpty(H)&&a.remove(H)}},DN=(e,n)=>{const o=e.selection,r=e.getBody();W4(e,null,!1),(n===8||n===46)&&o.isCollapsed()&&o.getStart().innerHTML===fi&&W4(e,Bm(r,o.getStart())),(n===37||n===39)&&W4(e,Bm(r,o.getStart()))},eD=e=>{e.on("mouseup keydown",n=>{DN(e,n.keyCode)})},RN=(e,n)=>{const o=qw(!1),r=G4(n,o.dom);return qn(G.fromDom(e),o),un(G.fromDom(e)),le(r,0)},BN=(e,n)=>{const o=e.schema.getTextInlineElements();return Pt(o,so(n))&&!$c(n.dom)&&!ya(n.dom)},Yw=e=>$c(e.dom)&&Zv(e.dom),P1={},Jw=Tc(["pre"]),MN=(e,n)=>{P1[e]||(P1[e]=[]),P1[e].push(n)},$N=(e,n)=>{Pt(P1,e)&&ve(P1[e],o=>{o(n)})};MN("pre",e=>{const n=e.selection.getRng(),o=a=>u=>{const f=u.previousSibling;return Jw(f)&&$n(a,f)},r=(a,u)=>{const f=G.fromDom(u),p=Ni(f).dom;un(f),St(G.fromDom(a),[G.fromTag("br",p),G.fromTag("br",p),...ws(f)])};if(!n.collapsed){const a=e.selection.getSelectedBlocks(),u=mt(mt(a,Jw),o(a));ve(u,f=>{r(f.previousSibling,f)})}});const q4=["fontWeight","fontStyle","color","fontSize","fontFamily"],K4=e=>hn(e.styles)&&Yt(gn(e.styles),n=>$n(q4,n)),tD=e=>Ko(e,n=>ns(n)&&n.inline==="span"&&K4(n)),nD=(e,n)=>{const o=e.get(n);return xn(o)?tD(o):R.none()},oD=(e,n)=>gc(n,le.fromRangeStart(e)).isNone(),sD=(e,n)=>Cr(n,le.fromRangeEnd(e)).exists(o=>!go(o.getNode())||Cr(n,o).isSome())===!1,Uv=e=>n=>Vb(n)&&e.getContentEditableParent(n)!=="false",Dd=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return oD(o,n[0])&&sD(o,n[0])?n:[];{const r=Tr(n).filter(f=>oD(o,f)).toArray(),a=Ua(n).filter(f=>sD(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(a)}},NN=e=>mt(Dd(e),Uv(e.dom)),Qw=e=>mt(e.getSelectedBlocks(),Uv(e.dom)),xo=we.each,Wv=e=>Ue(e)&&!cr(e)&&!$c(e)&&!ya(e),ex=(e,n)=>{for(let o=e;o;o=o[n]){if(ke(o)&&ha(o.data))return e;if(Ue(o)&&!cr(o))return o}return e},Rd=(e,n,o)=>{const r=Fw(e),a=Ue(n)&&tu(n),u=Ue(o)&&tu(o);if(a&&u){const f=ex(n,"previousSibling"),p=ex(o,"nextSibling");if(r.compare(f,p)){for(let y=f.nextSibling;y&&y!==p;){const x=y;y=y.nextSibling,f.appendChild(x)}return e.dom.remove(p),we.each(we.grep(p.childNodes),y=>{f.appendChild(y)}),f}}return o},rD=(e,n,o,r)=>{var a;if(r&&n.merge_siblings!==!1){const u=(a=Rd(e,cv(r),r))!==null&&a!==void 0?a:r;Rd(e,u,cv(u,!0))}},cD=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";xo(e.select(r,o),a=>{Wv(a)&&tu(a)&&xo(n.styles,(u,f)=>{e.setStyle(a,f,"")})})}},lh=(e,n,o)=>{xo(e.childNodes,r=>{Wv(r)&&(n(r)&&o(r),r.hasChildNodes()&&lh(r,n,o))})},PN=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},aD=(e,n)=>o=>!!(o&&li(e,o,n)),uh=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),PN(e,r)},F1=ci.generate([{keep:[]},{rename:["name"]},{removed:[]}]),dh=/^(src|href|style)$/,X4=we.each,Bd=a1,al=e=>/^(TR|TH|TD)$/.test(e.nodeName),jv=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),tx=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],a=n[o?"startOffset":"endOffset"];if(Ue(r)){const u=r.childNodes.length-1;!o&&a&&a--,r=r.childNodes[a>u?u:a]}return ke(r)&&o&&a>=r.data.length&&(r=new jt(r,e.getBody()).next()||r),ke(r)&&!o&&a===0&&(r=new jt(r,e.getBody()).prev()||r),r},iD=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return al(e)&&r?e.nodeName==="TR"&&r[o]||r:e},Y4=(e,n,o,r)=>{var a;const u=e.create(o,r);return(a=n.parentNode)===null||a===void 0||a.insertBefore(u,n),u.appendChild(n),u},Gv=(e,n,o,r,a)=>{const u=G.fromDom(n),f=G.fromDom(e.create(r,a)),p=o?Bb(u):tp(u);return St(f,p),o?(qn(u,f),Ac(f,u)):(sc(u,f),zo(f,u)),f.dom},FN=(e,n)=>n.links&&e.nodeName==="A",gi=(e,n,o)=>{const r=n.parentNode;let a;const u=e.dom,f=Un(e);sa(o)&&r===u.getRoot()&&(!o.list_block||!Bd(n,o.list_block))&&ve(Js(n.childNodes),p=>{nu(e,f,p.nodeName.toLowerCase())?a?a.appendChild(p):(a=Y4(u,p,f),u.setAttribs(a,Vs(e))):a=null}),!(lv(o)&&!Bd(o.inline,n))&&u.remove(n,!0)},qv=(e,n,o)=>kc(e)?{name:n,value:null}:{name:e,value:ou(n,o)},J4=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},nx=(e,n,o,r,a)=>{let u=!1;X4(o.styles,(f,p)=>{const{name:y,value:x}=qv(p,f,r),_=It(x,y);(o.remove_similar||te(x)||!Ue(a)||Bd(li(e,a,y),_))&&e.setStyle(n,y,""),u=!0}),u&&J4(e,n)},Q4=(e,n,o)=>{n==="removeformat"?ve(Qw(e.selection),r=>{ve(q4,a=>e.dom.setStyle(r,a,"")),J4(e.dom,r)}):nD(e.formatter,n).each(r=>{ve(Qw(e.selection),a=>nx(e.dom,a,r,o,null))})},Ym=(e,n,o,r,a)=>{const u=e.dom,f=Fw(e);if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Gw(u,r,n)&&!FN(r,n))return F1.keep();const p=r,y=n.preserve_attributes;if(ns(n)&&n.remove==="all"&&xn(y)){const x=mt(u.getAttribs(p),_=>$n(y,_.name.toLowerCase()));if(u.removeAllAttribs(p),ve(x,_=>u.setAttrib(p,_.name,_.value)),x.length>0)return F1.rename("span")}if(n.remove!=="all"){nx(u,p,n,o,a),X4(n.attributes,(_,M)=>{const{name:B,value:H}=qv(M,_,o);if(n.remove_similar||te(H)||!Ue(a)||Bd(u.getAttrib(a,B),H)){if(B==="class"){const V=u.getAttrib(p,B);if(V){let I="";if(ve(V.split(/\s+/),Z=>{/mce\-\w+/.test(Z)&&(I+=(I?" ":"")+Z)}),I){u.setAttrib(p,B,I);return}}}if(dh.test(B)&&p.removeAttribute("data-mce-"+B),B==="style"&&Tc(["li"])(p)&&u.getStyle(p,"list-style-type")==="none"){p.removeAttribute(B),u.setStyle(p,"list-style-type","none");return}B==="class"&&p.removeAttribute("className"),p.removeAttribute(B)}}),X4(n.classes,_=>{_=ou(_,o),(!Ue(a)||u.hasClass(a,_))&&u.removeClass(p,_)});const x=u.getAttribs(p);for(let _=0;_<x.length;_++){const M=x[_].nodeName;if(!f.isAttributeInternal(M))return F1.keep()}}return n.remove!=="none"?(gi(e,p,n),F1.removed()):F1.keep()},mh=(e,n,o,r,a)=>Ym(e,n,o,r,a).fold(pn,u=>(e.dom.rename(r,u),!0),Ae),IN=(e,n,o,r,a)=>{let u;return n.parentNode&&ve(ru(e.dom,n.parentNode).reverse(),f=>{if(!u&&Ue(f)&&f.id!=="_start"&&f.id!=="_end"){const p=iu(e,f,o,r,a);p&&p.split!==!1&&(u=f)}}),u},lD=(e,n,o,r)=>Ym(e,n,o,r,r).fold(Oe(r),a=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,a)),Oe(null)),LN=(e,n,o,r,a,u,f,p)=>{var y,x;let _,M;const B=e.dom;if(o){const H=o.parentNode;for(let V=r.parentNode;V&&V!==H;V=V.parentNode){let I=B.clone(V,!1);for(let Z=0;Z<n.length&&(I=lD(e,n[Z],p,I),I!==null);Z++);I&&(_&&I.appendChild(_),M||(M=I),_=I)}u&&(!f.mixed||!B.isBlock(o))&&(r=(y=B.split(o,r))!==null&&y!==void 0?y:r),_&&M&&((x=a.parentNode)===null||x===void 0||x.insertBefore(_,a),M.appendChild(a),ns(f)&&rD(e,f,p,_))}return r},uD=(e,n,o,r,a)=>{const u=e.formatter.get(n),f=u[0],p=e.dom,y=e.selection,x=I=>{const Z=IN(e,I,n,o,a);return LN(e,u,Z,I,I,!0,f,o)},_=I=>cr(I)&&Ue(I)&&(I.id==="_start"||I.id==="_end"),M=I=>Yt(u,Z=>mh(e,Z,o,I,I)),B=I=>{const Z=Js(I.childNodes),K=M(I)||Yt(u,he=>Gw(p,I,he)),J=I.parentNode;if(!K&&Se(J)&&Im(f)&&M(J),f.deep&&Z.length)for(let he=0;he<Z.length;he++)B(Z[he]);ve(["underline","line-through","overline"],he=>{Ue(I)&&e.dom.getStyle(I,"text-decoration")===he&&I.parentNode&&su(p,I.parentNode)===he&&mh(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:he}},void 0,I)})},H=I=>{const Z=p.get(I?"_start":"_end");if(Z){let U=Z[I?"firstChild":"lastChild"];return _(U)&&(U=U[I?"firstChild":"lastChild"]),ke(U)&&U.data.length===0&&(U=I?Z.previousSibling||Z.nextSibling:Z.nextSibling||Z.previousSibling),p.remove(Z,!0),U}else return null},V=I=>{let Z,U,K=Lm(e,I,u,I.collapsed);if(f.split){if(K=x1(K),Z=tx(e,K,!0),U=tx(e,K),Z!==U){if(Z=iD(Z,!0),U=iD(U,!1),jv(p,Z,U)){const de=R.from(Z.firstChild).getOr(Z);x(Gv(p,de,!0,"span",{id:"_start","data-mce-type":"bookmark"})),H(!0);return}if(jv(p,U,Z)){const de=R.from(U.lastChild).getOr(U);x(Gv(p,de,!1,"span",{id:"_end","data-mce-type":"bookmark"})),H(!1);return}Z=Y4(p,Z,"span",{id:"_start","data-mce-type":"bookmark"}),U=Y4(p,U,"span",{id:"_end","data-mce-type":"bookmark"});const J=p.createRng();J.setStartAfter(Z),J.setEndBefore(U),Ug(p,J,de=>{ve(de,he=>{!cr(he)&&!cr(he.parentNode)&&x(he)})}),x(Z),x(U),Z=H(!0),U=H()}else Z=U=x(Z);K.startContainer=Z.parentNode?Z.parentNode:Z,K.startOffset=p.nodeIndex(Z),K.endContainer=U.parentNode?U.parentNode:U,K.endOffset=p.nodeIndex(U)+1}Ug(p,K,J=>{ve(J,B)})};if(r){if(Nm(r)){const I=p.createRng();I.setStartBefore(r),I.setEndAfter(r),V(I)}else V(r);pd(e,n,r,o);return}!y.isCollapsed()||!ns(f)||eu(e).length?(r1(e,()=>rv(e,V),I=>ns(f)&&V4(e,n,o,I)),e.nodeChanged()):QO(e,n,o,a),Q4(e,n,o),pd(e,n,r,o)},dD=we.each,HN=(e,n,o,r)=>{const a=u=>{if(Ue(u)&&Ue(u.parentNode)&&tu(u)){const f=su(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(we.walk(r,a,"childNodes"),a(r))},Kv=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const a=aD(e,"fontSize");lh(r,u=>a(u)&&tu(u),uh(e,"backgroundColor",ou(n.styles.backgroundColor,o)))}},zN=(e,n,o,r)=>{if(ns(n)&&(n.inline==="sub"||n.inline==="sup")){const a=aD(e,"fontSize");lh(r,f=>a(f)&&tu(f),uh(e,"fontSize",""));const u=mt(e.select(n.inline==="sup"?"sub":"sup",r),tu);e.remove(u,!0)}},mD=(e,n,o,r)=>{dD(n,a=>{ns(a)&&dD(e.dom.select(a.inline,r),u=>{Wv(u)&&mh(e,a,o,u,a.exact?u:null)}),cD(e.dom,a,r)})},eE=(e,n,o,r,a)=>{const u=a.parentNode;iu(e,u,o,r)&&mh(e,n,r,a)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>iu(e,f,o,r)?(mh(e,n,r,a),!0):!1)},ox=we.each,fD=(e,n,o,r)=>{if(Cg(e)&&ns(n)&&o.parentNode){const a=rg(e.schema),u=SN(G.fromDom(o),f=>$c(f.dom));return Ir(a,r)&&$o(G.fromDom(o.parentNode),!1)&&!u}else return!1},tE=(e,n,o,r)=>{if(ox(o.styles,(a,u)=>{e.setStyle(n,u,ou(a,r))}),o.styles){const a=e.getAttrib(n,"style");a&&e.setAttrib(n,"data-mce-style",a)}},gD=(e,n,o,r)=>{const a=e.formatter.get(n),u=a[0],f=!r&&e.selection.isCollapsed(),p=e.dom,y=e.selection,x=(V,I=u)=>{q(I.onformat)&&I.onformat(V,I,o,r),tE(p,V,I,o),ox(I.attributes,(Z,U)=>{p.setAttrib(V,U,ou(Z,o))}),ox(I.classes,Z=>{const U=ou(Z,o);p.hasClass(V,U)||p.addClass(V,U)})},_=(V,I)=>{let Z=!1;return ox(V,U=>xr(U)?p.getContentEditable(I)==="false"&&!U.ceFalseOverride||Se(U.collapsed)&&U.collapsed!==f?!0:p.is(I,U.selector)&&!$c(I)?(x(I,U),Z=!0,!1):!0:!1),Z},M=V=>{if(X(V)){const I=p.create(V);return x(I),I}else return null},B=(V,I,Z)=>{const U=[];let K=!0;const J=u.inline||u.block,de=M(J),he=ae=>i1(u)&&iu(e,ae,n,o),De=(ae,ie,Re)=>{const Je=iv(u)&&zg(e,ae)&&nu(e,ie,J);return Re&&Je},be=(ae,ie,Re,Je)=>{const tt=ae.nodeName.toLowerCase(),kt=nu(e,J,tt)&&nu(e,ie,J),qt=!Z&&ke(ae)&&Xb(ae.data),fn=$c(ae),Dn=!ns(u)||!V.isBlock(ae);return(Re||Je)&&kt&&!qt&&!fn&&Dn};Ug(V,I,ae=>{let ie;const Re=Je=>{let tt=!1,kt=K,qt=!1;const fn=Je.nodeName.toLowerCase(),Dn=Je.parentNode,Ms=Dn.nodeName.toLowerCase(),_e=V.getContentEditable(Je);Se(_e)&&(kt=K,K=_e==="true",tt=!0,qt=VC(e,Je));const At=K&&!tt;if(go(Je)&&!fD(e,u,Je,Ms)){ie=null,sa(u)&&V.remove(Je);return}if(he(Je)){ie=null;return}if(De(fn,Ms,At)){const $t=V.rename(Je,J);x($t),U.push($t),ie=null;return}if(xr(u)){let $t=_(a,Je);if(!$t&&Se(Dn)&&Im(u)&&($t=_(a,Dn)),!ns(u)||$t){ie=null;return}}Se(de)&&be(Je,Ms,At,qt)?(ie||(ie=V.clone(de,!1),Dn.insertBefore(ie,Je),U.push(ie)),qt&&tt&&(K=kt),ie.appendChild(Je)):(ie=null,ve(Js(Je.childNodes),Re),tt&&(K=kt),ie=null)};ve(ae,Re)}),u.links===!0&&ve(U,ae=>{const ie=Re=>{Re.nodeName==="A"&&x(Re,u),ve(Js(Re.childNodes),ie)};ie(ae)}),ve(U,ae=>{const ie=tt=>{let kt=0;return ve(tt.childNodes,qt=>{!w_(qt)&&!cr(qt)&&kt++}),kt},Re=tt=>Ko(tt.childNodes,Pm).filter(qt=>V.getContentEditable(qt)!=="false"&&Gw(V,qt,u)).map(qt=>{const fn=V.clone(qt,!1);return x(fn),V.replace(fn,tt,!0),V.remove(qt,!0),fn}).getOr(tt),Je=ie(ae);if((U.length>1||!V.isBlock(ae))&&Je===0){V.remove(ae,!0);return}(ns(u)||sa(u)&&u.wrapper)&&(!u.exact&&Je===1&&(ae=Re(ae)),mD(e,a,o,ae),eE(e,u,n,o,ae),Kv(V,u,o,ae),HN(V,u,o,ae),zN(V,u,o,ae),rD(e,u,o,ae))})},H=Nm(r)?r:y.getNode();if(p.getContentEditable(H)==="false"&&!VC(e,H)){r=H,_(a,r),f1(e,n,r,o);return}if(u){if(r)if(Nm(r)){if(!_(a,r)){const V=p.createRng();V.setStartBefore(r),V.setEndAfter(r),B(p,Lm(e,V,a),!0)}}else B(p,r,!0);else!f||!ns(u)||eu(e).length?(y.setRng(Hw(y.getRng())),r1(e,()=>{rv(e,(V,I)=>{const Z=I?V:Lm(e,V,a);B(p,Z,!1)})},Ae),e.nodeChanged()):Xw(e,n,o),nD(e.formatter,n).each(V=>{ve(NN(e.selection),I=>tE(p,I,V,o))});$N(n,e)}f1(e,n,r,o)},hD=e=>Pt(e,"vars"),VN=(e,n)=>{e.set({}),n.on("NodeChange",o=>{yD(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=R.from(o.node).map(a=>Nm(a)?a:a.startContainer).bind(a=>Ue(a)?R.some(a):R.from(a.parentElement)).getOrThunk(()=>pD(n));yD(n,r,e.get())})},pD=e=>e.selection.getStart(),bD=(e,n,o,r,a)=>hb(n,p=>{const y=e.formatter.matchNode(p,o,a!=null?a:{},r);return!dr(y)},p=>KO(e,p,o)?!0:r?!1:Se(e.formatter.matchNode(p,o,a,!0))),vD=(e,n)=>{const o=n!=null?n:pD(e);return mt(ru(e.dom,o),r=>Ue(r)&&!ya(r))},yD=(e,n,o)=>{const r=vD(e,n);En(o,(a,u)=>{const f=p=>{const y=bD(e,r,u,p.similar,hD(p)?p.vars:void 0),x=y.isSome();if(p.state.get()!==x){p.state.set(x);const _=y.getOr(n);hD(p)?p.callback(x,{node:_,format:u,parents:r}):ve(p.callbacks,M=>M(x,{node:_,format:u,parents:r}))}};ve([a.withSimilar,a.withoutSimilar],f),ve(a.withVars,f)})},ZN=(e,n,o,r,a,u)=>{const f=n.get();ve(o.split(","),p=>{const y=Bn(f,p).getOrThunk(()=>{const _={withSimilar:{state:_o(!1),similar:!0,callbacks:[]},withoutSimilar:{state:_o(!1),similar:!1,callbacks:[]},withVars:[]};return f[p]=_,_}),x=()=>{const _=vD(e);return bD(e,_,p,a,u).isSome()};if(dr(u)){const _=a?y.withSimilar:y.withoutSimilar;_.callbacks.push(r),_.callbacks.length===1&&_.state.set(x())}else y.withVars.push({state:_o(x()),similar:a,vars:u,callback:r})}),n.set(f)},UN=(e,n,o)=>{const r=e.get();ve(n.split(","),a=>Bn(r,a).each(u=>{r[a]={withSimilar:{...u.withSimilar,callbacks:mt(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:mt(u.withoutSimilar.callbacks,f=>f!==o)},withVars:mt(u.withVars,f=>f.callback!==o)}})),e.set(r)},WN=(e,n,o,r,a,u)=>(ZN(e,n,o,r,a,u),{unbind:()=>UN(n,o,r)}),jN=(e,n,o,r)=>{const a=e.formatter.get(n);a&&(V4(e,n,o,r)&&(!("toggle"in a[0])||a[0].toggle)?uD(e,n,o,r):gD(e,n,o,r))};function fh(e){return fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fh(e)}function nE(e,n){return nE=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},nE(e,n)}function CD(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sx(e,n,o){return CD()?sx=Reflect.construct:sx=function(a,u,f){var p=[null];p.push.apply(p,u);var y=Function.bind.apply(a,p),x=new y;return f&&nE(x,f.prototype),x},sx.apply(null,arguments)}function vc(e){return GN(e)||qN(e)||KN(e)||wD()}function GN(e){if(Array.isArray(e))return oE(e)}function qN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function KN(e,n){if(!!e){if(typeof e=="string")return oE(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return oE(e,n)}}function oE(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function wD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var XN=Object.hasOwnProperty,xD=Object.setPrototypeOf,YN=Object.isFrozen,JN=Object.getPrototypeOf,QN=Object.getOwnPropertyDescriptor,Ic=Object.freeze,lu=Object.seal,eP=Object.create,SD=typeof Reflect<"u"&&Reflect,rx=SD.apply,Xv=SD.construct;rx||(rx=function(n,o,r){return n.apply(o,r)}),Ic||(Ic=function(n){return n}),lu||(lu=function(n){return n}),Xv||(Xv=function(n,o){return sx(n,vc(o))});var kD=il(Array.prototype.forEach),rz=il(Array.prototype.pop),Jm=il(Array.prototype.push),Yv=il(String.prototype.toLowerCase),Jv=il(String.prototype.match),hi=il(String.prototype.replace),ED=il(String.prototype.indexOf),cz=il(String.prototype.trim),Lc=il(RegExp.prototype.test),AD=tP(TypeError);function il(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return rx(e,n,r)}}function tP(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return Xv(e,o)}}function On(e,n){xD&&xD(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var a=Yv(r);a!==r&&(YN(n)||(n[o]=a),r=a)}e[r]=!0}return e}function gh(e){var n=eP(null),o;for(o in e)rx(XN,e,[o])&&(n[o]=e[o]);return n}function Qv(e,n){for(;e!==null;){var o=QN(e,n);if(o){if(o.get)return il(o.get);if(typeof o.value=="function")return il(o.value)}e=JN(e)}function r(a){return console.warn("fallback value for",a),null}return r}var TD=Ic(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),e2=Ic(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sE=Ic(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),cx=Ic(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ax=Ic(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),os=Ic(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nP=Ic(["#text"]),oP=Ic(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),_D=Ic(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),sP=Ic(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Hc=Ic(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ix=lu(/\{\{[\w\W]*|[\w\W]*\}\}/gm),t2=lu(/<%[\w\W]*|[\w\W]*%>/gm),n2=lu(/^data-[\-\w.\u00B7-\uFFFF]/),rP=lu(/^aria-[\-\w]+$/),cP=lu(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),o2=lu(/^(?:\w+script|data):/i),I1=lu(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),L1=lu(/^html$/i),aP=function(){return typeof window>"u"?null:window},rE=function(n,o){if(fh(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,a="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(a)&&(r=o.currentScript.getAttribute(a));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(p){return p}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function cE(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:aP(),n=function(ce){return cE(ce)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,a=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,p=e.Element,y=e.NodeFilter,x=e.NamedNodeMap,_=x===void 0?e.NamedNodeMap||e.MozNamedAttrMap:x,M=e.HTMLFormElement,B=e.DOMParser,H=e.trustedTypes,V=p.prototype,I=Qv(V,"cloneNode"),Z=Qv(V,"nextSibling"),U=Qv(V,"childNodes"),K=Qv(V,"parentNode");if(typeof u=="function"){var J=r.createElement("template");J.content&&J.content.ownerDocument&&(r=J.content.ownerDocument)}var de=rE(H,o),he=de?de.createHTML(""):"",De=r,be=De.implementation,ae=De.createNodeIterator,ie=De.createDocumentFragment,Re=De.getElementsByTagName,Je=o.importNode,tt={};try{tt=gh(r).documentMode?r.documentMode:{}}catch{}var kt={};n.isSupported=typeof K=="function"&&be&&typeof be.createHTMLDocument<"u"&&tt!==9;var qt=ix,fn=t2,Dn=n2,Ms=rP,_e=o2,At=I1,$t=cP,vt=null,Do=On({},[].concat(vc(TD),vc(e2),vc(sE),vc(ax),vc(nP))),je=null,yt=On({},[].concat(vc(oP),vc(_D),vc(sP),vc(Hc))),ut=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Pe=null,Nt=null,_t=!0,pt=!0,wt=!1,Sn=!1,An=!1,rs=!1,to=!1,Xn=!1,Go=!1,qs=!1,cs=!0,bl=!0,Va=!1,vl={},yl=null,Cl=On({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),wl=null,io=On({},["audio","video","img","source","image","track"]),Za=null,xl=On({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Lh="http://www.w3.org/1998/Math/MathML",Si="http://www.w3.org/2000/svg",Wc="http://www.w3.org/1999/xhtml",ur=Wc,da=!1,ma,hf=["application/xhtml+xml","text/html"],L2="text/html",Vd,hu=null,H2=r.createElement("form"),VS=function(ce){return ce instanceof RegExp||ce instanceof Function},z2=function(ce){hu&&hu===ce||((!ce||fh(ce)!=="object")&&(ce={}),ce=gh(ce),vt="ALLOWED_TAGS"in ce?On({},ce.ALLOWED_TAGS):Do,je="ALLOWED_ATTR"in ce?On({},ce.ALLOWED_ATTR):yt,Za="ADD_URI_SAFE_ATTR"in ce?On(gh(xl),ce.ADD_URI_SAFE_ATTR):xl,wl="ADD_DATA_URI_TAGS"in ce?On(gh(io),ce.ADD_DATA_URI_TAGS):io,yl="FORBID_CONTENTS"in ce?On({},ce.FORBID_CONTENTS):Cl,Pe="FORBID_TAGS"in ce?On({},ce.FORBID_TAGS):{},Nt="FORBID_ATTR"in ce?On({},ce.FORBID_ATTR):{},vl="USE_PROFILES"in ce?ce.USE_PROFILES:!1,_t=ce.ALLOW_ARIA_ATTR!==!1,pt=ce.ALLOW_DATA_ATTR!==!1,wt=ce.ALLOW_UNKNOWN_PROTOCOLS||!1,Sn=ce.SAFE_FOR_TEMPLATES||!1,An=ce.WHOLE_DOCUMENT||!1,Xn=ce.RETURN_DOM||!1,Go=ce.RETURN_DOM_FRAGMENT||!1,qs=ce.RETURN_TRUSTED_TYPE||!1,to=ce.FORCE_BODY||!1,cs=ce.SANITIZE_DOM!==!1,bl=ce.KEEP_CONTENT!==!1,Va=ce.IN_PLACE||!1,$t=ce.ALLOWED_URI_REGEXP||$t,ur=ce.NAMESPACE||Wc,ce.CUSTOM_ELEMENT_HANDLING&&VS(ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ut.tagNameCheck=ce.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&VS(ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ut.attributeNameCheck=ce.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ce.CUSTOM_ELEMENT_HANDLING&&typeof ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ut.allowCustomizedBuiltInElements=ce.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ma=hf.indexOf(ce.PARSER_MEDIA_TYPE)===-1?ma=L2:ma=ce.PARSER_MEDIA_TYPE,Vd=ma==="application/xhtml+xml"?function(Ge){return Ge}:Yv,Sn&&(pt=!1),Go&&(Xn=!0),vl&&(vt=On({},vc(nP)),je=[],vl.html===!0&&(On(vt,TD),On(je,oP)),vl.svg===!0&&(On(vt,e2),On(je,_D),On(je,Hc)),vl.svgFilters===!0&&(On(vt,sE),On(je,_D),On(je,Hc)),vl.mathMl===!0&&(On(vt,ax),On(je,sP),On(je,Hc))),ce.ADD_TAGS&&(vt===Do&&(vt=gh(vt)),On(vt,ce.ADD_TAGS)),ce.ADD_ATTR&&(je===yt&&(je=gh(je)),On(je,ce.ADD_ATTR)),ce.ADD_URI_SAFE_ATTR&&On(Za,ce.ADD_URI_SAFE_ATTR),ce.FORBID_CONTENTS&&(yl===Cl&&(yl=gh(yl)),On(yl,ce.FORBID_CONTENTS)),bl&&(vt["#text"]=!0),An&&On(vt,["html","head","body"]),vt.table&&(On(vt,["tbody"]),delete Pe.tbody),Ic&&Ic(ce),hu=ce)},ZS=On({},["mi","mo","mn","ms","mtext"]),US=On({},["foreignobject","desc","title","annotation-xml"]),pf=On({},["title","style","font","a","script"]),Hh=On({},e2);On(Hh,sE),On(Hh,cx);var ne=On({},ax);On(ne,os);var re=function(ce){var Ge=K(ce);(!Ge||!Ge.tagName)&&(Ge={namespaceURI:Wc,tagName:"template"});var bt=Yv(ce.tagName),lo=Yv(Ge.tagName);return ce.namespaceURI===Si?Ge.namespaceURI===Wc?bt==="svg":Ge.namespaceURI===Lh?bt==="svg"&&(lo==="annotation-xml"||ZS[lo]):Boolean(Hh[bt]):ce.namespaceURI===Lh?Ge.namespaceURI===Wc?bt==="math":Ge.namespaceURI===Si?bt==="math"&&US[lo]:Boolean(ne[bt]):ce.namespaceURI===Wc?Ge.namespaceURI===Si&&!US[lo]||Ge.namespaceURI===Lh&&!ZS[lo]?!1:!ne[bt]&&(pf[bt]||!Hh[bt]):!1},Ee=function(ce){Jm(n.removed,{element:ce});try{ce.parentNode.removeChild(ce)}catch{try{ce.outerHTML=he}catch{ce.remove()}}},xe=function(ce,Ge){try{Jm(n.removed,{attribute:Ge.getAttributeNode(ce),from:Ge})}catch{Jm(n.removed,{attribute:null,from:Ge})}if(Ge.removeAttribute(ce),ce==="is"&&!je[ce])if(Xn||Go)try{Ee(Ge)}catch{}else try{Ge.setAttribute(ce,"")}catch{}},et=function(ce){var Ge,bt;if(to)ce="<remove></remove>"+ce;else{var lo=Jv(ce,/^[\r\n\t ]+/);bt=lo&&lo[0]}ma==="application/xhtml+xml"&&(ce='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ce+"</body></html>");var jc=de?de.createHTML(ce):ce;if(ur===Wc)try{Ge=new B().parseFromString(jc,ma)}catch{}if(!Ge||!Ge.documentElement){Ge=be.createDocument(ur,"template",null);try{Ge.documentElement.innerHTML=da?"":jc}catch{}}var Xr=Ge.body||Ge.documentElement;return ce&&bt&&Xr.insertBefore(r.createTextNode(bt),Xr.childNodes[0]||null),ur===Wc?Re.call(Ge,An?"html":"body")[0]:An?Ge.documentElement:Xr},Kt=function(ce){return ae.call(ce.ownerDocument||ce,ce,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},jn=function(ce){return ce instanceof M&&(typeof ce.nodeName!="string"||typeof ce.textContent!="string"||typeof ce.removeChild!="function"||!(ce.attributes instanceof _)||typeof ce.removeAttribute!="function"||typeof ce.setAttribute!="function"||typeof ce.namespaceURI!="string"||typeof ce.insertBefore!="function")},Gn=function(ce){return fh(f)==="object"?ce instanceof f:ce&&fh(ce)==="object"&&typeof ce.nodeType=="number"&&typeof ce.nodeName=="string"},wc=function(ce,Ge,bt){!kt[ce]||kD(kt[ce],function(lo){lo.call(n,Ge,bt,hu)})},fb=function(ce){var Ge;if(wc("beforeSanitizeElements",ce,null),jn(ce)||Lc(/[\u0080-\uFFFF]/,ce.nodeName))return Ee(ce),!0;var bt=Vd(ce.nodeName);if(wc("uponSanitizeElement",ce,{tagName:bt,allowedTags:vt}),ce.hasChildNodes()&&!Gn(ce.firstElementChild)&&(!Gn(ce.content)||!Gn(ce.content.firstElementChild))&&Lc(/<[/\w]/g,ce.innerHTML)&&Lc(/<[/\w]/g,ce.textContent)||bt==="select"&&Lc(/<template/i,ce.innerHTML))return Ee(ce),!0;if(!vt[bt]||Pe[bt]){if(!Pe[bt]&&i_(bt)&&(ut.tagNameCheck instanceof RegExp&&Lc(ut.tagNameCheck,bt)||ut.tagNameCheck instanceof Function&&ut.tagNameCheck(bt)))return!1;if(bl&&!yl[bt]){var lo=K(ce)||ce.parentNode,jc=U(ce)||ce.childNodes;if(jc&&lo)for(var Xr=jc.length,xc=Xr-1;xc>=0;--xc)lo.insertBefore(I(jc[xc],!0),Z(ce))}return Ee(ce),!0}return ce instanceof p&&!re(ce)||(bt==="noscript"||bt==="noembed")&&Lc(/<\/no(script|embed)/i,ce.innerHTML)?(Ee(ce),!0):(Sn&&ce.nodeType===3&&(Ge=ce.textContent,Ge=hi(Ge,qt," "),Ge=hi(Ge,fn," "),ce.textContent!==Ge&&(Jm(n.removed,{element:ce.cloneNode()}),ce.textContent=Ge)),wc("afterSanitizeElements",ce,null),!1)},a_=function(ce,Ge,bt){if(cs&&(Ge==="id"||Ge==="name")&&(bt in r||bt in H2))return!1;if(!(pt&&!Nt[Ge]&&Lc(Dn,Ge))){if(!(_t&&Lc(Ms,Ge))){if(!je[Ge]||Nt[Ge]){if(!(i_(ce)&&(ut.tagNameCheck instanceof RegExp&&Lc(ut.tagNameCheck,ce)||ut.tagNameCheck instanceof Function&&ut.tagNameCheck(ce))&&(ut.attributeNameCheck instanceof RegExp&&Lc(ut.attributeNameCheck,Ge)||ut.attributeNameCheck instanceof Function&&ut.attributeNameCheck(Ge))||Ge==="is"&&ut.allowCustomizedBuiltInElements&&(ut.tagNameCheck instanceof RegExp&&Lc(ut.tagNameCheck,bt)||ut.tagNameCheck instanceof Function&&ut.tagNameCheck(bt))))return!1}else if(!Za[Ge]){if(!Lc($t,hi(bt,At,""))){if(!((Ge==="src"||Ge==="xlink:href"||Ge==="href")&&ce!=="script"&&ED(bt,"data:")===0&&wl[ce])){if(!(wt&&!Lc(_e,hi(bt,At,"")))){if(bt)return!1}}}}}}return!0},i_=function(ce){return ce.indexOf("-")>0},v6=function(ce){var Ge,bt,lo,jc;wc("beforeSanitizeAttributes",ce,null);var Xr=ce.attributes;if(!!Xr){var xc={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:je};for(jc=Xr.length;jc--;){Ge=Xr[jc];var l_=Ge,Er=l_.name,y6=l_.namespaceURI;bt=Er==="value"?Ge.value:cz(Ge.value),lo=Vd(Er);var j9=bt;if(xc.attrName=lo,xc.attrValue=bt,xc.keepAttr=!0,xc.forceKeepAttr=void 0,wc("uponSanitizeAttribute",ce,xc),bt=xc.attrValue,!xc.forceKeepAttr){if(!xc.keepAttr){xe(Er,ce);continue}if(Lc(/\/>/i,bt)){xe(Er,ce);continue}Sn&&(bt=hi(bt,qt," "),bt=hi(bt,fn," "));var G9=Vd(ce.nodeName);if(!a_(G9,lo,bt)){xe(Er,ce);continue}if(bt!==j9)try{y6?ce.setAttributeNS(y6,Er,bt):ce.setAttribute(Er,bt)}catch{xe(Er,ce)}}}wc("afterSanitizeAttributes",ce,null)}},W9=function Rt(ce){var Ge,bt=Kt(ce);for(wc("beforeSanitizeShadowDOM",ce,null);Ge=bt.nextNode();)wc("uponSanitizeShadowNode",Ge,null),!fb(Ge)&&(Ge.content instanceof a&&Rt(Ge.content),v6(Ge));wc("afterSanitizeShadowDOM",ce,null)};return n.sanitize=function(Rt,ce){var Ge,bt,lo,jc,Xr;if(da=!Rt,da&&(Rt="<!-->"),typeof Rt!="string"&&!Gn(Rt)){if(typeof Rt.toString!="function")throw AD("toString is not a function");if(Rt=Rt.toString(),typeof Rt!="string")throw AD("dirty is not a string, aborting")}if(!n.isSupported){if(fh(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Rt=="string")return e.toStaticHTML(Rt);if(Gn(Rt))return e.toStaticHTML(Rt.outerHTML)}return Rt}if(rs||z2(ce),n.removed=[],typeof Rt=="string"&&(Va=!1),Va){if(Rt.nodeName){var xc=Vd(Rt.nodeName);if(!vt[xc]||Pe[xc])throw AD("root node is forbidden and cannot be sanitized in-place")}}else if(Rt instanceof f)Ge=et("<!---->"),bt=Ge.ownerDocument.importNode(Rt,!0),bt.nodeType===1&&bt.nodeName==="BODY"||bt.nodeName==="HTML"?Ge=bt:Ge.appendChild(bt);else{if(!Xn&&!Sn&&!An&&Rt.indexOf("<")===-1)return de&&qs?de.createHTML(Rt):Rt;if(Ge=et(Rt),!Ge)return Xn?null:qs?he:""}Ge&&to&&Ee(Ge.firstChild);for(var l_=Kt(Va?Rt:Ge);lo=l_.nextNode();)lo.nodeType===3&&lo===jc||fb(lo)||(lo.content instanceof a&&W9(lo.content),v6(lo),jc=lo);if(jc=null,Va)return Rt;if(Xn){if(Go)for(Xr=ie.call(Ge.ownerDocument);Ge.firstChild;)Xr.appendChild(Ge.firstChild);else Xr=Ge;return je.shadowroot&&(Xr=Je.call(o,Xr,!0)),Xr}var Er=An?Ge.outerHTML:Ge.innerHTML;return An&&vt["!doctype"]&&Ge.ownerDocument&&Ge.ownerDocument.doctype&&Ge.ownerDocument.doctype.name&&Lc(L1,Ge.ownerDocument.doctype.name)&&(Er="<!DOCTYPE "+Ge.ownerDocument.doctype.name+`>
`+Er),Sn&&(Er=hi(Er,qt," "),Er=hi(Er,fn," ")),de&&qs?de.createHTML(Er):Er},n.setConfig=function(Rt){z2(Rt),rs=!0},n.clearConfig=function(){hu=null,rs=!1},n.isValidAttribute=function(Rt,ce,Ge){hu||z2({});var bt=Vd(Rt),lo=Vd(ce);return a_(bt,lo,Ge)},n.addHook=function(Rt,ce){typeof ce=="function"&&(kt[Rt]=kt[Rt]||[],Jm(kt[Rt],ce))},n.removeHook=function(Rt){if(kt[Rt])return rz(kt[Rt])},n.removeHooks=function(Rt){kt[Rt]&&(kt[Rt]=[])},n.removeAllHooks=function(){kt={}},n}var OD=cE();const DD=we.explode,RD=()=>{const e={};return{addFilter:(a,u)=>{ve(DD(a),f=>{Pt(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Eo(e),removeFilter:(a,u)=>{ve(DD(a),f=>{if(Pt(e,f))if(Se(u)){const p=e[f],y=mt(p.callbacks,x=>x!==u);y.length>0?p.callbacks=y:delete e[f]}else delete e[f]})}}},BD=(e,n)=>{ve(n,o=>{e.attr(o,null)})},iP=(e,n,o)=>{e.addNodeFilter("font",r=>{ve(r,a=>{const u=n.parse(a.attr("style")),f=a.attr("color"),p=a.attr("face"),y=a.attr("size");f&&(u.color=f),p&&(u["font-family"]=p),y&&Qs(y).each(x=>{u["font-size"]=o[x-1]}),a.name="span",a.attr("style",n.serialize(u)),BD(a,["color","face","size"])})})},lP=(e,n,o)=>{e.addNodeFilter("strike",r=>{const a=n.type!=="html4";ve(r,u=>{if(a)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},uP=(e,n,o)=>{var r;const a=lm();n.convert_fonts_to_spans&&iP(e,a,we.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),lP(e,o,a)},dP=(e,n,o)=>{n.inline_styles&&uP(e,n,o)},mP=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),MD=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},aE=e=>{const[n,...o]=e.split(","),r=o.join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(a){const u=a[2]===";base64",f=u?MD(r):decodeURIComponent(r);return R.some({type:a[1],data:f,base64Encoded:u})}else return R.none()},H1=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return R.none()}const a=new Uint8Array(r.length);for(let u=0;u<a.length;u++)a[u]=r.charCodeAt(u);return R.some(new Blob([a],{type:e}))},$D=e=>new Promise((n,o)=>{aE(e).bind(({type:r,data:a,base64Encoded:u})=>H1(r,a,u)).fold(()=>o("Invalid data URI"),n)}),fP=e=>Ho(e,"blob:")?mP(e):Ho(e,"data:")?$D(e):Promise.reject("Unknown URI format"),iE=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var a;o((a=r.error)===null||a===void 0?void 0:a.message)},r.readAsDataURL(e)});let gP=0;const ND=e=>(e||"blobid")+gP++,PD=(e,n,o)=>aE(e).bind(({data:r,type:a,base64Encoded:u})=>{if(n&&!u)return R.none();{const f=u?r:btoa(r);return o(f,a)}}),FD=(e,n,o)=>{const r=e.create(ND(),n,o);return e.add(r),r},lE=(e,n,o=!1)=>PD(n,o,(r,a)=>R.from(e.getByData(r,a)).orThunk(()=>H1(a,r).map(u=>FD(e,u,r)))),ID=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(Ho(n,"blob:")){const r=e.getByUri(n);return Se(r)?Promise.resolve(r):fP(n).then(a=>iE(a).then(u=>PD(u,!1,f=>R.some(FD(e,a,f))).getOrThunk(o)))}else return Ho(n,"data:")?lE(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},LD=e=>Se(e.attr("data-mce-bogus")),HD=e=>e.attr("src")===ln.transparentSrc||Se(e.attr("data-mce-placeholder")),zD=(e,n)=>{const{blob_cache:o}=n;if(o){const r=a=>{const u=a.attr("src");HD(a)||LD(a)||en(u)||lE(o,u,!0).each(f=>{a.attr("src",f.blobUri())})};e.addAttributeFilter("src",a=>ve(a,r))}},hP=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",(a,u,f)=>{const p=we.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),x=o.getWhitespaceElements();p.body=1;for(let _=0,M=a.length;_<M;_++){let B=a[_],H=B.parent;if(H&&p[H.name]&&B===H.lastChild){let V=B.prev;for(;V;){const I=V.name;if(I!=="span"||V.attr("data-mce-type")!=="bookmark"){I==="br"&&(B=null);break}V=V.prev}if(B&&(B.remove(),R1(o,y,x,H))){const I=o.getElementRule(H.name);I&&(I.removeEmpty?H.remove():I.paddEmpty&&Iw(n,f,p,H))}}else{let V=B;for(;H&&H.firstChild===V&&H.lastChild===V&&(V=H,!p[H.name]);)H=H.parent;if(V===H){const I=new Gr("#text",3);I.value=Vo,B.replace(I)}}}}),e.addAttributeFilter("href",a=>{let u=a.length;const f=y=>y.split(" ").filter(_=>_.length>0).concat(["noopener"]).sort().join(" "),p=y=>{const x=y?we.trim(y):"";return/\b(noopener)\b/g.test(x)?x:f(x)};if(!n.allow_unsafe_link_target)for(;u--;){const y=a[u];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",p(y.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",a=>{let u=a.length,f,p,y,x;for(;u--;)if(x=a[u],x.name==="a"&&x.firstChild&&!x.attr("href"))for(y=x.parent,f=x.lastChild;f&&y;)p=f.prev,y.insert(f,x),f=p}),n.fix_list_elements&&e.addNodeFilter("ul,ol",a=>{let u=a.length,f,p;for(;u--;)if(f=a[u],p=f.parent,p&&(p.name==="ul"||p.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const y=new Gr("li",1);y.attr("style","list-style-type: none"),f.wrap(y)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",a=>{var u;let f=a.length;for(;f--;){const p=a[f],y=(u=p.attr("class"))!==null&&u!==void 0?u:"",x=we.explode(y," ");let _="";for(let M=0;M<x.length;M++){const B=x[M];let H=!1,V=r["*"];V&&V[B]&&(H=!0),V=r[p.name],!H&&V&&V[B]&&(H=!0),H&&(_&&(_+=" "),_+=B)}_.length||(_=null),p.attr("class",_)}}),zD(e,n)},VD=we.each,pP=we.trim,bP=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],uE={ftp:21,http:80,https:443,mailto:25},s2=["img","video"],ZD=(e,n)=>Se(e)?!e:Se(n)?!$n(s2,n):!0,UD=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},r2=(e,n,o)=>{const r=UD(n);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?ZD(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class ll{constructor(n,o={}){this.path="",this.directory="",n=pP(n),this.settings=o;const r=o.base_uri,a=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){a.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const p=r?r.path:new ll(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+a.toAbsPath(p,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+a.toAbsPath(p,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&VD(bP,(p,y)=>{let x=f[y];x&&(x=x.replace(/\(mce_at\)/g,"@@")),a[p]=x}),r&&(a.protocol||(a.protocol=r.protocol),a.userInfo||(a.userInfo=r.userInfo),!a.port&&a.host==="mce_host"&&(a.port=r.port),(!a.host||a.host==="mce_host")&&(a.host=r.host),a.source=""),u&&(a.protocol="")}static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),a=/data:([^;]+)/.exec(r[0]);return a&&(o=a[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const a=uc.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!r2(r,a,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new ll(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),a=o.getURI();if(r===a||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===a)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new ll(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?uE[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,a="",u,f;const p=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(p.length>=y.length){for(u=0,f=p.length;u<f;u++)if(u>=y.length||p[u]!==y[u]){r=u+1;break}}if(p.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=p.length||p[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=p.length-(r-1);u<f;u++)a+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?a+="/"+y[u]:a+=y[u];return a}toAbsPath(n,o){let r=0;const a=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),p=[];VD(u,M=>{M&&p.push(M)});const y=[];for(let M=f.length-1;M>=0;M--)if(!(f[M].length===0||f[M]===".")){if(f[M]===".."){r++;continue}if(r>0){r--;continue}y.push(f[M])}const x=p.length-r;let _;return x<=0?_=Fr(y).join("/"):_=p.slice(0,x).join("/")+"/"+Fr(y).join("/"),_.indexOf("/")!==0&&(_="/"+_),a&&_.lastIndexOf("/")!==_.length-1&&(_+=a),_}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const WD=we.makeMap,Md=we.extend,dE={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},jD=we.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),hh="data-mce-type",GD=(e,n)=>{const o={...dE};return o.PARSER_MEDIA_TYPE=n,e.allow_script_urls?o.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(o.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),o},qD=(e,n)=>{const o=OD(),r=n.getSpecialElements(),a=e.validate;let u=0;return o.addHook("uponSanitizeElement",(f,p)=>{var y,x,_;f.nodeType===ku&&!e.allow_conditional_comments&&/^\[if/i.test((y=f.nodeValue)!==null&&y!==void 0?y:"")&&(f.nodeValue=" "+f.nodeValue);const M=p.tagName;if(f.nodeType!==Jo||M==="body")return;const B=G.fromDom(f),H=M.toLowerCase(),V=Rf(B,hh),I=is(B,"data-mce-bogus");if(!V&&X(I)){I==="all"?un(B):Is(B);return}const Z=n.getElementRule(H);if(a&&!Z){Pt(r,H)?un(B):Is(B);return}else p.allowedTags[M]=!0;if(a&&Z&&!V){if(ve((x=Z.attributesForced)!==null&&x!==void 0?x:[],U=>{Mo(B,U.name,U.value==="{$uid}"?`mce_${u++}`:U.value)}),ve((_=Z.attributesDefault)!==null&&_!==void 0?_:[],U=>{Rf(B,U.name)||Mo(B,U.name,U.value==="{$uid}"?`mce_${u++}`:U.value)}),Z.attributesRequired&&!Yt(Z.attributesRequired,U=>Rf(B,U))){Is(B);return}if(Z.removeEmptyAttrs&&Bf(B)){Is(B);return}Z.outputName&&Z.outputName!==H&&ds(B,Z.outputName)}}),o.addHook("uponSanitizeAttribute",(f,p)=>{const y=f.tagName.toLowerCase(),{attrName:x,attrValue:_}=p;p.keepAttr=!a||n.isValid(y,x)||Ho(x,"data-")||Ho(x,"aria-"),x in jD&&r2(e,_,y)&&(p.keepAttr=!1),p.keepAttr?(p.allowedAttributes[x]=!0,x in n.getBoolAttrs()&&(p.attrValue=x),e.allow_svg_data_urls&&Ho(_,"data:image/svg+xml")&&(p.forceKeepAttr=!0)):f.hasAttribute(hh)&&(x==="id"||x==="class"||x==="style")&&(p.forceKeepAttr=!0)}),o},mE=(e,n,o)=>{const r=e.name,a=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,p=u.length;f<p;f++){const y=u[f],x=new Gr(y.nodeName.toLowerCase(),y.nodeType);if(Ue(y)){const _=y.attributes;for(let M=0,B=_.length;M<B;M++){const H=_[M];x.attr(H.name,H.value)}}else ke(y)?(x.value=y.data,a&&(x.raw=!0)):(Ca(y)||Hb(y)||by(y))&&(x.value=y.data);mE(x,y,o),e.append(x)}},KD=(e,n,o)=>{const r=[];for(let a=e,u=a;a;u=a,a=a.walk()){const f=a;ve(n,p=>p(f)),en(f.parent)&&f!==e?a=u:r.push(f)}for(let a=r.length-1;a>=0;a--){const u=r[a];ve(o,f=>f(u))}},vP=(e,n,o,r)=>{const a=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),p=Md(WD("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=rg(n),x=/[ \t\r\n]+/g,_=/^[ \t\r\n]+/,M=/[ \t\r\n]+$/,B=U=>{let K=U.parent;for(;Se(K);){if(K.name in f)return!0;K=K.parent}return!1},H=U=>{let K=U;for(;Se(K);){if(K.name in y)return R1(n,u,f,K);K=K.parent}return!1},V=(U,K)=>{const J=K?U.prev:U.next;return Se(J)||en(U.parent)?!1:U.parent.name in p&&(U.parent!==e||r.isRootContent===!0)};return[U=>{var K;if(U.type===3&&!B(U)){let J=(K=U.value)!==null&&K!==void 0?K:"";J=J.replace(x," "),(_O(U.prev,p)||V(U,!0))&&(J=J.replace(_,"")),J.length===0?U.remove():U.value=J}},U=>{var K;if(U.type===1){const J=n.getElementRule(U.name);if(a&&J){const de=R1(n,u,f,U);J.paddInEmptyBlock&&de&&H(U)?Iw(o,r,p,U):J.removeEmpty&&de?p[U.name]?U.remove():U.unwrap():J.paddEmpty&&(de||M4(U))&&Iw(o,r,p,U)}}else if(U.type===3&&!B(U)){let J=(K=U.value)!==null&&K!==void 0?K:"";(U.next&&p[U.next.name]||V(U,!1))&&(J=J.replace(M,"")),J.length===0?U.remove():U.value=J}}]},yP=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},z1=(e={},n=Rc())=>{const o=RD(),r=RD(),a={validate:!0,root_name:"body",...e},u=new DOMParser,f=qD(a,n),p=(K,J,de="html")=>{const he=de==="xhtml"?"application/xhtml+xml":"text/html",De=Pt(n.getSpecialElements(),J.toLowerCase()),be=De?`<${J}>${K}</${J}>`:K,ae=de==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${be}</body></html>`:`<body>${be}</body>`,ie=u.parseFromString(ae,he).body;return f.sanitize(ie,GD(a,he)),f.removed=[],De?ie.firstChild:ie},y=o.addFilter,x=o.getFilters,_=o.removeFilter,M=r.addFilter,B=r.getFilters,H=r.removeFilter,V=(K,J)=>{const de=K.parent;de&&n.children[K.name]&&!n.isValidChild(de.name,K.name)&&J.push(K)},I=(K,J)=>{const de=Md(WD("script,style,head,html,body,title,meta,param"),n.getBlockElements()),he=/^[ \t\r\n]+/,De=/[ \t\r\n]+$/;let be=K.firstChild,ae=null;const ie=Re=>{var Je,tt;Re&&(be=Re.firstChild,be&&be.type===3&&(be.value=(Je=be.value)===null||Je===void 0?void 0:Je.replace(he,"")),be=Re.lastChild,be&&be.type===3&&(be.value=(tt=be.value)===null||tt===void 0?void 0:tt.replace(De,"")))};if(!!n.isValidChild(K.name,J.toLowerCase())){for(;be;){const Re=be.next;be.type===3||be.type===1&&be.name!=="p"&&!de[be.name]&&!be.attr(hh)?(ae||(ae=new Gr(J,1),ae.attr(a.forced_root_block_attrs),K.insert(ae,be)),ae.append(be)):(ie(ae),ae=null),be=Re}ie(ae)}},U={schema:n,addAttributeFilter:M,getAttributeFilters:B,removeAttributeFilter:H,addNodeFilter:y,getNodeFilters:x,removeNodeFilter:_,parse:(K,J={})=>{var de;const he=a.validate,De=(de=J.context)!==null&&de!==void 0?de:a.root_name,be=p(K,De,J.format),ae=new Gr(De,11);mE(ae,be,n.getSpecialElements());const[ie,Re]=vP(ae,n,a,J),Je=[],tt=he?Dn=>V(Dn,Je):dt,kt={nodes:{},attributes:{}},qt=Dn=>R4(x(),B(),Dn,kt);if(KD(ae,[ie,qt],[Re,tt]),Je.reverse(),he&&Je.length>0)if(J.context){const{pass:Dn,fail:Ms}=Ys(Je,_e=>_e.parent===ae);B1(Ms,n,qt),J.invalid=Dn.length>0}else B1(Je,n,qt);const fn=yP(a,J);return fn&&(ae.name==="body"||J.isRootContent)&&I(ae,fn),J.invalid||B4(kt,J),ae}};return hP(U,a),dP(U,a,n),U},fE=e=>$1(e)?Gm({validate:!1}).serialize(e):e,XD=(e,n)=>{const o=fE(e),r=n(o);if(r.isDefaultPrevented())return r;if($1(e))if(r.content!==o){const a=z1({validate:!1,forced_root_block:!1}).parse(r.content,{context:e.name});return{...r,content:a}}else return{...r,content:e};else return r},YD=(e,n)=>{if(n.no_events)return Zn.value(n);{const o=bd(e,n);return o.isDefaultPrevented()?Zn.error(jg(e,{content:"",...o}).content):Zn.value(o)}},JD=(e,n,o)=>o.no_events?n:XD(n,a=>jg(e,{...o,content:a})).content,gE=(e,n)=>{if(n.no_events)return Zn.value(n);{const o=XD(n.content,r=>mv(e,{...n,content:r}));return o.isDefaultPrevented()?(nw(e,o),Zn.error(void 0)):Zn.value(o)}},ph=(e,n,o)=>{o.no_events||nw(e,{...o,content:n})},c2=(e,n,o)=>({element:e,width:n,rows:o}),QD=(e,n)=>({element:e,cells:n}),eR=(e,n)=>({x:e,y:n}),tR=(e,n)=>va(e,n).bind(Qs).getOr(1),lx=(e,n,o,r,a)=>{const u=tR(a,"rowspan"),f=tR(a,"colspan"),p=e.rows;for(let y=o;y<o+u;y++){p[y]||(p[y]=QD(u0(r),[]));for(let x=n;x<n+f;x++){const _=p[y].cells;_[x]=y===o&&x===n?a:Xu(a)}}},nR=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},az=(e,n,o)=>{for(;nR(e,n,o);)n++;return n},hE=e=>oo(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),oR=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const a=o[r].cells;for(let u=0;u<a.length;u++)if(vn(a[u],n))return R.some(eR(u,r))}return R.none()},sR=(e,n,o,r,a)=>{const u=[],f=e.rows;for(let p=o;p<=a;p++){const y=f[p].cells,x=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(QD(f[p].element,x))}return u},pE=(e,n,o)=>{const r=n.x,a=n.y,u=o.x,f=o.y,p=a<f?sR(e,r,a,u,f):sR(e,r,f,u,a);return c2(e.element,hE(p),p)},CP=(e,n)=>{const o=Xu(e.element),r=G.fromTag("tbody");return St(r,n),zo(o,r),o},rR=e=>Jt(e.rows,n=>{const o=Jt(n.cells,a=>{const u=u0(a);return ls(u,"colspan"),ls(u,"rowspan"),u}),r=Xu(n.element);return St(r,o),r}),cR=e=>{const n=c2(Xu(e),0,[]);return ve(ee(e,"tr"),(o,r)=>{ve(ee(o,"td,th"),(a,u)=>{lx(n,az(n,u,r),r,o,a)})}),c2(n.element,hE(n.rows),n.rows)},bE=e=>CP(e,rR(e)),wP=(e,n,o)=>oR(e,n).bind(r=>oR(e,o).map(a=>pE(e,r,a))),aR=e=>Ko(e,n=>so(n)==="ul"||so(n)==="ol"),vE=(e,n)=>Ko(e,o=>so(o)==="li"&&s1(o,n)).fold(Oe([]),o=>aR(e).map(r=>{const a=G.fromTag(so(r)),u=Yo(Pb(r),(f,p)=>Ho(p,"list-style"));return Nb(a,u),[G.fromTag("li"),a]}).getOr([])),xP=(e,n)=>{const o=oo(n,(r,a)=>(zo(a,r),a),e);return n.length>0?v1([o]):o},SP=e=>cc(e)?Ec(e).filter(Wb).fold(Oe([]),n=>[e,n]):Wb(e)?[e]:[],kP=(e,n)=>{const o=G.fromDom(n.commonAncestorContainer),r=_d(o,e),a=mt(r,Fu),u=vE(r,n),f=a.concat(u.length?u:SP(o));return Jt(f,Xu)},iR=()=>v1([]),EP=(e,n)=>xP(G.fromDom(n.cloneContents()),kP(e,n)),lR=(e,n)=>Uf(n,"table",Ce(vn,e)),yE=(e,n)=>lR(e,n[0]).bind(o=>{const r=n[0],a=n[n.length-1],u=cR(o);return wP(u,r,a).map(f=>v1([bE(f)]))}).getOrThunk(iR),uR=(e,n)=>n.length>0&&n[0].collapsed?iR():EP(e,n[0]),dR=(e,n)=>{const o=o1(n,e);return o.length>0?yE(e,o):uR(e,n)},a2=(e,n)=>n>=0&&n<e.length&&Fg(e.charAt(n)),CE=e=>Es(e.innerText),mR=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),fR=e=>R.from(e.selection.getRng()).map(n=>{var o;const r=R.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),a=e.getBody(),u=mR(r),f=e.dom.add(a,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},n.cloneContents()),p=CE(f),y=Es((o=f.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(f),a2(y,0)||a2(y,y.length-1)){const x=r.getOr(a),_=CE(x),M=_.indexOf(p);if(M===-1)return p;{const B=a2(_,M-1),H=a2(_,M+p.length);return(B?" ":"")+p+(H?" ":"")}}else return p}).getOr(""),AP=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),a=e.selection.getSel(),u=e4(e,t1(a)),f=n.contextual?dR(G.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},wE=(e,n)=>{if(n.format==="text")return fR(e);{const o=AP(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},TP=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),ux=(e,n,o={})=>{const r=TP(o,n);return YD(e,r).fold(no,a=>{const u=wE(e,a);return JD(e,u,a)})},xE=0,gR=1,hR=2,pR=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),a=new Array(o),u=(_,M,B)=>({start:_,end:M,diag:B}),f=(_,M,B,H,V)=>{const I=y(_,M,B,H);if(I===null||I.start===M&&I.diag===M-H||I.end===_&&I.diag===_-B){let Z=_,U=B;for(;Z<M||U<H;)Z<M&&U<H&&e[Z]===n[U]?(V.push([xE,e[Z]]),++Z,++U):M-_>H-B?(V.push([hR,e[Z]]),++Z):(V.push([gR,n[U]]),++U)}else{f(_,I.start,B,I.start-I.diag,V);for(let Z=I.start;Z<I.end;++Z)V.push([xE,e[Z]]);f(I.end,M,I.end-I.diag,H,V)}},p=(_,M,B,H)=>{let V=_;for(;V-M<H&&V<B&&e[V]===n[V-M];)++V;return u(_,V,M)},y=(_,M,B,H)=>{const V=M-_,I=H-B;if(V===0||I===0)return null;const Z=V-I,U=I+V,K=(U%2===0?U:U+1)/2;r[1+K]=_,a[1+K]=M+1;let J,de,he,De,be;for(J=0;J<=K;++J){for(de=-J;de<=J;de+=2){for(he=de+K,de===-J||de!==J&&r[he-1]<r[he+1]?r[he]=r[he+1]:r[he]=r[he-1]+1,De=r[he],be=De-_+B-de;De<M&&be<H&&e[De]===n[be];)r[he]=++De,++be;if(Z%2!==0&&Z-J<=de&&de<=Z+J&&a[he-Z]<=r[he])return p(a[he-Z],de+_-B,M,H)}for(de=Z-J;de<=Z+J;de+=2){for(he=de+K-Z,de===Z-J||de!==Z+J&&a[he+1]<=a[he-1]?a[he]=a[he+1]-1:a[he]=a[he-1],De=a[he]-1,be=De-_+B-de;De>=_&&be>=B&&e[De]===n[be];)a[he]=De--,be--;if(Z%2===0&&-J<=de&&de<=J&&a[he]<=r[he+Z])return p(a[he],de+_-B,M,H)}}return null},x=[];return f(0,e.length,0,n.length,x),x},SE=e=>Ue(e)?e.outerHTML:ke(e)?uc.encodeRaw(e.data,!1):Ca(e)?"<!--"+e.data+"-->":"",_P=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},OP=(e,n,o)=>{const r=_P(n);if(e.hasChildNodes()&&o<e.childNodes.length){const a=e.childNodes[o];e.insertBefore(r,a)}else e.appendChild(r)},DP=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},RP=(e,n)=>{let o=0;ve(e,r=>{r[0]===xE?o++:r[0]===gR?(OP(n,r[1],o),o++):r[0]===hR&&DP(n,o)})},bR=e=>mt(Jt(Js(e.childNodes),SE),n=>n.length>0),iz=(e,n)=>{const o=Jt(Js(n.childNodes),SE);return RP(pR(o,e),n),n},BP=Xc(()=>document.implementation.createHTMLDocument("undo")),MP=e=>e.indexOf("</iframe>")!==-1,$P=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),NP=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),dx=e=>{const n=bR(e.getBody()),o=ga(n,a=>{const u=B_(e.serializer,a);return u.length>0?[u]:[]}),r=o.join("");return MP(r)?$P(o):NP(r)},kE=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?iz(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:Se(r)&&X0(r)?!r.isFakeCaret:!0}),r&&e.selection.moveToBookmark(r)},EE=e=>e.type==="fragmented"?e.fragments.join(""):e.content,AE=e=>{const n=G.fromTag("body",BP());return rp(n,EE(e)),ve(ee(n,"*[data-mce-bogus]"),Is),If(n)},PP=(e,n)=>EE(e)===EE(n),FP=(e,n)=>AE(e)===AE(n),TE=(e,n)=>!e||!n?!1:PP(e,n)?!0:FP(e,n),_E=e=>e.get()===0,mx=(e,n,o)=>{_E(o)&&(e.typing=n)},IP=(e,n)=>{e.typing&&(mx(e,!1,n),e.add())},lz=e=>{e.typing&&(e.typing=!1,e.add())},LP=(e,n,o)=>{_E(n)&&o.set(bg(e.selection))},HP=(e,n,o,r,a,u,f)=>{const p=dx(e),y=we.extend(u||{},p);if(!_E(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&TE(x,y))return null;n.data[o.get()]&&a.get().each(B=>{n.data[o.get()].beforeBookmark=B});const _=Wk(e);if(_&&n.data.length>_){for(let B=0;B<n.data.length-1;B++)n.data[B]=n.data[B+1];n.data.length--,o.set(n.data.length)}y.bookmark=bg(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const M={level:y,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",M),e.dispatch("change",M)):e.dispatch("AddUndo",M),y},uz=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},zP=(e,n,o,r,a)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];kE(e,f,!0),n.transact(a)&&(n.data[o.get()-1].beforeBookmark=u)}},co=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],kE(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},OE=(e,n,o,r)=>{let a;return n.typing&&(n.add(),n.typing=!1,mx(n,!1,o)),r.get()>0&&(r.set(r.get()-1),a=n.data[r.get()],kE(e,a,!0),e.setDirty(!0),e.dispatch("Undo",{level:a})),a},dz=e=>{e.clear(),e.add()},VP=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!TE(dx(e),n.data[0]),ZP=(e,n)=>n.get()<e.data.length-1&&!e.typing,V1=(e,n,o)=>(IP(e,n),e.beforeChange(),e.ignore(o),e.add()),mz=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},fz=(e,n)=>{const o=e.dom,r=Se(n)?n:e.getBody();ve(o.select("table,a",r),a=>{switch(a.nodeName){case"TABLE":const u=sd(e),f=o.getAttrib(a,"border");(!f||f==="0")&&e.hasVisual?o.addClass(a,u):o.removeClass(a,u);break;case"A":if(!o.getAttrib(a,"href")){const p=o.getAttrib(a,"name")||a.id,y=rd(e);p&&e.hasVisual?o.addClass(a,y):o.removeClass(a,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},Gs=e=>({init:{bindEvents:dt},undoManager:{beforeChange:(n,o)=>LP(e,n,o),add:(n,o,r,a,u,f)=>HP(e,n,o,r,a,u,f),undo:(n,o,r)=>OE(e,n,o,r),redo:(n,o)=>co(e,n,o),clear:(n,o)=>uz(e,n,o),reset:n=>dz(n),hasUndo:(n,o)=>VP(e,n,o),hasRedo:(n,o)=>ZP(n,o),transact:(n,o,r)=>V1(n,o,r),ignore:(n,o)=>mz(n,o),extra:(n,o,r,a)=>zP(e,n,o,r,a)},formatter:{match:(n,o,r,a)=>V4(e,n,o,r,a),matchAll:(n,o)=>EN(e,n,o),matchNode:(n,o,r,a)=>iu(e,n,o,r,a),canApply:n=>AN(e,n),closest:n=>YO(e,n),apply:(n,o,r)=>gD(e,n,o,r),remove:(n,o,r,a)=>uD(e,n,o,r,a),toggle:(n,o,r)=>jN(e,n,o,r),formatChanged:(n,o,r,a,u)=>WN(e,n,o,r,a,u)},editor:{getContent:n=>$6(e,n),setContent:(n,o)=>H4(e,n,o),insertContent:(n,o)=>Zw(e,n,o),addVisual:n=>fz(e,n)},selection:{getContent:(n,o)=>ux(e,n,o)},autocompleter:{addDecoration:n=>__(e,n),removeDecoration:()=>A6(e,G.fromDom(e.getBody()))},raw:{getModel:()=>R.none()}}),vR=e=>{const n=x=>hn(x)?x:{},{init:o,undoManager:r,formatter:a,editor:u,selection:f,autocompleter:p,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,_,M)=>r.transact(M),ignore:(x,_)=>r.ignore(_),extra:(x,_,M,B)=>r.extra(M,B)},formatter:{match:(x,_,M,B)=>a.match(x,n(_),B),matchAll:a.matchAll,matchNode:a.matchNode,canApply:x=>a.canApply(x),closest:x=>a.closest(x),apply:(x,_,M)=>a.apply(x,n(_)),remove:(x,_,M,B)=>a.remove(x,n(_)),toggle:(x,_,M)=>a.toggle(x,n(_)),formatChanged:(x,_,M,B,H)=>a.formatChanged(_,M,B,H)},editor:{getContent:x=>u.getContent(x),setContent:(x,_)=>({content:u.setContent(x,_),html:""}),insertContent:(x,_)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,_)=>f.getContent(_)},autocompleter:{addDecoration:p.addDecoration,removeDecoration:p.removeDecoration},raw:{getModel:()=>R.some(y.getRawModel())}}},yR=()=>{const e=Oe(null),n=Oe("");return{init:{bindEvents:dt},undoManager:{beforeChange:dt,add:e,undo:e,redo:e,clear:dt,reset:dt,hasUndo:pn,hasRedo:pn,transact:e,ignore:dt,extra:dt},formatter:{match:pn,matchAll:Oe([]),matchNode:Oe(void 0),canApply:pn,closest:n,apply:dt,remove:dt,toggle:dt,formatChanged:Oe({unbind:dt})},editor:{getContent:n,setContent:Oe({content:"",html:""}),insertContent:Oe(""),addVisual:dt},selection:{getContent:n},autocompleter:{addDecoration:dt,removeDecoration:dt},raw:{getModel:Oe(R.none())}}},ul=e=>Pt(e.plugins,"rtc"),UP=e=>Bn(e.plugins,"rtc").bind(n=>R.from(n.setup)),WP=e=>{const n=e;return UP(e).fold(()=>(n.rtcInstance=Gs(e),R.none()),o=>(n.rtcInstance=yR(),R.some(()=>o().then(r=>(n.rtcInstance=vR(r),r.rtc.isRemote)))))},Z1=e=>e.rtcInstance?e.rtcInstance:Gs(e),jo=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},DE=(e,n,o)=>{jo(e).undoManager.beforeChange(n,o)},jP=(e,n,o,r,a,u,f)=>jo(e).undoManager.add(n,o,r,a,u,f),CR=(e,n,o,r)=>jo(e).undoManager.undo(n,o,r),wR=(e,n,o)=>jo(e).undoManager.redo(n,o),RE=(e,n,o)=>{jo(e).undoManager.clear(n,o)},xR=(e,n)=>{jo(e).undoManager.reset(n)},BE=(e,n,o)=>jo(e).undoManager.hasUndo(n,o),GP=(e,n,o)=>jo(e).undoManager.hasRedo(n,o),qP=(e,n,o,r)=>jo(e).undoManager.transact(n,o,r),KP=(e,n,o)=>{jo(e).undoManager.ignore(n,o)},Pa=(e,n,o,r,a)=>{jo(e).undoManager.extra(n,o,r,a)},XP=(e,n,o,r,a)=>jo(e).formatter.match(n,o,r,a),YP=(e,n,o)=>jo(e).formatter.matchAll(n,o),JP=(e,n,o,r,a)=>jo(e).formatter.matchNode(n,o,r,a),QP=(e,n)=>jo(e).formatter.canApply(n),e8=(e,n)=>jo(e).formatter.closest(n),SR=(e,n,o,r)=>{jo(e).formatter.apply(n,o,r)},t8=(e,n,o,r,a)=>{jo(e).formatter.remove(n,o,r,a)},n8=(e,n,o,r)=>{jo(e).formatter.toggle(n,o,r)},o8=(e,n,o,r,a,u)=>jo(e).formatter.formatChanged(n,o,r,a,u),fx=(e,n)=>Z1(e).editor.getContent(n),s8=(e,n,o)=>Z1(e).editor.setContent(n,o),r8=(e,n,o)=>Z1(e).editor.insertContent(n,o),kR=(e,n,o)=>jo(e).selection.getContent(n,o),ME=(e,n)=>jo(e).editor.addVisual(n),ER=e=>jo(e).init.bindEvents(),c8=(e,n)=>jo(e).autocompleter.addDecoration(n),gz=e=>jo(e).autocompleter.removeDecoration(),a8=(e,n={})=>{const o=n.format?n.format:"html";return kR(e,o,n)},U1=e=>e.dom.length===0?(un(e),R.none()):R.some(e),AR=(e,n)=>e.filter(o=>gd.isBookmarkNode(o.dom)).bind(n?Pf:nc),TR=(e,n,o,r)=>{const a=e.dom,u=n.dom,f=r?a.length:u.length;r?(oO(a,u,!1,!r),o.setStart(u,f)):(oO(u,a,!1,!r),o.setEnd(u,f))},i8=(e,n)=>{Ec(e).each(o=>{const r=e.dom;n&&Mv(o,le(r,0))?Nv(r,0):!n&&Ow(o,le(r,r.length))&&f4(r,r.length)})},$E=(e,n,o,r)=>{e.bind(a=>((r?f4:Nv)(a.dom,r?a.dom.length:0),n.filter(Ro).map(f=>TR(a,f,o,r)))).orThunk(()=>AR(n,r).or(n).filter(Ro).map(u=>i8(u,r)))},l8=(e,n)=>{const o=R.from(n.firstChild).map(G.fromDom),r=R.from(n.lastChild).map(G.fromDom);e.deleteContents(),e.insertNode(n);const a=o.bind(nc).filter(Ro).bind(U1),u=r.bind(Pf).filter(Ro).bind(U1);$E(a,o,e,!0),$E(u,r,e,!1),e.collapse(!1)},u8=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),d8=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),a=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...a,...n});return Gm({validate:!1},e.schema).serialize(u)}else return n.content},m8=(e,n,o={})=>{const r=u8(o,n);gE(e,r).each(a=>{const u=d8(e,a),f=e.selection.getRng();l8(f,f.createContextualFragment(u)),e.selection.setRng(f),Jg(e,f),ph(e,u,a)})},NE=(e,n,o)=>{if(Pt(e,n)){const r=mt(e[n],a=>a!==o);r.length===0?delete e[n]:e[n]=r}};var f8=(e,n)=>{let o,r;const a=(p,y)=>Ko(y,x=>e.is(x,p)),u=p=>e.getParents(p,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",p=>{const y=p.element,x=u(y),_={};En(o,(M,B)=>{a(B,x).each(H=>{r[B]||(ve(M,V=>{V(!0,{node:H,selector:B,parents:x})}),r[B]=M),_[B]=M})}),En(r,(M,B)=>{_[B]||(delete r[B],ve(M,H=>{H(!1,{node:y,selector:B,parents:x})}))})})};return{selectorChangedWithUnbind:(p,y)=>(o||f(),o[p]||(o[p]=[]),o[p].push(y),a(p,u(n.selection.getStart())).each(()=>{r[p]=o[p]}),{unbind:()=>{NE(o,p,y),NE(r,p,y)}})}};const _R=e=>!!(e&&e.ownerDocument)&&tr(G.fromDom(e.ownerDocument),G.fromDom(e)),i2=e=>e?_R(e.startContainer)&&_R(e.endContainer):!1,PE=(e,n,o,r)=>{let a,u;const{selectorChangedWithUnbind:f}=f8(e,r),p=(_e,At)=>{const $t=e.createRng();Se(_e)&&Se(At)?($t.setStart(_e,At),$t.setEnd(_e,At),J($t),Z(!1)):(sv(e,$t,r.getBody(),!0),J($t))},y=_e=>a8(r,_e),x=(_e,At)=>m8(r,_e,At),_=_e=>Tv(r.getBody(),K(),_e),M=_e=>Q3(r.getBody(),K(),_e),B=(_e,At)=>Dn.getBookmark(_e,At),H=_e=>Dn.moveToBookmark(_e),V=(_e,At)=>(C6(e,_e,At).each(J),_e),I=()=>{const _e=K(),At=U();return!_e||_e.item?!1:_e.compareEndPoints?_e.compareEndPoints("StartToEnd",_e)===0:!At||_e.collapsed},Z=_e=>{const At=K();At.collapse(!!_e),J(At)},U=()=>n.getSelection?n.getSelection():n.document.selection,K=()=>{let _e;const At=(vt,Do,je)=>{try{return Do.compareBoundaryPoints(vt,je)}catch{return-1}},$t=n.document;if(Se(r.bookmark)&&!Ad(r)){const vt=ye(r);if(vt.isSome())return vt.map(Do=>e4(r,[Do])[0]).getOr($t.createRange())}try{const vt=U();vt&&!Bu(vt.anchorNode)&&(vt.rangeCount>0?_e=vt.getRangeAt(0):_e=$t.createRange(),_e=e4(r,[_e])[0])}catch{}if(_e||(_e=$t.createRange()),zf(_e.startContainer)&&_e.collapsed){const vt=e.getRoot();_e.setStart(vt,0),_e.setEnd(vt,0)}return a&&u&&(At(_e.START_TO_START,_e,a)===0&&At(_e.END_TO_END,_e,a)===0?_e=u:(a=null,u=null)),_e},J=(_e,At)=>{if(!i2(_e))return;const $t=U();if(_e=r.dispatch("SetSelectionRange",{range:_e,forward:At}).range,$t){u=_e;try{$t.removeAllRanges(),$t.addRange(_e)}catch{}At===!1&&$t.extend&&($t.collapse(_e.endContainer,_e.endOffset),$t.extend(_e.startContainer,_e.startOffset)),a=$t.rangeCount>0?$t.getRangeAt(0):null}if(!_e.collapsed&&_e.startContainer===_e.endContainer&&($t==null?void 0:$t.setBaseAndExtent)&&_e.endOffset-_e.startOffset<2&&_e.startContainer.hasChildNodes()){const Do=_e.startContainer.childNodes[_e.startOffset];Do&&Do.nodeName==="IMG"&&($t.setBaseAndExtent(_e.startContainer,_e.startOffset,_e.endContainer,_e.endOffset),($t.anchorNode!==_e.startContainer||$t.focusNode!==_e.endContainer)&&$t.setBaseAndExtent(Do,0,Do,1))}r.dispatch("AfterSetSelectionRange",{range:_e,forward:At})},de=_e=>(x(e.getOuterHTML(_e)),_e),he=()=>E_(r.getBody(),K()),De=(_e,At)=>A_(e,K(),_e,At),be=()=>{const _e=U(),At=_e==null?void 0:_e.anchorNode,$t=_e==null?void 0:_e.focusNode;if(!_e||!At||!$t||Bu(At)||Bu($t))return!0;const vt=e.createRng(),Do=e.createRng();try{vt.setStart(At,_e.anchorOffset),vt.collapse(!0),Do.setStart($t,_e.focusOffset),Do.collapse(!0)}catch{return!0}return vt.compareBoundaryPoints(vt.START_TO_START,Do)<=0},fn={dom:e,win:n,serializer:o,editor:r,collapse:Z,setCursorLocation:p,getContent:y,setContent:x,getBookmark:B,moveToBookmark:H,select:V,isCollapsed:I,isForward:be,setNode:de,getNode:he,getSel:U,setRng:J,getRng:K,getStart:_,getEnd:M,getSelectedBlocks:De,normalize:()=>{const _e=K(),At=U();if(!v3(At)&&Hg(r)){const $t=wv(e,_e);return $t.each(vt=>{J(vt,be())}),$t.getOr(_e)}return _e},selectorChanged:(_e,At)=>(f(_e,At),fn),selectorChangedWithUnbind:f,getScrollContainer:()=>{let _e,At=e.getRoot();for(;At&&At.nodeName!=="BODY";){if(At.scrollHeight>At.clientHeight){_e=At;break}At=At.parentNode}return _e},scrollIntoView:(_e,At)=>{Se(_e)?G3(r,_e,At):Jg(r,K(),At)},placeCaretAt:(_e,At)=>J(H3(_e,At,r.getDoc())),getBoundingClientRect:()=>{const _e=K();return _e.collapsed?le.fromRangeStart(_e).getClientRects()[0]:_e.getBoundingClientRect()},destroy:()=>{n=a=u=null,Ms.destroy()}},Dn=gd(fn),Ms=sw(fn,r);return fn.bookmarkManager=Dn,fn.controlSelection=Ms,fn},OR=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(a,null)}}),e.addAttributeFilter("src,href,style",(r,a)=>{const u="data-mce-"+a,f=n.url_converter,p=n.url_converter_scope;let y=r.length;for(;y--;){const x=r[y];let _=x.attr(u);_!==void 0?(x.attr(a,_.length>0?_:null),x.attr(u,null)):(_=x.attr(a),a==="style"?_=o.serializeStyle(o.parseStyle(_),x.name):f&&(_=f.call(p,_,a,x.name)),x.attr(a,_.length>0?_:null))}}),e.addAttributeFilter("class",r=>{let a=r.length;for(;a--;){const u=r[a];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,a,u)=>{let f=r.length;for(;f--;){const p=r[f];p.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(R.from(p.firstChild).exists(x=>{var _;return!Xb((_=x.value)!==null&&_!==void 0?_:"")})?p.unwrap():p.remove())}}),e.addNodeFilter("noscript",r=>{var a;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=uc.decode((a=f.value)!==null&&a!==void 0?a:""))}}),e.addNodeFilter("script,style",(r,a)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let p=r.length;for(;p--;){const y=r[p],x=y.firstChild,_=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(a==="script"){const M=y.attr("type");M&&y.attr("type",M==="mce-no/type"?null:M.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&_.length>0&&(x.value=`// <![CDATA[
`+f(_)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&_.length>0&&(x.value=`<!--
`+f(_)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let a=r.length;for(;a--;){const u=r[a],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,a)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&a==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{ve(r,a=>{a.attr("data-mce-type")==="format-caret"&&(a.isEmpty(e.schema.getNonEmptyElements())?a.remove():a.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)})},g8=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},h8=(e,n,o)=>{let r;const a=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const p=f.createHTMLDocument("");we.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{p.body.appendChild(p.importNode(y,!0))}),u.nodeName!=="BODY"?u=p.body.firstChild:u=p.body,r=a.doc,a.doc=p}return d1(e,{...o,node:u}),r&&(a.doc=r),u},p8=(e,n)=>Se(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,DR=(e,n,o)=>p8(e,o)?h8(e,n,o):n,b8=(e,n,o)=>{we.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,a)=>{let u=r.length;for(;u--;)r[u].attr(a,null)}),n.push(o))},v8=(e,n,o)=>!n.no_events&&e?_3(e,{...n,content:o}).content:o,y8=(e,n,o)=>{const r=Es(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||nn(G.fromDom(n))?r:we.trim(r)},C8=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,a=e.parse(n,r);return g8(a),a},hz=(e,n,o)=>Gm(e,n).serialize(o),$d=(e,n,o,r,a)=>{const u=hz(n,o,r);return v8(e,a,u)},RR=(e,n)=>{const o=["data-mce-selected"],r=n&&n.dom?n.dom:yn.DOM,a=n&&n.schema?n.schema:Rc(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const u=z1(e,a);OR(u,e,r);const f=(p,y={})=>{const x={format:"html",...y},_=DR(n,p,x),M=y8(r,_,x),B=C8(u,M,x);return x.format==="tree"?B:$d(n,e,a,B,x)};return{schema:a,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:f,addRules:a.addValidElements,setRules:a.setValidElements,addTempAttr:Ce(b8,u,o),getTempAttrs:Oe(o),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},BR=(e,n)=>{const o=RR(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},w8="html",x8=(e,n)=>({...e,format:n,get:!0,getInner:!0}),S8=(e,n={})=>{const o=n.format?n.format:w8,r=x8(n,o);return YD(e,r).fold(no,a=>{const u=fx(e,a);return JD(e,u,a)})},dn="html",pz=(e,n)=>({format:dn,...e,set:!0,content:n}),FE=(e,n,o={})=>{const r=pz(o,n);return gE(e,r).map(a=>{const u=s8(e,a.content,a);return ph(e,u.html,a),u.content}).getOr(n)},k8="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Oo="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),E8=e=>{const n=mt(k8,r=>Pt(e,r)),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Xo(n)},l2=e=>{const n=we.makeMap(e.plugins," "),r=mt(Oo,a=>Pt(n,a));return Xo(r)},A8=(e,n)=>{const o=E8(e),r=l2(n),a=r.length>0,u=o.length>0,f=n.theme==="mobile";if(a||u||f){const p=`
- `,y=f?`

Themes:${p}mobile`:"",x=a?`

Plugins:${p}${r.join(p)}`:"",_=u?`

Options:${p}${o.join(p)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+y+x+_)}},T8=(e,n)=>{A8(e,n)},gx=yn.DOM,MR=e=>{gx.setStyle(e.id,"display",e.orgDisplay)},dl=e=>R.from(e).each(n=>n.destroy()),zc=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},u2=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),gx.unbind(n,"submit reset",e.formEventDelegate))},bh=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),a=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Se(a==null?void 0:a.nextSibling)&&gx.remove(a.nextSibling),JC(e),e.editorManager.remove(e),!e.inline&&r&&MR(e),QC(e),gx.remove(e.getContainer()),dl(n),dl(o),e.destroy()}},Nd=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),dl(o),dl(r)),u2(e),zc(e),e.destroyed=!0}},W1=(()=>{const e={};return{add:(a,u)=>{e[a]=u},get:a=>e[a]?e[a]:{icons:{}},has:a=>Pt(e,a)}})(),Qm=eo.ModelManager,IE=(e,n)=>n.dom[e],LE=(e,n)=>parseInt(Pi(n,e),10),_8=Ce(IE,"clientWidth"),O8=Ce(IE,"clientHeight"),$R=Ce(LE,"margin-top"),NR=Ce(LE,"margin-left"),PR=e=>e.dom.getBoundingClientRect(),FR=(e,n,o)=>{const r=_8(e),a=O8(e);return n>=0&&o>=0&&n<=r&&o<=a},HE=(e,n,o,r)=>{const a=PR(n),u=e?a.left+n.dom.clientLeft+NR(n):0,f=e?a.top+n.dom.clientTop+$R(n):0,p=o-u,y=r-f;return{x:p,y}},bz=(e,n,o)=>{const r=G.fromDom(e.getBody()),a=e.inline?r:Rb(r),u=HE(e.inline,a,n,o);return FR(a,u.x,u.y)},D8=e=>R.from(e).map(G.fromDom),vz=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return D8(n).map($l).getOr(!1)};var R8=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const IR=e=>{const n=[],o=()=>{const B=e.theme;return B&&B.getNotificationManagerImpl?B.getNotificationManagerImpl():R8()},r=()=>R.from(n[0]),a=(B,H)=>B.type===H.type&&B.text===H.text&&!B.progressBar&&!B.timeout&&!H.progressBar&&!H.timeout,u=()=>{ve(n,B=>{B.reposition()})},f=B=>{n.push(B)},p=B=>{kl(n,H=>H===B).each(H=>{n.splice(H,1)})},y=(B,H=!0)=>e.removed||!vz(e)?{}:(H&&e.dispatch("BeforeOpenNotification",{notification:B}),Ko(n,V=>a(o().getArgs(V),B)).getOrThunk(()=>{e.editorManager.setActive(e);const V=o().open(B,()=>{p(V),u(),r().fold(()=>e.focus(),I=>kw(G.fromDom(I.getEl())))});return f(V),u(),e.dispatch("OpenNotification",{notification:{...V}}),V})),x=()=>{r().each(B=>{o().close(B),p(B),u()})},_=Oe(n);return(B=>{B.on("SkinLoaded",()=>{const H=Qi(B);H&&y({text:H,type:"warning",timeout:0},!1),u()}),B.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),B.on("remove",()=>{ve(n.slice(),H=>{o().close(H)})})})(e),{open:y,close:x,getNotifications:_}},Vc=eo.PluginManager,j1=eo.ThemeManager;var yz=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const LR=e=>{let n=[];const o=()=>{const I=e.theme;return I&&I.getWindowManagerImpl?I.getWindowManagerImpl():yz()},r=(I,Z)=>(...U)=>Z?Z.apply(I,U):void 0,a=I=>{e.dispatch("OpenWindow",{dialog:I})},u=I=>{e.dispatch("CloseWindow",{dialog:I})},f=I=>{n.push(I),a(I)},p=I=>{u(I),n=mt(n,Z=>Z!==I),n.length===0&&e.focus()},y=()=>R.from(n[n.length-1]),x=I=>{e.editorManager.setActive(e),Q(e),e.ui.show();const Z=I();return f(Z),Z},_=(I,Z)=>x(()=>o().open(I,Z,p)),M=I=>x(()=>o().openUrl(I,p)),B=(I,Z,U)=>{const K=o();K.alert(I,r(U||K,Z))},H=(I,Z,U)=>{const K=o();K.confirm(I,r(U||K,Z))},V=()=>{y().each(I=>{o().close(I),p(I)})};return e.on("remove",()=>{ve(n,I=>{o().close(I)})}),{open:_,openUrl:M,alert:B,confirm:H,close:V}},G1=(e,n)=>{e.notificationManager.open({type:"error",text:n})},px=(e,n)=>{e._skinLoaded?G1(e,n):e.on("SkinLoaded",()=>{G1(e,n)})},HR=(e,n)=>{px(e,ta.translate(["Failed to upload image: {0}",n]))},q1=(e,n,o)=>{Wg(e,n,{message:o}),console.error(o)},K1=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,B8=(e,n,o)=>{q1(e,"PluginLoadError",K1("plugin",n,o))},M8=(e,n,o)=>{q1(e,"IconsLoadError",K1("icons",n,o))},ef=(e,n,o)=>{q1(e,"LanguageLoadError",K1("language",n,o))},$8=(e,n,o)=>{q1(e,"ThemeLoadError",K1("theme",n,o))},N8=(e,n,o)=>{q1(e,"ModelLoadError",K1("model",n,o))},P8=(e,n,o)=>{const r=ta.translate(["Failed to initialize plugin: {0}",n]);Wg(e,"PluginLoadError",{message:r}),bx(r,o),px(e,r)},bx=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},F8=e=>/^[a-z0-9\-]+$/i.test(e),I8=e=>zR(e,Me(e)),L8=e=>zR(e,ts(e)),zR=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",a=`content${e.editorManager.suffix}.css`;return Jt(n,u=>F8(u)&&!e.inline?`${o}/${u}/${a}`:e.documentBaseURI.toAbsolute(u))},H8=e=>{e.contentCSS=e.contentCSS.concat(I8(e),L8(e))},z8=Ae,V8=(e,n,o)=>my(e,n,z8,o),Cz=e=>e?Js(e.getElementsByTagName("img")):[],d2=(e,n)=>{const o={};return{findAll:(a,u=Ae)=>{const f=mt(Cz(a),y=>{const x=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!x||x===ln.transparentSrc?!1:Ho(x,"blob:")?!e.isUploaded(x)&&u(y):Ho(x,"data:")?u(y):!1}),p=Jt(f,y=>{const x=y.src;if(Pt(o,x))return o[x].then(_=>X(_)?_:{image:y,blobInfo:_.blobInfo});{const _=ID(n,x).then(M=>(delete o[x],{image:y,blobInfo:M})).catch(M=>(delete o[x],M));return o[x]=_,_}});return Promise.all(p)}}},VR=()=>{let o={};const r=(B,H)=>({status:B,resultUri:H}),a=B=>B in o;return{hasBlobUri:a,getResultUri:B=>{const H=o[B];return H?H.resultUri:null},isPending:B=>a(B)?o[B].status===1:!1,isUploaded:B=>a(B)?o[B].status===2:!1,markPending:B=>{o[B]=r(1,null)},markUploaded:(B,H)=>{o[B]=r(2,H)},removeFailed:B=>{delete o[B]},destroy:()=>{o={}}}};let zE=0;const Z8=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},U8=e=>e+zE+++Z8(),W8=()=>{let e=[];const n=M=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[M.toLowerCase()]||"dat",o=(M,B,H,V,I)=>{if(X(M))return r({id:M,name:V,filename:I,blob:B,base64:H});if(hn(M))return r(M);throw new Error("Unknown input type")},r=M=>{if(!M.blob||!M.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const B=M.id||U8("blobid"),H=M.name||B,V=M.blob;return{id:Oe(B),name:Oe(H),filename:Oe(M.filename||H+"."+n(V.type)),blob:Oe(V),base64:Oe(M.base64),blobUri:Oe(M.blobUri||URL.createObjectURL(V)),uri:Oe(M.uri)}},a=M=>{f(M.id())||e.push(M)},u=M=>Ko(e,M).getOrUndefined(),f=M=>u(B=>B.id()===M);return{create:o,add:a,get:f,getByUri:M=>u(B=>B.blobUri()===M),getByData:(M,B)=>u(H=>H.base64()===M&&H.blob().type===B),findFirst:u,removeByUri:M=>{e=mt(e,B=>B.blobUri()===M?(URL.revokeObjectURL(B.blobUri()),!1):!0)},destroy:()=>{ve(e,M=>{URL.revokeObjectURL(M.blobUri())}),e=[]}}},j8=(e,n)=>{const o={},r=(I,Z)=>I?I.replace(/\/$/,"")+"/"+Z.replace(/^\//,""):Z,a=(I,Z)=>new Promise((U,K)=>{const J=new XMLHttpRequest;J.open("POST",n.url),J.withCredentials=n.credentials,J.upload.onprogress=he=>{Z(he.loaded/he.total*100)},J.onerror=()=>{K("Image upload failed due to a XHR Transport error. Code: "+J.status)},J.onload=()=>{if(J.status<200||J.status>=300){K("HTTP Error: "+J.status);return}const he=JSON.parse(J.responseText);if(!he||!X(he.location)){K("Invalid JSON: "+J.responseText);return}U(r(n.basePath,he.location))};const de=new FormData;de.append("file",I.blob(),I.filename()),J.send(de)}),u=q(n.handler)?n.handler:a,f=()=>new Promise(I=>{I([])}),p=(I,Z)=>({url:Z,blobInfo:I,status:!0}),y=(I,Z)=>({url:"",blobInfo:I,status:!1,error:Z}),x=(I,Z)=>{we.each(o[I],U=>{U(Z)}),delete o[I]},_=(I,Z,U)=>(e.markPending(I.blobUri()),new Promise(K=>{let J,de;try{const he=()=>{J&&(J.close(),de=dt)},De=ae=>{he(),e.markUploaded(I.blobUri(),ae),x(I.blobUri(),p(I,ae)),K(p(I,ae))},be=ae=>{he(),e.removeFailed(I.blobUri()),x(I.blobUri(),y(I,ae)),K(y(I,ae))};de=ae=>{ae<0||ae>100||R.from(J).orThunk(()=>R.from(U).map(In)).each(ie=>{J=ie,ie.progressBar.value(ae)})},Z(I,de).then(De,ae=>{be(X(ae)?{message:ae}:ae)})}catch(he){K(y(I,he))}})),M=I=>I===a,B=I=>{const Z=I.blobUri();return new Promise(U=>{o[Z]=o[Z]||[],o[Z].push(U)})},H=(I,Z)=>(I=we.grep(I,U=>!e.isUploaded(U.blobUri())),Promise.all(we.map(I,U=>e.isPending(U.blobUri())?B(U):_(U,u,Z))));return{upload:(I,Z)=>!n.url&&M(u)?f():H(I,Z)}},tf=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),nf=(e,n)=>j8(n,{url:g_(e),basePath:Fk(e),credentials:Ik(e),handler:Lk(e)}),vx=e=>{const n=VR(),o=nf(e,n);return{upload:(r,a=!0)=>o.upload(r,a?tf(e):void 0)}},yx=e=>{const n=W8();let o,r;const a=VR(),u=[],f=J=>de=>e.selection?J(de):[],p=J=>J+(J.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(J,de,he)=>{let De=0;do De=J.indexOf(de,De),De!==-1&&(J=J.substring(0,De)+he+J.substr(De+de.length),De+=he.length-de.length+1);while(De!==-1);return J},x=(J,de,he)=>{const De=`src="${he}"${he===ln.transparentSrc?' data-mce-placeholder="1"':""}`;return J=y(J,`src="${de}"`,De),J=y(J,'data-mce-src="'+de+'"','data-mce-src="'+he+'"'),J},_=(J,de)=>{ve(e.undoManager.data,he=>{he.type==="fragmented"?he.fragments=Jt(he.fragments,De=>x(De,J,de)):he.content=x(he.content,J,de)})},M=(J,de)=>{const he=e.convertURL(de,"src");_(J.src,de),Dr(G.fromDom(J),{src:Em(e)?p(de):de,"data-mce-src":he})},B=()=>(o||(o=nf(e,a)),Z().then(f(J=>{const de=Jt(J,he=>he.blobInfo);return o.upload(de,tf(e)).then(f(he=>{const De=[];let be=!1;const ae=Jt(he,(ie,Re)=>{const{blobInfo:Je,image:tt}=J[Re];let kt=!1;return ie.status&&A0(e)?(ie.url&&!Ns(tt.src,ie.url)&&(be=!0),n.removeByUri(tt.src),ul(e)||M(tt,ie.url)):ie.error&&(ie.error.remove&&(_(tt.src,ln.transparentSrc),De.push(tt),kt=!0),HR(e,ie.error.message)),{element:tt,status:ie.status,uploadUri:ie.url,blobInfo:Je,removed:kt}});return De.length>0&&!ul(e)?e.undoManager.transact(()=>{ve(De,ie=>{e.dom.remove(ie),n.removeByUri(ie.src)})}):be&&e.undoManager.dispatchChange(),ae}))}))),H=()=>yg(e)?B():Promise.resolve([]),V=J=>vu(u,de=>de(J)),I=J=>{u.push(J)},Z=()=>(r||(r=d2(a,n)),r.findAll(e.getBody(),V).then(f(J=>{const de=mt(J,he=>X(he)?(px(e,he),!1):!0);return ul(e)||ve(de,he=>{_(he.image.src,he.blobInfo.blobUri()),he.image.src=he.blobInfo.blobUri(),he.image.removeAttribute("data-mce-src")}),de}))),U=()=>{n.destroy(),a.destroy(),r=o=null},K=J=>J.replace(/src="(blob:[^"]+)"/g,(de,he)=>{const De=a.getResultUri(he);if(De)return'src="'+De+'"';let be=n.getByUri(he);return be||(be=oo(e.editorManager.get(),(ae,ie)=>ae||ie.editorUpload&&ie.editorUpload.blobCache.getByUri(he),void 0)),be?'src="data:'+be.blob().type+";base64,"+be.base64()+'"':de});return e.on("SetContent",()=>{yg(e)?H():Z()}),e.on("RawSaveContent",J=>{J.content=K(J.content)}),e.on("GetContent",J=>{J.source_view||J.format==="raw"||J.format==="tree"||(J.content=K(J.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",J=>{ve(J,de=>{const he=de.attr("src");if(!he||n.getByUri(he))return;const De=a.getResultUri(he);De&&de.attr("src",De)})})}),{blobCache:n,addFilter:I,uploadImages:B,uploadImagesAuto:H,scanForImages:Z,destroy:U}},vh=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:a=>{n.setStyle(a,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const a={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,a,u]:[a,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(a,u,f)=>Ue(a)&&a.hasAttribute("href"),onformat:(a,u,f)=>{we.each(f,(p,y)=>{n.setAttrib(a,y,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":a=>{var u;return(u=a==null?void 0:a.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return we.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),a=>{r[a]={block:a,remove:"all"}}),r},of={remove_similar:!0,inherit:!1},Pd={selector:"td,th",...of},Cx={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...Pd},tablecellverticalalign:{styles:{"vertical-align":"%value"},...Pd},tablecellbordercolor:{styles:{borderColor:"%value"},...Pd},tablecellclass:{classes:["%value"],...Pd},tableclass:{selector:"table",classes:["%value"],...of},tablecellborderstyle:{styles:{borderStyle:"%value"},...Pd},tablecellborderwidth:{styles:{borderWidth:"%value"},...Pd}},ZR=Oe(Cx),VE=e=>{const n={},o=f=>Se(f)?n[f]:n,r=f=>Pt(n,f),a=(f,p)=>{f&&(X(f)?(xn(p)||(p=[p]),ve(p,y=>{dr(y.deep)&&(y.deep=!xr(y)),dr(y.split)&&(y.split=!xr(y)||ns(y)),dr(y.remove)&&xr(y)&&!ns(y)&&(y.remove="none"),xr(y)&&ns(y)&&(y.mixed=!0,y.block_expand=!0),X(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=p):En(f,(y,x)=>{a(x,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return a(vh(e)),a(ZR()),a(_a(e)),{get:o,has:r,register:a,unregister:u}},X1=we.each,ia=yn.DOM,wx=e=>Se(e)&&hn(e),yh=(e,n)=>{const o=n&&n.schema||Rc({}),r=(y,x)=>{x.classes.length>0&&ia.addClass(y,x.classes.join(" ")),ia.setAttribs(y,x.attrs)},a=y=>{const x=X(y)?{name:y,classes:[],attrs:{}}:y,_=ia.create(x.name);return r(_,x),_},u=(y,x)=>{const _=o.getElementRule(y.nodeName.toLowerCase()),M=_==null?void 0:_.parentsRequired;return M&&M.length?x&&$n(M,x)?x:M[0]:!1},f=(y,x,_)=>{let M;const B=x[0],H=wx(B)?B.name:void 0,V=u(y,H);if(V)H===V?(M=B,x=x.slice(1)):M=V;else if(B)M=B,x=x.slice(1);else if(!_)return y;const I=M?a(M):ia.create("div");I.appendChild(y),_&&we.each(_,U=>{const K=a(U);I.insertBefore(K,y)});const Z=wx(M)?M.siblings:void 0;return f(I,x,Z)},p=ia.create("div");if(e.length>0){const y=e[0],x=a(y),_=wx(y)?y.siblings:void 0;p.appendChild(f(x,e.slice(1),_))}return p},UR=e=>{e=we.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,a,u,f,p)=>{switch(a){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":we.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=p.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},WR=e=>X(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),we.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=we.map(n.split(/(?:~\+|~|\+)/),UR),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],jR=(e,n)=>{let o="",r=Zk(e);if(r==="")return"";const a=B=>X(B)?B.replace(/%(\w+)/g,""):"",u=(B,H)=>ia.getStyle(H!=null?H:e.getBody(),B,!0);if(X(n)){const B=e.formatter.get(n);if(!B)return"";n=B[0]}if("preview"in n){const B=n.preview;if(B===!1)return"";r=B||r}let f=n.block||n.inline||"span",p;const y=WR(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,p=yh(y,e)):p=yh([f],e);const x=ia.select(f,p)[0]||p.firstChild;X1(n.styles,(B,H)=>{const V=a(B);V&&ia.setStyle(x,H,V)}),X1(n.attributes,(B,H)=>{const V=a(B);V&&ia.setAttrib(x,H,V)}),X1(n.classes,B=>{const H=a(B);ia.hasClass(x,H)||ia.addClass(x,H)}),e.dispatch("PreviewFormats"),ia.setStyles(p,{position:"absolute",left:-65535}),e.getBody().appendChild(p);const _=u("fontSize"),M=/px$/.test(_)?parseInt(_,10):0;return X1(r.split(" "),B=>{let H=u(B,x);if(!(B==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(H)&&(H=u(B),md(H).toLowerCase()==="#ffffff"))&&!(B==="color"&&md(H).toLowerCase()==="#000000")){if(B==="font-size"&&/em|%$/.test(H)){if(M===0)return;H=parseFloat(H)/(/%$/.test(H)?100:1)*M+"px"}B==="border"&&H&&(o+="padding:0 2px;"),o+=B+":"+H+";"}}),e.dispatch("AfterPreviewFormats"),ia.remove(p),o},xx=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},ZE=e=>{const n=VE(e),o=_o({});return xx(e),eD(e),ul(e)||VN(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,a,u)=>{SR(e,r,a,u)},remove:(r,a,u,f)=>{t8(e,r,a,u,f)},toggle:(r,a,u)=>{n8(e,r,a,u)},match:(r,a,u,f)=>XP(e,r,a,u,f),closest:r=>e8(e,r),matchAll:(r,a)=>YP(e,r,a),matchNode:(r,a,u,f)=>JP(e,r,a,u,f),canApply:r=>QP(e,r),formatChanged:(r,a,u,f)=>o8(e,o,r,a,u,f),getCssText:Ce(jR,e)}},UE=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},GR=(e,n,o)=>{const r=_o(!1),a=y=>{mx(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const x=y.command;UE(x)||(IP(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const x=y.command;UE(x)||a(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",a),e.on("dragend",a),e.on("keyup",y=>{const x=y.keyCode;y.isDefaultPrevented()||((x>=33&&x<=36||x>=37&&x<=40||x===45||y.ctrlKey)&&(a(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!TE(dx(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged()))}),e.on("keydown",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&a(y);return}const _=y.ctrlKey&&!y.altKey||y.metaKey;(x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!_&&(n.beforeChange(),mx(n,!0,o),n.add({},y),r.set(!0))}),e.on("mousedown",y=>{n.typing&&a(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,p=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||p(y))&&a(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},qR=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},uu=e=>{const n=Gi(),o=_o(0),r=_o(0),a={data:[],typing:!1,beforeChange:()=>{DE(e,o,n)},add:(u,f)=>jP(e,a,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=dx(e);u.bookmark=bg(e.selection),e.dispatch("change",{level:u,lastLevel:Lo(a.data,r.get()).getOrUndefined()})},undo:()=>CR(e,a,o,r),redo:()=>wR(e,r,a.data),clear:()=>{RE(e,a,r)},reset:()=>{xR(e,a)},hasUndo:()=>BE(e,a,r),hasRedo:()=>GP(e,a,r),transact:u=>qP(e,a,o,u),ignore:u=>{KP(e,o,u)},extra:(u,f)=>{Pa(e,a,r,u,f)}};return ul(e)||GR(e,a,o),qR(e),a},sf=[9,27,Qe.HOME,Qe.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Qe.DOWN,Qe.UP,Qe.LEFT,Qe.RIGHT].concat(ln.browser.isFirefox()?[224]:[]),Fa="data-mce-placeholder",KR=e=>e.type==="keydown"||e.type==="keyup",XR=e=>{const n=e.keyCode;return n===Qe.BACKSPACE||n===Qe.DELETE},G8=e=>{if(KR(e)){const n=e.keyCode;return!XR(e)&&(Qe.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||$n(sf,n))}else return!1},q8=e=>KR(e)&&!(XR(e)||e.type==="keyup"&&e.keyCode===229),K8=(e,n,o)=>{if($o(G.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},X8=e=>{var n;const o=e.dom,r=Un(e),a=(n=h_(e))!==null&&n!==void 0?n:"",u=(f,p)=>{if(G8(f))return;const y=e.getBody(),x=q8(f)?!1:K8(o,y,r);(o.getAttrib(y,Fa)!==""!==x||p)&&(o.setAttrib(y,Fa,x?a:null),o.setAttrib(y,"aria-placeholder",x?a:null),m1(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};ha(a)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",p=>He.setEditorTimeout(e,()=>u(p)))})},Y8=(e,n)=>({block:e,position:n}),J8=(e,n)=>({from:e,to:n}),WE=(e,n)=>{const o=G.fromDom(e),r=G.fromDom(n.container());return Rw(o,r).map(a=>Y8(a,n))},Q8=e=>!vn(e.from.block,e.to.block),e7=e=>Ec(e.from.block).bind(n=>Ec(e.to.block).filter(o=>vn(n,o))).isSome(),t7=e=>Qn(e.from.block.dom)===!1&&Qn(e.to.block.dom)===!1,jE=(e,n,o)=>go(o.position.getNode())&&!$o(o.block)?Mg(!1,o.block.dom).bind(r=>r.isEqual(o.position)?$r(n,e,r).bind(a=>WE(e,a)):R.some(o)).getOr(o):o,GE=(e,n,o)=>{const r=WE(e,le.fromRangeStart(o)),a=r.bind(u=>$r(n,e,u.position).bind(f=>WE(e,f).map(p=>jE(e,n,p))));return Fs(r,a,J8).filter(u=>Q8(u)&&e7(u)&&t7(u))},YR=(e,n,o)=>o.collapsed?GE(e,n,o):R.none(),n7=e=>{const n=ws(e);return kl(n,xa).fold(Oe(n),o=>n.slice(0,o))},JR=e=>{const n=n7(e);return ve(n,un),n},qE=(e,n)=>{const o=_d(n,e);return Ko(o.reverse(),r=>$o(r)).each(un)},QR=e=>mt(tp(e),n=>!$o(n)).length===0,KE=(e,n,o,r)=>{if($o(o))return Hi(o),Po(o.dom);QR(r)&&$o(n)&&qn(r,G.fromTag("br"));const a=gc(o.dom,le.before(r.dom));return ve(JR(n),u=>{qn(r,u)}),qE(e,n),a},e5=(e,n,o)=>{if($o(o))return un(o),$o(n)&&Hi(n),Po(n.dom);const r=hc(o.dom);return ve(JR(n),a=>{zo(o,a)}),qE(e,n),r},t5=(e,n)=>{const o=_d(n,e);return R.from(o[o.length-1])},XE=(e,n)=>tr(n,e)?t5(n,e):R.none(),n5=(e,n)=>{Mg(e,n.dom).bind(o=>R.from(o.getNode())).map(G.fromDom).filter(Pu).each(un)},o5=(e,n,o)=>(n5(!0,n),n5(!1,o),XE(n,o).fold(Ce(e5,e,n,o),Ce(KE,e,n,o))),ml=(e,n,o,r)=>n?o5(e,r,o):o5(e,o,r),la=(e,n)=>{const o=G.fromDom(e.getBody());return YR(o.dom,n,e.selection.getRng()).map(a=>()=>{ml(o,n,a.from.block,a.to.block).each(u=>{e.selection.setRng(u.toRange())})})},Sx=(e,n)=>{const o=n.getRng();return Fs(Rw(e,G.fromDom(o.startContainer)),Rw(e,G.fromDom(o.endContainer)),(r,a)=>vn(r,a)?R.none():R.some(()=>{o.deleteContents(),ml(e,!0,r,a).each(u=>{n.setRng(u.toRange())})})).getOr(R.none())},YE=(e,n)=>{const o=G.fromDom(n),r=Ce(vn,e);return ho(o,hr,r).isSome()},kx=(e,n)=>YE(e,n.startContainer)||YE(e,n.endContainer),s5=(e,n)=>{const o=gc(e.dom,le.fromRangeStart(n)).isNone(),r=Cr(e.dom,le.fromRangeEnd(n)).isNone();return!kx(e,n)&&o&&r},r5=e=>R.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),c5=e=>{const n=G.fromDom(e.getBody()),o=e.selection.getRng();return s5(n,o)?r5(e):Sx(n,e.selection)},Ex=(e,n)=>e.selection.isCollapsed()?R.none():c5(e),du=(e,n,o,r,a)=>R.from(n._selectionOverrides.showCaret(e,o,r,a)),a5=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},rf=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?R.none():R.some(a5(n)),JE=(e,n,o)=>{const r=_m(1,e.getBody(),n),a=le.fromRangeStart(r),u=a.getNode();if(Eg(u))return du(1,e,u,!a.isAtEnd(),!1);const f=a.getNode(!0);if(Eg(f))return du(1,e,f,!1,!1);const p=Od(e.dom.getRoot(),a.getNode());return Eg(p)?du(1,e,p,!1,o):R.none()},QE=(e,n,o)=>n.collapsed?JE(e,n,o).getOr(n):n,o7=e=>qm(e)||Dv(e),s7=e=>Km(e)||Rv(e),r7=(e,n)=>{ke(n)&&n.data.length===0&&e.remove(n)},eA=(e,n,o,r,a,u)=>{du(r,e,u.getNode(!a),a,!0).each(f=>{if(n.collapsed){const p=n.cloneRange();a?p.setEnd(f.startContainer,f.startOffset):p.setStart(f.endContainer,f.endOffset),p.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),r7(e.dom,o)},c7=(e,n)=>{const o=e.selection.getRng();if(!ke(o.commonAncestorContainer))return R.none();const r=n?yo.Forwards:yo.Backwards,a=ii(e.getBody()),u=Ce(Zs,n?a.next:a.prev),f=n?o7:s7,p=Dg(r,e.getBody(),o),y=u(p),x=y&&$a(n,y);if(!x||!U0(p,x))return R.none();if(f(x))return R.some(()=>eA(e,o,p.getNode(),r,n,x));const _=u(x);return _&&f(_)&&U0(x,_)?R.some(()=>eA(e,o,p.getNode(),r,n,_)):R.none()},tA=(e,n)=>c7(e,n),m2=(e,n)=>{const o=e.getBody();return n?Po(o).filter(qm):hc(o).filter(Km)},nA=e=>{const n=e.selection.getRng();return!n.collapsed&&(m2(e,!0).exists(o=>o.isEqual(le.fromRangeStart(n)))||m2(e,!1).exists(o=>o.isEqual(le.fromRangeEnd(n))))},a7=e=>Se(e)&&(hr(G.fromDom(e))||cc(G.fromDom(e))),ua=ci.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),i7=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return Ue(o)&&o.getAttribute("data-mce-caret")===r},l7=(e,n,o,r)=>{const a=u=>em(G.fromDom(u))&&!Mc(o,r,e);return BC(!n,o).fold(()=>BC(n,r).fold(pn,a),a)},i5=(e,n,o,r)=>{const a=r.getNode(!n);return Rw(G.fromDom(e),G.fromDom(o.getNode())).map(u=>$o(u)?ua.remove(u.dom):ua.moveToElement(a)).orThunk(()=>R.some(ua.moveToElement(a)))},l5=(e,n,o)=>$r(n,e,o).bind(r=>a7(r.getNode())||l7(e,n,o,r)?R.none():n&&Qn(r.getNode())||!n&&Qn(r.getNode(!0))?i5(e,n,o,r):n&&Km(o)||!n&&qm(o)?R.some(ua.moveToPosition(r)):R.none()),Ax=(e,n)=>en(n)?R.none():e&&Qn(n.nextSibling)?R.some(ua.moveToElement(n.nextSibling)):!e&&Qn(n.previousSibling)?R.some(ua.moveToElement(n.previousSibling)):R.none(),oA=(e,n,o)=>o.fold(r=>R.some(ua.remove(r)),r=>R.some(ua.moveToElement(r)),r=>Mc(n,r,e)?R.none():R.some(ua.moveToPosition(r))),u7=(e,n,o)=>i7(n,o)?Ax(n,o.getNode(!n)).orThunk(()=>l5(e,n,o)):l5(e,n,o).bind(r=>oA(e,o,r)),d7=(e,n,o)=>{const r=_m(n?1:-1,e,o),a=le.fromRangeStart(r),u=G.fromDom(e);return!n&&Km(a)?R.some(ua.remove(a.getNode(!0))):n&&qm(a)?R.some(ua.remove(a.getNode())):!n&&qm(a)&&l4(u,a)?u4(u,a).map(f=>ua.remove(f.getNode())):n&&Km(a)&&Aw(u,a)?Z6(u,a).map(f=>ua.remove(f.getNode())):u7(e,n,a)},m7=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),nh(e,n,G.fromDom(o)),!0),f7=(e,n)=>o=>{const r=n?le.before(o):le.after(o);return e.selection.setRng(r.toRange()),!0},u5=e=>n=>(e.selection.setRng(n.toRange()),!0),d5=(e,n)=>R.from(Od(e.getBody(),n)),g7=(e,n)=>{const o=e.selection.getNode();return d5(e,o).filter(Qn).fold(()=>d7(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(m7(e,n),f7(e,n),u5(e))),()=>R.some(dt))},sA=e=>{ve(ee(e,".mce-offscreen-selection"),un)},h7=(e,n)=>{const o=e.selection.getNode();return Qn(o)&&!Rr(o)?d5(e,o.parentNode).filter(Qn).fold(()=>R.some(()=>{sA(G.fromDom(e.getBody())),nh(e,n,G.fromDom(e.selection.getNode())),v4(e)}),()=>R.some(dt)):nA(e)?R.some(()=>{y4(e,e.selection.getRng(),G.fromDom(e.getBody()))}):R.none()},m5=e=>{const n=e.dom,o=e.selection,r=Od(e.getBody(),o.getNode());if(_c(r)&&n.isBlock(r)&&n.isEmpty(r)){const a=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(a),o.setRng(le.before(a).toRange())}return!0},rA=(e,n)=>e.selection.isCollapsed()?g7(e,n):h7(e,n),p7=(e,n)=>{const o=le.fromRangeStart(e.selection.getRng());return $r(n,e.getBody(),o).filter(r=>n?z_(r):I6(r)).bind(r=>Z0(n?0:-1,r)).map(r=>()=>e.selection.select(r))},cA=(e,n)=>e.selection.isCollapsed()?p7(e,n):R.none(),Y1=ke,f5=e=>Y1(e)&&e.data[0]===Ye,f2=e=>Y1(e)&&e.data[e.data.length-1]===Ye,g2=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Ye)},b7=e=>{var n;if(Y1(e.previousSibling))return f2(e.previousSibling)||e.previousSibling.appendData(Ye),e.previousSibling;if(Y1(e))return f5(e)||e.insertData(0,Ye),e;{const o=g2(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},v7=e=>{var n,o;if(Y1(e.nextSibling))return f5(e.nextSibling)||e.nextSibling.insertData(0,Ye),e.nextSibling;if(Y1(e))return f2(e)||e.appendData(Ye),e;{const r=g2(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Ch=(e,n)=>e?b7(n):v7(n),y7=Ce(Ch,!0),C7=Ce(Ch,!1),g5=(e,n)=>ke(e.container())?Ch(n,e.container()):Ch(n,e.getNode()),h5=(e,n)=>{const o=n.get();return o&&e.container()===o&&nm(o)},aA=(e,n)=>n.fold(o=>{nl(e.get());const r=y7(o);return e.set(r),R.some(le(r,r.length-1))},o=>Po(o).map(r=>{if(h5(r,e)){const a=e.get();return le(a,1)}else{nl(e.get());const a=g5(r,!0);return e.set(a),le(a,1)}}),o=>hc(o).map(r=>{if(h5(r,e)){const a=e.get();return le(a,a.length-1)}else{nl(e.get());const a=g5(r,!1);return e.set(a),le(a,a.length-1)}}),o=>{nl(e.get());const r=C7(o);return e.set(r),R.some(le(r,1))}),p5=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return R.none()},Kr=ci.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),b5=(e,n)=>{const o=Oa(n,e);return o||e},w7=(e,n,o)=>{const r=dO(o),a=b5(n,r.container());return Xm(e,a,r).fold(()=>Cr(a,r).bind(Ce(Xm,e,a)).map(u=>Kr.before(u)),R.none)},x7=(e,n)=>Bm(e,n)===null,v5=(e,n,o)=>Xm(e,n,o).filter(Ce(x7,n)),wz=(e,n,o)=>{const r=mO(o);return v5(e,n,r).bind(a=>gc(a,r).isNone()?R.some(Kr.start(a)):R.none())},pi=(e,n,o)=>{const r=dO(o);return v5(e,n,r).bind(a=>Cr(a,r).isNone()?R.some(Kr.end(a)):R.none())},iA=(e,n,o)=>{const r=mO(o),a=b5(n,r.container());return Xm(e,a,r).fold(()=>gc(a,r).bind(Ce(Xm,e,a)).map(u=>Kr.after(u)),R.none)},lA=e=>!sN(uA(e)),fl=(e,n,o)=>p5([w7,wz,pi,iA],[e,n,o]).filter(lA),uA=e=>e.fold(no,no,no,no),dA=e=>e.fold(Oe("before"),Oe("start"),Oe("end"),Oe("after")),Tx=e=>e.fold(Kr.before,Kr.before,Kr.after,Kr.after),_x=e=>e.fold(Kr.start,Kr.start,Kr.end,Kr.end),S7=(e,n)=>dA(e)===dA(n)&&uA(e)===uA(n),k7=(e,n,o,r,a,u)=>Fs(Xm(n,o,r),Xm(n,o,a),(f,p)=>f!==p&&p4(o,f,p)?Kr.after(e?f:p):u).getOr(u),E7=(e,n)=>e.fold(Ae,o=>!S7(o,n)),J1=(e,n,o,r,a)=>{const u=$a(e,a);return $r(e,o,u).map(Ce($a,e)).fold(()=>r.map(Tx),y=>fl(n,o,y).map(Ce(k7,e,n,o,u,y)).filter(Ce(E7,r))).filter(lA)},y5=(e,n)=>e?n.fold(bu(R.some,Kr.start),R.none,bu(R.some,Kr.after),R.none):n.fold(R.none,bu(R.some,Kr.before),R.none,bu(R.some,Kr.end)),C5=(e,n,o,r)=>{const a=$a(e,r),u=fl(n,o,a);return fl(n,o,a).bind(Ce(y5,e)).orThunk(()=>J1(e,n,o,u,r))},w5=e=>q(e.selection.getSel().modify),Ox=(e,n,o)=>{const r=e?1:-1;return n.setRng(le(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},A7=(e,n)=>{const o=n.selection.getRng(),r=e?le.fromRangeEnd(o):le.fromRangeStart(o);return w5(n)?e&&mp(r)?Ox(!0,n.selection,r):!e&&fp(r)?Ox(!1,n.selection,r):!1:!1};var mu;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(mu||(mu={}));const Dx=(e,n)=>e===yo.Backwards?Fr(n):n,xz=(e,n,o)=>e===yo.Forwards?n.next(o):n.prev(o),Sz=(e,n,o,r)=>go(r.getNode(n===yo.Forwards))?mu.Br:Mc(o,r)===!1?mu.Block:mu.Wrap,T7=(e,n,o,r)=>{const a=ii(o);let u=r;const f=[];for(;u;){const p=xz(n,a,u);if(!p)break;if(go(p.getNode(!1)))return n===yo.Forwards?{positions:Dx(n,f).concat([p]),breakType:mu.Br,breakAt:R.some(p)}:{positions:Dx(n,f),breakType:mu.Br,breakAt:R.some(p)};if(!p.isVisible()){u=p;continue}if(e(u,p)){const y=Sz(o,n,u,p);return{positions:Dx(n,f),breakType:y,breakAt:R.some(p)}}f.push(p),u=p}return{positions:Dx(n,f),breakType:mu.Eol,breakAt:R.none()}},Ia=(e,n,o,r)=>n(o,r).breakAt.map(a=>{const u=n(o,a).positions;return e===yo.Backwards?u.concat(a):[a].concat(u)}).getOr([]),mA=(e,n)=>oo(e,(o,r)=>o.fold(()=>R.some(r),a=>Fs(Tr(a.getClientRects()),Tr(r.getClientRects()),(u,f)=>{const p=Math.abs(n-u.left);return Math.abs(n-f.left)<=p?r:a}).or(o)),R.none()),Rx=(e,n)=>Tr(n.getClientRects()).bind(o=>mA(e,o.left)),Q1=Ce(T7,le.isAbove,-1),wh=Ce(T7,le.isBelow,1),_7=Ce(Ia,-1,Q1),O7=Ce(Ia,1,wh),kz=(e,n)=>Q1(e,n).breakAt.isNone(),La=(e,n)=>wh(e,n).breakAt.isNone(),D7=e=>Po(e).map(n=>[n].concat(wh(e,n).positions)).getOr([]),R7=e=>hc(e).map(n=>Q1(e,n).positions.concat(n)).getOr([]),B7=(e,n)=>Rx(_7(e,n),n),M7=(e,n)=>Rx(O7(e,n),n),$7=Qn,x5=(e,n)=>Math.abs(e.left-n),cf=(e,n)=>Math.abs(e.right-n),N7=e=>Ir(e,"node"),S5=(e,n)=>_r(e,(o,r)=>{const a=Math.min(x5(o,n),cf(o,n)),u=Math.min(x5(r,n),cf(r,n));return u===a&&N7(r)&&$7(r.node)||u<a?r:o}),P7=e=>{const n=o=>Jt(o,r=>{const a=mc(r);return a.node=e,a});if(Ue(e))return n(e.getClientRects());if(ke(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Bx=e=>ga(e,P7);var xh;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(xh||(xh={}));const k5=(e,n,o,r)=>{let a=r;for(;a=Tm(a,e,ti,n);)if(o(a))return},fA=(e,n,o,r,a,u)=>{let f=0;const p=[],y=M=>{let B=Bx([M]);e===-1&&(B=B.reverse());for(let H=0;H<B.length;H++){const V=B[H];if(!o(V,x)){if(p.length>0&&n(V,wu(p))&&f++,V.line=f,a(V))return!0;p.push(V)}}return!1},x=wu(u.getClientRects());if(!x)return p;const _=u.getNode();return _&&(y(_),k5(e,r,y,_)),p},E5=(e,n)=>n.line>e,F7=(e,n)=>n.line===e,h2=Ce(fA,xh.Up,ug,or),I7=Ce(fA,xh.Down,or,ug),A5=e=>wu(e.getClientRects()),L7=(e,n,o,r)=>{const a=ii(n);let u,f,p,y;const x=[];let _=0;e===1?(u=a.next,f=or,p=ug,y=le.after(r)):(u=a.prev,f=ug,p=or,y=le.before(r));const M=A5(y);do{if(!y.isVisible())continue;const B=A5(y);if(p(B,M))continue;x.length>0&&f(B,wu(x))&&_++;const H=mc(B);if(H.position=y,H.line=_,o(H))return x;x.push(H)}while(y=u(y));return x},T5=e=>n=>E5(e,n),gA=e=>n=>F7(e,n),Fd=(e,n)=>{e.selection.setRng(n),Jg(e,e.selection.getRng())},hA=(e,n,o)=>R.some(QE(e,n,o)),pA=(e,n,o,r,a,u)=>{const f=n===yo.Forwards,p=ii(e.getBody()),y=Ce(Zs,f?p.next:p.prev),x=f?r:a;if(!o.collapsed){const V=dg(o);if(u(V))return du(n,e,V,n===yo.Backwards,!1);if(nA(e)){const I=o.cloneRange();return I.collapse(n===yo.Backwards),R.from(I)}}const _=Dg(n,e.getBody(),o);if(x(_))return rf(e,_.getNode(!f));let M=y(_);const B=Jb(o);if(M)M=$a(f,M);else return B?R.some(o):R.none();if(x(M))return du(n,e,M.getNode(!f),f,!1);const H=y(M);return H&&x(H)&&U0(M,H)?du(n,e,H.getNode(!f),f,!1):B?hA(e,M.toRange(),!1):R.none()},_5=(e,n,o,r,a,u)=>{const f=Dg(n,e.getBody(),o),p=wu(f.getClientRects()),y=n===xh.Down,x=e.getBody();if(!p)return R.none();if(nA(e)){const Z=y?le.fromRangeEnd(o):le.fromRangeStart(o);return(y?M7:B7)(x,Z).orThunk(()=>R.from(Z)).map(K=>K.toRange())}const M=(y?I7:h2)(x,T5(1),f),B=mt(M,gA(1)),H=p.left,V=S5(B,H);if(V&&u(V.node)){const Z=Math.abs(H-V.left),U=Math.abs(H-V.right);return du(n,e,V.node,Z<U,!1)}let I;if(r(f)?I=f.getNode():a(f)?I=f.getNode(!0):I=dg(o),I){const Z=L7(n,x,T5(1),I);let U=S5(mt(Z,gA(1)),H);if(U||(U=wu(mt(Z,gA(0))),U))return hA(e,U.position.toRange(),!1)}return B.length===0?Mx(e,y).filter(y?a:r).map(Z=>QE(e,Z.toRange(),!1)):R.none()},Mx=(e,n)=>{const o=e.selection.getRng(),r=n?le.fromRangeEnd(o):le.fromRangeStart(o),a=b_(r.container(),e.getBody());if(n){const u=wh(a,r);return Ua(u.positions)}else{const u=Q1(a,r);return Tr(u.positions)}},bA=(e,n,o)=>Mx(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),Sh=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},vA=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},$x=(e,n,o)=>aA(n,o).map(r=>(Sh(e,r),o)),eb=(e,n,o)=>{const r=le.fromRangeStart(e);if(e.collapsed)return r;{const a=le.fromRangeEnd(e);return o?gc(n,a).getOr(a):Cr(n,r).getOr(r)}},O5=(e,n,o)=>{const r=e.getBody(),a=eb(e.selection.getRng(),r,o),u=Ce(oh,e);return C5(o,u,r,a).bind(p=>$x(e,n,p))},yA=(e,n,o)=>{const r=Jt(ee(G.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),a=mt(r,e),u=mt(o,e);ve(ko(a,u),Ce(vA,!1)),ve(ko(u,a),Ce(vA,!0))},H7=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=le.fromRangeStart(e.selection.getRng());le.isTextPosition(r)&&!b4(r)&&(Sh(e,tl(o,r)),n.set(null))}},D5=(e,n,o,r)=>{if(n.selection.isCollapsed()){const a=mt(r,e);ve(a,u=>{const f=le.fromRangeStart(n.selection.getRng());fl(e,n.getBody(),f).bind(p=>$x(n,o,p))})}},R5=(e,n,o)=>od(e)?O5(e,n,o).isSome():!1,B5=(e,n,o)=>od(n)?A7(e,n):!1,z7=e=>{const n=_o(null),o=Ce(oh,e);return e.on("NodeChange",r=>{od(e)&&(yA(o,e.dom,r.parents),H7(e,n),D5(o,e,n,r.parents))}),n},V7=Ce(B5,!0),Z7=Ce(B5,!1),p2=(e,n,o)=>{if(od(e)){const r=Mx(e,n).getOrThunk(()=>{const a=e.selection.getRng();return n?le.fromRangeEnd(a):le.fromRangeStart(a)});return fl(Ce(oh,e),e.getBody(),r).exists(a=>{const u=Tx(a);return aA(o,u).exists(f=>(Sh(e,f),!0))})}else return!1},U7=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},W7=e=>Fs(Po(e),hc(e),(n,o)=>{const r=$a(!0,n),a=$a(!1,o);return Cr(e,r).forall(u=>u.isEqual(a))}).getOr(!0),kh=(e,n)=>o=>aA(n,o).map(r=>()=>Sh(e,r)),Nx=(e,n,o,r)=>{const a=e.getBody(),u=Ce(oh,e);e.undoManager.ignore(()=>{e.selection.setRng(U7(o,r)),gO(e),fl(u,a,le.fromRangeStart(e.selection.getRng())).map(_x).bind(kh(e,n)).each(mr)}),e.nodeChanged()},M5=(e,n)=>{const o=Oa(n,e);return o||e},$5=(e,n,o,r)=>{const a=M5(e.getBody(),r.container()),u=Ce(oh,e),f=fl(u,a,r);return f.bind(y=>o?y.fold(Oe(R.some(_x(y))),R.none,Oe(R.some(Tx(y))),R.none):y.fold(R.none,Oe(R.some(Tx(y))),R.none,Oe(R.some(_x(y))))).map(kh(e,n)).getOrThunk(()=>{const y=Bg(o,a,r),x=y.bind(_=>fl(u,a,_));return Fs(f,x,()=>Xm(u,a,r).bind(_=>W7(_)?R.some(()=>{nh(e,o,G.fromDom(_))}):R.none())).getOrThunk(()=>x.bind(()=>y.map(_=>()=>{o?Nx(e,n,r,_):Nx(e,n,_,r)})))})},b2=(e,n,o)=>{if(e.selection.isCollapsed()&&od(e)){const r=le.fromRangeStart(e.selection.getRng());return $5(e,n,o,r)}return R.none()},j7=(e,n)=>{const o=_d(n,e);return kl(o,xa).fold(Oe(o),r=>o.slice(0,r))},G7=e=>Du(e)===1,q7=(e,n,o,r)=>{const a=Ce(BN,n),u=Jt(mt(r,a),f=>f.dom);if(u.length===0)nh(n,e,o);else{const f=RN(o.dom,u);n.selection.setRng(f.toRange())}},K7=(e,n)=>{const o=G.fromDom(e.getBody()),r=G.fromDom(e.selection.getStart()),a=mt(j7(o,r),G7);return Ua(a).bind(u=>{const f=le.fromRangeStart(e.selection.getRng());return sh(n,f,u.dom)&&!Yw(u)?R.some(()=>q7(n,e,u,a)):R.none()})},CA=(e,n)=>e.selection.isCollapsed()?K7(e,n):R.none(),wA=(e,n,o)=>Se(o)?R.some(()=>{e._selectionOverrides.hideFakeCaret(),nh(e,n,G.fromDom(o))}):R.none(),X7=(e,n)=>{const o=n?Dv:Rv,r=n?yo.Forwards:yo.Backwards,a=Dg(r,e.getBody(),e.selection.getRng());return o(a)?wA(e,n,a.getNode(!n)):R.from($a(n,a)).filter(u=>o(u)&&U0(a,u)).bind(u=>wA(e,n,u.getNode(!n)))},N5=(e,n)=>{const o=e.selection.getNode();return Ss(o)?wA(e,n,o):R.none()},xA=(e,n)=>e.selection.isCollapsed()?X7(e,n):N5(e,n),Y7=e=>wa(e,n=>_c(n.dom)||Qn(n.dom)).exists(n=>_c(n.dom)),yc=e=>Qs(e!=null?e:"").getOr(0),P5=(e,n)=>{const o=e||Qo(n)?"margin":"padding",r=Pi(n,"direction")==="rtl"?"-right":"-left";return o+r},SA=(e,n,o,r,a,u)=>{const f=P5(o,G.fromDom(u)),p=yc(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,p-r);e.setStyle(u,f,y?y+a:"")}else{const y=p+r+a;e.setStyle(u,f,y)}},F5=(e,n)=>vu(n,o=>{const r=P5(iC(e),o),a=Kd(o,r).map(yc).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&a>0}),Px=e=>{const n=L5(e);return!e.mode.isReadOnly()&&(n.length>1||F5(e,n))},I5=e=>Wb(e)||cc(e),J7=e=>Ec(e).exists(I5),L5=e=>mt(dy(e.selection.getSelectedBlocks()),n=>!I5(n)&&!J7(n)&&Y7(n)),H5=(e,n)=>{var o,r;const{dom:a}=e,u=lC(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",p=yc(u),y=iC(e);ve(L5(e),x=>{SA(a,n,y,p,f,x.dom)})},Q7=e=>H5(e,"indent"),kA=e=>H5(e,"outdent"),z5=e=>{if(e.selection.isCollapsed()&&Px(e)){const n=e.dom,o=e.selection.getRng(),r=le.fromRangeStart(o),a=n.getParent(o.startContainer,n.isBlock);if(a!==null&&i4(G.fromDom(a),r))return R.some(()=>kA(e))}return R.none()},V5=(e,n,o)=>El([z5,rA,tA,(r,a)=>b2(r,n,a),la,Hv,cA,xA,Ex,CA],r=>r(e,o)),Ez=(e,n)=>{V5(e,n,!1).fold(()=>{gO(e),v4(e)},mr)},eF=(e,n)=>{V5(e,n,!0).fold(()=>aN(e),mr)},tF=(e,n)=>{e.addCommand("delete",()=>{Ez(e,n)}),e.addCommand("forwardDelete",()=>{eF(e,n)})},EA=5,Z5=400,nF=e=>e.touches===void 0||e.touches.length!==1?R.none():R.some(e.touches[0]),oF=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>EA||r>EA},sF=e=>{const n=Gi(),o=_o(!1),r=l0(a=>{e.dispatch("longpress",{...a,type:"longpress"}),o.set(!0)},Z5);e.on("touchstart",a=>{nF(a).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:a.target};r.throttle(a),o.set(!1),n.set(f)})},!0),e.on("touchmove",a=>{r.cancel(),nF(a).each(u=>{n.on(f=>{oF(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",a=>{r.cancel(),a.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(a.target)).each(()=>{o.get()?a.preventDefault():e.dispatch("tap",{...a,type:"tap"})})},!0)},AA=(e,n)=>Pt(e,n.nodeName),TA=(e,n)=>ke(n)?!0:Ue(n)?!AA(e,n)&&!cr(n):!1,Fx=(e,n,o)=>Yt(U_(G.fromDom(o),G.fromDom(n)),r=>AA(e,r.dom)),U5=(e,n)=>{if(ke(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||AA(e,n.nextSibling)))return!0}return!1},_A=e=>e.dom.create(Un(e),Vs(e)),rF=e=>{const n=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements(),u=o.getStart(),f=e.getBody();let p,y,x=!1;const _=Un(e);if(!u||!Ue(u))return;const M=f.nodeName.toLowerCase();if(!r.isValidChild(M,_.toLowerCase())||Fx(a,f,u))return;const B=o.getRng(),{startContainer:H,startOffset:V,endContainer:I,endOffset:Z}=B,U=Ad(e);let K=f.firstChild;for(;K;)if(TA(a,K)){if(U5(a,K)){y=K,K=K.nextSibling,n.remove(y);continue}p||(p=_A(e),f.insertBefore(p,K),x=!0),y=K,K=K.nextSibling,p.appendChild(y)}else p=null,K=K.nextSibling;x&&U&&(B.setStart(H,V),B.setEnd(I,Z),o.setRng(B),e.nodeChanged())},W5=(e,n,o)=>{const r=G.fromDom(_A(e)),a=qb();zo(r,a),o(n,r);const u=document.createRange();return u.setStartBefore(a.dom),u.setEndBefore(a.dom),u},OA=e=>{e.on("NodeChange",Ce(rF,e))},j5=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,cF=(e,n,o)=>function(r){const a=arguments,u=a[a.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const p=n.lastIndexOf("<",u);if(p!==-1&&n.substring(p,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(a[0])+'">'+e.dom.encode(typeof a[1]=="string"?a[1]:a[0])+"</span>"},aF=(e,n,o)=>{let r=n.length,a=o.content;if(o.format!=="raw"){for(;r--;)a=a.replace(n[r],cF(e,a,EC(e)));o.content=a}},iF=e=>{const n="contenteditable",o=" "+we.trim(Yk(e))+" ",r=" "+we.trim(EC(e))+" ",a=j5(o),u=j5(r),f=AC(e);f.length>0&&e.on("BeforeSetContent",p=>{aF(e,f,p)}),e.parser.addAttributeFilter("class",p=>{let y=p.length;for(;y--;){const x=p[y];a(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,p=>{let y=p.length;for(;y--;){const x=p[y];!a(x)&&!u(x)||(f.length>0&&x.attr("data-mce-content")?(x.name="#text",x.type=3,x.raw=!0,x.value=x.attr("data-mce-content")):x.attr(n,null))}})},bi=e=>Il(G.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),DA=(e,n)=>{n.hasAttribute("data-mce-caret")&&(sm(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},G5=(e,n)=>{const o=bi(e);if(!!o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),DA(e,o);return}Hl(o)&&(DA(e,o),e.undoManager.add())}},Az=e=>{e.on("keyup compositionstart",Ce(G5,e))},lF=Qn,Tz=(e,n,o)=>pA(n,e,o,qm,Km,lF),_z=(e,n,o)=>_5(n,e,o,u=>qm(u)||V_(u),u=>Km(u)||Z_(u),lF),uF=e=>{const n=e.dom.create(Un(e));return n.innerHTML='<br data-mce-bogus="1">',n},q5=(e,n,o)=>{const r=ii(e.getBody()),a=Ce(Zs,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!a(le.fromRangeStart(o))){const p=G.fromDom(uF(e));n===1?sc(G.fromDom(u),p):qn(G.fromDom(u),p),e.selection.select(p.dom,!0),e.selection.collapse()}}},RA=(e,n)=>{const o=n?yo.Forwards:yo.Backwards,r=e.selection.getRng();return Tz(o,e,r).orThunk(()=>(q5(e,o,r),R.none()))},dF=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return _z(o,e,r).orThunk(()=>(q5(e,o,r),R.none()))},BA=(e,n)=>RA(e,n).exists(o=>(Fd(e,o),!0)),K5=(e,n)=>dF(e,n).exists(o=>(Fd(e,o),!0)),X5=(e,n)=>bA(e,n,n?Km:qm),v2=(e,n)=>m2(e,!n).map(o=>{const r=o.toRange(),a=e.selection.getRng();return n?r.setStart(a.startContainer,a.startOffset):r.setEnd(a.endContainer,a.endOffset),r}).exists(o=>(Fd(e,o),!0)),Y5=e=>$n(["figcaption"],so(e)),J5=(e,n)=>{const o=Ce(vn,n);return wa(G.fromDom(e.container()),xa,o).filter(Y5)},mF=(e,n,o)=>n?La(e.dom,o):kz(e.dom,o),fF=(e,n)=>{const o=G.fromDom(e.getBody()),r=le.fromRangeStart(e.selection.getRng());return J5(r,o).exists(()=>{if(mF(o,n,r)){const u=W5(e,o,n?zo:Ac);return e.selection.setRng(u),!0}else return!1})},y2=(e,n)=>e.selection.isCollapsed()?fF(e,n):!1,Q5={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},gF=e=>Jt(e,n=>({...Q5,...n})),hF=e=>Jt(e,n=>({...Q5,...n})),Ix=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,pF=(e,n)=>ga(gF(e),o=>Ix(o,n)?[o]:[]),bF=(e,n)=>ga(hF(e),o=>Ix(o,n)?[o]:[]),Mt=(e,...n)=>()=>e.apply(null,n),C2=(e,n)=>Ko(pF(e,n),o=>o.action()),eB=(e,n)=>El(bF(e,n),o=>o.action()),tB=(e,n)=>{const o=n?yo.Forwards:yo.Backwards,r=e.selection.getRng();return pA(e,o,r,Dv,Rv,Ss).exists(a=>(Fd(e,a),!0))},nB=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return _5(e,o,r,Dv,Rv,Ss).exists(a=>(Fd(e,a),!0))},oB=(e,n)=>bA(e,n,n?Rv:Dv),sB=ci.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),w2={...sB,none:e=>sB.none(e)},cB=(e,n)=>aB(e,n,Ae),aB=(e,n,o)=>ga(ws(e),r=>Jc(r,n)?o(r)?[r]:[]:aB(r,n,o)),vF=(e,n,o=pn)=>{if(o(n))return R.none();if($n(e,so(n)))return R.some(n);const r=a=>Jc(a,"table")||o(a);return Uf(n,e.join(","),r)},yF=(e,n)=>vF(["td","th"],e,n),CF=e=>cB(e,"th,td"),iB=(e,n)=>Mu(e,"table",n),MA=(e,n,o,r,a=Ae)=>{const u=r===1;if(!u&&o<=0)return w2.first(e[0]);if(u&&o>=e.length-1)return w2.last(e[e.length-1]);{const f=o+r,p=e[f];return a(p)?w2.middle(n,p):MA(e,n,f,r,a)}},ss=(e,n)=>iB(e,n).bind(o=>{const r=CF(o);return kl(r,u=>vn(e,u)).map(u=>({index:u,all:r}))}),wF=(e,n,o)=>ss(e,o).fold(()=>w2.none(e),a=>MA(a.all,e,a.index,1,n)),xF=(e,n,o)=>ss(e,o).fold(()=>w2.none(),a=>MA(a.all,e,a.index,-1,n)),SF=e=>Mu(e,"[contenteditable]"),$A=(e,n=!1)=>$l(e)?e.dom.isContentEditable:SF(e).fold(Oe(n),o=>NA(o)==="true"),NA=e=>e.dom.contentEditable,kF=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),af=(e,n)=>ga(n,o=>{const r=kF(mc(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),PA=(e,n,o)=>oo(e,(r,a)=>r.fold(()=>R.some(a),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),p=Math.sqrt(Math.abs(a.x-n)+Math.abs(a.y-o));return R.some(p<f?a:u)}),R.none()),FA=(e,n,o,r,a)=>{const u=ee(G.fromDom(o),"td,th,caption").map(p=>p.dom),f=mt(af(e,u),p=>n(p,a));return PA(f,r,a).map(p=>p.cell)},IA=e=>e.bottom,LA=e=>e.top,HA=(e,n)=>e.y<n,lB=(e,n)=>e.y>n,Lx=Ce(FA,IA,HA),Hx=Ce(FA,LA,lB),x2=(e,n)=>Tr(n.getClientRects()).bind(o=>Lx(e,o.left,o.top)).bind(o=>Rx(R7(o),n)),S2=(e,n)=>Ua(n.getClientRects()).bind(o=>Hx(e,o.left,o.top)).bind(o=>Rx(D7(o),n)),fu=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),k2=e=>e.breakType===mu.Wrap&&e.positions.length===0,uB=e=>e.breakType===mu.Br&&e.positions.length===1,zA=(e,n,o)=>{const r=e(n,o);return k2(r)||!go(o.getNode())&&uB(r)?!fu(e,n,r):r.breakAt.isNone()},EF=Ce(zA,Q1),dB=Ce(zA,wh),AF=(e,n,o)=>{const r=le.fromRangeStart(n);return Mg(!e,o).exists(a=>a.isEqual(r))},TF=(e,n,o,r)=>{const a=e.selection.getRng(),u=n?1:-1;return L0()&&AF(n,a,o)?(du(u,e,o,!n,!1).each(f=>{Fd(e,f)}),!0):!1},mB=(e,n,o)=>x2(n,o).orThunk(()=>Tr(o.getClientRects()).bind(r=>mA(_7(e,le.before(n)),r.left))).getOr(le.before(n)),_F=(e,n,o)=>S2(n,o).orThunk(()=>Tr(o.getClientRects()).bind(r=>mA(O7(e,le.after(n)),r.left))).getOr(le.after(n)),fB=(e,n)=>{const o=n.getNode(e);return Ya(o)?R.some(o):R.none()},OF=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?sc:qn,a=W5(n,G.fromDom(o),r);Fd(n,a)})},gB=(e,n,o)=>{const r=fB(!!n,o),a=n===!1;r.fold(()=>Fd(e,o.toRange()),u=>Mg(a,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Fd(e,o.toRange()),f=>OF(n,e,u)))},DF=(e,n,o,r)=>{const a=e.selection.getRng(),u=le.fromRangeStart(a),f=e.getBody();if(!n&&EF(r,u)){const p=mB(f,o,u);return gB(e,n,p),!0}else if(n&&dB(r,u)){const p=_F(f,o,u);return gB(e,n,p),!0}else return!1},hB=(e,n,o)=>R.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>R.from(e.dom.getParent(r,"table")).map(a=>o(e,n,a,r))).getOr(!1),pB=(e,n)=>hB(e,n,TF),bB=(e,n)=>hB(e,n,DF),RF=e=>{const n=Kg.exact(e,0,e,0);return yv(n)},vB=(e,n,o)=>o.fold(R.none,R.none,(r,a)=>k6(a).map(u=>RF(u)),r=>(e.execCommand("mceTableInsertRowAfter"),yB(e,n,r))),yB=(e,n,o)=>vB(e,n,wF(o,$A)),BF=(e,n,o)=>vB(e,n,xF(o,$A)),CB=(e,n)=>{const o=["table","li","dl"],r=G.fromDom(e.getBody()),a=p=>{const y=so(p);return vn(p,r)||$n(o,y)},u=e.selection.getRng(),f=G.fromDom(n?u.endContainer:u.startContainer);return yF(f,a).map(p=>(iB(p,a).each(_=>{e.model.table.clearSelectedCells(_.dom)}),e.selection.collapse(!n),(n?yB:BF)(e,a,p).each(_=>{e.selection.setRng(_)}),!0)).getOr(!1)},wB=(e,n,o)=>{const r=ln.os.isMacOS()||ln.os.isiOS();C2([{keyCode:Qe.RIGHT,action:Mt(BA,e,!0)},{keyCode:Qe.LEFT,action:Mt(BA,e,!1)},{keyCode:Qe.UP,action:Mt(K5,e,!1)},{keyCode:Qe.DOWN,action:Mt(K5,e,!0)},...r?[{keyCode:Qe.UP,action:Mt(v2,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Qe.DOWN,action:Mt(v2,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Qe.RIGHT,action:Mt(pB,e,!0)},{keyCode:Qe.LEFT,action:Mt(pB,e,!1)},{keyCode:Qe.UP,action:Mt(bB,e,!1)},{keyCode:Qe.DOWN,action:Mt(bB,e,!0)},{keyCode:Qe.RIGHT,action:Mt(tB,e,!0)},{keyCode:Qe.LEFT,action:Mt(tB,e,!1)},{keyCode:Qe.UP,action:Mt(nB,e,!1)},{keyCode:Qe.DOWN,action:Mt(nB,e,!0)},{keyCode:Qe.RIGHT,action:Mt(R5,e,n,!0)},{keyCode:Qe.LEFT,action:Mt(R5,e,n,!1)},{keyCode:Qe.RIGHT,ctrlKey:!r,altKey:r,action:Mt(V7,e,n)},{keyCode:Qe.LEFT,ctrlKey:!r,altKey:r,action:Mt(Z7,e,n)},{keyCode:Qe.UP,action:Mt(y2,e,!1)},{keyCode:Qe.DOWN,action:Mt(y2,e,!0)}],o).each(a=>{o.preventDefault()})},xB=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||wB(e,n,o)})},vi=(e,n)=>({container:e,offset:n}),zx=yn.DOM,Vx=e=>n=>e===n?-1:0,MF=e=>n=>e.isBlock(n)||$n(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",VA=(e,n,o)=>{if(ke(e)&&n>=0)return R.some(vi(e,n));{const r=Vn(zx);return R.from(r.backwards(e,n,Vx(e),o)).map(a=>vi(a.container,a.container.data.length))}},SB=(e,n,o)=>{if(ke(e)&&n>=e.length)return R.some(vi(e,n));{const r=Vn(zx);return R.from(r.forwards(e,n,Vx(e),o)).map(a=>vi(a.container,0))}},ZA=(e,n,o)=>{if(!ke(e))return R.none();const r=e.data;if(n>=0&&n<=r.length)return R.some(vi(e,n));{const a=Vn(zx);return R.from(a.backwards(e,n,Vx(e),o)).bind(u=>{const f=u.container.data;return ZA(u.container,n+f.length,o)})}},UA=(e,n,o)=>{if(!ke(e))return R.none();const r=e.data;if(n<=r.length)return R.some(vi(e,n));{const a=Vn(zx);return R.from(a.forwards(e,n,Vx(e),o)).bind(u=>UA(u.container,n-r.length,o))}},WA=(e,n,o,r,a)=>{const u=Vn(e,MF(e));return R.from(u.backwards(n,o,r,a))},kB=e=>e.collapsed&&ke(e.startContainer),jA=e=>Es(e.toString().replace(/\u00A0/g," ")),EB=e=>e!==""&&` \xA0\f
\r	\v`.indexOf(e)!==-1,GA=(e,n)=>e.substring(n.length),$F=(e,n,o)=>{let r;const a=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(EB(u))return R.none();if(a===u&&Ns(e,o,r,n))break}return R.some(r)},AB=(e,n,o,r=0)=>{if(!kB(n))return R.none();const a={text:"",offset:0},u=(p,y,x)=>(a.text=x+a.text,a.offset+=y,$F(a.text,a.offset,o).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return WA(e,n.startContainer,n.startOffset,u,f).bind(p=>{const y=n.cloneRange();if(y.setStart(p.container,p.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return R.none();const x=jA(y);return x.lastIndexOf(o)!==0||GA(x,o).length<r?R.none():R.some({text:GA(x,o),range:y,trigger:o})})},TB=(e,n,o,r=0)=>O_(G.fromDom(n.startContainer)).fold(()=>AB(e,n,o,r),a=>{const u=e.createRng();u.selectNode(a.dom);const f=jA(u);return R.some({range:u,text:GA(f,o),trigger:o})}),NF=e=>e.nodeType===Dl,_B=e=>e.nodeType===Jo,OB=e=>{if(NF(e))return vi(e,e.data.length);{const n=e.childNodes;return n.length>0?OB(n[n.length-1]):vi(e,n.length)}},DB=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?DB(o[n],0):o.length>0&&_B(e)&&o.length===n?OB(o[o.length-1]):vi(e,n)},RB=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return WA(e,n.container,n.offset,(a,u)=>u===0?-1:u,r).filter(a=>{const u=a.container.data.charAt(a.offset-1);return!EB(u)}).isSome()},PF=e=>n=>{const o=DB(n.startContainer,n.startOffset);return!RB(e,o)},FF=(e,n,o)=>El(o.triggers,r=>TB(e,n,r)),IF=(e,n)=>{const o=n(),r=e.selection.getRng();return FF(e.dom,r,o).bind(a=>qA(e,n,a))},qA=(e,n,o,r={})=>{var a;const u=n(),p=(a=e.selection.getRng().startContainer.nodeValue)!==null&&a!==void 0?a:"",y=mt(u.lookupByTrigger(o.trigger),_=>o.text.length>=_.minChars&&_.matches.getOrThunk(()=>PF(e.dom))(o.range,p,o.text));if(y.length===0)return R.none();const x=Promise.all(Jt(y,_=>_.fetch(o.text,_.maxResults,r).then(B=>({matchText:o.text,items:B,columns:_.columns,onAction:_.onAction,highlightOn:_.highlightOn}))));return R.some({lookupData:x,context:o})};var yi;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(yi||(yi={}));const KA=(e,n,o)=>e.stype===yi.Error?n(e.serror):o(e.svalue),LF=e=>{const n=[],o=[];return ve(e,r=>{KA(r,a=>o.push(a),a=>n.push(a))}),{values:n,errors:o}},HF=(e,n)=>e.stype===yi.Error?{stype:yi.Error,serror:n(e.serror)}:e,zF=(e,n)=>e.stype===yi.Value?{stype:yi.Value,svalue:n(e.svalue)}:e,VF=(e,n)=>e.stype===yi.Value?n(e.svalue):e,ZF=(e,n)=>e.stype===yi.Error?n(e.serror):e,BB=e=>({stype:yi.Value,svalue:e}),MB=e=>({stype:yi.Error,serror:e}),bs={fromResult:e=>e.fold(MB,BB),toResult:e=>KA(e,Zn.error,Zn.value),svalue:BB,partition:LF,serror:MB,bind:VF,bindError:ZF,map:zF,mapError:HF,fold:KA},Zx=e=>hn(e)&&gn(e).length>100?" removed due to size":JSON.stringify(e,null,2),$B=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:Oe("... (only showing first ten failures)")}]):e;return Jt(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},Ux=(e,n)=>bs.serror([{path:e,getErrorInfo:n}]),NB=(e,n,o)=>Ux(e,()=>'Could not find valid *required* value for "'+n+'" in '+Zx(o)),PB=(e,n)=>Ux(e,()=>'Choice schema did not contain choice key: "'+n+'"'),UF=(e,n,o)=>Ux(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+Zx(n)),WF=(e,n)=>Ux(e,Oe(n)),jF=(e,n,o,r)=>Bn(o,r).fold(()=>UF(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),FB=(e,n)=>({extract:(a,u)=>Bn(u,e).fold(()=>PB(a,e),p=>jF(a,u,n,p)),toString:()=>"chooseOn("+e+"). Possible values: "+gn(n)}),GF=(e,n)=>n,XA=(e,n)=>Vh(e)&&Vh(n)?Wx(e,n):n,IB=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const a=n[r];for(const u in a)Pt(a,u)&&(o[u]=e(o[u],a[u]))}return o},Wx=IB(XA),qF=IB(GF),YA=()=>({tag:"required",process:{}}),KF=e=>({tag:"defaultedThunk",process:e}),LB=e=>KF(Oe(e)),XF=()=>({tag:"option",process:{}}),YF=(e,n)=>e.length>0?bs.svalue(Wx(n,qF.apply(void 0,e))):bs.svalue(n),HB=e=>bu(bs.serror,Oi)(e),JF={consolidateObj:(e,n)=>{const o=bs.partition(e);return o.errors.length>0?HB(o.errors):YF(o.values,n)},consolidateArr:e=>{const n=bs.partition(e);return n.errors.length>0?HB(n.errors):bs.svalue(n.values)}},Dz=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),QF=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),zB=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},JA=e=>{const n=(r,a)=>bs.bindError(e(a),u=>WF(r,u)),o=Oe("val");return{extract:n,toString:o}},eI=JA(bs.svalue),VB=(e,n,o,r)=>Bn(n,o).fold(()=>NB(e,o,n),r),Ah=(e,n,o,r)=>{const a=Bn(e,n).getOrThunk(()=>o(e));return r(a)},Rz=(e,n,o)=>o(Bn(e,n)),tI=(e,n,o,r)=>{const a=Bn(e,n).map(u=>u===!0?o(e):u);return r(a)},nI=(e,n,o,r,a)=>{const u=p=>a.extract(n.concat([r]),p),f=p=>p.fold(()=>bs.svalue(R.none()),y=>{const x=a.extract(n.concat([r]),y);return bs.map(x,R.some)});switch(e.tag){case"required":return VB(n,o,r,u);case"defaultedThunk":return Ah(o,r,e.process,u);case"option":return Rz(o,r,f);case"defaultedOptionThunk":return tI(o,r,e.process,f);case"mergeWithThunk":return Ah(o,r,Oe({}),p=>{const y=Wx(e.process(o),p);return u(y)})}},gl=(e,n,o)=>{const r={},a=[];for(const u of o)zB(u,(f,p,y,x)=>{const _=nI(y,e,n,f,x);bs.fold(_,M=>{a.push(...M)},M=>{r[p]=M})},(f,p)=>{r[f]=p(n)});return a.length>0?bs.serror(a):bs.svalue(r)},QA=e=>({extract:(r,a)=>gl(r,a,e),toString:()=>`obj{
`+Jt(e,a=>zB(a,(u,f,p,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),ZB=e=>({extract:(r,a)=>{const u=Jt(a,(f,p)=>e.extract(r.concat(["["+p+"]"]),f));return JF.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),UB=e=>JA(n=>e(n).fold(bs.serror,bs.svalue)),oI=(e,n,o)=>{const r=n.extract([e],o);return bs.mapError(r,a=>({input:o,errors:a}))},WB=(e,n,o)=>bs.toResult(oI(e,n,o)),jB=e=>`Errors: 
`+$B(e.errors).join(`
`)+`

Input object: `+Zx(e.input),jx=(e,n)=>FB(e,at(n,QA)),sI=Oe(eI),Gx=(e,n)=>JA(o=>{const r=typeof o;return e(o)?bs.svalue(o):bs.serror(`Expected type: ${n} but got: ${r}`)}),rI=Gx(kc,"number"),qx=Gx(X,"string"),cI=Gx(Wt,"boolean"),Kx=Gx(q,"function"),tb=Dz,GB=QF,qB=e=>UB(n=>$n(e,n)?Zn.value(n):Zn.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),KB=(e,n)=>tb(e,e,YA(),n),XB=e=>KB(e,qx),YB=e=>KB(e,Kx),aI=(e,n)=>tb(e,e,YA(),ZB(n)),Xx=(e,n)=>tb(e,e,XF(),n),nb=e=>Xx(e,qx),JB=e=>Xx(e,Kx),iI=(e,n)=>tb(e,e,LB(n),sI()),ob=(e,n,o)=>tb(e,e,LB(n),o),Yx=(e,n)=>ob(e,n,rI),QB=(e,n)=>ob(e,n,qx),lI=(e,n,o)=>ob(e,n,qB(o)),eM=(e,n)=>ob(e,n,cI),tM=(e,n)=>ob(e,n,Kx),uI=(e,n,o)=>ob(e,n,ZB(o)),Bz=XB("type"),dI=YB("fetch"),eT=YB("onAction"),Mz=tM("onSetup",()=>dt),mI=nb("text"),Nr=nb("icon"),tT=nb("tooltip"),gu=nb("label"),nM=eM("active",!1),oM=eM("enabled",!0),sM=eM("primary",!1),nT=e=>iI("columns",e),Th=e=>QB("type",e),rM=QA([Bz,XB("trigger"),Yx("minChars",1),nT(1),Yx("maxResults",10),JB("matches"),dI,eT,uI("highlightOn",[],qx)]),cM=e=>WB("Autocompleter",rM,{trigger:e.ch,...e}),oT=[oM,tT,Nr,mI,Mz],aM=[nM].concat(oT),fI=[tM("predicate",pn),lI("scope","node",["node","editor"]),lI("position","selection",["node","selection","line"])],gI=oT.concat([Th("contextformbutton"),sM,eT,GB("original",no)]),hI=aM.concat([Th("contextformbutton"),sM,eT,GB("original",no)]),iM=oT.concat([Th("contextformbutton")]),pI=aM.concat([Th("contextformtogglebutton")]),bI=jx("type",{contextformbutton:gI,contextformtogglebutton:hI});QA([Th("contextform"),tM("initValue",Oe("")),gu,aI("commands",bI),Xx("launch",jx("type",{contextformbutton:iM,contextformtogglebutton:pI}))].concat(fI));const vI=e=>{const n=e.ui.registry.getAll().popups,o=at(n,f=>cM(f).fold(p=>{throw new Error(jB(p))},no)),r=mo(wf(o,f=>f.trigger)),a=Eo(o);return{dataset:o,triggers:r,lookupByTrigger:f=>mt(a,p=>p.trigger===f)}},yI=(e,n)=>{const o=l0(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const a=r.which;a===8?o.throttle():a===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},CI=e=>{const n=Gi(),o=_o(!1),r=n.isSet,a=()=>{r()&&(gz(e),sl(e),o.set(!1),n.clear())},u=x=>{r()||(c8(e,x.range),n.set({trigger:x.trigger,matchLength:x.text.length}))},f=Xc(()=>vI(e)),p=x=>n.get().map(_=>TB(e.dom,e.selection.getRng(),_.trigger).bind(M=>qA(e,f,M,x))).getOrThunk(()=>IF(e,f)),y=x=>{p(x).fold(a,_=>{u(_.context),_.lookupData.then(M=>{n.get().map(B=>{const H=_.context;B.trigger===H.trigger&&(H.text.length-B.matchLength>=10?a():(n.set({...B,matchLength:H.text.length}),o.get()?B3(e,{lookupData:M}):(o.set(!0),R3(e,{lookupData:M}))))})})})};e.addCommand("mceAutocompleterReload",(x,_)=>{const M=hn(_)?_.fetchOptions:{};y(M)}),e.addCommand("mceAutocompleterClose",a),yI(e,{cancelIfNecessary:a,load:y})},lM=e=>(n,o,r={})=>{const a=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:a,currentTarget:a,eventPhase:Event.AT_TARGET,originalTarget:a,explicitOriginalTarget:a,isTrusted:!1,srcElement:a,cancelable:!1,preventDefault:dt,inputType:o},f=ka(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},Jx=lM("input"),sT=lM("beforeinput"),wI=(e,n,o)=>{const r=o.keyCode===Qe.BACKSPACE?"deleteContentBackward":"deleteContentForward";eB([{keyCode:Qe.BACKSPACE,action:Mt(z5,e)},{keyCode:Qe.BACKSPACE,action:Mt(rA,e,!1)},{keyCode:Qe.DELETE,action:Mt(rA,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(tA,e,!1)},{keyCode:Qe.DELETE,action:Mt(tA,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(b2,e,n,!1)},{keyCode:Qe.DELETE,action:Mt(b2,e,n,!0)},{keyCode:Qe.BACKSPACE,action:Mt(Hv,e,!1)},{keyCode:Qe.DELETE,action:Mt(Hv,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(cA,e,!1)},{keyCode:Qe.DELETE,action:Mt(cA,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(xA,e,!1)},{keyCode:Qe.DELETE,action:Mt(xA,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(Ex,e,!1)},{keyCode:Qe.DELETE,action:Mt(Ex,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(la,e,!1)},{keyCode:Qe.DELETE,action:Mt(la,e,!0)},{keyCode:Qe.BACKSPACE,action:Mt(CA,e,!1)},{keyCode:Qe.DELETE,action:Mt(CA,e,!0)}],o).each(a=>{o.preventDefault(),sT(e,r).isDefaultPrevented()||(a(),Jx(e,r))})},$z=(e,n)=>{C2([{keyCode:Qe.BACKSPACE,action:Mt(m5,e)},{keyCode:Qe.DELETE,action:Mt(m5,e)}],n)},rT=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||wI(e,n,o)}),e.on("keyup",o=>{o.isDefaultPrevented()||$z(e,o)})},xI=e=>{for(;e;){if(Ue(e)||ke(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},E2=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=xI(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(Vo),n.firstChild)}const a=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new jt(n,n);let f=n,p;for(;p=u.current();){if(ke(p)){a.setStart(p,0),a.setEnd(p,0);break}if(r[p.nodeName.toLowerCase()]){a.setStartBefore(p),a.setEndBefore(p);break}f=p,p=u.next()}p||(a.setStart(f,0),a.setEnd(f,0))}else go(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(a.setStartBefore(n),a.setEndBefore(n)):(a.setStartAfter(n),a.setEndAfter(n)):(a.setStart(n,0),a.setEnd(n,0));e.selection.setRng(a),Jg(e,a)},Qx=(e,n)=>{const o=e.getRoot();let r,a=n;for(;a!==o&&a&&e.getContentEditable(a)!=="false";)e.getContentEditable(a)==="true"&&(r=a),a=a.parentNode;return a!==o?r:o},_h=e=>R.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Id=e=>_h(e).fold(Oe(""),n=>n.nodeName.toUpperCase()),Oh=e=>_h(e).filter(n=>cc(G.fromDom(n))).isSome(),eS=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,cT=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},tS=(e,n)=>{const o=e==null?void 0:e.parentNode;return Se(o)&&o.nodeName===n},aT=e=>Se(e)&&/^(OL|UL|LI)$/.test(e.nodeName),SI=e=>Se(e)&&/^(LI|DT|DD)$/.test(e.nodeName),uM=e=>aT(e)&&aT(e.parentNode),A2=e=>{const n=e.parentNode;return SI(n)?n:e},nS=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!Ue(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},kI=(e,n,o,r,a)=>{const u=e.dom,f=e.selection.getRng(),p=o.parentNode;if(o===e.getBody()||!p)return;uM(o)&&(a="LI");let y=n(a);if(nS(o,r,!0)&&nS(o,r,!1))if(tS(o,"LI")){const x=A2(o);u.insertAfter(y,x),cT(o)?u.remove(x):u.remove(o)}else u.replace(y,o);else if(nS(o,r,!0))tS(o,"LI")?(u.insertAfter(y,A2(o)),y.appendChild(u.doc.createTextNode(" ")),y.appendChild(o)):p.insertBefore(y,o),u.remove(r);else if(nS(o,r,!1))u.insertAfter(y,A2(o)),u.remove(r);else{o=A2(o);const x=f.cloneRange();x.setStartAfter(r),x.setEndAfter(o);const _=x.extractContents();a==="LI"&&eS(_,"LI")?(y=_.firstChild,u.insertAfter(_,o)):(u.insertAfter(_,o),u.insertAfter(y,o)),u.remove(r)}E2(e,y)},EI=e=>{ve(jb(G.fromDom(e),Ro),n=>{const o=n.dom;o.nodeValue=Es(o.data)})},AI=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},TI=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),iT=e=>{e.innerHTML='<br data-mce-bogus="1">'},oS=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,lT=(e,n)=>Se(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.getContentEditable(n)!=="true",Nz=(e,n,o)=>{var r;const a=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;Ue(u)&&!n[u.nodeName.toLowerCase()]&&a.push(u)}let f=a.length;for(;f--;)u=a[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||TI(e,u))&&e.remove(u)},dM=(e,n,o)=>ke(n)?e?o===1&&n.data.charAt(o-1)===Ye?0:o:o===n.data.length-1&&n.data.charAt(o)===Ye?n.data.length:o:o,Pz=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,dM(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,dM(!1,e.endContainer,e.endOffset)),n},_I=e=>{let n=e;do ke(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},Fz=(e,n,o)=>{const r=e.dom;R.from(o.style).map(r.parseStyle).each(y=>{const _={...Pb(G.fromDom(n)),...y};r.setStyles(n,_)});const a=R.from(o.class).map(y=>y.split(/\s+/)),u=R.from(n.className).map(y=>mt(y.split(/\s+/),x=>x!==""));Fs(a,u,(y,x)=>{const _=mt(x,B=>!$n(y,B)),M=[...y,..._];r.setAttrib(n,"class",M.join(" "))});const f=["style","class"],p=Yo(o,(y,x)=>!$n(f,x));r.setAttribs(n,p)},sS=(e,n)=>{if(Un(e).toLowerCase()===n.tagName.toLowerCase()){const r=Vs(e);Fz(e,n,r)}},OI=(e,n,o,r,a)=>{var u;const f=e.dom,p=(u=Qx(f,r))!==null&&u!==void 0?u:f.getRoot();let y=f.getParent(r,f.isBlock);if(!y||!lT(f,y)){y=y||p;let x;if(y===e.getBody()||ot(y)?x=y.nodeName.toLowerCase():y.parentNode?x=y.parentNode.nodeName.toLowerCase():x="",!y.hasChildNodes()){const B=f.create(n);return sS(e,B),y.appendChild(B),o.setStart(B,0),o.setEnd(B,0),B}let _=r;for(;_&&_.parentNode!==y;)_=_.parentNode;let M;for(;_&&!f.isBlock(_);)M=_,_=_.previousSibling;if(M&&e.schema.isValidChild(x,n.toLowerCase())){const B=M.parentNode,H=f.create(n);for(sS(e,H),B.insertBefore(H,M),_=M;_&&!f.isBlock(_);){const V=_.nextSibling;H.appendChild(_),_=V}o.setStart(r,a),o.setEnd(r,a)}}return r},DI=(e,n)=>{n.normalize();const o=n.lastChild;(!o||Ue(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},Iz=(e,n)=>{const o=E0(e);return en(n)?!1:X(o)?$n(we.explode(o),n.nodeName.toLowerCase()):o},uT={insert:(e,n)=>{let o,r,a,u,f=!1;const p=e.dom,y=e.schema,x=y.getNonEmptyElements(),_=e.selection.getRng(),M=Un(e),B=De=>{let be=o;const ae=y.getTextInlineElements();let ie;De||a==="TABLE"||a==="HR"?ie=p.create(De||M):ie=K.cloneNode(!1);let Re=ie;if(cC(e)===!1)p.setAttrib(ie,"style",null),p.setAttrib(ie,"class",null);else do if(ae[be.nodeName]){if($c(be)||cr(be))continue;const Je=be.cloneNode(!1);p.setAttrib(Je,"id",""),ie.hasChildNodes()?(Je.appendChild(ie.firstChild),ie.appendChild(Je)):(Re=Je,ie.appendChild(Je))}while((be=be.parentNode)&&be!==U);return sS(e,ie),iT(Re),ie},H=De=>{const be=dM(De,o,r);if(ke(o)&&(De?be>0:be<o.data.length))return!1;if(o.parentNode===K&&f&&!De||De&&Ue(o)&&o===K.firstChild)return!0;if(oS(o,"TABLE")||oS(o,"HR"))return f&&!De||!f&&De;const ae=new jt(o,K);ke(o)&&(De&&be===0?ae.prev():!De&&be===o.data.length&&ae.next());let ie;for(;ie=ae.current();){if(Ue(ie)){if(!ie.getAttribute("data-mce-bogus")){const Re=ie.nodeName.toLowerCase();if(x[Re]&&Re!=="br")return!1}}else if(ke(ie)&&!Hu(ie.data))return!1;De?ae.prev():ae.next()}return!0},V=()=>{let De;return/^(H[1-6]|PRE|FIGURE)$/.test(a)&&J!=="HGROUP"?De=B(M):De=B(),Iz(e,u)&&lT(p,u)&&p.isEmpty(K)?De=p.split(u,K):p.insertAfter(De,K),E2(e,De),De};wv(p,_).each(De=>{_.setStart(De.startContainer,De.startOffset),_.setEnd(De.endContainer,De.endOffset)}),o=_.startContainer,r=_.startOffset;const I=!!(n&&n.shiftKey),Z=!!(n&&n.ctrlKey);Ue(o)&&o.hasChildNodes()&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&ke(o)?r=o.data.length:r=0);const U=Qx(p,o);if(!U||AI(e,o))return;I||(o=OI(e,M,_,o,r));let K=p.getParent(o,p.isBlock)||p.getRoot();u=Se(K==null?void 0:K.parentNode)?p.getParent(K.parentNode,p.isBlock):null,a=K?K.nodeName.toUpperCase():"";const J=u?u.nodeName.toUpperCase():"";if(J==="LI"&&!Z){const De=u;K=De,u=De.parentNode,a=J}if(/^(LI|DT|DD)$/.test(a)&&Ue(u)&&p.isEmpty(K)){kI(e,B,u,K,M);return}if(K===e.getBody())return;const de=K.parentNode;let he;if(Lu(K))he=sm(K),p.isEmpty(K)&&iT(K),sS(e,he),E2(e,he);else if(H(!1))he=V();else if(H(!0)&&de)he=de.insertBefore(B(),K),E2(e,oS(K,"HR")?he:K);else{const De=Pz(_).cloneRange();De.setEndAfter(K);const be=De.extractContents();EI(be),_I(be),he=be.firstChild,p.insertAfter(be,K),Nz(p,x,he),DI(p,K),p.isEmpty(K)&&iT(K),he.normalize(),p.isEmpty(he)?(p.remove(he),V()):(sS(e,he),E2(e,he))}p.setAttrib(he,"id",""),e.dispatch("NewBlock",{newBlock:he})},fakeEventName:"insertParagraph"},RI=(e,n,o)=>{const r=new jt(n,o);let a;const u=e.getNonEmptyElements();for(;a=r.next();)if(u[a.nodeName.toLowerCase()]||ke(a)&&a.length>0)return!0;return!1},dT=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Jg(e,r)},BI=(e,n)=>{const o=e.selection,r=e.dom,a=o.getRng();let u,f=!1;wv(r,a).each(H=>{a.setStart(H.startContainer,H.startOffset),a.setEnd(H.endContainer,H.endOffset)});let p=a.startOffset,y=a.startContainer;if(Ue(y)&&y.hasChildNodes()){const H=p>y.childNodes.length-1;y=y.childNodes[Math.min(p,y.childNodes.length-1)]||y,H&&ke(y)?p=y.data.length:p=0}let x=r.getParent(y,r.isBlock);const _=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,M=_?_.nodeName.toUpperCase():"",B=!!(n&&n.ctrlKey);M==="LI"&&!B&&(x=_),ke(y)&&p>=y.data.length&&(RI(e.schema,y,x||r.getRoot())||(u=r.create("br"),a.insertNode(u),a.setStartAfter(u),a.setEndAfter(u),f=!0)),u=r.create("br"),Uo(r,a,u),dT(e,u,f),e.undoManager.add()},MI=(e,n)=>{const o=G.fromTag("br");qn(G.fromDom(n),o),e.undoManager.add()},Hz=(e,n)=>{$I(e.getBody(),n)||sc(G.fromDom(n),G.fromTag("br"));const o=G.fromTag("br");sc(G.fromDom(n),o),dT(e,o.dom,!1),e.undoManager.add()},pl=e=>go(e.getNode()),$I=(e,n)=>pl(le.after(n))?!0:Cr(e,le.after(n)).map(o=>go(o.getNode())).getOr(!1),mM=e=>e&&e.nodeName==="A"&&"href"in e,NI=e=>e.fold(pn,mM,mM,pn),PI=e=>{const n=Ce(oh,e),o=le.fromRangeStart(e.selection.getRng());return fl(n,e.getBody(),o).filter(NI)},FI=(e,n)=>{n.fold(dt,Ce(MI,e),Ce(Hz,e),dt)},fM={insert:(e,n)=>{const o=PI(e);o.isSome()?o.each(Ce(FI,e)):BI(e,n)},fakeEventName:"insertLineBreak"},gM=(e,n)=>_h(e).filter(o=>n.length>0&&Jc(G.fromDom(o),n)).isSome(),mT=e=>gM(e,Fp(e)),fT=e=>gM(e,Ip(e)),Ha=ci.generate([{br:[]},{block:[]},{none:[]}]),Zz=(e,n)=>fT(e),II=e=>(n,o)=>Oh(n)===e,hM=(e,n)=>(o,r)=>Id(o)===e.toUpperCase()===n,LI=e=>{const n=Qx(e.dom,e.selection.getStart());return en(n)},rS=e=>hM("pre",e),HI=()=>hM("summary",!0),Ci=e=>(n,o)=>sr(n)===e,zI=(e,n)=>mT(e),cS=(e,n)=>n,lf=e=>{const n=Un(e),o=Qx(e.dom,e.selection.getStart());return Se(o)&&e.schema.isValidChild(o.nodeName,n)},wi=(e,n)=>(o,r)=>oo(e,(u,f)=>u&&f(o,r),!0)?R.some(n):R.none(),pM=(e,n)=>p5([wi([Zz],Ha.none()),wi([rS(!0),LI],Ha.none()),wi([HI()],Ha.br()),wi([rS(!0),Ci(!1),cS],Ha.br()),wi([rS(!0),Ci(!1)],Ha.block()),wi([rS(!0),Ci(!0),cS],Ha.block()),wi([rS(!0),Ci(!0)],Ha.br()),wi([II(!0),cS],Ha.br()),wi([II(!0)],Ha.block()),wi([zI],Ha.br()),wi([cS],Ha.br()),wi([lf],Ha.block())],[e,!!(n&&n.shiftKey)]).getOr(Ha.none()),aS=(e,n,o)=>{n.selection.isCollapsed()||cN(n),!(Se(o)&&sT(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),Se(o)&&Jx(n,e.fakeEventName))},bM=(e,n)=>{const o=()=>aS(fM,e,n),r=()=>aS(uT,e,n),a=pM(e,n);switch(gs(e)){case"linebreak":a.fold(o,o,dt);break;case"block":a.fold(r,r,dt);break;case"invert":a.fold(r,o,dt);break;default:a.fold(o,r,dt);break}},VI=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),lz(e.undoManager),e.undoManager.transact(()=>{bM(e,n)}))},ZI=e=>{e.on("keydown",n=>{n.keyCode===Qe.ENTER&&VI(e,n)})},UI=(e,n,o)=>{const r=ln.os.isMacOS()||ln.os.isiOS();C2([{keyCode:Qe.END,action:Mt(X5,e,!0)},{keyCode:Qe.HOME,action:Mt(X5,e,!1)},...r?[]:[{keyCode:Qe.HOME,action:Mt(v2,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Qe.END,action:Mt(v2,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Qe.END,action:Mt(oB,e,!0)},{keyCode:Qe.HOME,action:Mt(oB,e,!1)},{keyCode:Qe.END,action:Mt(p2,e,!0,n)},{keyCode:Qe.HOME,action:Mt(p2,e,!1,n)}],o).each(a=>{o.preventDefault()})},WI=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||UI(e,n,o)})},jI=e=>{e.on("input",n=>{n.isComposing||K6(e)})},gT=Lr(),vM=(e,n,o)=>{C2([{keyCode:Qe.PAGE_UP,action:Mt(p2,e,!1,n)},{keyCode:Qe.PAGE_DOWN,action:Mt(p2,e,!0,n)}],o)},T2=e=>e.stopImmediatePropagation(),yM=e=>e.keyCode===Qe.PAGE_UP||e.keyCode===Qe.PAGE_DOWN,CM=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",T2,!0):!o&&e.get()&&n.off("NodeChange",T2),e.set(o)},GI=(e,n)=>{if(gT.os.isMacOS())return;const o=_o(!1);e.on("keydown",r=>{yM(r)&&CM(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||vM(e,n,r),yM(r)&&o.get()&&(CM(o,e,!1),e.nodeChanged())})},wM=(e,n)=>{const o=n.container(),r=n.offset();return ke(o)?(o.insertData(r,e),R.some(le(o,r+e.length))):Gp(n).map(a=>{const u=G.fromText(e);return n.isAtEnd()?sc(a,u):qn(a,u),le(u.dom,e.length)})},qI=Ce(wM,Vo),xM=Ce(wM," "),KI=e=>n=>n.fold(o=>gc(e.dom,le.before(o)),o=>Po(o),o=>hc(o),o=>Cr(e.dom,le.after(o))),SM=(e,n)=>o=>Q9(e,o)?qI(n):xM(n),kM=e=>n=>(e.selection.setRng(n.toRange()),e.nodeChanged(),!0),XI=e=>{const n=le.fromRangeStart(e.selection.getRng()),o=G.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=Ce(oh,e),a=le.fromRangeStart(e.selection.getRng());return fl(r,e.getBody(),a).bind(KI(o)).map(u=>()=>SM(o,n)(u).each(kM(e)))}else return R.none()},YI=(e,n)=>{eB([{keyCode:Qe.SPACEBAR,action:Mt(XI,e)}],n).each(o=>{n.preventDefault(),sT(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),Jx(e,"insertText",{data:" "}))})},hT=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||YI(e,n)})},JI=e=>n3(e)?[{keyCode:Qe.TAB,action:Mt(CB,e,!0)},{keyCode:Qe.TAB,shiftKey:!0,action:Mt(CB,e,!1)}]:[],QI=(e,n)=>{C2([...JI(e)],n).each(o=>{n.preventDefault()})},EM=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||QI(e,n)})},pT=e=>{if(e.addShortcut("Meta+P","","mcePrint"),CI(e),ul(e))return _o(null);{const n=z7(e);return Az(e),xB(e,n),rT(e,n),ZI(e),hT(e),jI(e),EM(e),WI(e,n),GI(e,n),n}};class AM{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",a=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(a.type==="nodechange"||!y1(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const a=n.selection.getStart(!0);!a||Hg(n)&&!r.isSameElementPath(a)&&n.dom.isChildOf(a,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",a=>{!a.isDefaultPrevented()&&Hg(n)&&(n.selection.getNode().nodeName==="IMG"?He.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!pC(this.editor)&&!this.editor.mode.isReadOnly()){const a=this.editor.getBody();r=o.getStart(!0)||a,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,a))&&(r=a);const u=[];this.editor.dom.getParent(r,f=>f===a?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,a=Fr(r.dom.getParents(n,Ae,r.getBody()));if(a.length===this.lastPath.length){for(o=a.length;o>=0&&a[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=a,!0}return this.lastPath=a,!1}}const TM="x-tinymce/html",bT=Oe(TM),Ld="<!-- "+TM+" -->",eL=e=>Ld+e,tL=e=>e.replace(Ld,""),_M=e=>e.indexOf(Ld)!==-1,iS=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),OM=(e,n)=>{let o="<"+e;const r=wf(n,(a,u)=>u+'="'+uc.encodeAllRaw(a)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},DM=(e,n,o)=>{const r=e.split(/\n\n/),a=OM(n,o),u="</"+n+">",f=Jt(r,y=>y.split(/\n/).join("<br />")),p=y=>a+y+u;return f.length===1?f[0]:Jt(f,p).join("")},RM="%MCEPASTEBIN%",BM=(e,n)=>{const{dom:o,selection:r}=e,a=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},RM);ln.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(a,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},nL=(e,n)=>{const o=e.dom;if(vT(e)){let r;const a=n.get();for(;r=vT(e);)o.remove(r),o.unbind(r);a&&e.selection.setRng(a)}n.set(null)},vT=e=>e.dom.get("mcepastebin"),oL=e=>Se(e)&&e.id==="mcepastebin",MM=e=>{const n=e.dom,o=(f,p)=>{f.appendChild(p),n.remove(p,!0)},[r,...a]=mt(e.getBody().childNodes,oL);ve(a,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const p=n.create("div");r.insertBefore(p,u[f]),o(p,u[f])}return r?r.innerHTML:""},lS=e=>e===RM,sL=e=>{const n=_o(null);return{create:()=>BM(e,n),remove:()=>nL(e,n),getEl:()=>vT(e),getHtml:()=>MM(e),getLastRng:n.get}},uS=(e,n)=>(we.each(n,o=>{Sl(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),$M=e=>{const n=Rc(),o=z1({},n);let r="";const a=n.getVoidElements(),u=we.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),p=y=>{const x=y.name,_=y;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(a[x]&&(r+=" "),u[x]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let M=y.firstChild;if(M)do p(M);while(M=M.next)}f[x]&&_.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=uS(e,[/<!\[[^\]]+\]>/g]),p(o.parse(e)),r},_2=e=>(e=uS(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,a)=>!r&&!a?" ":Vo],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),NM=e=>{let n=0;return()=>e+n++},PM=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return we.hasOwn(o,n)?"image/"+o[n]:"image/"+n},rL=(e,n)=>{const o=z1({},e.schema);o.addNodeFilter("meta",a=>{we.each(a,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return Gm({validate:!0},e.schema).serialize(r)},FM=(e,n)=>({content:e,cancelled:n}),dS=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),a=ow(e,r,o);return FM(a.node.innerHTML,a.isDefaultPrevented())},cL=(e,n,o)=>{const r=M3(e,n,o),a=rL(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?dS(e,a,o):FM(a,r.isDefaultPrevented())},aL=(e,n,o)=>cL(e,n,o),yT=(e,n)=>(e.insertContent(n,{merge:zp(e),paste:!0}),!0),CT=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),iL=(e,n)=>CT(n)&&Yt($0(e),o=>_l(n.toLowerCase(),`.${o.toLowerCase()}`)),lL=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),uL=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),dL=(e,n,o)=>!e.selection.isCollapsed()&&CT(n)?uL(e,n,o):!1,mL=(e,n,o)=>iL(e,n)?lL(e,n,o):!1,fL=(e,n)=>{we.each([dL,mL,yT],o=>!o(e,n,yT))},ao=(e,n,o)=>{o||!xg(e)?yT(e,n):fL(e,n)},gL=NM("mceclip"),wT=(e,n,o,r)=>{const a=aL(e,n,o);a.cancelled||ao(e,a.content,r)},mS=(e,n,o)=>{const r=o||_M(n);wT(e,tL(n),r,!1)},O2=(e,n)=>{const o=e.dom.encode(n).replace(/\r\n/g,`
`),r=cm(o,p_(e)),a=DM(r,Un(e),Vs(e));wT(e,a,!1,!0)},xT=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},Dh=(e,n)=>n in e&&e[n].length>0,IM=e=>Dh(e,"text/html")||Dh(e,"text/plain"),LM=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Se(o)?e.dom.encode(o[1]):void 0},hL=(e,n,o,r)=>{const a=gL(),u=Em(e)&&Se(o.name),f=u?LM(e,o.name):a,p=u?o.name:void 0,y=n.create(a,o,r,f,p);return n.add(y),y},pL=(e,n)=>{aE(n.uri).each(({data:o,type:r,base64Encoded:a})=>{const u=a?o:btoa(o),f=n.file,p=e.editorUpload.blobCache,y=p.getByData(u,r),x=y!=null?y:hL(e,p,f,u);mS(e,`<img src="${x.blobUri()}">`,!1)})},HM=e=>e.type==="paste",bL=e=>Promise.all(Jt(e,n=>iE(n).then(o=>({file:n,uri:o})))),vL=e=>{const n=$0(e);return o=>Ho(o.type,"image/")&&Yt(n,r=>PM(r)===o.type)},fS=(e,n)=>{const o=n.items?ga(Js(n.items),a=>a.kind==="file"?[a.getAsFile()]:[]):[],r=n.files?Js(n.files):[];return mt(o.length>0?o:r,vL(e))},D2=(e,n,o)=>{const r=HM(n)?n.clipboardData:n.dataTransfer;if(Am(e)&&r){const a=fS(e,r);if(a.length>0)return n.preventDefault(),bL(a).then(u=>{o&&e.selection.setRng(o),ve(u,f=>{pL(e,f)})}),!0}return!1},zM=e=>{var n,o;return ln.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},za=e=>Qe.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,VM=(e,n,o,r)=>{let a=_2(o);const u=Dh(n,bT())||_M(o),f=!u&&iS(a),p=CT(a);(lS(a)||!a.length||f&&!p)&&(r=!0),(r||p)&&(Dh(n,"text/plain")&&f?a=n["text/plain"]:a=$M(a)),!lS(a)&&(r?O2(e,a):mS(e,a,u))},sb=(e,n,o)=>{let r;const a=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{za(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||zM(u))return;const f=o.get()==="text"||r;r=!1;const p=xT(u.clipboardData);!IM(p)&&D2(e,u,a())||(Dh(p,"text/html")?(u.preventDefault(),VM(e,p,p["text/html"],f)):(n.create(),He.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),VM(e,p,y,f)},0)))})},R2=e=>{const n=a=>Ho(a,"webkit-fake-url"),o=a=>Ho(a,"data:"),r=a=>{var u;return((u=a.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(a,u,f)=>{if(!Am(e)&&r(f))for(const p of a){const y=p.attr("src");X(y)&&!p.attr("data-mce-object")&&y!==ln.transparentSrc&&(n(y)||!ad(e)&&o(y))&&p.remove()}})},yL=(e,n,o)=>{sb(e,n,o),R2(e)},CL=(e,n)=>{n.get()==="text"?(n.set("html"),Gg(e,!1)):(n.set("text"),Gg(e,!0)),e.focus()},rb=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{CL(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&mS(e,r.html,r.internal),r.text&&O2(e,r.text)})},wL=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(bT(),n),!0}catch{return!1}else return!1},gS=(e,n,o,r)=>{wL(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},hS=e=>(n,o)=>{const{dom:r,selection:a}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const p=a.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),a.setRng(y),He.setEditorTimeout(e,()=>{a.setRng(p),r.remove(u),o()},0)},ST=e=>({html:eL(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),xL=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),ZM=e=>!e.selection.isCollapsed()||xL(e),UM=e=>n=>{!n.isDefaultPrevented()&&ZM(e)&&gS(n,ST(e),hS(e),()=>{if(ln.browser.isChromium()||ln.browser.isFirefox()){const o=e.selection.getRng();He.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},WM=e=>n=>{!n.isDefaultPrevented()&&ZM(e)&&gS(n,ST(e),hS(e),dt)},SL=e=>{e.on("cut",UM(e)),e.on("copy",WM(e))},jM=(e,n)=>{var o,r;return st.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},kL=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},kT=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},EL=e=>Yt(e.files,n=>/^image\//.test(n.type)),GM=(e,n)=>{Kn(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),Am(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&EL(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented()||n.get())return;const r=jM(e,o);if(en(r))return;const a=xT(o.dataTransfer),u=Dh(a,bT());if((!IM(a)||kL(a))&&D2(e,o,r))return;const f=a[bT()],p=f||a["text/html"]||a["text/plain"];p&&(o.preventDefault(),He.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),kT(e,r);const y=_2(p);a["text/html"]?mS(e,y,u):O2(e,y)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{Am(e)&&!n.get()&&(o.preventDefault(),kT(e,jM(e,o))),o.type==="dragend"&&n.set(!1)})},AL=e=>{const n=a=>u=>{a(e,u)},o=rr(e);q(o)&&e.on("PastePreProcess",n(o));const r=wC(e);q(r)&&e.on("PastePostProcess",n(r))},TL=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},_L=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,qM=e=>we.trim(e).replace(_L,md).toLowerCase(),OL=(e,n,o)=>{const r=xC(e);if(o||r==="all"||!SC(e))return n;const a=r?r.split(/[, ]/):[];if(a&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(p,y,x,_)=>{const M=u.parseStyle(u.decode(x)),B={};for(let V=0;V<a.length;V++){const I=M[a[V]];let Z=I,U=u.getStyle(f,a[V],!0);/color/.test(a[V])&&(Z=qM(Z),U=qM(U)),U!==Z&&(B[a[V]]=I)}const H=u.serializeStyle(B,"span");return H?y+' style="'+H+'"'+_:y+_})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,p,y)=>f+' style="'+p+'"'+y),n},DL=e=>{(ln.browser.isChromium()||ln.browser.isSafari())&&TL(e,OL)},RL=e=>{const n=_o(!1),o=_o(kC(e)?"text":"html"),r=sL(e);DL(e),rb(e,o),AL(e),e.on("PreInit",()=>{SL(e),GM(e,n),yL(e,r,o)})},KM=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},BL=e=>{e.parser.addNodeFilter("details",n=>{ve(n,o=>{o.attr("data-mce-open",o.attr("open")),o.attr("open","open")})}),e.serializer.addNodeFilter("details",n=>{ve(n,o=>{const r=o.attr("data-mce-open");o.attr("open",X(r)?r:null),o.attr("data-mce-open",null)})})},ML=e=>{KM(e),BL(e)},XM=go,YM=ke,$L=e=>Qn(e.dom),Uz=e=>_c(e.dom),JM=e=>n=>vn(G.fromDom(e),n),Wz=(e,n)=>wa(G.fromDom(e),o=>Uz(o)||xa(o),JM(n)).getOr(G.fromDom(n)).dom,QM=(e,n)=>wa(G.fromDom(e),$L,JM(n)),e$=(e,n,o)=>{const r=new jt(e,n),a=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:a();f&&!XM(f);f=a())Br(f)&&(u=f);return u},jz=(e,n)=>{const r=le.fromRangeStart(e).getNode(),a=Wz(r,n),u=e$(r,a,!1),f=e$(r,a,!0),p=document.createRange();return QM(u,a).fold(()=>{YM(u)?p.setStart(u,0):p.setStartBefore(u)},y=>p.setStartBefore(y.dom)),QM(f,a).fold(()=>{YM(f)?p.setEnd(f,f.data.length):p.setEndAfter(f)},y=>p.setEndAfter(y.dom)),p},NL=e=>{const n=jz(e.selection.getRng(),e.getBody());e.selection.setRng(Hw(n))},Uc=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),NL(e))})};var B2;(function(e){e.Before="before",e.After="after"})(B2||(B2={}));const PL=(e,n)=>Math.abs(e.left-n),FL=(e,n)=>Math.abs(e.right-n),IL=(e,n)=>e>=n.top&&e<=n.bottom,LL=(e,n)=>e.top<n.bottom&&e.bottom>n.top,pS=(e,n)=>{const o=m0(e,n)/Math.min(e.height,n.height);return LL(e,n)&&o>.5},HL=(e,n)=>{const o=mt(e,r=>IL(n,r));return Tk(o).fold(()=>[[],e],r=>{const{pass:a,fail:u}=Ys(e,f=>pS(f,r));return[a,u]})},zL=(e,n)=>({node:e.node,position:PL(e,n)<FL(e,n)?B2.Before:B2.After}),t$=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),bS=(e,n,o)=>{const r=_=>Br(_.node)?R.some(_):Ue(_.node)?bS(Js(_.node.childNodes),n,o):R.none(),a=(_,M)=>{if(_.length>=2){const B=r(_[0]).getOr(_[0]),H=r(_[1]).getOr(_[1]);if(Math.abs(M(B,n,o)-M(H,n,o))<2){if(ke(B.node))return R.some(B);if(ke(H.node))return R.some(H)}}return R.none()},u=(_,M)=>{const B=Xo(_,(H,V)=>M(H,n,o)-M(V,n,o));return a(B,M).orThunk(()=>El(B,r))},[f,p]=HL(Bx(e),o),{pass:y,fail:x}=Ys(p,_=>_.top<o);return u(f,t$).orThunk(()=>u(x,d0)).orThunk(()=>u(y,d0))},ET=(e,n,o,r)=>{const a=(u,f)=>f.fold(()=>bS(Js(u.dom.childNodes),o,r),p=>{const y=mt(Js(u.dom.childNodes),x=>x!==p.dom);return bS(y,o,r)}).orThunk(()=>(vn(u,e)?R.none():oy(u)).bind(y=>a(y,R.some(u))));return a(n,R.none())},VL=(e,n,o)=>{const r=G.fromDom(e),a=Ni(r),f=G.fromPoint(a,n,o).filter(p=>tr(r,p)).getOr(r);return ET(r,f,n,o)},n$=(e,n,o)=>VL(e,n,o).filter(r=>Ag(r.node)).map(r=>zL(r,n)),o$=e=>{var n,o;const r=e.getBoundingClientRect(),a=e.ownerDocument,u=a.documentElement,f=a.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},s$=e=>e.inline?o$(e.getBody()):{left:0,top:0},ZL=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},r$=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},a={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:a},UL=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=o$(e.getContentAreaContainer()),r=r$(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},WL=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),jL=(e,n)=>WL(s$(e),ZL(e),UL(e,n)),uf=32,GL=100,vS=8,M2=16,AT=Qn,qL=Zy(AT,_c),KL=(e,n)=>AT(n)&&n!==e,XL=(e,n,o)=>en(n)||n===o||e.dom.isChildOf(n,o)?!1:!AT(n),YL=e=>{const n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},yS=(e,n,o,r)=>{const a=e.dom,u=n.cloneNode(!0);a.setStyles(u,{width:o,height:r}),a.setAttrib(u,"data-mce-selected",null);const f=a.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return a.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),a.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},c$=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},$2=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},a$=$2("left",-uf),i$=$2("left",uf),JL=$2("top",-uf),l$=$2("top",uf),TT=(e,n,o,r,a,u,f,p,y,x,_)=>{let M=0,B=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>a&&(M=n.pageX+o-a),n.pageY+r>u&&(B=n.pageY+r-u),e.style.width=o-M+"px",e.style.height=r-B+"px";const H=y.clientHeight,V=y.clientWidth,I=f+y.getBoundingClientRect().top,Z=p+y.getBoundingClientRect().left;_.on(U=>{U.intervalId.clear(),U.dragging&&(f+vS>=H?U.intervalId.set(l$(x)):f-vS<=0?U.intervalId.set(JL(x)):p+vS>=V?U.intervalId.set(i$(x)):p-vS<=0?U.intervalId.set(a$(x)):I+M2>=window.innerHeight?U.intervalId.set(l$(window)):I-M2<=0?U.intervalId.set(JL(window)):Z+M2>=window.innerWidth?U.intervalId.set(i$(window)):Z-M2<=0&&U.intervalId.set(a$(window)))})},CS=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},wS=e=>e.button===0,QL=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),eH=(e,n)=>o=>{if(wS(o)){const r=Ko(n.dom.getParents(o.target),qL).getOr(null);if(Se(r)&&KL(n.getBody(),r)){const a=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-a.x,relY:o.pageY-a.y,width:r.offsetWidth,height:r.offsetHeight,ghost:yS(n,r,r.offsetWidth,r.offsetHeight),intervalId:wk(GL)})}}},u$=(e,n)=>{const o=_p((a,u)=>{n._selectionOverrides.hideFakeCaret(),n.selection.placeCaretAt(a,u)},0);n.on("remove",o.cancel);const r=e;return a=>e.on(u=>{const f=Math.max(Math.abs(a.screenX-u.screenX),Math.abs(a.screenY-u.screenY));if(!u.dragging&&f>10){if(n.dispatch("dragstart",{target:u.element}).isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const p=QL(u,jL(n,a));c$(u.ghost,n.getBody()),TT(u.ghost,p,u.width,u.height,u.maxX,u.maxY,a.clientY,a.clientX,n.getContentAreaContainer(),n.getWin(),r),o.throttle(a.clientX,a.clientY)}})},tH=e=>{const n=e.getSel();if(Se(n)){const r=n.getRangeAt(0).startContainer;return ke(r)?r.parentNode:r}else return null},_T=(e,n)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(XL(n,tH(n.selection),r.element)){const a=YL(r.element);n.dispatch("drop",{clientX:o.clientX,clientY:o.clientY}).isDefaultPrevented()||n.undoManager.transact(()=>{CS(r.element),n.insertContent(n.dom.getOuterHTML(a)),n._selectionOverrides.hideFakeCaret()})}n.dispatch("dragend")}}),m$(e)},d$=(e,n)=>()=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.dispatch("dragend")}),m$(e)},m$=e=>{e.on(n=>{n.intervalId.clear(),CS(n.ghost)}),e.clear()},f$=e=>{const n=Gi(),o=yn.DOM,r=document,a=eH(n,e),u=u$(n,e),f=_T(n,e),p=d$(n,e);e.on("mousedown",a),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",p),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",p)}),e.on("keydown",y=>{y.keyCode===Qe.ESC&&p()})},nH=e=>{const n=a=>{if(!a.isDefaultPrevented()){const u=a.dataTransfer;u&&($n(u.types,"Files")||u.files.length>0)&&(a.preventDefault(),a.type==="drop"&&px(e,"Dropped file type is not supported"))}},o=a=>{Ed(e,a.target)&&n(a)},r=()=>{const a=yn.DOM,u=e.dom,f=document,p=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];ve(y,x=>{a.bind(f,x,o),u.bind(p,x,n)}),e.on("remove",()=>{ve(y,x=>{a.unbind(f,x,o),u.unbind(p,x,n)})})};e.on("init",()=>{He.setEditorTimeout(e,r,0)})},Gz=e=>{f$(e),D0(e)&&nH(e)},oH=e=>{const n=_p(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=QE(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},sH=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(Ss(o)){const r=Od(e.getBody(),o),a=Qn(r)?r:o;e.selection.getNode()!==a&&rf(e,a).each(u=>e.selection.setRng(u))}})})},Rh=Qn,OT=(e,n)=>Od(e.getBody(),n),g$=e=>{const n=e.selection,o=e.dom,r=e.getBody(),a=c3(e,r,o.isBlock,()=>Ad(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let p;const y=be=>Se(be)&&o.hasClass(be,"mce-offscreen-selection"),x=be=>be!==r&&(Rh(be)||Ss(be))&&o.isChildOf(be,r),_=be=>{be&&n.setRng(be)},M=(be,ae,ie,Re=!0)=>e.dispatch("ShowCaret",{target:ae,direction:be,before:ie}).isDefaultPrevented()?null:(Re&&n.scrollIntoView(ae,be===-1),a.show(ie,ae)),B=be=>{be.hasAttribute("data-mce-caret")&&(sm(be),n.scrollIntoView(be))},H=()=>{e.on("click",ae=>{const ie=OT(e,ae.target);ie&&Rh(ie)&&(ae.preventDefault(),e.focus())}),e.on("blur NewBlock",de),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",ae=>{const ie=ae.target,Re=OT(e,ie);Rh(Re)?(ae.preventDefault(),rf(e,Re).each(J)):x(ie)&&rf(e,ie).each(J)},!0),e.on("mousedown",ae=>{const ie=ae.target;if(ie!==r&&ie.nodeName!=="HTML"&&!o.isChildOf(ie,r)||!bz(e,ae.clientX,ae.clientY))return;de(),De();const Re=OT(e,ie);Rh(Re)?(ae.preventDefault(),rf(e,Re).each(J)):n$(r,ae.clientX,ae.clientY).each(Je=>{ae.preventDefault();const tt=M(1,Je.node,Je.position===B2.Before,!1);_(tt),Ue(Re)?Re.focus():e.getBody().focus()})}),e.on("keypress",ae=>{Qe.modifierPressed(ae)||Rh(n.getNode())&&ae.preventDefault()}),e.on("GetSelectionRange",ae=>{let ie=ae.range;if(p){if(!p.parentNode){p=null;return}ie=ie.cloneRange(),ie.selectNode(p),ae.range=ie}}),e.on("SetSelectionRange",ae=>{ae.range=Z(ae.range);const ie=J(ae.range,ae.forward);ie&&(ae.range=ie)});const be=ae=>Ue(ae)&&ae.id==="mcepastebin";e.on("AfterSetSelectionRange",ae=>{const ie=ae.range,Re=ie.startContainer.parentElement;!I(ie)&&!be(Re)&&De(),y(Re)||de()}),Gz(e),oH(e),sH(e)},V=be=>As(be)||Wf(be)||jf(be),I=be=>V(be.startContainer)||V(be.endContainer),Z=be=>{const ae=e.schema.getVoidElements(),ie=o.createRng(),Re=be.startContainer,Je=be.startOffset,tt=be.endContainer,kt=be.endOffset;return Pt(ae,Re.nodeName.toLowerCase())?Je===0?ie.setStartBefore(Re):ie.setStartAfter(Re):ie.setStart(Re,Je),Pt(ae,tt.nodeName.toLowerCase())?kt===0?ie.setEndBefore(tt):ie.setEndAfter(tt):ie.setEnd(tt,kt),ie},U=(be,ae)=>{const ie=G.fromDom(e.getBody()),Re=e.getDoc(),Je=Il(ie,"#"+u).getOrThunk(()=>{const qt=G.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Re);return Mo(qt,"id",u),zo(ie,qt),qt}),tt=o.createRng();Jn(Je),St(Je,[G.fromText(Vo,Re),G.fromDom(ae),G.fromText(Vo,Re)]),tt.setStart(Je.dom.firstChild,1),tt.setEnd(Je.dom.lastChild,0),Nb(Je,{top:o.getPos(be,e.getBody()).y+"px"}),kw(Je);const kt=n.getSel();return kt&&(kt.removeAllRanges(),kt.addRange(tt)),tt},K=be=>{const ae=be.cloneNode(!0),ie=e.dispatch("ObjectSelected",{target:be,targetClone:ae});if(ie.isDefaultPrevented())return null;const Re=U(be,ie.targetClone),Je=G.fromDom(be);return ve(ee(G.fromDom(e.getBody()),`*[${f}]`),tt=>{vn(Je,tt)||ls(tt,f)}),o.getAttrib(be,f)||be.setAttribute(f,"1"),p=be,De(),Re},J=(be,ae)=>{if(!be)return null;if(be.collapsed){if(!I(be)){const tt=ae?1:-1,kt=Dg(tt,r,be),qt=kt.getNode(!ae);if(Ag(qt))return M(tt,qt,ae?!kt.isAtEnd():!1,!1);const fn=kt.getNode(ae);if(Ag(fn))return M(tt,fn,ae?!1:!kt.isAtEnd(),!1)}return null}let ie=be.startContainer,Re=be.startOffset;const Je=be.endOffset;if(ke(ie)&&Re===0&&Rh(ie.parentNode)&&(ie=ie.parentNode,Re=o.nodeIndex(ie),ie=ie.parentNode),!Ue(ie))return null;if(Je===Re+1&&ie===be.endContainer){const tt=ie.childNodes[Re];if(x(tt))return K(tt)}return null},de=()=>{p&&p.removeAttribute(f),Il(G.fromDom(e.getBody()),"#"+u).each(un),p=null},he=()=>{a.destroy(),p=null},De=()=>{a.hide()};return ul(e)||H(),{showCaret:M,showBlockCaretContainer:B,hideFakeCaret:De,destroy:he}},rH=(e,n)=>{let o=n;for(let r=e.previousSibling;ke(r);r=r.previousSibling)o+=r.data.length;return o},h$=(e,n,o,r,a)=>{if(ke(o)&&(r<0||r>o.data.length))return[];const u=a&&ke(o)?[rH(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,a)),f=f.parentNode;return f===n?u.reverse():[]},DT=(e,n,o,r,a,u,f=!1)=>{const p=h$(e,n,o,r,f),y=h$(e,n,a,u,f);return{start:p,end:y}},p$=(e,n)=>{const o=n.slice(),r=o.pop();return kc(r)?oo(o,(u,f)=>u.bind(p=>R.from(p.childNodes[f])),R.some(e)).bind(u=>ke(u)&&(r<0||r>u.data.length)?R.none():R.some({node:u,offset:r})):R.none()},b$=(e,n)=>p$(e,n.start).bind(({node:o,offset:r})=>p$(e,n.end).map(({node:a,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(a,u),f})),v$=(e,n,o,r=!1)=>DT(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),N2=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),N2(e,r,o)}},xS=(e,n,o,r=!0)=>{const a=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(ke(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),ke(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),N2(e,a,o),a!==u&&N2(e,u,o))},SS=(e,n)=>R.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),y$=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:w0(r).concat(e.blockPatterns),inlinePatterns:x0(r).concat(e.inlinePatterns)}},kS=(e,n,o,r)=>{const a=e.createRng();return a.setStart(n,0),a.setEnd(o,r),a.toString()},C$=(e,n,o)=>{SB(n,0,n).each(a=>{const u=a.container;UA(u,o.start.length,n).each(f=>{const p=e.createRng();p.setStart(u,0),p.setEnd(f.container,f.offset),xS(e,p,y=>y===n)})})},cH=(e,n)=>{const o=e.dom,r=n.pattern,a=b$(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,p)=>{const y=p.get(f);return xn(y)&&Tr(y).exists(x=>Pt(x,"block"))};return SS(e,a).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{C$(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{C$(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},aH=e=>Xo(e,(n,o)=>o.start.length-n.start.length),w$=(e,n)=>{const o=aH(e),r=n.replace(Vo," ");return Ko(o,a=>n.indexOf(a.start)===0||r.indexOf(a.start)===0)},ES=(e,n,o,r)=>{var a;const u=e.dom,f=Un(e);if(!u.is(n,f))return[];const p=(a=n.textContent)!==null&&a!==void 0?a:"";return w$(o.blockPatterns,p).map(y=>we.trim(p).length===y.start.length?[]:[{pattern:y,range:DT(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},x$=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();ve(n,r=>cH(e,r)),e.selection.moveToBookmark(o)},RT=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),AS=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},S$=(e,n,o)=>{const r=b$(e.getRoot(),o).getOrDie("Unable to resolve path range"),a=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),p=r.startOffset===0?a:a.splitText(r.startOffset),y=p.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(RT(e,n+"-end"),f),start:y.insertBefore(RT(e,n+"-start"),p)}},BT=(e,n,o)=>{N2(e,e.get(n.prefix+"-end"),o),N2(e,e.get(n.prefix+"-start"),o)},MT=e=>e.start.length===0,iH=e=>(n,o)=>{const a=n.data.substring(0,o),u=a.lastIndexOf(e.charAt(e.length-1)),f=a.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},k$=(e,n,o,r)=>{const a=n.start;return WA(e,r.container,r.offset,iH(a),o).bind(f=>{if(f.offset>=a.length){const p=e.createRng();return p.setStart(f.container,f.offset-a.length),p.setEnd(f.container,f.offset),R.some(p)}else{const p=f.offset-a.length;return ZA(f.container,p,o).map(y=>{const x=e.createRng();return x.setStart(y.container,y.offset),x.setEnd(f.container,f.offset),x}).filter(y=>y.toString()===a).orThunk(()=>k$(e,n,o,vi(f.container,0)))}})},$T=(e,n,o,r,a,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),R.some(f)}return VA(o,r,a).bind(f=>k$(e,n,a,f).bind(y=>{var x;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return R.none();if(f.offset===0&&((x=y.endContainer.textContent)===null||x===void 0?void 0:x.length)===y.endOffset)return R.none()}return R.some(y)}))},lH=(e,n,o,r)=>{const a=e.dom,u=a.getRoot(),f=o.pattern,p=o.position.container,y=o.position.offset;return ZA(p,y-o.pattern.end.length,n).bind(x=>{const _=DT(a,u,x.container,x.offset,p,y,r);if(MT(f))return R.some({matches:[{pattern:f,startRng:_,endRng:_}],position:x});{const M=E$(e,o.remainingPatterns,x.container,x.offset,n,r),B=M.getOr({matches:[],position:x}),H=B.position;return $T(a,f,H.container,H.offset,n,M.isNone()).map(I=>{const Z=v$(a,u,I,r);return{matches:B.matches.concat([{pattern:f,startRng:Z,endRng:_}]),position:vi(I.startContainer,I.startOffset)}})}})},E$=(e,n,o,r,a,u)=>{const f=e.dom;return VA(o,r,f.getRoot()).bind(p=>{const y=kS(f,a,o,r);for(let x=0;x<n.length;x++){const _=n[x];if(!_l(y,_.end))continue;const M=n.slice();M.splice(x,1);const B=lH(e,a,{pattern:_,remainingPatterns:M,position:p},u);if(B.isSome())return B}return R.none()})},A$=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?ve(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},uH=(e,n,o,r)=>{const a=AS(e.dom,o);xS(e.dom,a,r),A$(e,n,a)},dH=(e,n,o,r,a)=>{const u=e.dom,f=AS(u,r),p=AS(u,o);xS(u,p,a),xS(u,f,a);const y={prefix:o.prefix,start:o.end,end:r.start},x=AS(u,y);A$(e,n,x)},mH=(e,n)=>{const o=Dp("mce_textpattern"),r=fa(n,(a,u)=>{const f=S$(e,o+`_end${a.length}`,u.endRng);return a.concat([{...u,endMarker:f}])},[]);return fa(r,(a,u)=>{const f=r.length-a.length-1,p=MT(u.pattern)?u.endMarker:S$(e,o+`_start${f}`,u.startRng);return a.concat([{...u,startMarker:p}])},[])},NT=(e,n,o,r,a,u)=>E$(e,a.inlinePatterns,o,r,n,u).fold(()=>[],f=>f.matches),PT=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),a=mH(o,n);ve(a,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),p=y=>y===f;MT(u.pattern)?uH(e,u.pattern,u.endMarker,p):dH(e,u.pattern,u.startMarker,u.endMarker,p),BT(o,u.endMarker,p),BT(o,u.startMarker,p)}),e.selection.moveToBookmark(r)},FT=(e,n)=>{const o=e.selection.getRng();return SS(e,o).map(r=>{var a;const u=Math.max(0,o.startOffset),f=y$(n,r,(a=r.textContent)!==null&&a!==void 0?a:""),p=NT(e,r,o.startContainer,u,f,!0),y=ES(e,r,f,!0);return y.length>0||p.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Iu),PT(e,p),x$(e,y);const x=e.selection.getRng(),_=VA(x.startContainer,x.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),_.each(M=>{const B=M.container;B.data.charAt(M.offset-1)===Iu&&(B.deleteData(M.offset-1,1),N2(e.dom,B.parentNode,H=>H===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},IT=(e,n)=>{const o=e.selection.getRng();SS(e,o).map(r=>{const a=Math.max(0,o.startOffset-1),u=kS(e.dom,r,o.startContainer,a),f=y$(n,r,u),p=NT(e,r,o.startContainer,a,f,!1);p.length>0&&e.undoManager.transact(()=>{PT(e,p)})})},T$=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},LT=(e,n)=>T$(e,n,(o,r)=>o===r.keyCode&&!Qe.modifierPressed(r)),fH=(e,n)=>T$(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),gH=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>oC(Kk(e),Xk(e)),a=()=>Jk(e);e.on("keydown",f=>{if(f.keyCode===13&&!Qe.modifierPressed(f)&&e.selection.isCollapsed()){const p=r();(p.inlinePatterns.length>0||p.blockPatterns.length>0||a())&&FT(e,p)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||a())&&IT(e,f)}};e.on("keyup",f=>{LT(o,f)&&u()}),e.on("keypress",f=>{fH(n,f)&&He.setEditorTimeout(e,u)})},hH=e=>{gH(e)},pH=e=>{const n=we.each,o=Qe.BACKSPACE,r=Qe.DELETE,a=e.dom,u=e.selection,f=e.parser,p=ln.browser,y=p.isFirefox(),x=p.isChromium()||p.isSafari(),_=ln.deviceType.isiPhone()||ln.deviceType.isiPad(),M=ln.os.isMacOS()||ln.os.isiOS(),B=(je,yt)=>{try{e.getDoc().execCommand(je,!1,String(yt))}catch{}},H=je=>je.isDefaultPrevented(),V=()=>{const je=ut=>{const Pe=a.create("body"),Nt=ut.cloneContents();return Pe.appendChild(Nt),u.serializer.serialize(Pe,{format:"html"})},yt=ut=>{const Pe=je(ut),Nt=a.createRng();Nt.selectNode(e.getBody());const _t=je(Nt);return Pe===_t};e.on("keydown",ut=>{const Pe=ut.keyCode;if(!H(ut)&&(Pe===r||Pe===o)){const Nt=e.selection.isCollapsed(),_t=e.getBody();if(Nt&&!a.isEmpty(_t)||!Nt&&!yt(e.selection.getRng()))return;ut.preventDefault(),e.setContent(""),_t.firstChild&&a.isBlock(_t.firstChild)?e.selection.setCursorLocation(_t.firstChild,0):e.selection.setCursorLocation(_t,0),e.nodeChanged()}})},I=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},Z=()=>{e.inline||a.bind(e.getDoc(),"mousedown mouseup",je=>{let yt;if(je.target===e.getDoc().documentElement)if(yt=u.getRng(),e.getBody().focus(),je.type==="mousedown"){if(As(yt.startContainer))return;u.placeCaretAt(je.clientX,je.clientY)}else u.setRng(yt)})},U=()=>{e.on("keydown",je=>{if(!H(je)&&je.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const yt=u.getNode(),ut=yt.previousSibling;if(yt.nodeName==="HR"){a.remove(yt),je.preventDefault();return}ut&&ut.nodeName&&ut.nodeName.toLowerCase()==="hr"&&(a.remove(ut),je.preventDefault())}}})},K=()=>{Range.prototype.getClientRects||e.on("mousedown",je=>{if(!H(je)&&je.target.nodeName==="HTML"){const yt=e.getBody();yt.blur(),He.setEditorTimeout(e,()=>{yt.focus()})}})},J=()=>{const je=rd(e);e.on("click",yt=>{const ut=yt.target;/^(IMG|HR)$/.test(ut.nodeName)&&a.getContentEditableParent(ut)!=="false"&&(yt.preventDefault(),e.selection.select(ut),e.nodeChanged()),ut.nodeName==="A"&&a.hasClass(ut,je)&&ut.childNodes.length===0&&(yt.preventDefault(),u.select(ut))})},de=()=>{const je=()=>{const ut=a.getAttribs(u.getStart().cloneNode(!1));return()=>{const Pe=u.getStart();Pe!==e.getBody()&&(a.setAttrib(Pe,"style",null),n(ut,Nt=>{Pe.setAttributeNode(Nt.cloneNode(!0))}))}},yt=()=>!u.isCollapsed()&&a.getParent(u.getStart(),a.isBlock)!==a.getParent(u.getEnd(),a.isBlock);e.on("keypress",ut=>{let Pe;return!H(ut)&&(ut.keyCode===8||ut.keyCode===46)&&yt()?(Pe=je(),e.getDoc().execCommand("delete",!1),Pe(),ut.preventDefault(),!1):!0}),a.bind(e.getDoc(),"cut",ut=>{if(!H(ut)&&yt()){const Pe=je();He.setEditorTimeout(e,()=>{Pe()})}})},he=()=>{e.on("keydown",je=>{if(!H(je)&&je.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const yt=u.getNode().previousSibling;if(yt&&yt.nodeName&&yt.nodeName.toLowerCase()==="table")return je.preventDefault(),!1}return!0})},De=()=>{e.on("keydown",je=>{if(H(je)||je.keyCode!==Qe.BACKSPACE)return;let yt=u.getRng();const ut=yt.startContainer,Pe=yt.startOffset,Nt=a.getRoot();let _t=ut;if(!(!yt.collapsed||Pe!==0)){for(;_t.parentNode&&_t.parentNode.firstChild===_t&&_t.parentNode!==Nt;)_t=_t.parentNode;_t.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,_t),yt=a.createRng(),yt.setStart(ut,0),yt.setEnd(ut,0),u.setRng(yt))}})},be=()=>{const je=()=>{B("StyleWithCSS",!1),B("enableInlineTableEditing",!1),dC(e)||B("enableObjectResizing",!1)};bC(e)||e.on("BeforeExecCommand mousedown",je)},ae=()=>{const je=()=>{n(a.select("a"),yt=>{var ut;let Pe=yt.parentNode;const Nt=a.getRoot();if((Pe==null?void 0:Pe.lastChild)===yt){for(;Pe&&!a.isBlock(Pe);){if(((ut=Pe.parentNode)===null||ut===void 0?void 0:ut.lastChild)!==Pe||Pe===Nt)return;Pe=Pe.parentNode}a.add(Pe,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",yt=>{(yt.type==="setcontent"||yt.command==="mceInsertLink")&&je()})},ie=()=>{e.on("init",()=>{B("DefaultParagraphSeparator",Un(e))})},Re=je=>{const yt=je.getBody(),ut=je.selection.getRng();return ut.startContainer===ut.endContainer&&ut.startContainer===yt&&ut.startOffset===0&&ut.endOffset===yt.childNodes.length},Je=()=>{e.on("keyup focusin mouseup",je=>{!Qe.modifierPressed(je)&&!Re(e)&&u.normalize()},!0)},tt=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},kt=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},qt=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",je=>{let yt;je.target.nodeName==="HTML"&&(yt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(yt),e.selection.normalize(),e.nodeChanged())}))},fn=()=>{M&&e.on("keydown",je=>{Qe.metaKeyPressed(je)&&!je.shiftKey&&(je.keyCode===37||je.keyCode===39)&&(je.preventDefault(),e.selection.getSel().modify("move",je.keyCode===37?"backward":"forward","lineboundary"))})},Dn=()=>{e.on("click",je=>{let yt=je.target;do if(yt.tagName==="A"){je.preventDefault();return}while(yt=yt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Ms=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",je=>{je.preventDefault()})})},_e=()=>{f.addNodeFilter("br",je=>{let yt=je.length;for(;yt--;)je[yt].attr("class")==="Apple-interchange-newline"&&je[yt].remove()})},At=dt,$t=()=>{if(!y||e.removed)return!1;const je=e.selection.getSel();return!je||!je.rangeCount||je.rangeCount===0},vt=()=>{x&&(Z(),J(),Ms(),I(),_&&(kt(),qt(),Dn())),y&&(K(),be(),tt(),fn())},Do=()=>{De(),V(),ln.windowsPhone||Je(),x&&(Z(),J(),ie(),Ms(),he(),_e(),_?(kt(),qt(),Dn()):I()),y&&(U(),K(),de(),be(),ae(),tt(),fn(),he())};return ul(e)?vt():Do(),{refreshContentEditable:At,isHidden:$t}},HT=yn.DOM,bH=(e,n)=>{const o=G.fromDom(e.getBody()),r=qd(qa(o)),a=G.fromTag("style");Mo(a,"type","text/css"),zo(a,G.fromText(n)),zo(r,a),e.on("remove",()=>{un(a)})},vH=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,TS=e=>Yo(e,n=>dr(n)===!1),_$=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return TS({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),remove_trailing_brs:n("remove_trailing_brs"),inline_styles:n("inline_styles"),root_name:vH(e),validate:!0,blob_cache:o,document:e.getDoc()})},O$=e=>{const n=e.options.get;return TS({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},yH=e=>{const n=e.options.get;return{..._$(e),...O$(e),...TS({url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},CH=e=>{const n=z1(_$(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const a=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const p=o[f];let y=p.attr(r);if(y&&!p.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=a.serializeStyle(a.parseStyle(y),p.name),y.length||(y=null),p.attr(u,y),p.attr(r,y)):r==="tabindex"?(p.attr(u,y),p.attr(r,null)):p.attr(u,e.convertURL(y,r,p.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const a=o[r],u=a.attr("type")||"no/type";u.indexOf("mce-")!==0&&a.attr("type","mce-"+u)}}),M0(e)&&n.addNodeFilter("#cdata",o=>{var r;let a=o.length;for(;a--;){const u=o[a];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const a=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(a)&&u.getAll("br").length===0&&u.append(new Gr("br",1))}}),n},wH=e=>{const n=B0(e);n&&He.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},xH=e=>{const n=e.dom.getRoot();!e.inline&&(!Hg(e)||e.selection.getStart(!0)===n)&&Po(n).each(o=>{const r=o.getNode(),a=Ya(r)?Po(r).getOr(o):o;e.selection.setRng(a.toRange())})},SH=e=>{e.bindPendingEventDelegates(),e.initialized=!0,hd(e),e.focus(!0),xH(e),e.nodeChanged({initial:!0});const n=CC(e);q(n)&&n.call(e,e),wH(e)},zT=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,kH=(e,n,o)=>{const r=[zT(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},_S=e=>{const n=zT(e),o=ts(e),r=e.contentCSS,a=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?a():e.on("remove",a)};if(e.contentStyles.length>0){let y="";we.each(e.contentStyles,x=>{y+=x+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(kH(e,r,o)).then(u).catch(u),p=zk(e);return p&&bH(e,p),f},EH=e=>{const n=e.getDoc(),o=e.getBody();tw(e),qk(e)||(n.body.spellcheck=!1,HT.setAttrib(o,"spellcheck","false")),e.quirks=pH(e),dv(e);const r=Vk(e);r!==void 0&&(o.dir=r);const a=cd(e);a&&e.on("BeforeSetContent",u=>{we.each(a,f=>{u.content=u.content.replace(f,p=>"<!--mce:protected "+escape(p)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},AH=e=>{ul(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},VT=e=>{e.removed!==!0&&(AH(e),SH(e))},D$=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(HT.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=bC(e),e.readonly||(e.inline&&HT.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=yx(e),e.schema=Rc(O$(e)),e.dom=yn(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:T0(e),referrerPolicy:_0(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=CH(e),e.serializer=BR(yH(e),e),e.selection=PE(e.dom,e.getWin(),e.serializer,e),e.annotator=pc(e),e.formatter=ZE(e),e.undoManager=uu(e),e._nodeChangeDispatcher=new AM(e),e._selectionOverrides=g$(e),sF(e),ML(e),iF(e),ul(e)||(Uc(e),hH(e));const a=pT(e);tF(e,a),OA(e),X8(e),RL(e);const u=WP(e);EH(e),u.fold(()=>{_S(e).then(()=>VT(e))},f=>{e.setProgressState(!0),_S(e).then(()=>{f().then(p=>{e.setProgressState(!1),VT(e),ER(e)},p=>{e.notificationManager.open({type:"error",text:String(p)}),VT(e),ER(e)})})})},R$=(e,n)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!n&&!e.inline){const o=e.iframeElement,r=V8(G.fromDom(o),"load",()=>{r.unbind(),e.contentDocument=o.contentDocument,D$(e)});if(ln.browser.isFirefox()){const a=e.getDoc();a.open(),a.write(e.iframeHTML),a.close()}else o.srcdoc=e.iframeHTML}else D$(e)},ZT=yn.DOM,OS=(e,n,o,r)=>{const a=G.fromTag("iframe");return r.each(u=>Mo(a,"tabindex",u)),Dr(a,o),Dr(a,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),Gd(a,"tox-edit-area__iframe"),a},TH=e=>{let n=sC(e)+"<html><head>";rC(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Nk(e),r=zs(e),a=e.translate(wg(e));return Os(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Os(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${a}"><br></body></html>`,n},_H=(e,n)=>{const o=e.translate("Rich Text Area"),r=va(G.fromDom(e.getElement()),"tabindex").bind(Qs),a=OS(e.id,o,k0(e),r).dom;a.onload=()=>{a.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=a,e.iframeHTML=TH(e),ZT.add(n.iframeContainer,a)},OH=(e,n)=>{_H(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=ZT.isHidden(n.editorContainer)),e.getElement().style.display="none",ZT.setAttrib(e.id,"aria-hidden","true"),R$(e)},B$=yn.DOM,DH=(e,n,o)=>{const r=Vc.get(o),a=Vc.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=we.trim(o),r&&we.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,a)||{};e.plugins[o]=u,q(u.init)&&(u.init(e,a),n.push(o))}catch(u){P8(e,o,u)}}},RH=e=>e.replace(/^\-/,""),BH=e=>{const n=[];ve(Gl(e),o=>{DH(e,n,RH(o))})},MH=e=>{const n=we.trim(Lp(e)),o=e.ui.registry.getAll().icons,r={...W1.get("default").icons,...W1.get(n).icons};En(r,(a,u)=>{Pt(o,u)||e.ui.registry.addIcon(u,a)})},$H=e=>{const n=nd(e);if(X(n)){const o=j1.get(n);e.theme=o(e,j1.urls[n])||{},q(e.theme.init)&&e.theme.init(e,j1.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},M$=e=>{const n=yr(e),o=Qm.get(n);e.model=o(e,Qm.urls[n])},NH=e=>{const n=e.theme.renderUI;return n?n():UT(e)},$$=e=>{const n=e.getElement(),r=nd(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},N$=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),PH=e=>{const n=B$.create("div");return B$.insertAfter(n,e),N$(n,n)},UT=e=>{const n=e.getElement();return e.inline?N$(null):PH(n)},P2=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,X(nd(e))?NH(e):q(nd(e))?$$(e):UT(e)},FH=(e,n)=>{const o={show:R.from(n.show).getOr(dt),hide:R.from(n.hide).getOr(dt),isEnabled:R.from(n.isEnabled).getOr(Ae),setEnabled:r=>{e.mode.isReadOnly()||R.from(n.setEnabled).each(a=>a(r))}};e.ui={...e.ui,...o}},P$=e=>{e.dispatch("ScriptsLoaded"),MH(e),$H(e),M$(e),BH(e);const n=P2(e);FH(e,R.from(n.api).getOr({})),e.editorContainer=n.editorContainer,H8(e),e.inline?R$(e):OH(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},Bh=yn.DOM,F$=e=>e.charAt(0)==="-",IH=(e,n)=>{const o=aC(n),r=Hk(n);if(!ta.hasCode(o)&&o!=="en"){const a=ha(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(a).catch(()=>{ef(n,a,o)})}},LH=(e,n)=>{const o=nd(e);if(X(o)&&!F$(o)&&!Pt(j1.urls,o)){const r=O0(e),a=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;j1.load(o,a).catch(()=>{$8(e,a,o)})}},I$=(e,n)=>{const o=yr(e);if(o!=="plugin"&&!Pt(Qm.urls,o)){const r=Ta(e),a=X(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;Qm.load(o,a).catch(()=>{N8(e,a,o)})}},HH=e=>R.from(Pk(e)).filter(ha).map(n=>({url:n,name:R.none()})),WT=(e,n,o)=>R.from(n).filter(r=>ha(r)&&!W1.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:R.some(r)})),zH=(e,n,o)=>{const r=WT(n,"default",o),a=HH(n).orThunk(()=>WT(n,Lp(n),""));ve(Ps([r,a]),u=>{e.add(u.url).catch(()=>{M8(n,u.url,u.name.getOrUndefined())})})},VH=(e,n)=>{const o=(r,a)=>{Vc.load(r,a).catch(()=>{B8(e,a,r)})};En(yC(e),(r,a)=>{o(a,r),e.options.set("plugins",Gl(e).concat(a))}),ve(Gl(e),r=>{r=we.trim(r),r&&!Vc.urls[r]&&!F$(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},ZH=e=>{const n=nd(e);return!X(n)||Se(j1.get(n))},UH=e=>{const n=yr(e);return Se(Qm.get(n))},WH=(e,n)=>{const o=Ea.ScriptLoader,r=()=>{!e.removed&&ZH(e)&&UH(e)&&P$(e)};LH(e,n),I$(e,n),IH(o,e),zH(o,e,n),VH(e,n),o.loadQueue().then(r,r)},jH=(e,n)=>$u.forElement(e,{contentCssCors:vC(n),referrerPolicy:_0(n)}),GH=e=>{const n=e.id;ta.setCode(aC(e));const o=()=>{Bh.unbind(window,"ready",o),e.render()};if(!Uu.Event.domLoaded){Bh.bind(window,"ready",o);return}if(!e.getElement())return;const r=G.fromDom(e.getElement()),a=Mf(r);e.on("remove",()=>{So(r.dom.attributes,f=>ls(r,f.name)),Dr(r,a)}),e.ui.styleSheetLoader=jH(r,e),el(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Bh.getParent(n,"form");u&&(e.formElement=u,Hp(e)&&!ip(e.getElement())&&(Bh.insertAfter(Bh.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Bh.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),gC(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=LR(e),e.notificationManager=IR(e),t3(e)&&e.on("GetContent",f=>{f.save&&(f.content=Bh.encode(f.content))}),hC(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Uk(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),WH(e,e.suffix)},qH=(e,n)=>({sections:Oe(e),options:Oe(n)}),L$=Lr().deviceType,jT=L$.isPhone(),GT=L$.isTablet(),cb=e=>{if(en(e))return[];{const n=xn(e)?e:e.split(/[ ,]/),o=Jt(n,bn);return mt(o,ha)}},H$=(e,n)=>{const o=GS(n,(r,a)=>$n(e,a));return qH(o.t,o.f)},KH=(e,n,o={})=>{const r=e.sections(),a=Bn(r,n).getOr({});return we.extend({},o,a)},qT=(e,n)=>Pt(e.sections(),n),XH=(e,n)=>qT(e,n)?e.sections()[n]:{},z$=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Bn(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),V$=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?we.extend({},e.external_plugins,r):r},YH=(e,n)=>[...cb(e),...cb(n)],JH=(e,n,o,r)=>e&&qT(n,"mobile")?r:o,KT=(e,n,o,r)=>{const a=cb(o.forced_plugins),u=cb(r.plugins),f=XH(n,"mobile"),p=f.plugins?cb(f.plugins):u,y=JH(e,n,u,p),x=YH(a,y);return we.extend(r,{forced_plugins:a,plugins:x})},DS=(e,n)=>e&&qT(n,"mobile"),RS=(e,n,o,r,a)=>{var u;const f=e?{mobile:z$((u=a.mobile)!==null&&u!==void 0?u:{},n)}:{},p=H$(["mobile"],Wx(f,a)),y=we.extend(o,r,p.options(),DS(e,p)?KH(p,"mobile"):{},{external_plugins:V$(r,p.options())});return KT(e,p,r,y)},Hd=(e,n)=>RS(jT||GT,jT,n,e,n),BS=(e,n)=>ME(e,n),ab=e=>{const n=(r,a)=>{e.formatter.toggle(r,a),e.nodeChanged()},o=r=>()=>{ve("left,center,right,justify".split(","),a=>{r!==a&&e.formatter.remove("align"+a)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},Z$=e=>{const n=o=>()=>{const r=e.selection,a=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return Yt(a,u=>Se(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},QH=e=>{ab(e),Z$(e)},e9=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let a=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(ln.os.isMacOS()||ln.os.isiOS())&&(a=a.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:a,type:"error"})}}})},U$=(e,n,o)=>{const r=G.fromDom(e.getRoot());return Mv(r,le.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Ow(r,le.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},t9=e=>{if(typeof e!="string"){const n=we.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},XT=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?U$(r,o.getRng(),n):n},Mh=(e,n)=>{const{content:o,details:r}=t9(n);gE(e,{...r,content:XT(e,o),format:"html",set:!1,selection:!0}).each(a=>{const u=r8(e,a.content,r);ph(e,u,a),e.addVisual()})},df=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Mh(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Mh(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Mh(e,r)},mceInsertContent:(n,o,r)=>{Mh(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},$h={"font-size":"size","font-family":"face"},W$=Df("font"),n9=(e,n,o)=>{const r=u=>Kd(u,e).orThunk(()=>W$(u)?Bn($h,e).bind(f=>va(u,f)):R.none()),a=u=>vn(G.fromDom(n),u);return ih(G.fromDom(o),u=>r(u),a)},o9=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),s9=(e,n)=>R.from(yn.DOM.getStyle(n,e,!0)),j$=e=>(n,o)=>R.from(o).map(G.fromDom).filter(Nn).bind(r=>n9(e,n,r.dom).or(s9(e,r.dom))).getOr(""),r9=j$("font-size"),c9=bu(o9,j$("font-family")),G$=e=>Po(e.getBody()).bind(n=>{const o=n.container();return R.from(ke(o)?o.parentNode:o)}),a9=e=>R.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?R.none():R.from(e.selection.getStart(!0))}),i9=(e,n)=>a9(e).orThunk(Ce(G$,e)).map(G.fromDom).filter(Nn).bind(n),YT=(e,n)=>i9(e,A(R.some,n)),l9=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=Qk(e),a=e3(e);return a.length>0?a[o-1]||n:r[o-1]||n}else return n}else return n},u9=e=>{const n=e.split(/\s*,\s*/);return Jt(n,o=>o.indexOf(" ")!==-1&&!(Ho(o,'"')||Ho(o,"'"))?`'${o}'`:o).join(",")},JT=(e,n)=>{const o=l9(e,n);e.formatter.toggle("fontname",{value:u9(o)}),e.nodeChanged()},d9=e=>YT(e,n=>c9(e.getBody(),n.dom)).getOr(""),m9=(e,n)=>{e.formatter.toggle("fontsize",{value:l9(e,n)}),e.nodeChanged()},q$=e=>YT(e,n=>r9(e.getBody(),n.dom)).getOr(""),f9=e=>YT(e,n=>{const o=G.fromDom(e.getBody()),r=ih(n,u=>Kd(u,"line-height"),Ce(vn,o)),a=()=>{const u=parseFloat(Pi(n,"line-height")),f=parseFloat(Pi(n,"font-size"));return String(u/f)};return r.getOrThunk(a)}).getOr(""),K$=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},g9=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,a)=>{n(o,{value:a})},BackColor:(o,r,a)=>{n("hilitecolor",{value:a})},FontName:(o,r,a)=>{JT(e,a)},FontSize:(o,r,a)=>{m9(e,a)},LineHeight:(o,r,a)=>{K$(e,a)},Lang:(o,r,a)=>{var u;n(o,{value:a.code,customValue:(u=a.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,a)=>{n(X(a)?a:"p")},mceToggleFormat:(o,r,a)=>{n(a)}})},QT=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>d9(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>q$(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>f9(e))},h9=e=>{g9(e),QT(e)},p9=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},b9=e=>{e.editorCommands.addCommands({Indent:()=>{Q7(e)},Outdent:()=>{kA(e)}}),e.editorCommands.addCommands({Outdent:()=>Px(e)},"state")},v9=e=>{const n=(o,r,a)=>{const u=X(a)?{href:a}:a,f=e.dom.getParent(e.selection.getNode(),"a");hn(u)&&X(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")},mceInsertLink:n,createLink:n})},X$=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const a=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(a)}}}})},e_=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},Y$=e=>{X$(e),e_(e)},t_=e=>{e.editorCommands.addCommands({insertParagraph:()=>{aS(uT,e)},mceInsertNewLine:(n,o,r)=>{bM(e,r)},InsertLineBreak:(n,o,r)=>{aS(fM,e)}})},y9=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let a=0;e.dom.getParent(e.selection.getNode(),u=>Ue(u)&&a++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),_c);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},qz=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const a=r!=null?r:e.selection.getNode();if(a!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(a,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{J3(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},Kz=e=>{QH(e),e9(e),p9(e),y9(e),df(e),v9(e),b9(e),t_(e),Y$(e),h9(e),qz(e)};class J${constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,a){const u=this.editor,f=n.toLowerCase(),p=a==null?void 0:a.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!p?u.focus():Be(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return q(x)?(x(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return q(r)?r(o):!1}queryCommandValue(n){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return q(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;En(n,(a,u)=>{ve(u.toLowerCase().split(","),f=>{r[o][f]=a})})}addCommand(n,o,r){const a=n.toLowerCase();this.commands.exec[a]=(u,f,p)=>o.call(r!=null?r:this.editor,f,p)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r!=null?r:this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r!=null?r:this.editor)}}const mf="data-mce-contenteditable",C9=(e,n,o)=>{Qh(e,n)&&!o?$f(e,n):o&&Gd(e,n)},n_=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},MS=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Xz=e=>{ve(ee(e,'*[contenteditable="true"]'),n=>{Mo(n,mf,"true"),MS(n,!1)})},Yz=e=>{ve(ee(e,`*[${mf}="true"]`),n=>{ls(n,mf),MS(n,!0)})},Q$=e=>{R.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},e6=e=>{e.selection.setRng(e.selection.getRng())},w9=(e,n)=>{const o=G.fromDom(e.getBody());C9(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),Q$(e),e.readonly=!0,MS(o,!1),Xz(o)):(e.readonly=!1,MS(o,!0),Yz(o),n_(e,"StyleWithCSS",!1),n_(e,"enableInlineTableEditing",!1),n_(e,"enableObjectResizing",!1),X3(e)&&e.focus(),e6(e),e.nodeChanged())},Nh=e=>e.readonly,t6=e=>{e.parser.addAttributeFilter("contenteditable",n=>{Nh(e)&&ve(n,o=>{o.attr(mf,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(mf,n=>{Nh(e)&&ve(n,o=>{o.attr("contenteditable",o.attr(mf))})}),e.serializer.addTempAttr(mf)},Jz=e=>{e.serializer?t6(e):e.on("PreInit",()=>{t6(e)})},Qz=e=>e.type==="click",eV=["copy"],x9=e=>$n(eV,e.type),tV=(e,n)=>Mu(n,"a",r=>vn(r,G.fromDom(e.getBody()))).bind(r=>va(r,"href")),S9=(e,n)=>{if(Qz(n)&&!Qe.metaKeyPressed(n)){const o=G.fromDom(n.target);tV(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const a=e.dom.select(`${r},[name="${qh(r,"#")}"]`);a.length&&e.selection.scrollIntoView(a[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else x9(n)&&e.dispatch(n.type,n)},Ph=e=>{e.on("ShowCaret",n=>{Nh(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{Nh(e)&&n.preventDefault()})},o_=we.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class ib{constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||pn}static isNative(n){return!!o_[n.toLowerCase()]}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),a=s0(r,o!=null?o:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(a);const u=this.bindings[r];if(u)for(let f=0,p=u.length;f<p;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),a.isImmediatePropagationStopped())return a;if(y.func.call(this.scope,a)===!1)return a.preventDefault(),a}}return a}on(n,o,r,a){if(o===!1&&(o=pn),o){const u={func:o,removed:!1};a&&we.extend(u,a);const f=n.toLowerCase().split(" ");let p=f.length;for(;p--;){const y=f[p];let x=this.bindings[y];x||(x=[],this.toggleEvent(y,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[y]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let a=r.length;for(;a--;){const u=r[a];let f=this.bindings[u];if(!u)return En(this.bindings,(p,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const p=Ys(f,y=>y.func===o);f=p.fail,this.bindings[u]=f,ve(p.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else En(this.bindings,(r,a)=>{this.toggleEvent(a,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const lb=e=>(e._eventDispatcher||(e._eventDispatcher=new ib({scope:e,toggleEvent:(n,o)=>{ib.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),$S={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return s0(e.toLowerCase(),n!=null?n:{},r);const a=lb(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!a.isPropagationStopped();)u.dispatch(e,a,!1),u=u.parent?u.parent():void 0}return a},on(e,n,o){return lb(this).on(e,n,o)},off(e,n){return lb(this).off(e,n)},once(e,n){return lb(this).once(e,n)},hasEventListeners(e){return lb(this).has(e)}},F2=yn.DOM;let Fh;const NS=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(n))return e.getDoc().documentElement;const o=mC(e);return o?(e.eventRoot||(e.eventRoot=F2.select(o)[0]),e.eventRoot):e.getBody()},k9=e=>!e.hidden&&!Nh(e),n6=(e,n,o)=>{k9(e)?e.dispatch(n,o):Nh(e)&&S9(e,o)},ff=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=NS(e,n);if(mC(e)){if(Fh||(Fh={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Fh&&(En(Fh,(a,u)=>{e.dom.unbind(NS(e,u))}),Fh=null)})),Fh[n])return;const r=a=>{const u=a.target,f=e.editorManager.get();let p=f.length;for(;p--;){const y=f[p].getBody();(y===u||F2.isChildOf(u,y))&&n6(f[p],n,a)}};Fh[n]=r,F2.bind(o,n,r)}else{const r=a=>{n6(e,n,a)};F2.bind(o,n,r),e.delegates[n]=r}},o6={...$S,bindPendingEventDelegates(){const e=this;we.each(e._pendingNativeEvents,n=>{ff(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?ff(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(NS(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(En(e.delegates,(r,a)=>{e.dom.unbind(NS(e,a),a,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},s6=e=>X(e)?{value:e.split(/[ ,]/),valid:!0}:kn(e,X)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},E9=e=>{const n=(()=>{switch(e){case"array":return xn;case"boolean":return Wt;case"function":return q;case"number":return kc;case"object":return hn;case"string":return X;case"string[]":return s6;case"object[]":return o=>kn(o,hn);case"regexp":return o=>Sl(o,RegExp);default:return Ae}})();return o=>s_(o,n,`The value must be a ${e}.`)},PS=e=>X(e.processor),r6=(e,n)=>{const o=Ao(n.message)?"":`. ${n.message}`;return e+o},c6=e=>e.valid,s_=(e,n,o="")=>{const r=n(e);return Wt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},a6=(e,n,o)=>{if(!dr(n)){const r=s_(n,o);if(c6(r))return r.value;console.error(r6(`Invalid default value passed for the "${e}" option`,r))}},A9=(e,n)=>{const o={},r={},a=(M,B,H)=>{const V=s_(B,H);return c6(V)?(r[M]=V.value,!0):(console.warn(r6(`Invalid value passed for the ${M} option`,V)),!1)},u=(M,B)=>{const H=PS(B)?E9(B.processor):B.processor,V=a6(M,B.default,H);o[M]={...B,default:V,processor:H},Bn(r,M).orThunk(()=>Bn(n,M)).each(Z=>a(M,Z,H))},f=M=>Pt(o,M);return{register:u,isRegistered:f,get:M=>Bn(r,M).orThunk(()=>Bn(o,M).map(B=>B.default)).getOrUndefined(),set:(M,B)=>{if(f(M)){const H=o[M];return H.immutable?(console.error(`"${M}" is an immutable option and cannot be updated`),!1):a(M,B,H.processor)}else return console.warn(`"${M}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:M=>{const B=f(M);return B&&delete r[M],B},isSet:M=>Pt(r,M)}},T9=["design","readonly"],i6=(e,n,o,r)=>{const a=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}a.deactivate(),a.editorReadOnly!==u.editorReadOnly&&w9(e,u.editorReadOnly),n.set(r),ew(e,r)},_9=(e,n,o,r)=>{if(r!==o.get()){if(!Pt(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?i6(e,o,n,r):e.on("init",()=>i6(e,o,n,r))}},r_=(e,n,o)=>{if($n(T9,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},O9=e=>{const n=_o("design"),o=_o({design:{activate:dt,deactivate:dt,editorReadOnly:!1},readonly:{activate:dt,deactivate:dt,editorReadOnly:!0}});return Jz(e),Ph(e),{isReadOnly:()=>Nh(e),set:r=>_9(e,o.get(),n,r),get:()=>n.get(),register:(r,a)=>{o.set(r_(o.get(),r,a))}}},c_=we.each,Io=we.explode,D9={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},l6=we.makeMap("alt,ctrl,shift,meta,access"),u6=e=>e in l6,d6=e=>{const n={},o=ln.os.isMacOS()||ln.os.isiOS();c_(Io(e.toLowerCase(),"+"),u=>{u6(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=D9[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let a;for(a in l6)n[a]?r.push(a):n[a]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class FS{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(c_(o.shortcuts,a=>{o.matchShortcut(r,a)&&(o.pendingPatterns=a.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(a))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,a){const u=this,f=u.normalizeCommandFunc(r);return c_(Io(we.trim(n)),p=>{const y=u.createShortcut(p,o,f,a);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:we.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,a){const u=we.map(Io(n,">"),d6);return u[u.length-1]=we.extend(u[u.length-1],{func:r,scope:a||this.editor}),we.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const R9=()=>{const e={},n={},o={},r={},a={},u={},f={},p=(x,_)=>(M,B)=>{x[M.toLowerCase()]={...B,type:_}},y=(x,_)=>r[x.toLowerCase()]=_;return{addButton:p(e,"button"),addGroupToolbarButton:p(e,"grouptoolbarbutton"),addToggleButton:p(e,"togglebutton"),addMenuButton:p(e,"menubutton"),addSplitButton:p(e,"splitbutton"),addMenuItem:p(n,"menuitem"),addNestedMenuItem:p(n,"nestedmenuitem"),addToggleMenuItem:p(n,"togglemenuitem"),addAutocompleter:p(o,"autocompleter"),addContextMenu:p(a,"contextmenu"),addContextToolbar:p(u,"contexttoolbar"),addContextForm:p(u,"contextform"),addSidebar:p(f,"sidebar"),addIcon:y,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:a,contextToolbars:u,sidebars:f})}},B9=()=>{const e=R9();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,getAll:e.getAll}},Ih=yn.DOM,m6=we.extend,M9=we.each;class IS{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,m6(this,o6);const a=this;this.id=n,this.hidden=!1;const u=Hd(r.defaultOptions,o);this.options=A9(a,u),S0(a);const f=this.options.get;f("deprecation_warnings")&&T8(o,u);const p=f("suffix");p&&(r.suffix=p),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const x=_0(a);x&&(Ea.ScriptLoader._setReferrerPolicy(x),yn.DOM.styleSheetLoader._setReferrerPolicy(x)),eo.languageLoad=f("language_load"),eo.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new ll(rC(a),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=el(a),this.hasVisual=R0(a),this.shortcuts=new FS(this),this.editorCommands=new J$(this),Kz(this);const _=f("cache_suffix");_&&(ln.cacheSuffix=_.replace(/^[\?\&]+/,"")),this.ui={registry:B9(),styleSheetLoader:void 0,show:dt,hide:dt,setEnabled:dt,isEnabled:Ae},this.mode=O9(a),r.dispatch("SetupEditor",{editor:this});const M=jk(a);q(M)&&M.call(a,a)}render(){GH(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Ad(this)}translate(n){return ta.translate(n)}getParam(n,o,r){const a=this.options;return a.isRegistered(n)||(Se(r)?a.register(n,{processor:r,default:o}):a.register(n,{processor:Ae,default:o})),!a.isSet(n)&&!dr(o)?o:a.get(n)}hasPlugin(n,o){return $n(Gl(this),n)?o?Vc.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,a){this.shortcuts.add(n,o,r,a)}execCommand(n,o,r,a){return this.editorCommands.execCommand(n,o,r,a)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(Ih.show(n.getContainer()),Ih.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(Ih.hide(n.getContainer()),Ih.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const a={...n,load:!0},u=ip(r)?r.value:r.innerHTML,f=o.setContent(u,a);return a.no_events||o.dispatch("LoadContent",{...a,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const a={...n,save:!0,element:r};let u=o.getContent(a);const f={...a,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,ip(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const p=Ih.getParent(o.id,"form");p&&M9(p.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=a.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return FE(this,n,o)}getContent(n){return S8(this,n)}insertContent(n,o){o&&(n=m6({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?FE(this,this.startContent,{format:"raw"}):FE(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||Ih.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Ih.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const a=this,u=a.options.get,f=Gk(a);return q(f)?f.call(a,n,r,!0,o):!u("convert_urls")||r==="link"||hn(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?a.documentBaseURI.toRelative(n):(n=a.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){BS(this,n)}remove(){bh(this)}destroy(n){Nd(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const ub=yn.DOM,zd=we.each;let xi=!1,LS,Cc=[];const HS=e=>{const n=e.type;zd(gf.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},f6=e=>{if(e!==xi){const n=yn.DOM;e?(n.bind(window,"resize",HS),n.bind(window,"scroll",HS)):(n.unbind(window,"resize",HS),n.unbind(window,"scroll",HS)),xi=e}},g6=e=>{const n=Cc;return Cc=mt(Cc,o=>e!==o),gf.activeEditor===e&&(gf.activeEditor=Cc.length>0?Cc[0]:null),gf.focusedEditor===e&&(gf.focusedEditor=null),n.length!==Cc.length},$9=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(g6(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},nV=document.compatMode!=="CSS1Compat",gf={...$S,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"2.0",releaseDate:"2022-09-08",i18n:ta,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=ll.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const a=window.tinymce||window.tinyMCEPreInit;if(a)n=a.base||a.baseURL,o=a.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const p=u[f].src||"";if(p==="")continue;const y=p.substring(p.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(p)){y.indexOf(".min")!==-1&&(o=".min"),n=p.substring(0,p.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new ll(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new ll(e.baseURL),e.suffix=o,aa(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&En(r,(a,u)=>{eo.PluginManager.urls[u]=a})},init(e){const n=this;let o;const r=we.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),a=(_,M)=>_.inline&&M.tagName.toLowerCase()in r,u=_=>{let M=_.id;return M||(M=Bn(_,"name").filter(B=>!ub.get(B)).getOrThunk(ub.uniqueId),_.setAttribute("id",M)),M},f=_=>{const M=e[_];if(!!M)return M.apply(n,[])},p=_=>ln.browser.isIE()||ln.browser.isEdge()?(bx("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):nV?(bx("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):X(_.selector)?ub.select(_.selector):Se(_.target)?[_.target]:[];let y=_=>{o=_};const x=()=>{let _=0;const M=[];let B;const H=(V,I,Z)=>{const U=new IS(V,I,n);M.push(U),U.on("init",()=>{++_===B.length&&y(M)}),U.targetElm=U.targetElm||Z,U.render()};ub.unbind(window,"ready",x),f("onpageload"),B=Z2(p(e)),we.each(B,V=>{$9(n.get(V.id))}),B=we.grep(B,V=>!n.get(V.id)),B.length===0?y([]):zd(B,V=>{a(e,V)?bx("Could not initialize inline editor on invalid inline target element",V):H(u(V),e,V)})};return ub.bind(window,"ready",x),new Promise(_=>{o?_(o):y=M=>{_(M)}})},get(e){return arguments.length===0?Cc.slice(0):X(e)?Ko(Cc,n=>n.id===e).getOr(null):kc(e)&&Cc[e]?Cc[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&Cc.push(e),f6(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),LS||(LS=r=>{const a=n.dispatch("BeforeUnload");if(a.returnValue)return r.preventDefault(),r.returnValue=a.returnValue,a.returnValue},window.addEventListener("beforeunload",LS))),e},createEditor(e,n){return this.add(new IS(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=Cc.length-1;r>=0;r--)n.remove(Cc[r]);return}if(X(e)){zd(ub.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,te(n.get(o.id))?null:(g6(o)&&n.dispatch("RemoveEditor",{editor:o}),Cc.length===0&&window.removeEventListener("beforeunload",LS),o.remove(),f6(Cc.length>0),o)},execCommand(e,n,o){var r;const a=this,u=hn(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!a.get(u)){const f=o.options;new IS(u,f,a).render()}return!0}case"mceRemoveEditor":{const f=a.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=a.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(a.execCommand("mceAddEditor",!1,o),!0)}}return a.activeEditor?a.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{zd(Cc,e=>{e.save()})},addI18n:(e,n)=>{ta.add(e,n)},translate:e=>ta.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new ll(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new ll(this.baseURL)}};gf.setup();const sV=(()=>{const e=Gi(),n=u=>({items:u,types:gn(u),getType:f=>Bn(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),a=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:a}})(),h6=Math.min,db=Math.max,zS=Math.round,p6=(e,n,o)=>{let r=n.x,a=n.y;const u=e.w,f=e.h,p=n.w,y=n.h,x=(o||"").split("");return x[0]==="b"&&(a+=y),x[1]==="r"&&(r+=p),x[0]==="c"&&(a+=zS(y/2)),x[1]==="c"&&(r+=zS(p/2)),x[3]==="b"&&(a-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(a-=zS(f/2)),x[4]==="c"&&(r-=zS(u/2)),mb(r,a,u,f)},N9=(e,n,o,r)=>{for(let a=0;a<r.length;a++){const u=p6(e,n,r[a]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[a]}return null},P9=(e,n,o)=>mb(e.x-n,e.y-o,e.w+n*2,e.h+o*2),rV=(e,n)=>{const o=db(e.x,n.x),r=db(e.y,n.y),a=h6(e.x+e.w,n.x+n.w),u=h6(e.y+e.h,n.y+n.h);return a-o<0||u-r<0?null:mb(o,r,a-o,u-r)},F9=(e,n,o)=>{let r=e.x,a=e.y,u=e.x+e.w,f=e.y+e.h;const p=n.x+n.w,y=n.y+n.h,x=db(0,n.x-r),_=db(0,n.y-a),M=db(0,u-p),B=db(0,f-y);return r+=x,a+=_,o&&(u+=x,f+=_,r-=M,a-=B),u-=M,f-=B,mb(r,a,u-r,f-a)},mb=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),I9={inflate:P9,relativePosition:p6,findBestRelativePosition:N9,intersect:rV,clamp:F9,create:mb,fromClientRect:e=>mb(e.left,e.top,e.width,e.height)},L9=(e,n,o=1e3)=>{let r=!1,a=null;const u=x=>(..._)=>{r||(r=!0,a!==null&&(clearTimeout(a),a=null),x.apply(null,_))},f=u(e),p=u(n);return{start:(...x)=>{!r&&a===null&&(a=setTimeout(()=>p.apply(null,x),o))},resolve:f,reject:p}},H9=(()=>{const e={},n={};return{load:(u,f)=>{const p=`Script at URL "${f}" failed to load`,y=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const x=new Promise((_,M)=>{const B=L9(_,M);n[u]=B.resolve,Ea.ScriptLoader.loadScript(f).then(()=>B.start(y),()=>B.reject(p))});return e[u]=x,x}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),z9=()=>(()=>{let e={},n=[];const o={getItem:r=>{const a=e[r];return a||null},setItem:(r,a)=>{n.push(r),e[r]=String(a)},key:r=>n[r],removeItem:r=>{n=n.filter(a=>a===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let I2;try{const e="__storage_test__";I2=window.localStorage,I2.setItem(e,e),I2.removeItem(e)}catch{I2=z9()}var V9=I2;const Z9={geom:{Rect:I9},util:{Delay:He,Tools:we,VK:Qe,URI:ll,EventDispatcher:ib,Observable:$S,I18n:ta,LocalStorage:V9,ImageUploader:vx},dom:{EventUtils:Uu,TreeWalker:jt,TextSeeker:Vn,DOMUtils:yn,ScriptLoader:Ea,RangeUtils:st,Serializer:BR,StyleSheetLoader:Qd,ControlSelection:sw,BookmarkManager:gd,Selection:PE,Event:Uu.Event},html:{Styles:lm,Entities:uc,Node:Gr,Schema:Rc,DomParser:z1,Writer:$_,Serializer:Gm},Env:ln,AddOnManager:eo,Annotator:pc,Formatter:ZE,UndoManager:uu,EditorCommands:J$,WindowManager:LR,NotificationManager:IR,EditorObservable:o6,Shortcuts:FS,Editor:IS,FocusManager:me,EditorManager:gf,DOM:yn.DOM,ScriptLoader:Ea.ScriptLoader,PluginManager:Vc,ThemeManager:j1,ModelManager:Qm,IconManager:W1,Resource:H9,FakeClipboard:sV,trim:we.trim,isArray:we.isArray,is:we.is,toArray:we.toArray,makeMap:we.makeMap,each:we.each,map:we.map,grep:we.grep,inArray:we.inArray,extend:we.extend,walk:we.walk,resolve:we.resolve,explode:we.explode,_addCacheSuffix:we._addCacheSuffix},b6=we.extend(gf,Z9),U9=e=>{try{Rn.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(b6),U9(b6)})()})(gV);const hV=gV.exports,VV=`.mce-content-body .mce-item-anchor{background:transparent url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'8'%20height%3D'12'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20d%3D'M0%200L8%200%208%2012%204.09117821%209%200%2012z'%2F%3E%3C%2Fsvg%3E%0A") no-repeat center}.mce-content-body .mce-item-anchor:empty{cursor:default;display:inline-block;height:12px!important;padding:0 2px;-webkit-user-modify:read-only;-moz-user-modify:read-only;-webkit-user-select:all;-moz-user-select:all;user-select:all;width:8px!important}.mce-content-body .mce-item-anchor:not(:empty){background-position-x:2px;display:inline-block;padding-left:12px}.mce-content-body .mce-item-anchor[data-mce-selected]{outline-offset:1px}.tox-comments-visible .tox-comment[contenteditable=false]:not([data-mce-selected]),.tox-comments-visible span.tox-comment img:not([data-mce-selected]),.tox-comments-visible span.tox-comment>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment>video:not([data-mce-selected]),.tox-comments-visible span.tox-comment span.mce-preview-object:not([data-mce-selected]){outline:3px solid #ffe89d}.tox-comments-visible .tox-comment[contenteditable=false][data-mce-annotation-active=true]:not([data-mce-selected]){outline:3px solid #fed635}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] img:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>audio:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]>video:not([data-mce-selected]),.tox-comments-visible span.tox-comment[data-mce-annotation-active=true] span.mce-preview-object:not([data-mce-selected]){outline:3px solid #fed635}.tox-comments-visible span.tox-comment:not([data-mce-selected]){background-color:#ffe89d;outline:none}.tox-comments-visible span.tox-comment[data-mce-annotation-active=true]:not([data-mce-selected="inline-boundary"]){background-color:#fed635}.tox-checklist>li:not(.tox-checklist--hidden){list-style:none;margin:.25em 0}.tox-checklist>li:not(.tox-checklist--hidden):before{content:url(data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-unchecked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2215%22%20height%3D%2215%22%20x%3D%22.5%22%20y%3D%22.5%22%20fill-rule%3D%22nonzero%22%20stroke%3D%22%234C4C4C%22%20rx%3D%222%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A);cursor:pointer;height:1em;margin-left:-1.5em;margin-top:.125em;position:absolute;width:1em}.tox-checklist li:not(.tox-checklist--hidden).tox-checklist--checked:before{content:url(data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cg%20id%3D%22checklist-checked%22%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%3Crect%20id%3D%22Rectangle%22%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%234099FF%22%20fill-rule%3D%22nonzero%22%20rx%3D%222%22%2F%3E%3Cpath%20id%3D%22Path%22%20fill%3D%22%23FFF%22%20fill-rule%3D%22nonzero%22%20d%3D%22M11.5703186%2C3.14417309%20C11.8516238%2C2.73724603%2012.4164781%2C2.62829933%2012.83558%2C2.89774797%20C13.260121%2C3.17069355%2013.3759736%2C3.72932262%2013.0909105%2C4.14168582%20L7.7580587%2C11.8560195%20C7.43776896%2C12.3193404%206.76483983%2C12.3852142%206.35607322%2C11.9948725%20L3.02491697%2C8.8138662%20C2.66090143%2C8.46625845%202.65798871%2C7.89594698%203.01850234%2C7.54483354%20C3.373942%2C7.19866177%203.94940006%2C7.19592841%204.30829608%2C7.5386474%20L6.85276923%2C9.9684299%20L11.5703186%2C3.14417309%20Z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%0A)}[dir=rtl] .tox-checklist>li:not(.tox-checklist--hidden):before{margin-left:0;margin-right:-1.5em}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px white;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#708090}.token.punctuation{color:#999}.token.namespace{opacity:.7}.token.property,.token.tag,.token.boolean,.token.number,.token.constant,.token.symbol,.token.deleted{color:#905}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#690}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string{color:#9a6e3a;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function,.token.class-name{color:#dd4a68}.token.regex,.token.important,.token.variable{color:#e90}.token.important,.token.bold{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.mce-content-body{overflow-wrap:break-word;word-wrap:break-word}.mce-content-body .mce-visual-caret{background-color:#000;background-color:currentColor;position:absolute}.mce-content-body .mce-visual-caret-hidden{display:none}.mce-content-body *[data-mce-caret]{left:-1000px;margin:0;padding:0;position:absolute;right:auto;top:0}.mce-content-body .mce-offscreen-selection{left:-2000000px;max-width:1000000px;position:absolute}.mce-content-body *[contentEditable=false]{cursor:default}.mce-content-body *[contentEditable=true]{cursor:text}.tox-cursor-format-painter{cursor:url(data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%20viewBox%3D%220%200%2024%2024%22%3E%0A%20%20%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M15%2C6%20C15%2C5.45%2014.55%2C5%2014%2C5%20L6%2C5%20C5.45%2C5%205%2C5.45%205%2C6%20L5%2C10%20C5%2C10.55%205.45%2C11%206%2C11%20L14%2C11%20C14.55%2C11%2015%2C10.55%2015%2C10%20L15%2C9%20L16%2C9%20L16%2C12%20L9%2C12%20L9%2C19%20C9%2C19.55%209.45%2C20%2010%2C20%20L11%2C20%20C11.55%2C20%2012%2C19.55%2012%2C19%20L12%2C14%20L18%2C14%20L18%2C7%20L15%2C7%20L15%2C6%20Z%22%2F%3E%0A%20%20%20%20%3Cpath%20fill%3D%22%23000%22%20fill-rule%3D%22nonzero%22%20d%3D%22M1%2C1%20L8.25%2C1%20C8.66421356%2C1%209%2C1.33578644%209%2C1.75%20L9%2C1.75%20C9%2C2.16421356%208.66421356%2C2.5%208.25%2C2.5%20L2.5%2C2.5%20L2.5%2C8.25%20C2.5%2C8.66421356%202.16421356%2C9%201.75%2C9%20L1.75%2C9%20C1.33578644%2C9%201%2C8.66421356%201%2C8.25%20L1%2C1%20Z%22%2F%3E%0A%20%20%3C%2Fg%3E%0A%3C%2Fsvg%3E%0A),default}div.mce-footnotes hr{-webkit-margin-end:auto;margin-inline-end:auto;-webkit-margin-start:0;margin-inline-start:0;width:25%}div.mce-footnotes li>a.mce-footnotes-backlink{text-decoration:none}@media print{sup.mce-footnote a{color:#000;text-decoration:none}div.mce-footnotes{-moz-column-break-inside:avoid;break-inside:avoid;width:100%}div.mce-footnotes li>a.mce-footnotes-backlink{display:none}}.mce-content-body figure.align-left{float:left}.mce-content-body figure.align-right{float:right}.mce-content-body figure.image.align-center{display:table;margin-left:auto;margin-right:auto}.mce-preview-object{border:1px solid gray;display:inline-block;line-height:0;margin:0 2px;position:relative}.mce-preview-object .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.mce-preview-object[data-mce-selected="2"] .mce-shim{display:none}.mce-content-body .mce-mergetag:hover{background-color:#006ce71a}.mce-content-body .mce-mergetag-affix{background-color:#006ce71a;color:#006ce7}.mce-object{background:transparent url(data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2224%22%20height%3D%2224%22%3E%3Cpath%20d%3D%22M4%203h16a1%201%200%200%201%201%201v16a1%201%200%200%201-1%201H4a1%201%200%200%201-1-1V4a1%201%200%200%201%201-1zm1%202v14h14V5H5zm4.79%202.565l5.64%204.028a.5.5%200%200%201%200%20.814l-5.64%204.028a.5.5%200%200%201-.79-.407V7.972a.5.5%200%200%201%20.79-.407z%22%2F%3E%3C%2Fsvg%3E%0A) no-repeat center;border:1px dashed #aaa}.mce-pagebreak{border:1px dashed #aaa;cursor:default;display:block;height:5px;margin-top:15px;page-break-before:always;width:100%}@media print{.mce-pagebreak{border:0}}.tiny-pageembed .mce-shim{background:url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7);height:100%;left:0;position:absolute;top:0;width:100%}.tiny-pageembed[data-mce-selected="2"] .mce-shim{display:none}.tiny-pageembed{display:inline-block;position:relative}.tiny-pageembed--21by9,.tiny-pageembed--16by9,.tiny-pageembed--4by3,.tiny-pageembed--1by1{display:block;overflow:hidden;padding:0;position:relative;width:100%}.tiny-pageembed--21by9{padding-top:42.857143%}.tiny-pageembed--16by9{padding-top:56.25%}.tiny-pageembed--4by3{padding-top:75%}.tiny-pageembed--1by1{padding-top:100%}.tiny-pageembed--21by9 iframe,.tiny-pageembed--16by9 iframe,.tiny-pageembed--4by3 iframe,.tiny-pageembed--1by1 iframe{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.mce-content-body[data-mce-placeholder]{position:relative}.mce-content-body[data-mce-placeholder]:not(.mce-visualblocks):before{color:#222f3eb3;content:attr(data-mce-placeholder);position:absolute}.mce-content-body:not([dir=rtl])[data-mce-placeholder]:not(.mce-visualblocks):before{left:1px}.mce-content-body[dir=rtl][data-mce-placeholder]:not(.mce-visualblocks):before{right:1px}.mce-content-body div.mce-resizehandle{background-color:#4099ff;border-color:#4099ff;border-style:solid;border-width:1px;box-sizing:border-box;height:10px;position:absolute;width:10px;z-index:1298}.mce-content-body div.mce-resizehandle:hover{background-color:#4099ff}.mce-content-body div.mce-resizehandle:nth-of-type(1){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(2){cursor:nesw-resize}.mce-content-body div.mce-resizehandle:nth-of-type(3){cursor:nwse-resize}.mce-content-body div.mce-resizehandle:nth-of-type(4){cursor:nesw-resize}.mce-content-body .mce-resize-backdrop{z-index:10000}.mce-content-body .mce-clonedresizable{cursor:default;opacity:.5;outline:1px dashed black;position:absolute;z-index:10001}.mce-content-body .mce-clonedresizable.mce-resizetable-columns th,.mce-content-body .mce-clonedresizable.mce-resizetable-columns td{border:0}.mce-content-body .mce-resize-helper{background:#555;background:rgba(0,0,0,.75);border:1px;border-radius:3px;color:#fff;display:none;font-family:sans-serif;font-size:12px;line-height:14px;margin:5px 10px;padding:5px;position:absolute;white-space:nowrap;z-index:10002}.tox-rtc-user-selection{position:relative}.tox-rtc-user-cursor{bottom:0;cursor:default;position:absolute;top:0;width:2px}.tox-rtc-user-cursor:before{background-color:inherit;border-radius:50%;content:"";display:block;height:8px;position:absolute;right:-3px;top:-3px;width:8px}.tox-rtc-user-cursor:hover:after{background-color:inherit;border-radius:100px;box-sizing:border-box;color:#fff;content:attr(data-user);display:block;font-size:12px;font-weight:700;left:-5px;min-height:8px;min-width:8px;padding:0 12px;position:absolute;top:-11px;white-space:nowrap;z-index:1000}.tox-rtc-user-selection--1 .tox-rtc-user-cursor{background-color:#2dc26b}.tox-rtc-user-selection--2 .tox-rtc-user-cursor{background-color:#e03e2d}.tox-rtc-user-selection--3 .tox-rtc-user-cursor{background-color:#f1c40f}.tox-rtc-user-selection--4 .tox-rtc-user-cursor{background-color:#3598db}.tox-rtc-user-selection--5 .tox-rtc-user-cursor{background-color:#b96ad9}.tox-rtc-user-selection--6 .tox-rtc-user-cursor{background-color:#e67e23}.tox-rtc-user-selection--7 .tox-rtc-user-cursor{background-color:#aaa69d}.tox-rtc-user-selection--8 .tox-rtc-user-cursor{background-color:#f368e0}.tox-rtc-remote-image{background:#eaeaea url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2236%22%20height%3D%2212%22%20viewBox%3D%220%200%2036%2012%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%20%20%3Ccircle%20cx%3D%226%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2218%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.33s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%20%20%3Ccircle%20cx%3D%2230%22%20cy%3D%226%22%20r%3D%223%22%20fill%3D%22rgba(0%2C%200%2C%200%2C%20.2)%22%3E%0A%20%20%20%20%3Canimate%20attributeName%3D%22r%22%20values%3D%223%3B5%3B3%22%20calcMode%3D%22linear%22%20begin%3D%22.66s%22%20dur%3D%221s%22%20repeatCount%3D%22indefinite%22%20%2F%3E%0A%20%20%3C%2Fcircle%3E%0A%3C%2Fsvg%3E%0A") no-repeat center center;border:1px solid #ccc;min-height:240px;min-width:320px}.mce-match-marker{background:#aaa;color:#fff}.mce-match-marker-selected{background:#39f;color:#fff}.mce-match-marker-selected::-moz-selection{background:#39f;color:#fff}.mce-match-marker-selected::selection{background:#39f;color:#fff}.mce-content-body img[data-mce-selected],.mce-content-body video[data-mce-selected],.mce-content-body audio[data-mce-selected],.mce-content-body object[data-mce-selected],.mce-content-body embed[data-mce-selected],.mce-content-body table[data-mce-selected]{outline:3px solid #b4d7ff}.mce-content-body hr[data-mce-selected]{outline:3px solid #b4d7ff;outline-offset:1px}.mce-content-body *[contentEditable=false] *[contentEditable=true]:focus{outline:3px solid #b4d7ff}.mce-content-body *[contentEditable=false] *[contentEditable=true]:hover{outline:3px solid #b4d7ff}.mce-content-body *[contentEditable=false][data-mce-selected]{cursor:not-allowed;outline:3px solid #b4d7ff}.mce-content-body.mce-content-readonly *[contentEditable=true]:focus,.mce-content-body.mce-content-readonly *[contentEditable=true]:hover{outline:none}.mce-content-body *[data-mce-selected=inline-boundary]{background-color:#b4d7ff}.mce-content-body .mce-edit-focus{outline:3px solid #b4d7ff}.mce-content-body td[data-mce-selected],.mce-content-body th[data-mce-selected]{position:relative}.mce-content-body td[data-mce-selected]::-moz-selection,.mce-content-body th[data-mce-selected]::-moz-selection{background:none}.mce-content-body td[data-mce-selected]::selection,.mce-content-body th[data-mce-selected]::selection{background:none}.mce-content-body td[data-mce-selected] *,.mce-content-body th[data-mce-selected] *{outline:none;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.mce-content-body td[data-mce-selected]:after,.mce-content-body th[data-mce-selected]:after{background-color:#b4d7ffb3;border:1px solid rgba(180,215,255,.7);bottom:-1px;content:"";left:-1px;mix-blend-mode:multiply;position:absolute;right:-1px;top:-1px}@media screen and (-ms-high-contrast: active),(-ms-high-contrast: none){.mce-content-body td[data-mce-selected]:after,.mce-content-body th[data-mce-selected]:after{border-color:#0054b4b3}}.mce-content-body img[data-mce-selected]::-moz-selection{background:none}.mce-content-body img[data-mce-selected]::selection{background:none}.ephox-snooker-resizer-bar{background-color:#b4d7ff;opacity:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ephox-snooker-resizer-cols{cursor:col-resize}.ephox-snooker-resizer-rows{cursor:row-resize}.ephox-snooker-resizer-bar.ephox-snooker-resizer-bar-dragging{opacity:1}.mce-spellchecker-word{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%23ff0000'%20fill%3D'none'%20stroke-linecap%3D'round'%20stroke-opacity%3D'.75'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default;height:2rem}.mce-spellchecker-grammar{background-image:url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D'4'%20height%3D'4'%20xmlns%3D'http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg'%3E%3Cpath%20stroke%3D'%2300A835'%20fill%3D'none'%20stroke-linecap%3D'round'%20d%3D'M0%203L2%201%204%203'%2F%3E%3C%2Fsvg%3E%0A");background-position:0 calc(100% + 1px);background-repeat:repeat-x;background-size:auto 6px;cursor:default}.mce-toc{border:1px solid gray}.mce-toc h2{margin:4px}.mce-toc li{list-style-type:none}table[style*="border-width: 0px"],.mce-item-table:not([border]),.mce-item-table[border="0"],table[style*="border-width: 0px"] td,.mce-item-table:not([border]) td,.mce-item-table[border="0"] td,table[style*="border-width: 0px"] th,.mce-item-table:not([border]) th,.mce-item-table[border="0"] th,table[style*="border-width: 0px"] caption,.mce-item-table:not([border]) caption,.mce-item-table[border="0"] caption{border:1px dashed #bbb}.mce-visualblocks p,.mce-visualblocks h1,.mce-visualblocks h2,.mce-visualblocks h3,.mce-visualblocks h4,.mce-visualblocks h5,.mce-visualblocks h6,.mce-visualblocks div:not([data-mce-bogus]),.mce-visualblocks section,.mce-visualblocks article,.mce-visualblocks blockquote,.mce-visualblocks address,.mce-visualblocks pre,.mce-visualblocks figure,.mce-visualblocks figcaption,.mce-visualblocks hgroup,.mce-visualblocks aside,.mce-visualblocks ul,.mce-visualblocks ol,.mce-visualblocks dl{background-repeat:no-repeat;border:1px dashed #bbb;margin-left:3px;padding-top:10px}.mce-visualblocks p{background-image:url(data:image/gif;base64,R0lGODlhCQAJAJEAAAAAAP///7u7u////yH5BAEAAAMALAAAAAAJAAkAAAIQnG+CqCN/mlyvsRUpThG6AgA7)}.mce-visualblocks h1{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGu1JuxHoAfRNRW3TWXyF2YiRUAOw==)}.mce-visualblocks h2{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8Hybbx4oOuqgTynJd6bGlWg3DkJzoaUAAAOw==)}.mce-visualblocks h3{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIZjI8Hybbx4oOuqgTynJf2Ln2NOHpQpmhAAQA7)}.mce-visualblocks h4{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxInR0zqeAdhtJlXwV1oCll2HaWgAAOw==)}.mce-visualblocks h5{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjane4iq5GlW05GgIkIZUAAAOw==)}.mce-visualblocks h6{background-image:url(data:image/gif;base64,R0lGODlhDgAKAIABALu7u////yH5BAEAAAEALAAAAAAOAAoAAAIajI8HybbxIoiuwjan04jep1iZ1XRlAo5bVgAAOw==)}.mce-visualblocks div:not([data-mce-bogus]){background-image:url(data:image/gif;base64,R0lGODlhEgAKAIABALu7u////yH5BAEAAAEALAAAAAASAAoAAAIfjI9poI0cgDywrhuxfbrzDEbQM2Ei5aRjmoySW4pAAQA7)}.mce-visualblocks section{background-image:url(data:image/gif;base64,R0lGODlhKAAKAIABALu7u////yH5BAEAAAEALAAAAAAoAAoAAAI5jI+pywcNY3sBWHdNrplytD2ellDeSVbp+GmWqaDqDMepc8t17Y4vBsK5hDyJMcI6KkuYU+jpjLoKADs=)}.mce-visualblocks article{background-image:url(data:image/gif;base64,R0lGODlhKgAKAIABALu7u////yH5BAEAAAEALAAAAAAqAAoAAAI6jI+pywkNY3wG0GBvrsd2tXGYSGnfiF7ikpXemTpOiJScasYoDJJrjsG9gkCJ0ag6KhmaIe3pjDYBBQA7)}.mce-visualblocks blockquote{background-image:url(data:image/gif;base64,R0lGODlhPgAKAIABALu7u////yH5BAEAAAEALAAAAAA+AAoAAAJPjI+py+0Knpz0xQDyuUhvfoGgIX5iSKZYgq5uNL5q69asZ8s5rrf0yZmpNkJZzFesBTu8TOlDVAabUyatguVhWduud3EyiUk45xhTTgMBBQA7)}.mce-visualblocks address{background-image:url(data:image/gif;base64,R0lGODlhLQAKAIABALu7u////yH5BAEAAAEALAAAAAAtAAoAAAI/jI+pywwNozSP1gDyyZcjb3UaRpXkWaXmZW4OqKLhBmLs+K263DkJK7OJeifh7FicKD9A1/IpGdKkyFpNmCkAADs=)}.mce-visualblocks pre{background-image:url(data:image/gif;base64,R0lGODlhFQAKAIABALu7uwAAACH5BAEAAAEALAAAAAAVAAoAAAIjjI+ZoN0cgDwSmnpz1NCueYERhnibZVKLNnbOq8IvKpJtVQAAOw==)}.mce-visualblocks figure{background-image:url(data:image/gif;base64,R0lGODlhJAAKAIAAALu7u////yH5BAEAAAEALAAAAAAkAAoAAAI0jI+py+2fwAHUSFvD3RlvG4HIp4nX5JFSpnZUJ6LlrM52OE7uSWosBHScgkSZj7dDKnWAAgA7)}.mce-visualblocks figcaption{border:1px dashed #bbb}.mce-visualblocks hgroup{background-image:url(data:image/gif;base64,R0lGODlhJwAKAIABALu7uwAAACH5BAEAAAEALAAAAAAnAAoAAAI3jI+pywYNI3uB0gpsRtt5fFnfNZaVSYJil4Wo03Hv6Z62uOCgiXH1kZIIJ8NiIxRrAZNMZAtQAAA7)}.mce-visualblocks aside{background-image:url(data:image/gif;base64,R0lGODlhHgAKAIABAKqqqv///yH5BAEAAAEALAAAAAAeAAoAAAItjI+pG8APjZOTzgtqy7I3f1yehmQcFY4WKZbqByutmW4aHUd6vfcVbgudgpYCADs=)}.mce-visualblocks ul{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIAAALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybGuYnqUVSjvw26DzzXiqIDlVwAAOw==)}.mce-visualblocks ol{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybH6HHt0qourxC6CvzXieHyeWQAAOw==)}.mce-visualblocks dl{background-image:url(data:image/gif;base64,R0lGODlhDQAKAIABALu7u////yH5BAEAAAEALAAAAAANAAoAAAIXjI8GybEOnmOvUoWznTqeuEjNSCqeGRUAOw==)}.mce-visualblocks:not([dir=rtl]) p,.mce-visualblocks:not([dir=rtl]) h1,.mce-visualblocks:not([dir=rtl]) h2,.mce-visualblocks:not([dir=rtl]) h3,.mce-visualblocks:not([dir=rtl]) h4,.mce-visualblocks:not([dir=rtl]) h5,.mce-visualblocks:not([dir=rtl]) h6,.mce-visualblocks:not([dir=rtl]) div:not([data-mce-bogus]),.mce-visualblocks:not([dir=rtl]) section,.mce-visualblocks:not([dir=rtl]) article,.mce-visualblocks:not([dir=rtl]) blockquote,.mce-visualblocks:not([dir=rtl]) address,.mce-visualblocks:not([dir=rtl]) pre,.mce-visualblocks:not([dir=rtl]) figure,.mce-visualblocks:not([dir=rtl]) figcaption,.mce-visualblocks:not([dir=rtl]) hgroup,.mce-visualblocks:not([dir=rtl]) aside,.mce-visualblocks:not([dir=rtl]) ul,.mce-visualblocks:not([dir=rtl]) ol,.mce-visualblocks:not([dir=rtl]) dl{margin-left:3px}.mce-visualblocks[dir=rtl] p,.mce-visualblocks[dir=rtl] h1,.mce-visualblocks[dir=rtl] h2,.mce-visualblocks[dir=rtl] h3,.mce-visualblocks[dir=rtl] h4,.mce-visualblocks[dir=rtl] h5,.mce-visualblocks[dir=rtl] h6,.mce-visualblocks[dir=rtl] div:not([data-mce-bogus]),.mce-visualblocks[dir=rtl] section,.mce-visualblocks[dir=rtl] article,.mce-visualblocks[dir=rtl] blockquote,.mce-visualblocks[dir=rtl] address,.mce-visualblocks[dir=rtl] pre,.mce-visualblocks[dir=rtl] figure,.mce-visualblocks[dir=rtl] figcaption,.mce-visualblocks[dir=rtl] hgroup,.mce-visualblocks[dir=rtl] aside,.mce-visualblocks[dir=rtl] ul,.mce-visualblocks[dir=rtl] ol,.mce-visualblocks[dir=rtl] dl{background-position-x:right;margin-right:3px}.mce-nbsp,.mce-shy{background:#aaa}.mce-shy:after{content:"-"}body{font-family:sans-serif}table{border-collapse:collapse}
`,ZV=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;line-height:1.4;margin:1rem}table{border-collapse:collapse}table:not([cellpadding]) th,table:not([cellpadding]) td{padding:.4rem}table[border]:not([border="0"]):not([style*="border-width"]) th,table[border]:not([border="0"]):not([style*="border-width"]) td{border-width:1px}table[border]:not([border="0"]):not([style*="border-style"]) th,table[border]:not([border="0"]):not([style*="border-style"]) td{border-style:solid}table[border]:not([border="0"]):not([style*="border-color"]) th,table[border]:not([border="0"]):not([style*="border-color"]) td{border-color:#ccc}figure{display:table;margin:1rem auto}figure figcaption{color:#999;display:block;margin-top:.25rem;text-align:center}hr{border-color:#ccc;border-style:solid;border-width:1px 0 0 0}code{background-color:#e8e8e8;border-radius:3px;padding:.1rem .2rem}.mce-content-body:not([dir=rtl]) blockquote{border-left:2px solid #ccc;margin-left:1.5rem;padding-left:1rem}.mce-content-body[dir=rtl] blockquote{border-right:2px solid #ccc;margin-right:1.5rem;padding-right:1rem}
`;(function(){var Rn=tinymce.util.Tools.resolve("tinymce.ModelManager");const $s=(l,m,h)=>{var v;return h(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},Gc=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&$s(l,String,(h,v)=>v.isPrototypeOf(h))?"string":m},Sc=l=>m=>Gc(m)===l,ki=l=>m=>typeof m===l,pu=l=>m=>l===m,bf=Sc("string"),wn=Sc("object"),qc=Sc("array"),V2=pu(null),Ei=ki("boolean"),vf=pu(void 0),Ai=l=>l==null,Jr=l=>!Ai(l),Ti=ki("function"),Ar=ki("number"),nt=()=>{},_i=(l,m)=>(...h)=>l(m.apply(null,h)),Sl=(l,m)=>h=>l(m(h)),X=l=>()=>l,hn=l=>l,Vh=(l,m)=>l===m;function xn(l,...m){return(...h)=>{const v=m.concat(h);return l.apply(null,v)}}const te=l=>m=>!l(m),Wt=l=>()=>{throw new Error(l)},dr=l=>l(),en=X(!1),Se=X(!0);class q{constructor(m,h){this.tag=m,this.value=h}static some(m){return new q(!0,m)}static none(){return q.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?q.some(m(this.value)):q.none()}bind(m){return this.tag?m(this.value):q.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:q.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m!=null?m:"Called getOrDie on None")}static from(m){return Jr(m)?q.some(m):q.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}q.singletonNone=new q(!1);const kc=Array.prototype.slice,kn=Array.prototype.indexOf,dt=Array.prototype.push,bu=(l,m)=>kn.call(l,m),A=(l,m)=>bu(l,m)>-1,Oe=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const w=l[h];if(m(w,h))return!0}return!1},no=(l,m)=>{const h=[];for(let v=0;v<l;v++)h.push(m(v));return h},Ct=(l,m)=>{const h=l.length,v=new Array(h);for(let w=0;w<h;w++){const k=l[w];v[w]=m(k,w)}return v},Ce=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const w=l[h];m(w,h)}},Zh=(l,m)=>{for(let h=l.length-1;h>=0;h--){const v=l[h];m(v,h)}},qo=(l,m)=>{const h=[],v=[];for(let w=0,k=l.length;w<k;w++){const D=l[w];(m(D,w)?h:v).push(D)}return{pass:h,fail:v}},In=(l,m)=>{const h=[];for(let v=0,w=l.length;v<w;v++){const k=l[v];m(k,v)&&h.push(k)}return h},mr=(l,m,h)=>(Zh(l,(v,w)=>{h=m(h,v,w)}),h),pn=(l,m,h)=>(Ce(l,(v,w)=>{h=m(h,v,w)}),h),Ae=(l,m,h)=>{for(let v=0,w=l.length;v<w;v++){const k=l[v];if(m(k,v))return q.some(k);if(h(k,v))break}return q.none()},R=(l,m)=>Ae(l,m,en),yf=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const w=l[h];if(m(w,h))return q.some(h)}return q.none()},gb=l=>{const m=[];for(let h=0,v=l.length;h<v;++h){if(!qc(l[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+l);dt.apply(m,l[h])}return m},Xt=(l,m)=>gb(Ct(l,m)),Ks=(l,m)=>{for(let h=0,v=l.length;h<v;++h){const w=l[h];if(m(w,h)!==!0)return!1}return!0},Xs=l=>{const m=kc.call(l,0);return m.reverse(),m},$n=(l,m)=>{const h={};for(let v=0,w=l.length;v<w;v++){const k=l[v];h[String(k)]=m(k,v)}return h},Yt=(l,m)=>{const h=kc.call(l,0);return h.sort(m),h},Jt=(l,m)=>m>=0&&m<l.length?q.some(l[m]):q.none(),ve=l=>Jt(l,0),So=l=>Jt(l,l.length-1),Ys=(l,m)=>{for(let h=0;h<l.length;h++){const v=m(l[h],h);if(v.isSome())return v}return q.none()},mt=Object.keys,fa=Object.hasOwnProperty,oo=(l,m)=>{const h=mt(l);for(let v=0,w=h.length;v<w;v++){const k=h[v],D=l[k];m(D,k)}},hb=(l,m)=>Ko(l,(h,v)=>({k:v,v:m(h,v)})),Ko=(l,m)=>{const h={};return oo(l,(v,w)=>{const k=m(v,w);h[k.k]=k.v}),h},kl=l=>(m,h)=>{l[h]=m},Oi=(l,m,h,v)=>{oo(l,(w,k)=>{(m(w,k)?h:v)(w,k)})},ga=(l,m)=>{const h={};return Oi(l,m,kl(h),nt),h},vu=(l,m)=>{const h=[];return oo(l,(v,w)=>{h.push(m(v,w))}),h},Fr=l=>vu(l,hn),ko=(l,m)=>Cf(l,m)?q.from(l[m]):q.none(),Cf=(l,m)=>fa.call(l,m),Xo=(l,m)=>Cf(l,m)&&l[m]!==void 0&&l[m]!==null,Lo=l=>{for(const m in l)if(fa.call(l,m))return!1;return!0};typeof window<"u"||Function("return this;")();const Tr=8,Ua=9,Js=11,El=1,Z2=3,gn=l=>l.dom.nodeName.toLowerCase(),Uh=l=>l.dom.nodeType,En=l=>m=>Uh(m)===l,at=l=>Uh(l)===Tr||gn(l)==="#comment",tn=En(El),vs=En(Z2),Kc=En(Ua),GS=En(Js),Yo=l=>m=>tn(m)&&gn(m)===l,wf=(l,m,h)=>{if(bf(h)||Ei(h)||Ar(h))l.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",l),new Error("Attribute value was not simple")},Eo=(l,m,h)=>{wf(l.dom,m,h)},Bn=(l,m)=>{const h=l.dom;oo(m,(v,w)=>{wf(h,w,v)})},Pt=(l,m)=>{oo(m,(h,v)=>{h.fold(()=>{mo(l,v)},w=>{wf(l.dom,v,w)})})},Ir=(l,m)=>{const h=l.dom.getAttribute(m);return h===null?void 0:h},Al=(l,m)=>q.from(Ir(l,m)),mo=(l,m)=>{l.dom.removeAttribute(m)},Wh=l=>pn(l.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),pb=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const w="HTML does not have a single root node";throw console.error(w,l),new Error(w)}return yu(v.childNodes[0])},qS=(l,m)=>{const v=(m||document).createElement(l);return yu(v)},ys=(l,m)=>{const v=(m||document).createTextNode(l);return yu(v)},yu=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},Fe={fromHtml:pb,fromTag:qS,fromText:ys,fromDom:yu,fromPoint:(l,m,h)=>q.from(l.dom.elementFromPoint(m,h)).map(yu)},_r=(l,m)=>{const h=l.dom;if(h.nodeType!==El)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},xf=l=>l.nodeType!==El&&l.nodeType!==Ua&&l.nodeType!==Js||l.childElementCount===0,wu=(l,m)=>{const h=m===void 0?document:m.dom;return xf(h)?[]:Ct(h.querySelectorAll(l),Fe.fromDom)},Xc=(l,m)=>{const h=m===void 0?document:m.dom;return xf(h)?q.none():q.from(h.querySelector(l)).map(Fe.fromDom)},Hn=(l,m)=>l.dom===m.dom,bb=(l,m)=>{const h=l.dom,v=m.dom;return h===v?!1:h.contains(v)},KS=_r,Tl=l=>Fe.fromDom(l.dom.ownerDocument),jh=l=>Kc(l)?l:Tl(l),ze=l=>Fe.fromDom(jh(l).dom.documentElement),Sf=l=>Fe.fromDom(jh(l).dom.defaultView),xu=l=>q.from(l.dom.parentNode).map(Fe.fromDom),vb=l=>q.from(l.dom.parentElement).map(Fe.fromDom),U2=(l,m)=>{const h=Ti(m)?m:en;let v=l.dom;const w=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const k=v.parentNode,D=Fe.fromDom(k);if(w.push(D),h(D)===!0)break;v=k}return w},W2=l=>q.from(l.dom.previousSibling).map(Fe.fromDom),Gh=l=>q.from(l.dom.nextSibling).map(Fe.fromDom),Qr=l=>Ct(l.dom.childNodes,Fe.fromDom),qh=(l,m)=>{const h=l.dom.childNodes;return q.from(h[m]).map(Fe.fromDom)},Ns=l=>qh(l,0),Ho=(l,m)=>{xu(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},_l=(l,m)=>{Gh(l).fold(()=>{xu(l).each(w=>{bn(w,m)})},v=>{Ho(v,m)})},kf=(l,m)=>{Ns(l).fold(()=>{bn(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},bn=(l,m)=>{l.dom.appendChild(m.dom)},XS=(l,m,h)=>{qh(l,h).fold(()=>{bn(l,m)},v=>{Ho(v,m)})},Ef=(l,m)=>{Ho(l,m),bn(m,l)},ha=(l,m)=>{Ce(m,(h,v)=>{const w=v===0?l:m[v-1];_l(w,h)})},Ao=(l,m)=>{Ce(m,h=>{bn(l,h)})},Di=l=>{l.dom.textContent="",Ce(Qr(l),m=>{Qs(m)})},Qs=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},yb=l=>{const m=Qr(l);m.length>0&&ha(l,m),Qs(l)},pa=(l,m)=>Fe.fromDom(l.dom.cloneNode(m)),Kh=l=>pa(l,!1),Su=l=>pa(l,!0),Cb=(l,m)=>{const h=Fe.fromTag(m),v=Wh(l);return Bn(h,v),h},j2=(l,m)=>{const h=Cb(l,m),v=Qr(Su(l));return Ao(h,v),h},Wn=(l,m)=>{const h=Cb(l,m);_l(l,h);const v=Qr(l);return Ao(h,v),Qs(l),h},Af=["tfoot","thead","tbody","colgroup"],Yc=l=>A(Af,l),Tf=(l,m)=>({rows:l,columns:m}),Xh=(l,m)=>({row:l,column:m}),Zd=(l,m,h)=>({element:l,rowspan:m,colspan:h}),ba=(l,m,h,v)=>({element:l,rowspan:m,colspan:h,isNew:v}),Ud=(l,m,h,v,w,k)=>({element:l,rowspan:m,colspan:h,row:v,column:w,isLocked:k}),_f=(l,m,h)=>({element:l,cells:m,section:h}),G2=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),To=(l,m,h)=>({element:l,isNew:m,isLocked:h}),ec=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),q2=(l,m,h,v)=>({startRow:l,startCol:m,finishRow:h,finishCol:v}),wb=(l,m,h)=>({element:l,colspan:m,column:h}),xb=(l,m)=>({element:l,columns:m}),Yh=l=>GS(l)&&Jr(l.dom.host),Sb=Ti(Element.prototype.attachShadow)&&Ti(Node.prototype.getRootNode),K2=X(Sb),tc=Sb?l=>Fe.fromDom(l.dom.getRootNode()):jh,kb=l=>{const m=tc(l);return Yh(m)?q.some(m):q.none()},YS=l=>Fe.fromDom(l.dom.host),X2=l=>{if(K2()&&Jr(l.target)){const m=Fe.fromDom(l.target);if(tn(m)&&JS(m)&&l.composed&&l.composedPath){const h=l.composedPath();if(h)return ve(h)}}return q.from(l.target)},JS=l=>Jr(l.dom.shadowRoot),Lr=l=>{const m=vs(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return kb(Fe.fromDom(m)).fold(()=>h.body.contains(m),Sl(Lr,YS))},QS=()=>Hr(Fe.fromDom(document)),Hr=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return Fe.fromDom(m)},er=(l,m,h)=>In(U2(l,h),m),Wa=(l,m)=>In(Qr(l),m),Ri=(l,m)=>{let h=[];return Ce(Qr(l),v=>{m(v)&&(h=h.concat([v])),h=h.concat(Ri(v,m))}),h},Ot=(l,m,h)=>er(l,v=>_r(v,m),h),ln=(l,m)=>Wa(l,h=>_r(h,m)),Yn=(l,m)=>wu(m,l);var Or=(l,m,h,v,w)=>l(h,v)?q.some(h):Ti(w)&&w(h)?q.none():m(h,v,w);const Wd=(l,m,h)=>{let v=l.dom;const w=Ti(h)?h:en;for(;v.parentNode;){v=v.parentNode;const k=Fe.fromDom(v);if(m(k))return q.some(k);if(w(k))break}return q.none()},Cs=(l,m,h)=>Or((w,k)=>k(w),Wd,l,m,h),ek=(l,m)=>{const h=w=>m(Fe.fromDom(w));return R(l.dom.childNodes,h).map(Fe.fromDom)},Eb=(l,m)=>{const h=v=>{for(let w=0;w<v.childNodes.length;w++){const k=Fe.fromDom(v.childNodes[w]);if(m(k))return q.some(k);const D=h(v.childNodes[w]);if(D.isSome())return D}return q.none()};return h(l.dom)},Bi=(l,m,h)=>Wd(l,v=>_r(v,m),h),Tt=(l,m)=>ek(l,h=>_r(h,m)),Mi=(l,m)=>Xc(m,l),as=(l,m,h)=>Or((w,k)=>_r(w,k),Bi,l,m,h),we=(l,m,h=Vh)=>l.exists(v=>h(v,m)),Ol=l=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(h);return m},Ps=(l,m)=>l!=null?m(l):q.none(),Fs=(l,m)=>l?q.some(m):q.none(),Ab=(l,m,h)=>m===""||l.length>=m.length&&l.substr(h,h+m.length)===m,Vt=(l,m,h=0,v)=>{const w=l.indexOf(m,h);return w!==-1?vf(v)?!0:w+m.length<=v:!1},ku=(l,m)=>Ab(l,m,0),jd=(l,m)=>Ab(l,m,l.length-m.length),Jo=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Dl=l=>l.length>0,so=l=>{const m=parseFloat(l);return isNaN(m)?q.none():q.some(m)},Rl=l=>l.style!==void 0&&Ti(l.style.getPropertyValue),zn=(l,m,h)=>{if(!bf(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",l),new Error("CSS value must be a string: "+h);Rl(l)&&l.style.setProperty(m,h)},tk=(l,m)=>{Rl(l)&&l.style.removeProperty(m)},Nn=(l,m,h)=>{const v=l.dom;zn(v,m,h)},Ro=(l,m)=>{const h=l.dom;oo(m,(v,w)=>{zn(h,w,v)})},$i=(l,m)=>{const h=l.dom,w=window.getComputedStyle(h).getPropertyValue(m);return w===""&&!Lr(l)?Of(h,m):w},Of=(l,m)=>Rl(l)?l.style.getPropertyValue(m):"",Df=(l,m)=>{const h=l.dom,v=Of(h,m);return q.from(v).filter(w=>w.length>0)},Bo=(l,m)=>{const h=l.dom;tk(h,m),we(Al(l,"style").map(Jo),"")&&mo(l,"style")},Mo=(l,m)=>{const h=l.dom,v=m.dom;Rl(h)&&Rl(v)&&(v.style.cssText=h.style.cssText)},Dr=(l,m,h=0)=>Al(l,m).map(v=>parseInt(v,10)).getOr(h),is=(l,m)=>Dr(l,m,1),va=l=>Yo("col")(l)?Dr(l,"span",1)>1:is(l,"colspan")>1,Rf=l=>is(l,"rowspan")>1,ls=(l,m)=>parseInt($i(l,m),10),Bf=X(10),Mf=X(10),Bl=(l,m)=>Eu(l,m,Se),Eu=(l,m,h)=>Xt(Qr(l),v=>_r(v,m)?h(v)?[v]:[]:Eu(v,m,h)),nk=(l,m,h=en)=>{if(h(m))return q.none();if(A(l,gn(m)))return q.some(m);const v=w=>_r(w,"table")||h(w);return Bi(m,l.join(","),v)},Au=(l,m)=>nk(["td","th"],l,m),Tu=l=>Bl(l,"th,td"),Jh=l=>_r(l,"colgroup")?ln(l,"col"):Xt(Gd(l),m=>ln(m,"col")),fr=(l,m)=>as(l,"table",m),ja=l=>Bl(l,"tr"),Gd=l=>fr(l).fold(X([]),m=>ln(m,"colgroup")),_b=(l,m)=>Ct(l,h=>{if(gn(h)==="colgroup"){const v=Ct(Jh(h),w=>{const k=Dr(w,"span",1);return Zd(w,1,k)});return _f(h,v,"colgroup")}else{const v=Ct(Tu(h),w=>{const k=Dr(w,"rowspan",1),D=Dr(w,"colspan",1);return Zd(w,k,D)});return _f(h,v,m(h))}}),$f=l=>xu(l).map(m=>{const h=gn(m);return Yc(h)?h:"tbody"}).getOr("tbody"),Ob=l=>{const m=ja(l),v=[...Gd(l),...m];return _b(v,$f)},Qh=(l,m)=>_b(l,()=>m),Ga=l=>{let m=!1,h;return(...v)=>(m||(m=!0,h=l.apply(null,v)),h)},Y2=(l,m,h,v)=>{const w=l.isiOS()&&/ipad/i.test(h)===!0,k=l.isiOS()&&!w,D=l.isiOS()||l.isAndroid(),F=D||v("(pointer:coarse)"),L=w||!k&&D&&v("(min-device-width:768px)"),W=k||D&&!L,Q=m.isSafari()&&l.isiOS()&&/safari/i.test(h)===!1,ye=!W&&!L&&!Q;return{isiPad:X(w),isiPhone:X(k),isTablet:X(L),isPhone:X(W),isTouch:X(F),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:X(Q),isDesktop:X(ye)}},J2=(l,m)=>{for(let h=0;h<l.length;h++){const v=l[h];if(v.test(m))return v}},Q2=(l,m)=>{const h=J2(l,m);if(!h)return{major:0,minor:0};const v=w=>Number(m.replace(h,"$"+w));return G(v(1),v(2))},Nf=(l,m)=>{const h=String(m).toLowerCase();return l.length===0?ey():Q2(l,h)},ey=()=>G(0,0),G=(l,m)=>({major:l,minor:m}),_u={nu:G,detect:Nf,unknown:ey},Jc=(l,m)=>Ys(m.brands,h=>{const v=h.brand.toLowerCase();return R(l,w=>{var k;return v===((k=w.brand)===null||k===void 0?void 0:k.toLowerCase())}).map(w=>({current:w.name,version:_u.nu(parseInt(h.version,10),0)}))}),ep=(l,m)=>{const h=String(m).toLowerCase();return R(l,v=>v.search(h))},ty=(l,m)=>ep(l,m).map(h=>{const v=_u.detect(h.versionRegexes,m);return{current:h.name,version:v}}),ny=(l,m)=>ep(l,m).map(h=>{const v=_u.detect(h.versionRegexes,m);return{current:h.name,version:v}}),vn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,tr=l=>m=>Vt(m,l),Db=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Vt(l,"edge/")&&Vt(l,"chrome")&&Vt(l,"safari")&&Vt(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,vn],search:l=>Vt(l,"chrome")&&!Vt(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Vt(l,"msie")||Vt(l,"trident")},{name:"Opera",versionRegexes:[vn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:tr("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:tr("firefox")},{name:"Safari",versionRegexes:[vn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Vt(l,"safari")||Vt(l,"mobile/"))&&Vt(l,"applewebkit")}],Ni=[{name:"Windows",search:tr("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Vt(l,"iphone")||Vt(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:tr("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:tr("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:tr("linux"),versionRegexes:[]},{name:"Solaris",search:tr("sunos"),versionRegexes:[]},{name:"FreeBSD",search:tr("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:tr("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Rb={browsers:X(Db),oses:X(Ni)},Ou="Edge",Ec="Chromium",oy="IE",sy="Opera",ry="Firefox",nc="Safari",Pf=()=>tp({current:void 0,version:_u.unknown()}),tp=l=>{const m=l.current,h=l.version,v=w=>()=>m===w;return{current:m,version:h,isEdge:v(Ou),isChromium:v(Ec),isIE:v(oy),isOpera:v(sy),isFirefox:v(ry),isSafari:v(nc)}},Bb={unknown:Pf,nu:tp,edge:X(Ou),chromium:X(Ec),ie:X(oy),opera:X(sy),firefox:X(ry),safari:X(nc)},ws="Windows",Ff="iOS",Mb="Android",np="Linux",Du="macOS",cy="Solaris",op="FreeBSD",oc="ChromeOS",ok=()=>qa({current:void 0,version:_u.unknown()}),qa=l=>{const m=l.current,h=l.version,v=w=>()=>m===w;return{current:m,version:h,isWindows:v(ws),isiOS:v(Ff),isAndroid:v(Mb),isMacOS:v(Du),isLinux:v(np),isSolaris:v(cy),isFreeBSD:v(op),isChromeOS:v(oc)}},qd={unknown:ok,nu:qa,windows:X(ws),ios:X(Ff),android:X(Mb),linux:X(np),macos:X(Du),solaris:X(cy),freebsd:X(op),chromeos:X(oc)},Ka={detect:(l,m,h)=>{const v=Rb.browsers(),w=Rb.oses(),k=m.bind(L=>Jc(v,L)).orThunk(()=>ty(v,l)).fold(Bb.unknown,Bb.nu),D=ny(w,l).fold(qd.unknown,qd.nu),F=Y2(D,k,l,h);return{browser:k,os:D,deviceType:F}}},ay=l=>window.matchMedia(l).matches;let iy=Ga(()=>Ka.detect(navigator.userAgent,q.from(navigator.userAgentData),ay));const $b=()=>iy(),$l=(l,m)=>{const h=(F,L)=>{if(!Ar(L)&&!L.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+L);const W=F.dom;Rl(W)&&(W.style[l]=L+"px")},v=F=>{const L=m(F);if(L<=0||L===null){const W=$i(F,l);return parseFloat(W)||0}return L},w=v,k=(F,L)=>pn(L,(W,Q)=>{const ye=$i(F,Q),Be=ye===void 0?0:parseInt(ye,10);return isNaN(Be)?W:W+Be},0);return{set:h,get:v,getOuter:w,aggregate:k,max:(F,L,W)=>{const Q=k(F,W);return L>Q?L-Q:0}}},sp=(l,m)=>so(l).getOr(m),Ru=(l,m,h)=>sp($i(l,m),h),ly=(l,m,h,v)=>{const w=Ru(l,`padding-${h}`,0),k=Ru(l,`padding-${v}`,0),D=Ru(l,`border-${h}-width`,0),F=Ru(l,`border-${v}-width`,0);return m-w-k-D-F},Nb=(l,m)=>{const h=l.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:ly(l,v,"left","right")},Pi=l=>Ru(l,"height",l.dom.offsetHeight),uy=l=>Ru(l,"width",l.dom.offsetWidth),Kd=l=>Nb(l,"content-box"),Pb=$l("width",l=>l.dom.offsetWidth),Xa=l=>Pb.get(l),xs=l=>Pb.getOuter(l),qn=Kd,sc=uy,Ac=(l,m,h)=>{const v=l.cells,w=v.slice(0,m),k=v.slice(m),D=w.concat(h).concat(k);return sk(l,D)},zo=(l,m,h)=>Ac(l,m,[h]),Xd=(l,m,h)=>{const v=l.cells;v[m]=h},sk=(l,m)=>ec(l.element,m,l.section,l.isNew),St=(l,m)=>{const h=l.cells,v=Ct(h,m);return ec(l.element,v,l.section,l.isNew)},Jn=(l,m)=>l.cells[m],un=(l,m)=>Jn(l,m).element,Is=l=>l.cells.length,Ls=l=>{const m=qo(l,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},dy=(l,m,h)=>{const v=Ct(l.cells,h);return ec(m(l.element),v,l.section,!0)},If="data-snooker-locked-cols",rp=l=>Al(l,If).bind(m=>q.from(m.match(/\d+/g))).map(m=>$n(m,Se)),Nl=l=>{const m=pn(Ls(l).rows,(v,w)=>(Ce(w.cells,(k,D)=>{k.isLocked&&(v[D]=!0)}),v),{}),h=vu(m,(v,w)=>parseInt(w,10));return Yt(h)},cp=(l,m)=>l+","+m,u_=(l,m,h)=>q.from(l.access[cp(m,h)]),d_=(l,m,h)=>{const v=fo(l,w=>h(m,w.element));return v.length>0?q.some(v[0]):q.none()},fo=(l,m)=>{const h=Xt(l.all,v=>v.cells);return In(h,m)},my=l=>{const m={};let h=0;return Ce(l.cells,v=>{const w=v.colspan;no(w,k=>{const D=h+k;m[D]=wb(v.element,w,D)}),h+=w}),m},fy=l=>{const m={},h=[],w=ve(l).map(Te=>Te.element).bind(fr).bind(rp).getOr({});let k=0,D=0,F=0;const{pass:L,fail:W}=qo(l,Te=>Te.section==="colgroup");Ce(W,Te=>{const me=[];Ce(Te.cells,Ne=>{let ge=0;for(;m[cp(F,ge)]!==void 0;)ge++;const He=Xo(w,ge.toString()),gt=Ud(Ne.element,Ne.rowspan,Ne.colspan,F,ge,He);for(let Et=0;Et<Ne.colspan;Et++)for(let Ln=0;Ln<Ne.rowspan;Ln++){const Ds=F+Ln,Co=ge+Et,ps=cp(Ds,Co);m[ps]=gt,D=Math.max(D,Co+1)}me.push(gt)}),k++,h.push(_f(Te.element,me,Te.section)),F++});const{columns:Q,colgroups:ye}=So(L).map(Te=>{const me=my(Te);return{colgroups:[xb(Te.element,Fr(me))],columns:me}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:Tf(k,D),access:m,all:h,columns:Q,colgroups:ye}},Ft={fromTable:l=>{const m=Ob(l);return fy(m)},generate:fy,getAt:u_,findItem:d_,filterItems:fo,justCells:l=>Xt(l.all,m=>m.cells),justColumns:l=>Fr(l.columns),hasColumns:l=>mt(l.columns).length>0,getColumnAt:(l,m)=>q.from(l.columns[m])},zr=(l,m=Se)=>{const h=l.grid,v=no(h.columns,hn),w=no(h.rows,hn);return Ct(v,k=>Yd(()=>Xt(w,W=>Ft.getAt(l,W,k).filter(Q=>Q.column===k).toArray()),W=>W.colspan===1&&m(W.element),()=>Ft.getAt(l,0,k)))},Yd=(l,m,h)=>{const v=l();return R(v,m).orThunk(()=>q.from(v[0]).orThunk(h)).map(D=>D.element)},Jd=l=>{const m=l.grid,h=no(m.rows,hn),v=no(m.columns,hn);return Ct(h,w=>Yd(()=>Xt(v,L=>Ft.getAt(l,w,L).filter(W=>W.row===w).fold(X([]),W=>[W])),L=>L.rowspan===1,()=>Ft.getAt(l,w,0)))},Ib=(l,m)=>{if(m<0||m>=l.length-1)return q.none();const h=l[m].fold(()=>{const w=Xs(l.slice(0,m));return Ys(w,(k,D)=>k.map(F=>({value:F,delta:D+1})))},w=>q.some({value:w,delta:0})),v=l[m+1].fold(()=>{const w=l.slice(m+1);return Ys(w,(k,D)=>k.map(F=>({value:F,delta:D+1})))},w=>q.some({value:w,delta:1}));return h.bind(w=>v.map(k=>{const D=k.delta+w.delta;return Math.abs(k.value-w.value)/D}))},Hf=(l,m)=>h=>gy(h)==="rtl"?m:l,gy=l=>$i(l,"direction")==="rtl"?"rtl":"ltr",Pl=$l("height",l=>{const m=l.dom;return Lr(l)?m.getBoundingClientRect().height:m.offsetHeight}),Bu=l=>Pl.get(l),Ue=l=>Pl.getOuter(l),hy=Pi,Tc=(l,m)=>({left:l,top:m,translate:(v,w)=>Tc(l+v,m+w)}),rc=Tc,py=l=>{const m=l.getBoundingClientRect();return rc(m.left,m.top)},Fl=(l,m)=>l!==void 0?l:m!==void 0?m:0,ya=l=>{const m=l.dom.ownerDocument,h=m.body,v=m.defaultView,w=m.documentElement;if(h===l.dom)return rc(h.offsetLeft,h.offsetTop);const k=Fl(v==null?void 0:v.pageYOffset,w.scrollTop),D=Fl(v==null?void 0:v.pageXOffset,w.scrollLeft),F=Fl(w.clientTop,h.clientTop),L=Fl(w.clientLeft,h.clientLeft);return rk(l).translate(D-L,k-F)},rk=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?rc(v.offsetLeft,v.offsetTop):Lr(l)?py(m):rc(0,0)},Ya=(l,m)=>({row:l,y:m}),Lb=(l,m)=>({col:l,x:m}),ip=l=>ya(l).left+xs(l),ke=l=>ya(l).left,Hb=(l,m)=>Lb(l,ke(m)),by=(l,m)=>Lb(l,ip(m)),Ca=l=>ya(l).top,zf=(l,m)=>Ya(l,Ca(m)),zb=(l,m)=>Ya(l,Ca(m)+Ue(m)),go=(l,m,h)=>{if(h.length===0)return[];const v=Ct(h.slice(1),(k,D)=>k.map(F=>l(D,F))),w=h[h.length-1].map(k=>m(h.length-1,k));return v.concat([w])},vy=l=>-l,_c={delta:hn,positions:l=>go(zf,zb,l),edge:Ca},ot=Hf({delta:hn,edge:ke,positions:l=>go(Hb,by,l)},{delta:vy,edge:ip,positions:l=>go(by,Hb,l)}),Ss={delta:(l,m)=>ot(m).delta(l,m),positions:(l,m)=>ot(m).positions(l,m),edge:l=>ot(l).edge(l)},Vb={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ck=(()=>{const l="[0-9]+",h="[eE]"+("[+-]?"+l),v="\\.",w=F=>`(?:${F})?`,D=`[+-]?(?:${["Infinity",l+v+w(l)+w(h),v+l+w(h),l+w(h)].join("|")})`;return new RegExp(`^(${D})(.*)$`)})(),yy=(l,m)=>Oe(m,h=>Oe(Vb[h],v=>l===v)),Zb=(l,m)=>q.from(ck.exec(l)).bind(v=>{const w=Number(v[1]),k=v[2];return yy(k,m)?q.some({value:w,unit:k}):q.none()}),Oc=/(\d+(\.\d+)?)%/,lp=/(\d+(\.\d+)?)px|em/,Vf=Yo("col"),ho=(l,m,h)=>{const v=vb(l).getOrThunk(()=>Hr(Tl(l)));return m(l)/h(v)*100},wa=(l,m)=>{Nn(l,"width",m+"px")},up=(l,m)=>{Nn(l,"width",m+"%")},Zf=(l,m)=>{Nn(l,"height",m+"px")},ak=l=>hy(l)+"px",Uf=(l,m,h,v)=>{const w=fr(l).map(k=>{const D=h(k);return Math.floor(m/100*D)}).getOr(m);return v(l,w),w},Il=(l,m,h,v)=>{const w=parseFloat(l);return jd(l,"%")&&gn(m)!=="table"?Uf(m,w,h,v):w},Mu=l=>{const m=ak(l);return m?Il(m,l,Bu,Zf):Bu(l)},Qd=(l,m,h)=>{const v=h(l),w=is(l,m);return v/w},Cy=(l,m)=>Df(l,m).orThunk(()=>Al(l,m).map(h=>h+"px")),$u=l=>Cy(l,"width"),jt=l=>Cy(l,"height"),Ja=l=>ho(l,Xa,qn),gr=l=>Vf(l)?Xa(l):sc(l),Nu=l=>Qd(l,"rowspan",Mu),Dc=l=>$u(l).bind(h=>Zb(h,["fixed","relative","empty"])),wy=(l,m,h)=>{Nn(l,"width",m+h)},ks=l=>Xa(l)+"px",nr=l=>ho(l,Xa,qn)+"%",Ub=l=>$u(l).exists(m=>Oc.test(m)),pe=l=>$u(l).exists(m=>lp.test(m)),us=l=>$u(l).isNone(),xa=X(Oc),Qo=Yo("col"),em=l=>$u(l).getOrThunk(()=>gr(l)+"px"),Pu=l=>jt(l).getOrThunk(()=>Nu(l)+"px"),Fi=l=>Ct(Ft.justColumns(l),m=>q.from(m.element)),Wb=l=>{const m=$b().browser,h=m.isChromium()||m.isFirefox();return Qo(l)?h:!0},cc=(l,m,h,v,w,k)=>l.filter(v).fold(()=>k(Ib(h,m)),D=>w(D)),dp=(l,m,h,v)=>{const w=zr(l),k=Ft.hasColumns(l)?Fi(l):w,D=[q.some(Ss.edge(m))].concat(Ct(Ss.positions(w,m),L=>L.map(W=>W.x))),F=te(va);return Ct(k,(L,W)=>cc(L,W,D,F,Q=>{if(Wb(Q))return h(Q);{const ye=Ps(w[W],hn);return cc(ye,W,D,F,Be=>v(q.some(Xa(Be))),v)}},v))},hr=l=>l.map(m=>m+"px").getOr(""),nn=(l,m)=>dp(l,m,em,hr),Ii=(l,m,h)=>dp(l,m,Ja,v=>v.fold(()=>h.minCellWidth(),w=>w/h.pixelWidth()*100)),Fu=(l,m,h)=>dp(l,m,gr,v=>v.getOrThunk(h.minCellWidth)),pr=(l,m,h,v,w)=>{const k=Jd(l),D=[q.some(h.edge(m))].concat(Ct(h.positions(k,m),F=>F.map(L=>L.y)));return Ct(k,(F,L)=>cc(F,L,D,te(Rf),v,w))},Iu=(l,m,h)=>pr(l,m,h,Nu,v=>v.getOrThunk(Mf)),Vo=(l,m,h)=>pr(l,m,h,Pu,hr),tm=(l,m)=>()=>Lr(l)?m(l):parseFloat(Df(l,"width").getOr("0")),Vr=l=>{const m=tm(l,Xa),h=X(0);return{width:m,pixelWidth:m,getWidths:(w,k)=>Fu(w,l,k),getCellDelta:h,singleColumnWidth:X([0]),minCellWidth:h,setElementWidth:nt,adjustTableWidth:nt,isRelative:!0,label:"none"}},jb=l=>{const m=tm(l,L=>parseFloat(nr(L))),h=tm(l,Xa);return{width:m,pixelWidth:h,getWidths:(L,W)=>Ii(L,l,W),getCellDelta:L=>L/h()*100,singleColumnWidth:(L,W)=>[100-L],minCellWidth:()=>Bf()/h()*100,setElementWidth:up,adjustTableWidth:L=>{const W=m(),Q=L/100*W,ye=W+Q;up(l,ye)},isRelative:!0,label:"percent"}},ee=l=>{const m=tm(l,Xa);return{width:m,pixelWidth:m,getWidths:(D,F)=>Fu(D,l,F),getCellDelta:hn,singleColumnWidth:(D,F)=>[Math.max(Bf(),D+F)-D],minCellWidth:Bf,setElementWidth:wa,adjustTableWidth:D=>{const F=m()+D;wa(l,F)},isRelative:!1,label:"pixel"}},Qc=(l,m)=>xa().exec(m)!==null?jb(l):ee(l),ac={getTableSize:l=>$u(l).fold(()=>Vr(l),h=>Qc(l,h)),pixelSize:ee,percentageSize:jb,noneSize:Vr},Li=(l,m,h,v,w,k)=>({minRow:l,minCol:m,maxRow:h,maxCol:v,allCells:w,selectedCells:k}),ic=(l,m)=>{const h=l.grid.columns;let w=l.grid.rows,k=h,D=0,F=0;const L=[],W=[];return oo(l.access,Q=>{if(L.push(Q),m(Q)){W.push(Q);const ye=Q.row,Be=ye+Q.rowspan-1,Te=Q.column,me=Te+Q.colspan-1;ye<w?w=ye:Be>D&&(D=Be),Te<k?k=Te:me>F&&(F=me)}}),Li(w,k,D,F,L,W)},es=(l,m,h)=>{const v=l[h].element,w=Fe.fromTag("td");bn(w,Fe.fromTag("br")),(m?bn:kf)(v,w)},qb=(l,m,h,v)=>{const w=In(l,F=>F.section!=="colgroup"),k=m.grid.columns,D=m.grid.rows;for(let F=0;F<D;F++){let L=!1;for(let W=0;W<k;W++)F<h.minRow||F>h.maxRow||W<h.minCol||W>h.maxCol||(Ft.getAt(m,F,W).filter(v).isNone()?es(w,L,F):L=!0)}},Hi=(l,m,h,v)=>{oo(h.columns,D=>{(D.column<m.minCol||D.column>m.maxCol)&&Qs(D.element)});const w=In(Bl(l,"tr"),D=>D.dom.childElementCount===0);Ce(w,Qs),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&Ce(Bl(l,"th,td"),D=>{mo(D,"rowspan"),mo(D,"colspan")}),mo(l,If),mo(l,"data-snooker-col-series"),ac.getTableSize(l).adjustTableWidth(v)},Kb=(l,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const w=Fu(m,l,h),k=pn(w,(W,Q)=>W+Q,0),L=pn(w.slice(v.minCol,v.maxCol+1),(W,Q)=>W+Q,0)/k*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(L)},Ye=(l,m)=>{const h=Be=>_r(Be.element,m),v=Su(l),w=Ob(v),k=ac.getTableSize(l),D=Ft.generate(w),F=ic(D,h),L="th:not("+m+"),td:not("+m+")",W=Eu(v,"th,td",Be=>_r(Be,L));Ce(W,Qs),qb(w,D,F,h);const Q=Ft.fromTable(l),ye=Kb(l,Q,k,F);return Hi(v,F,D,ye),v},Xb="\xA0",Yb=((l,m)=>{const h=k=>{if(!l(k))throw new Error("Can only get "+m+" value of a "+m+" node");return v(k).getOr("")},v=k=>l(k)?q.from(k.dom.nodeValue):q.none();return{get:h,getOption:v,set:(k,D)=>{if(!l(k))throw new Error("Can only set raw "+m+" value of a "+m+" node");k.dom.nodeValue=D}}})(vs,"text"),Ll=l=>Yb.get(l),Lu=l=>Yb.getOption(l),nm=(l,m)=>Yb.set(l,m),As=l=>gn(l)==="img"?1:Lu(l).fold(()=>Qr(l).length,m=>m.length),Hl=l=>Lu(l).filter(m=>m.trim().length!==0||m.indexOf(Xb)>-1).isSome(),om=["img","br"],mp=l=>Hl(l)||A(om,gn(l)),fp=l=>Eb(l,mp),xy=l=>Wf(l,mp),Wf=(l,m)=>{const h=v=>{const w=Qr(v);for(let k=w.length-1;k>=0;k--){const D=w[k];if(m(D))return q.some(D);const F=h(D);if(F.isSome())return F}return q.none()};return h(l)},jf={scope:["row","col"]},Gf=l=>()=>{const m=Fe.fromTag("td",l.dom);return bn(m,Fe.fromTag("br",l.dom)),m},sm=l=>()=>Fe.fromTag("col",l.dom),Jb=l=>()=>Fe.fromTag("colgroup",l.dom),zl=l=>()=>Fe.fromTag("tr",l.dom),ik=(l,m,h)=>{const v=j2(l,m);return oo(h,(w,k)=>{w===null?mo(v,k):Eo(v,k,w)}),v},lk=l=>l,uk=(l,m,h)=>fp(l).map(w=>{const k=h.join(","),D=Ot(w,k,F=>Hn(F,l));return mr(D,(F,L)=>{const W=Kh(L);return mo(W,"contenteditable"),bn(F,W),W},m)}).getOr(m),dk=(l,m)=>{oo(jf,(h,v)=>Al(l,v).filter(w=>A(h,w)).each(w=>Eo(m,v,w)))},Zo=(l,m,h)=>{const v=(D,F)=>{Mo(D.element,F),Bo(F,"height"),D.colspan!==1&&Bo(F,"width")},w=D=>{const F=Fe.fromTag(gn(D.element),m.dom),L=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),W=L.length>0?uk(D.element,F,L):F;return bn(W,Fe.fromTag("br")),v(D,F),dk(D.element,F),l(D.element,F),F};return{col:D=>{const F=Fe.fromTag(gn(D.element),m.dom);return v(D,F),l(D.element,F),F},colgroup:Jb(m),row:zl(m),cell:w,replace:ik,colGap:sm(m),gap:Gf(m)}},Qa=l=>({col:sm(l),colgroup:Jb(l),row:zl(l),cell:Gf(l),replace:lk,colGap:sm(l),gap:Gf(l)}),qf=(l,m)=>{const v=(m||document).createElement("div");return v.innerHTML=l,Qr(Fe.fromDom(v))},Br=l=>Ct(l,Fe.fromDom),Kf=l=>Fe.fromDom(l.getBody()),Hs=l=>m=>Hn(m,Kf(l)),ei=l=>{mo(l,"data-mce-style");const m=h=>mo(h,"data-mce-style");Ce(Tu(l),m),Ce(Jh(l),m),Ce(ja(l),m)},rm=l=>Fe.fromDom(l.selection.getStart()),gp=l=>l.getBoundingClientRect().width,ti=l=>l.getBoundingClientRect().height,Vl=(l,m)=>{const h=l.dom.getStyle(m,"width")||l.dom.getAttrib(m,"width");return q.from(h).filter(Dl)},Hu=l=>/^(\d+(\.\d+)?)%$/.test(l),Xf=l=>/^(\d+(\.\d+)?)px$/.test(l),Sy=(l,m)=>{const h=m.column,v=m.column+m.colspan-1,w=m.row,k=m.row+m.rowspan-1;return h<=l.finishCol&&v>=l.startCol&&w<=l.finishRow&&k>=l.startRow},zu=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,cm=(l,m)=>{let h=!0;const v=xn(zu,m);for(let w=m.startRow;w<=m.finishRow;w++)for(let k=m.startCol;k<=m.finishCol;k++)h=h&&Ft.getAt(l,w,k).exists(v);return h?q.some(m):q.none()},Yf=(l,m)=>q2(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),ky=(l,m,h)=>{const v=Ft.findItem(l,m,Hn),w=Ft.findItem(l,h,Hn);return v.bind(k=>w.map(D=>Yf(k,D)))},Jf=(l,m,h)=>ky(l,m,h).bind(v=>cm(l,v)),hp=(l,m,h,v)=>Ft.findItem(l,m,Hn).bind(w=>{const k=h>0?w.row+w.rowspan-1:w.row,D=v>0?w.column+w.colspan-1:w.column;return Ft.getAt(l,k+h,D+v).map(L=>L.element)}),Ey=(l,m,h)=>ky(l,m,h).map(v=>{const w=Ft.filterItems(l,xn(Sy,v));return Ct(w,k=>k.element)}),po=(l,m)=>{const h=(v,w)=>bb(w,v);return Ft.findItem(l,m,h).map(v=>v.element)},mk=(l,m,h)=>fr(l).bind(v=>{const w=Sa(v);return hp(w,l,m,h)}),Zl=(l,m,h)=>{const v=Sa(l);return Ey(v,m,h)},$o=(l,m,h,v,w)=>{const k=Sa(l),D=Hn(l,h)?q.some(m):po(k,m),F=Hn(l,w)?q.some(v):po(k,v);return D.bind(L=>F.bind(W=>Ey(k,L,W)))},Qb=(l,m,h)=>{const v=Sa(l);return Jf(v,m,h)},Sa=Ft.fromTable;var lc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],zi=()=>{const l=W=>Fe.fromDom(W.dom.cloneNode(!1)),m=W=>jh(W).dom,h=W=>tn(W)?gn(W)==="body"?!0:A(lc,gn(W)):!1,v=W=>tn(W)?A(["br","img","hr","input"],gn(W)):!1,w=W=>tn(W)&&Ir(W,"contenteditable")==="false",k=(W,Q)=>W.dom.compareDocumentPosition(Q.dom),D=(W,Q)=>{const ye=Wh(W);Bn(Q,ye)},F=W=>{const Q=gn(W);return A(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Q)},L=W=>tn(W)?Al(W,"lang"):q.none();return{up:X({selector:Bi,closest:as,predicate:Wd,all:U2}),down:X({selector:Yn,predicate:Ri}),styles:X({get:$i,getRaw:Df,set:Nn,remove:Bo}),attrs:X({get:Ir,set:Eo,remove:mo,copyTo:D}),insert:X({before:Ho,after:_l,afterAll:ha,append:bn,appendAll:Ao,prepend:kf,wrap:Ef}),remove:X({unwrap:yb,remove:Qs}),create:X({nu:Fe.fromTag,clone:l,text:Fe.fromText}),query:X({comparePosition:k,prevSibling:W2,nextSibling:Gh}),property:X({children:Qr,name:gn,parent:xu,document:m,isText:vs,isComment:at,isElement:tn,isSpecial:F,getLanguage:L,getText:Ll,setText:nm,isBoundary:h,isEmptyTag:v,isNonEditable:w}),eq:Hn,is:KS}};const Qf=(l,m,h,v)=>{const w=h[0],k=h.slice(1);return v(l,m,w,k)},fk=(l,m,h)=>h.length>0?Qf(l,m,h,pp):q.none(),pp=(l,m,h,v)=>{const w=m(l,h);return mr(v,(k,D)=>{const F=m(l,D);return eg(l,k,F)},w)},eg=(l,m,h)=>m.bind(v=>h.filter(xn(l.eq,v))),bp=(l,m)=>xn(l.eq,m),vp=(l,m,h,v=en)=>{const w=[m].concat(l.up().all(m)),k=[h].concat(l.up().all(h)),D=Q=>yf(Q,v).fold(()=>Q,Be=>Q.slice(0,Be+1)),F=D(w),L=D(k),W=R(F,Q=>Oe(L,bp(l,Q)));return{firstpath:F,secondpath:L,shared:W}},yp=fk,e0=vp,tg=zi(),Vi=(l,m)=>yp(tg,(h,v)=>l(v),m),ea=(l,m,h)=>e0(tg,l,m,h),Ul=l=>Bi(l,"table"),ng=(l,m,h)=>{const v=w=>k=>h!==void 0&&h(k)||Hn(k,w);return Hn(l,m)?q.some({boxes:q.some([l]),start:l,finish:m}):Ul(l).bind(w=>Ul(m).bind(k=>{if(Hn(w,k))return q.some({boxes:Zl(w,l,m),start:l,finish:m});if(bb(w,k)){const D=Ot(m,"td,th",v(w)),F=D.length>0?D[D.length-1]:m;return q.some({boxes:$o(w,l,w,m,k),start:l,finish:F})}else if(bb(k,w)){const D=Ot(l,"td,th",v(k)),F=D.length>0?D[D.length-1]:l;return q.some({boxes:$o(k,l,w,m,k),start:l,finish:F})}else return ea(l,m).shared.bind(D=>as(D,"table",h).bind(F=>{const L=Ot(m,"td,th",v(F)),W=L.length>0?L[L.length-1]:m,Q=Ot(l,"td,th",v(F)),ye=Q.length>0?Q[Q.length-1]:l;return q.some({boxes:$o(F,l,w,m,k),start:ye,finish:W})}))}))},og=(l,m)=>{const h=Yn(l,m);return h.length>0?q.some(h):q.none()},sg=(l,m)=>R(l,h=>_r(h,m)),Cp=(l,m,h)=>Mi(l,m).bind(v=>Mi(l,h).bind(w=>Vi(Ul,[v,w]).map(k=>({first:v,last:w,table:k})))),Ay=(l,m)=>Bi(l,"table").bind(h=>Mi(h,m).bind(v=>ng(v,l).bind(w=>w.boxes.map(k=>({boxes:k,start:w.start,finish:w.finish}))))),t0=(l,m,h,v,w)=>sg(l,w).bind(k=>mk(k,m,h).bind(D=>Ay(D,v))),am=(l,m)=>og(l,m),mn=(l,m,h)=>Cp(l,m,h).bind(v=>{const w=L=>Hn(l,L),k="thead,tfoot,tbody,table",D=Bi(v.first,k,w),F=Bi(v.last,k,w);return D.bind(L=>F.bind(W=>Hn(L,W)?Qb(v.table,v.first,v.last):q.none()))}),lt=hn,uc=l=>{const m=(v,w)=>Al(v,w).exists(k=>parseInt(k,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&Ks(l,h)?q.some(l):q.none()},im=(l,m,h)=>m.length<=1?q.none():mn(l,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),Zi="data-mce-selected",gk="td["+Zi+"],th["+Zi+"]",Vu="["+Zi+"]",Bt="data-mce-first-selected",wp="td["+Bt+"],th["+Bt+"]",xp="data-mce-last-selected",Ty="td["+xp+"],th["+xp+"]",fe=Vu,ni={selected:Zi,selectedSelector:gk,firstSelected:Bt,firstSelectedSelector:wp,lastSelected:xp,lastSelectedSelector:Ty},rg=(l,m,h)=>({element:h,mergable:im(m,l,ni),unmergable:uc(l),selection:lt(l)}),Sp=(l,m,h)=>({element:l,clipboard:m,generators:h}),n0=(l,m,h,v)=>({selection:lt(l),clipboard:h,generators:v}),Rc=l=>fr(l).bind(m=>am(m,ni.firstSelectedSelector)).fold(X(l),m=>m[0]),lm=l=>(m,h)=>{const v=gn(m),w=v==="col"||v==="colgroup"?Rc(m):m;return as(w,l,h)},Zu=lm("th,td,caption"),o0=lm("th,td"),Zr=l=>Br(l.model.table.getSelectedCells()),bo=l=>In(Zr(l),m=>_r(m,ni.selectedSelector)),ka=l=>fr(l[0]).map(m=>{const h=Ye(m,fe);return ei(h),[h]}),s0=(l,m)=>Ct(m,h=>l.selection.serializer.serialize(h.dom,{})).join(""),Ui=l=>Ct(l,m=>m.dom.innerText).join(""),hk=(l,m)=>{l.on("BeforeGetContent",h=>{const v=w=>{h.preventDefault(),ka(w).each(k=>{h.content=h.format==="text"?Ui(k):s0(l,k)})};if(h.selection===!0){const w=bo(l);w.length>=1&&v(w)}}),l.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=Zr(l);ve(v).each(w=>{fr(w).each(k=>{const D=In(qf(h.content),L=>gn(L)!=="meta"),F=Yo("table");if(D.length===1&&F(D[0])){h.preventDefault();const L=Fe.fromDom(l.getDoc()),W=Qa(L),Q=Sp(w,D[0],W);m.pasteCells(k,Q).each(()=>{l.focus()})}})})}})},Wi=(l,m)=>({element:l,offset:m}),oi=(l,m,h)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?h(m).bind(v=>oi(l,v,h).orThunk(()=>q.some(v))):q.none(),_y=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,um=(l,m)=>{const h=oi(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(h))return Wi(h,_y(l,h));const v=l.property().children(h);return v.length>0?um(l,v[v.length-1]):Wi(h,_y(l,h))},pk=um,Uu=zi(),si=l=>pk(Uu,l),bk=(l,m)=>{va(l)||Dc(l).each(v=>{const w=v.value/2;wy(l,w,v.unit),wy(m,w,v.unit)})},dm=l=>Ct(l,X(0)),Oy=(l,m,h,v,w)=>w(l.slice(0,m)).concat(v).concat(w(l.slice(h))),Wu=l=>(m,h,v,w)=>{if(l(v)){const k=Math.max(w,m[h]-Math.abs(v)),D=Math.abs(k-m[h]);return v>=0?D:-D}else return v},Ke=Wu(l=>l<0),mm=Wu(Se),r0=()=>{const l=(F,L,W,Q,ye)=>{const Be=Ke(F,L,Q,ye);return Oy(F,L,W+1,[Be,0],dm)},m=(F,L,W,Q)=>{const ye=(100+W)/100,Be=Math.max(Q,(F[L]+W)/ye);return Ct(F,(Te,me)=>(me===L?Be:Te/ye)-Te)},h=(F,L,W,Q,ye,Be)=>Be?m(F,L,Q,ye):l(F,L,W,Q,ye);return{resizeTable:(F,L)=>F(L),clampTableDelta:Ke,calcLeftEdgeDeltas:h,calcMiddleDeltas:(F,L,W,Q,ye,Be,Te)=>h(F,W,Q,ye,Be,Te),calcRightEdgeDeltas:(F,L,W,Q,ye,Be)=>{if(Be)return m(F,W,Q,ye);{const Te=Ke(F,W,Q,ye);return dm(F.slice(0,W)).concat([Te])}},calcRedestributedWidths:(F,L,W,Q)=>{if(Q){const Be=(L+W)/L,Te=Ct(F,me=>me/Be);return{delta:Be*100-100,newSizes:Te}}else return{delta:W,newSizes:F}}}},c0=()=>{const l=(D,F,L,W,Q)=>{const ye=W>=0?L:F,Be=mm(D,ye,W,Q);return Oy(D,F,L+1,[Be,-Be],dm)};return{resizeTable:(D,F,L)=>{L&&D(F)},clampTableDelta:(D,F,L,W,Q)=>{if(Q){if(L>=0)return L;{const ye=pn(D,(Be,Te)=>Be+Te-W,0);return Math.max(-ye,L)}}else return Ke(D,F,L,W)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(D,F,L,W,Q,ye)=>l(D,L,W,Q,ye),calcRightEdgeDeltas:(D,F,L,W,Q,ye)=>{if(ye)return dm(D);{const Be=W/D.length;return Ct(D,X(Be))}},calcRedestributedWidths:(D,F,L,W)=>({delta:0,newSizes:D})}},cg=l=>Ft.fromTable(l).grid,kp=Yo("th"),yn=l=>Ks(l,m=>kp(m.element)),ag=(l,m)=>l&&m?"sectionCells":l?"section":"cells",ju=l=>{const m=l.section==="thead",h=we(a0(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:ag(m,h)}:{type:"body"}},a0=l=>{const m=In(l,h=>kp(h.element));return m.length===0?q.some("td"):m.length===l.length?q.some("th"):q.none()},Gu=l=>{const m=Ct(l,w=>ju(w).type),h=A(m,"header"),v=A(m,"footer");if(!h&&!v)return q.some("body");{const w=A(m,"body");return h&&!w&&!v?q.some("header"):!h&&!w&&v?q.some("footer"):q.none()}},Dy=l=>Ys(l.all,m=>{const h=ju(m);return h.type==="header"?q.from(h.subType):q.none()}),Ea=(l,m,h)=>To(h(l.element,m),!0,l.isLocked),_o=(l,m)=>l.section!==m?ec(l.element,l.cells,m,l.isNew):l,Ep=()=>({transformRow:_o,transformCell:(l,m,h)=>{const v=h(l.element,m),w=gn(v)!=="td"?Wn(v,"td"):v;return To(w,l.isNew,l.isLocked)}}),Ry=()=>({transformRow:_o,transformCell:Ea}),ji=()=>({transformRow:(l,m)=>_o(l,m==="thead"?"tbody":m),transformCell:Ea}),ig={getTableSectionType:(l,m)=>{const h=Ft.fromTable(l);switch(Dy(h).getOr(m)){case"section":return Ep();case"sectionCells":return Ry();case"cells":return ji()}},section:Ep,sectionCells:Ry,cells:ji,fallback:()=>({transformRow:hn,transformCell:Ea})},Ap=l=>as(l,"[contenteditable]"),Aa=(l,m=!1)=>Lr(l)?l.dom.isContentEditable:Ap(l).fold(X(m),h=>dc(h)==="true"),dc=l=>l.dom.contentEditable,Tp=(l,m,h,v)=>{h===v?mo(l,m):Eo(l,m,h)},yk=(l,m,h)=>{So(ln(l,m)).fold(()=>kf(l,h),v=>_l(v,h))},f_=(l,m)=>{const h=Tt(l,m).getOrThunk(()=>{const v=Fe.fromTag(m,Tl(l).dom);return m==="thead"?yk(l,"caption,colgroup",v):m==="colgroup"?yk(l,"caption",v):bn(l,v),v});return Di(h),h},ta=(l,m)=>{const h=[],v=[],w=Te=>Ct(Te,me=>{me.isNew&&h.push(me.element);const Ne=me.element;return Di(Ne),Ce(me.cells,ge=>{ge.isNew&&v.push(ge.element),Tp(ge.element,"colspan",ge.colspan,1),Tp(ge.element,"rowspan",ge.rowspan,1),bn(Ne,ge.element)}),Ne}),k=Te=>Xt(Te,me=>Ct(me.cells,Ne=>(Tp(Ne.element,"span",Ne.colspan,1),Ne.element))),D=(Te,me)=>{const Ne=f_(l,me),He=(me==="colgroup"?k:w)(Te);Ao(Ne,He)},F=Te=>{Tt(l,Te).each(Qs)},L=(Te,me)=>{Te.length>0?D(Te,me):F(me)},W=[],Q=[],ye=[],Be=[];return Ce(m,Te=>{switch(Te.section){case"thead":W.push(Te);break;case"tbody":Q.push(Te);break;case"tfoot":ye.push(Te);break;case"colgroup":Be.push(Te);break}}),L(Be,"colgroup"),L(W,"thead"),L(Q,"tbody"),L(ye,"tfoot"),{newRows:h,newCells:v}},eo=l=>Ct(l,m=>{const h=Kh(m.element);return Ce(m.cells,v=>{const w=Su(v.element);Tp(w,"colspan",v.colspan,1),Tp(w,"rowspan",v.rowspan,1),bn(h,w)}),h}),Ck=(l,m)=>Ct(l,h=>Jn(h,m)),wk=(l,m)=>l[m],Gi=(l,m)=>{if(l.length===0)return 0;const h=l[0];return yf(l,w=>!m(h.element,w.element)).getOr(l.length)},_p=(l,m,h,v)=>{const w=wk(l,m),k=w.section==="colgroup",D=Gi(w.cells.slice(h),v),F=k?1:Gi(Ck(l.slice(m),h),v);return{colspan:D,rowspan:F}},l0=(l,m)=>{const h=Ct(l,w=>Ct(w.cells,en)),v=(w,k,D,F)=>{for(let L=w;L<w+D;L++)for(let W=k;W<k+F;W++)h[L][W]=!0};return Ct(l,(w,k)=>{const D=Xt(w.cells,(F,L)=>{if(h[k][L]===!1){const W=_p(l,k,L,m);return v(k,L,W.rowspan,W.colspan),[ba(F.element,W.rowspan,W.colspan,F.isNew)]}else return[]});return G2(w.element,D,w.section,w.isNew)})},qi=(l,m,h)=>{const v=[];Ce(l.colgroups,w=>{const k=[];for(let D=0;D<l.grid.columns;D++){const F=Ft.getColumnAt(l,D).map(L=>To(L.element,h,!1)).getOrThunk(()=>To(m.colGap(),!0,!1));k.push(F)}v.push(ec(w.element,k,"colgroup",h))});for(let w=0;w<l.grid.rows;w++){const k=[];for(let L=0;L<l.grid.columns;L++){const W=Ft.getAt(l,w,L).map(Q=>To(Q.element,h,Q.isLocked)).getOrThunk(()=>To(m.gap(),!0,!1));k.push(W)}const D=l.all[w],F=ec(D.element,k,D.section,h);v.push(F)}return v},Ki=(l,m)=>qi(l,m,!1),Xi=l=>l0(l,Hn),qu=(l,m)=>Ys(l.all,h=>R(h.cells,v=>Hn(m,v.element))),Ku=(l,m,h)=>{const v=Ct(m.selection,k=>Au(k).bind(D=>qu(l,D)).filter(h)),w=Ol(v);return Fs(w.length>0,w)},No=(l,m,h,v,w)=>(k,D,F,L)=>{const W=Ft.fromTable(k),Q=q.from(L==null?void 0:L.section).getOrThunk(ig.fallback);return m(W,D).map(Be=>{const Te=Ki(W,F),me=l(Te,Be,Hn,w(F),Q),Ne=Nl(me.grid),ge=Xi(me.grid);return{info:Be,grid:ge,cursor:me.cursor,lockedColumns:Ne}}).bind(Be=>{const Te=ta(k,Be.grid),me=q.from(L==null?void 0:L.sizing).getOrThunk(()=>ac.getTableSize(k)),Ne=q.from(L==null?void 0:L.resize).getOrThunk(c0);return h(k,Be.grid,Be.info,{sizing:me,resize:Ne,section:Q}),v(k),mo(k,If),Be.lockedColumns.length>0&&Eo(k,If,Be.lockedColumns.join(",")),q.some({cursor:Be.cursor,newRows:Te.newRows,newCells:Te.newCells})})},By=(l,m)=>Au(m.element).bind(h=>qu(l,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),Op=(l,m)=>Ku(l,m,Se).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),xk=(l,m)=>m.mergable,My=(l,m)=>m.unmergable,Mr=(l,m)=>Ku(l,m,Se),ri=(l,m)=>Ku(l,m,h=>!h.isLocked),Sk=(l,m)=>qu(l,m).exists(h=>!h.isLocked),$y=(l,m)=>Ks(m,h=>Sk(l,h)),kk=(l,m)=>xk(l,m).filter(h=>$y(l,h.cells)),Ny=(l,m)=>My(l,m).filter(h=>$y(l,h)),Dp=(l,m,h,v)=>{const w=Ls(l).rows;if(w.length===0)return l;for(let k=m.startRow;k<=m.finishRow;k++)for(let D=m.startCol;D<=m.finishCol;D++){const F=w[k],L=Jn(F,D).isLocked;Xd(F,D,To(v(),!1,L))}return l},Py=(l,m,h,v)=>{const w=Ls(l).rows;let k=!0;for(let D=0;D<w.length;D++)for(let F=0;F<Is(w[0]);F++){const L=w[D],W=Jn(L,F),Q=W.element,ye=h(Q,m);ye&&!k?Xd(L,F,To(v(),!0,W.isLocked)):ye&&(k=!1)}return l},Ek=(l,m)=>pn(l,(h,v)=>Oe(h,w=>m(w.element,v.element))?h:h.concat([v]),[]),fm=(l,m,h,v)=>(m>0&&m<l[0].cells.length&&Ce(l,w=>{const k=w.cells[m-1];let D=0;const F=v();for(;w.cells.length>m+D&&h(k.element,w.cells[m+D].element);)Xd(w,m+D,To(F,!0,w.cells[m+D].isLocked)),D++}),l),Xu=(l,m,h,v)=>{const w=Ls(l).rows;if(m>0&&m<w.length){const k=w[m-1].cells,D=Ek(k,h);Ce(D,F=>{let L=q.none();for(let W=m;W<w.length;W++)for(let Q=0;Q<Is(w[0]);Q++){const ye=w[W],Be=Jn(ye,Q);h(Be.element,F.element)&&(L.isNone()&&(L=q.some(v())),L.each(me=>{Xd(ye,Q,To(me,!0,Be.isLocked))}))}})}return l},u0=l=>{const m=k=>k(l),h=X(l),v=()=>w,w={tag:!0,inner:l,fold:(k,D)=>D(l),isValue:Se,isError:en,map:k=>lg.value(k(l)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:k=>{k(l)},toOptional:()=>q.some(l)};return w},Fy=l=>{const m=()=>h,h={tag:!1,inner:l,fold:(v,w)=>v(l),isValue:en,isError:Se,map:m,mapError:v=>lg.error(v(l)),bind:m,exists:en,forall:Se,getOr:hn,or:hn,getOrThunk:dr,orThunk:dr,getOrDie:Wt(String(l)),each:nt,toOptional:q.none};return h},lg={value:u0,error:Fy,fromOption:(l,m)=>l.fold(()=>Fy(m),u0)},Vn=(l,m,h)=>{if(l.row>=m.length||l.column>Is(m[0]))return lg.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),w=v[0].cells.slice(l.column),k=Is(h[0]),D=h.length;return lg.value({rowDelta:v.length-D,colDelta:w.length-k})},Ts=(l,m)=>{const h=Is(l[0]),v=Is(m[0]);return{rowDelta:0,colDelta:h-v}},mc=(l,m)=>{const h=l.length,v=m.length;return{rowDelta:h-v,colDelta:0}},fc=(l,m,h,v)=>{const w=m.section==="colgroup"?h.col:h.cell;return no(l,k=>To(w(),!0,v(k)))},Ak=(l,m,h,v)=>{const w=l[l.length-1];return l.concat(no(m,()=>{const k=w.section==="colgroup"?h.colgroup:h.row,D=dy(w,k,hn),F=fc(D.cells.length,D,h,L=>Cf(v,L.toString()));return sk(D,F)}))},Iy=(l,m,h,v)=>Ct(l,w=>{const k=fc(m,w,h,en);return Ac(w,v,k)}),ug=(l,m,h)=>Ct(l,v=>pn(h,(w,k)=>{const D=fc(1,v,m,Se)[0];return zo(w,k,D)},v)),or=(l,m,h)=>{const v=m.colDelta<0?Iy:hn,w=m.rowDelta<0?Ak:hn,k=Nl(l),D=Is(l[0]),F=Oe(k,Q=>Q===D-1),L=v(l,Math.abs(m.colDelta),h,F?D-1:D),W=Nl(L);return w(L,Math.abs(m.rowDelta),h,$n(W,Se))},Yu=(l,m,h,v)=>{const w=Jn(l[m],h),k=xn(v,w.element),D=l[m];return l.length>1&&Is(D)>1&&(h>0&&k(un(D,h-1))||h<D.cells.length-1&&k(un(D,h+1))||m>0&&k(un(l[m-1],h))||m<l.length-1&&k(un(l[m+1],h)))},Tk=(l,m,h,v,w,k)=>{const D=l.row,F=l.column,L=h.length,W=Is(h[0]),Q=D+L,ye=F+W+k.length,Be=$n(k,Se);for(let Te=D;Te<Q;Te++){let me=0;for(let Ne=F;Ne<ye;Ne++){if(Be[Ne]){me++;continue}Yu(m,Te,Ne,w)&&Py(m,un(m[Te],Ne),w,v.cell);const ge=Ne-F-me,He=Jn(h[Te-D],ge),gt=He.element,Et=v.replace(gt);Xd(m[Te],Ne,To(Et,!0,He.isLocked))}}return m},d0=(l,m,h)=>{const v=Is(m[0]),w=Ls(m).cols.length+l.row,k=no(v-l.column,F=>F+l.column),D=R(k,F=>Ks(h,L=>L!==F)).getOr(v-1);return{row:w,column:D}},m0=(l,m,h)=>In(h,v=>v>=l.column&&v<=Is(m[0])+l.column),Ly=(l,m,h,v,w)=>{const k=Nl(m),D=d0(l,m,k),F=Ls(h).rows,L=m0(D,F,k);return Vn(D,m,F).map(Q=>{const ye={...Q,colDelta:Q.colDelta-L.length},Be=or(m,ye,v),Te=Nl(Be),me=m0(D,F,Te);return Tk(D,Be,F,v,w,me)})},dg=(l,m,h,v,w)=>{fm(m,l,w,v.cell);const k=mc(h,m),D=or(h,k,v),F=mc(m,D),L=or(m,F,v);return Ct(L,(W,Q)=>Ac(W,l,D[Q].cells))},Yi=(l,m,h,v,w)=>{Xu(m,l,w,v.cell);const k=Nl(m),D=Ts(m,h),F={...D,colDelta:D.colDelta-k.length},L=or(m,F,v),{cols:W,rows:Q}=Ls(L),ye=Nl(L),Be=Ts(h,m),Te={...Be,colDelta:Be.colDelta+ye.length},me=ug(h,v,ye),Ne=or(me,Te,v);return[...W,...Q.slice(0,l),...Ne,...Q.slice(l,Q.length)]},Hy=(l,m,h,v)=>dy(l,w=>v(w,h),m),zy=(l,m,h,v,w)=>{const{rows:k,cols:D}=Ls(l),F=k.slice(0,m),L=k.slice(m),W=Hy(k[h],(Q,ye)=>m>0&&m<k.length&&v(un(k[m-1],ye),un(k[m],ye))?Jn(k[m],ye):To(w(Q.element,v),!0,Q.isLocked),v,w);return[...D,...F,W,...L]},Vy=(l,m,h,v,w,k,D)=>{if(h==="colgroup"||!v){const F=Jn(l,w);return To(D(F.element,k),!0,!1)}else return Jn(l,m)},Zy=(l,m,h,v,w)=>Ct(l,k=>{const D=m>0&&m<Is(k)&&v(un(k,m-1),un(k,m)),F=Vy(k,m,k.section,D,h,v,w);return zo(k,m,F)}),_k=(l,m)=>Xt(l,h=>{const v=h.cells,w=mr(m,(k,D)=>D>=0&&D<k.length?k.slice(0,D).concat(k.slice(D+1)):k,v);return w.length>0?[ec(h.element,w,h.section,h.isNew)]:[]}),Uy=(l,m,h)=>{const{rows:v,cols:w}=Ls(l);return[...w,...v.slice(0,m),...v.slice(h+1)]},Ok=(l,m,h,v)=>un(l[m],h)!==void 0&&m>0&&v(un(l[m-1],h),un(l[m],h)),Wy=(l,m,h)=>m>0&&h(un(l,m-1),un(l,m)),jy=(l,m,h,v)=>Ok(l,m,h,v)||Wy(l[m],h,v),mg=(l,m)=>Ks(m,hn)&&yn(l.cells)?Se:(v,w,k)=>!(gn(v.element)==="th"&&m[k]),Dk=(l,m)=>Ks(m,hn)&&yn(l)?Se:(v,w,k)=>!(gn(v.element)==="th"&&m[w]),gm=(l,m,h,v)=>{const w=D=>D==="row"?Rf(m):va(m),k=D=>w(D)?`${D}group`:D;return l?kp(m)?k(h):null:v&&kp(m)?k(h==="row"?"col":"row"):null},f0=(l,m)=>(h,v,w)=>q.some(gm(l,h.element,"col",m[w])),Gy=(l,m)=>(h,v)=>q.some(gm(l,h.element,"row",m[v])),vo=(l,m,h)=>To(h(l.element,m),!0,l.isLocked),hm=(l,m,h,v,w,k,D)=>{const F=L=>Oe(m,W=>h(L.element,W.element));return Ct(l,(L,W)=>St(L,(Q,ye)=>{if(F(Q)){const Be=D(Q,W,ye)?w(Q,h,v):Q;return k(Be,W,ye).each(Te=>{Pt(Be.element,{scope:q.from(Te)})}),Be}else return Q}))},Rp=(l,m,h)=>Xt(l,(v,w)=>jy(l,w,m,h)?[]:[Jn(v,m)]),qy=(l,m,h)=>{const v=l[m];return Xt(v.cells,(w,k)=>jy(l,m,k,h)?[]:[w])},pm=(l,m,h,v,w)=>{const k=Ls(l).rows,D=Xt(m,Q=>Rp(k,Q,v)),F=Ct(k,Q=>yn(Q.cells)),L=Dk(D,F),W=Gy(h,F);return hm(l,D,v,w,vo,W,L)},br=(l,m,h,v,w,k,D)=>{const{cols:F,rows:L}=Ls(l),W=L[m[0]],Q=Xt(m,ge=>qy(L,ge,w)),ye=Ct(W.cells,(ge,He)=>yn(Rp(L,He,w))),Be=[...L];Ce(m,ge=>{Be[ge]=D.transformRow(L[ge],h)});const Te=[...F,...Be],me=mg(W,ye),Ne=f0(v,ye);return hm(Te,Q,w,k,D.transformCell,Ne,me)},Bc=(l,m,h,v)=>{const w=Ls(l).rows,k=Ct(m,D=>Jn(w[D.row],D.column));return hm(l,k,h,v,vo,q.none,Se)},Ur={generate:l=>{if(!qc(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],h={};return Ce(l,(v,w)=>{const k=mt(v);if(k.length!==1)throw new Error("one and only one name per case");const D=k[0],F=v[D];if(h[D]!==void 0)throw new Error("duplicate key detected:"+D);if(D==="cata")throw new Error("cannot have a case named cata (sorry)");if(!qc(F))throw new Error("case arguments must be an array");m.push(D),h[D]=(...L)=>{const W=L.length;if(W!==F.length)throw new Error("Wrong number of arguments to case "+D+". Expected "+F.length+" ("+F+"), got "+W);return{fold:(...ye)=>{if(ye.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+ye.length);return ye[w].apply(null,L)},match:ye=>{const Be=mt(ye);if(m.length!==Be.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+Be.join(","));if(!Ks(m,me=>A(Be,me)))throw new Error("Not all branches were specified when using match. Specified: "+Be.join(", ")+`
Required: `+m.join(", "));return ye[D].apply(null,L)},log:ye=>{console.log(ye,{constructors:m,constructor:D,params:L})}}}}),h}},bm={...Ur.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},le=(l,m)=>l.length===0?bm.none():l.length===1?bm.only(0):m===0?bm.left(0,1):m===l.length-1?bm.right(m-1,m):m>0&&m<l.length-1?bm.middle(m-1,m,m+1):bm.none(),fg=(l,m,h,v,w)=>{const k=l.slice(0),D=le(l,m),F=X(Ct(k,X(0))),L=Be=>v.singleColumnWidth(k[Be],h),W=(Be,Te)=>w.calcLeftEdgeDeltas(k,Be,Te,h,v.minCellWidth(),v.isRelative),Q=(Be,Te,me)=>w.calcMiddleDeltas(k,Be,Te,me,h,v.minCellWidth(),v.isRelative),ye=(Be,Te)=>w.calcRightEdgeDeltas(k,Be,Te,h,v.minCellWidth(),v.isRelative);return D.fold(F,L,W,Q,ye)},gg=(l,m,h)=>{let v=0;for(let w=l;w<m;w++)v+=h[w]!==void 0?h[w]:0;return v},Rk=(l,m)=>{const h=Ft.justCells(l);return Ct(h,v=>{const w=gg(v.column,v.column+v.colspan,m);return{element:v.element,width:w,colspan:v.colspan}})},Uo=(l,m)=>{const h=Ft.justColumns(l);return Ct(h,(v,w)=>({element:v.element,width:m[w],colspan:v.colspan}))},ms=(l,m)=>{const h=Ft.justCells(l);return Ct(h,v=>{const w=gg(v.row,v.row+v.rowspan,m);return{element:v.element,height:w,rowspan:v.rowspan}})},vm=(l,m)=>Ct(l.all,(h,v)=>({element:h.element,height:m[v]})),Xy=l=>mr(l,(m,h)=>m+h,0),g0=(l,m)=>Ft.hasColumns(l)?Uo(l,m):Rk(l,m),hg=(l,m,h)=>{const v=g0(l,m);Ce(v,w=>{h.setElementWidth(w.element,w.width)})},Wl=(l,m,h,v,w)=>{const k=Ft.fromTable(l),D=w.getCellDelta(m),F=w.getWidths(k,w),L=h===k.grid.columns-1,W=v.clampTableDelta(F,h,D,w.minCellWidth(),L),Q=fg(F,h,W,w,v),ye=Ct(Q,(Be,Te)=>Be+F[Te]);hg(k,ye,w),v.resizeTable(w.adjustTableWidth,W,L)},h0=(l,m,h,v)=>{const w=Ft.fromTable(l),k=Iu(w,l,v),D=Ct(k,(Q,ye)=>h===ye?Math.max(m+Q,Mf()):Q),F=ms(w,D),L=vm(w,D);Ce(L,Q=>{Zf(Q.element,Q.height)}),Ce(F,Q=>{Zf(Q.element,Q.height)});const W=Xy(D);Zf(l,W)},ym=(l,m,h,v,w)=>{const k=Ft.generate(m),D=v.getWidths(k,v),F=v.pixelWidth(),{newSizes:L,delta:W}=w.calcRedestributedWidths(D,F,h.pixelDelta,v.isRelative);hg(k,L,v),v.adjustTableWidth(W)},Bp=(l,m,h,v)=>{const w=Ft.generate(m),k=v.getWidths(w,v);hg(w,k,v)},Cm=l=>pn(l,(h,v)=>Oe(h,k=>k.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),p0=Yo("col"),Yy=Yo("colgroup"),Jy=l=>gn(l)==="tr"||Yy(l),Qy=l=>{const m=Dr(l,"colspan",1),h=Dr(l,"rowspan",1);return{element:l,colspan:m,rowspan:h}},wm=(l,m=Qy)=>{const h=F=>p0(F.element)?l.col(F):l.cell(F),v=F=>Yy(F.element)?l.colgroup(F):l.row(F),w=F=>{if(Jy(F))return v({element:F});{const L=F,W=h(m(L));return k=q.some({item:L,replacement:W}),W}};let k=q.none();return{getOrInit:(F,L)=>k.fold(()=>w(F),W=>L(F,W.item)?W.replacement:w(F))}},Bk=l=>m=>{const h=[],v=(D,F)=>R(h,L=>F(L.item,D)),w=D=>{const F=l==="td"?{scope:null}:{},L=m.replace(D,l,F);return h.push({item:D,sub:L}),L};return{replaceOrInit:(D,F)=>{if(Jy(D)||p0(D))return D;{const L=D;return v(L,F).fold(()=>w(L),W=>F(D,W.item)?W.sub:w(L))}}}},Mp=l=>Al(l,"scope").map(m=>m.substr(0,3)),vr={modification:wm,transform:Bk,merging:l=>({unmerge:v=>{const w=Mp(v);return w.each(k=>Eo(v,"scope",k)),()=>{const k=l.cell({element:v,colspan:1,rowspan:1});return Bo(k,"width"),Bo(v,"width"),w.each(D=>Eo(k,"scope",D)),k}},merge:v=>{const w=()=>{const k=Ol(Ct(v,Mp));if(k.length===0)return q.none();{const D=k[0],F=["row","col"];return Oe(k,W=>W!==D&&A(F,W))?q.none():q.from(D)}};return Bo(v[0],"width"),w().fold(()=>mo(v[0],"scope"),k=>Eo(v[0],"scope",k+"group")),X(v[0])}})},tC=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],nC=(l,m)=>{const h=l.property().name(m);return A(["ol","ul"],h)},pg=(l,m)=>{const h=l.property().name(m);return A(tC,h)},Qu=(l,m)=>A(["br","img","hr","input"],l.property().name(m)),ed=zi(),Gt=l=>pg(ed,l),Wr=l=>nC(ed,l),jl=l=>Qu(ed,l),$p=l=>{const m=Yo("br"),h=L=>Ks(L,W=>m(W)||vs(W)&&Ll(W).trim().length===0),v=L=>gn(L)==="li"||Wd(L,Wr).isSome(),w=L=>Gh(L).map(W=>Gt(W)?!0:jl(W)?gn(W)!=="img":!1).getOr(!1),k=L=>xy(L).bind(W=>{const Q=w(W);return xu(W).map(ye=>Q===!0||v(ye)||m(W)||Gt(ye)&&!Hn(L,ye)?[]:[Fe.fromTag("br")])}).getOr([]),F=(()=>{const L=Xt(l,W=>{const Q=Qr(W);return h(Q)?[]:Q.concat(k(W))});return L.length===0?[Fe.fromTag("br")]:L})();Di(l[0]),Ao(l[0],F)},Mn=l=>Aa(l,!0),bg=l=>{Tu(l).length===0&&Qs(l)},xm=(l,m)=>({grid:l,cursor:m}),fs=l=>Ys(l,m=>Ys(m.cells,h=>{const v=h.element;return Fs(Mn(v),v)})),td=(l,m,h)=>{var v,w;const k=Ls(l).rows;return q.from((w=(v=k[m])===null||v===void 0?void 0:v.cells[h])===null||w===void 0?void 0:w.element).filter(Mn).orThunk(()=>fs(k))},Zn=(l,m,h)=>{const v=td(l,m,h);return xm(l,v)},b0=l=>pn(l,(h,v)=>Oe(h,k=>k.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),ci=(l,m,h,v)=>{const w=m[0].row,k=b0(m),D=mr(k,(F,L)=>({grid:zy(F.grid,w,L.row+F.delta,h,v.getOrInit),delta:F.delta+1}),{grid:l,delta:0}).grid;return Zn(D,w,m[0].column)},Np=(l,m,h,v)=>{const w=b0(m),k=w[w.length-1],D=k.row+k.rowspan,F=mr(w,(L,W)=>zy(L,D,W.row,h,v.getOrInit),l);return Zn(F,D,m[0].column)},v0=(l,m,h,v)=>{const w=m.details,k=Cm(w),D=k[0].column,F=mr(k,(L,W)=>({grid:Zy(L.grid,D,W.column+L.delta,h,v.getOrInit),delta:L.delta+1}),{grid:l,delta:0}).grid;return Zn(F,w[0].row,D)},y0=(l,m,h,v)=>{const w=m.details,k=w[w.length-1],D=k.column+k.colspan,F=Cm(w),L=mr(F,(W,Q)=>Zy(W,D,Q.column,h,v.getOrInit),l);return Zn(L,w[0].row,D)},C0=(l,m,h,v)=>{const w=Cm(m),k=Ct(w,F=>F.column),D=pm(l,k,!0,h,v.replaceOrInit);return Zn(D,m[0].row,m[0].column)},w0=(l,m,h,v)=>{const w=Bc(l,m,h,v.replaceOrInit);return Zn(w,m[0].row,m[0].column)},x0=(l,m,h,v)=>{const w=Cm(m),k=Ct(w,F=>F.column),D=pm(l,k,!1,h,v.replaceOrInit);return Zn(D,m[0].row,m[0].column)},oC=(l,m,h,v)=>{const w=Bc(l,m,h,v.replaceOrInit);return Zn(w,m[0].row,m[0].column)},vg=(l,m)=>(h,v,w,k,D)=>{const F=b0(v),L=Ct(F,Q=>Q.row),W=br(h,L,l,m,w,k.replaceOrInit,D);return Zn(W,v[0].row,v[0].column)},Sm=vg("thead",!0),jr=vg("tbody",!1),Mk=vg("tfoot",!1),_s=(l,m,h,v)=>{const w=Cm(m.details),k=_k(l,Ct(w,F=>F.column)),D=k.length>0?k[0].cells.length-1:0;return Zn(k,w[0].row,Math.min(w[0].column,D))},$k=(l,m,h,v)=>{const w=b0(m),k=Uy(l,w[0].row,w[w.length-1].row),D=k.length>0?k.length-1:0;return Zn(k,Math.min(m[0].row,D),m[0].column)},Ji=(l,m,h,v)=>{const w=m.cells;$p(w);const k=Dp(l,m.bounds,h,v.merge(w));return xm(k,q.from(w[0]))},We=(l,m,h,v)=>{const k=mr(m,(D,F)=>Py(D,F,h,v.unmerge(F)),l);return xm(k,q.from(m[0]))},Pp=(l,m,h,v)=>{const k=((L,W)=>{const Q=Ft.fromTable(L);return qi(Q,W,!0)})(m.clipboard,m.generators),D=Xh(m.row,m.column);return Ly(D,l,k,m.generators,h).fold(()=>xm(l,q.some(m.element)),L=>Zn(L,m.row,m.column))},km=(l,m,h)=>{const v=Qh(l,h.section),w=Ft.generate(v);return qi(w,m,!0)},S0=(l,m,h,v)=>{const w=Ls(l).rows,k=m.cells[0].column,D=w[m.cells[0].row],F=km(m.clipboard,m.generators,D),L=dg(k,l,F,m.generators,h);return Zn(L,m.cells[0].row,m.cells[0].column)},k0=(l,m,h,v)=>{const w=Ls(l).rows,k=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,D=w[m.cells[0].row],F=km(m.clipboard,m.generators,D),L=dg(k,l,F,m.generators,h);return Zn(L,m.cells[0].row,m.cells[0].column)},sC=(l,m,h,v)=>{const w=Ls(l).rows,k=m.cells[0].row,D=w[k],F=km(m.clipboard,m.generators,D),L=Yi(k,l,F,m.generators,h);return Zn(L,m.cells[0].row,m.cells[0].column)},rC=(l,m,h,v)=>{const w=Ls(l).rows,k=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,D=w[m.cells[0].row],F=km(m.clipboard,m.generators,D),L=Yi(k,l,F,m.generators,h);return Zn(L,m.cells[0].row,m.cells[0].column)},Nk=(l,m)=>{const h=Ft.fromTable(l);return Mr(h,m).bind(w=>{const k=w[w.length-1],D=w[0].column,F=k.column+k.colspan,L=gb(Ct(h.all,W=>In(W.cells,Q=>Q.column>=D&&Q.column<F)));return a0(L)}).getOr("")},zs=(l,m)=>{const h=Ft.fromTable(l);return Mr(h,m).bind(a0).getOr("")},Os=(l,m)=>{const h=Ft.fromTable(l);return Mr(h,m).bind(w=>{const k=w[w.length-1],D=w[0].row,F=k.row+k.rowspan,L=h.all.slice(D,F);return Gu(L)}).getOr("")},sr=(l,m,h,v)=>Bp(l,m,h,v.sizing),Un=(l,m,h,v)=>ym(l,m,h,v.sizing,v.resize),Vs=(l,m)=>Oe(m,h=>h.column===0&&h.isLocked),gs=(l,m)=>Oe(m,h=>h.column+h.colspan>=l.grid.columns&&h.isLocked),Fp=(l,m)=>{const h=zr(l),v=Cm(m);return pn(v,(w,k)=>{const F=h[k.column].map(xs).getOr(0);return w+F},0)},Ip=l=>(m,h)=>Mr(m,h).filter(v=>!(l?Vs:gs)(m,v)).map(v=>({details:v,pixelDelta:Fp(m,v)})),cC=(l,m)=>ri(l,m).map(h=>({details:h,pixelDelta:-Fp(l,h)})),E0=l=>(m,h)=>Op(m,h).filter(v=>!(l?Vs:gs)(m,v.cells)),yg=vr.transform("th"),Em=vr.transform("td"),A0=No(ci,Mr,nt,nt,vr.modification),Lp=No(Np,Mr,nt,nt,vr.modification),Pk=No(v0,Ip(!0),Un,nt,vr.modification),g_=No(y0,Ip(!1),Un,nt,vr.modification),Fk=No(_s,cC,Un,bg,vr.modification),Ik=No($k,Mr,nt,bg,vr.modification),Lk=No(C0,ri,nt,nt,yg),T0=No(x0,ri,nt,nt,Em),_0=No(Sm,ri,nt,nt,yg),aC=No(jr,ri,nt,nt,Em),Hk=No(Mk,ri,nt,nt,Em),iC=No(w0,ri,nt,nt,yg),lC=No(oC,ri,nt,nt,Em),Me=No(Ji,kk,sr,nt,vr.merging),zk=No(We,Ny,sr,nt,vr.merging),ts=No(Pp,By,sr,nt,vr.modification),Vk=No(S0,E0(!0),nt,nt,vr.modification),uC=No(k0,E0(!1),nt,nt,vr.modification),dC=No(sC,Op,nt,nt,vr.modification),na=No(rC,Op,nt,nt,vr.modification),h_=Nk,mC=zs,Qi=Os,nd=(l,m)=>l.dispatch("NewRow",{node:m}),O0=(l,m)=>l.dispatch("NewCell",{node:m}),yr=(l,m,h)=>{l.dispatch("TableModified",{...h,table:m})},Ta=(l,m,h,v,w)=>{l.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:w})},od=l=>{l.dispatch("TableSelectionClear")},_a=(l,m,h,v,w)=>{l.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:w})},Zk=(l,m,h,v,w)=>{l.dispatch("ObjectResized",{target:m,width:h,height:v,origin:w})},Cg={structure:!1,style:!0},Wo={structure:!0,style:!1},fC={structure:!0,style:!0},el=l=>m=>m.options.get(l),Hp="100%",gC=l=>{var m;const h=l.dom,v=(m=h.getParent(l.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:l.getBody();return qn(Fe.fromDom(v))+"px"},hC=(l,m)=>wg(l)||!CC(l)?m:rd(l)?{...m,width:gC(l)}:{...m,width:Hp},Uk=(l,m)=>wg(l)||CC(l)?m:rd(l)?{...m,width:gC(l)}:{...m,width:Hp},Wk=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=A(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=A(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0})},pC=l=>q.from(l.options.get("table_clone_elements")),bC=l=>{const m=l.options.get("object_resizing");return A(m.split(","),"table")},vC=el("table_header_type"),Gl=el("table_column_resizing"),yC=l=>Gl(l)==="preservetable",D0=l=>Gl(l)==="resizetable",R0=el("table_sizing_mode"),sd=l=>R0(l)==="relative",rd=l=>R0(l)==="fixed",wg=l=>R0(l)==="responsive",jk=el("table_resize_bars"),CC=el("table_style_by_css"),Gk=l=>{const m=l.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:Uk(l,h)},B0=l=>{const m=l.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:hC(l,h)},qk=el("table_use_colgroups"),cd=(l,m)=>sd(l)?ac.percentageSize(m):rd(l)?ac.pixelSize(m):ac.getTableSize(m),Kn=(l,m,h)=>{const v=ir=>gn(Kf(ir))==="table",w=ir=>!v(l)||cg(ir).rows>1,k=ir=>!v(l)||cg(ir).columns>1,D=pC(l),F=D0(l)?nt:bk,L=ir=>{switch(vC(l)){case"section":return ig.section();case"sectionCells":return ig.sectionCells();case"cells":return ig.cells();default:return ig.getTableSectionType(ir,"section")}},W=(ir,eh)=>eh.cursor.fold(()=>{const au=Tu(ir);return ve(au).filter(Lr).map(Ma=>{h.clearSelectedCells(ir.dom);const Bs=l.dom.createRng();return Bs.selectNode(Ma.dom),l.selection.setRng(Bs),Eo(Ma,"data-mce-selected","1"),Bs})},au=>{const Ma=si(au),Bs=l.dom.createRng();return Bs.setStart(Ma.element.dom,Ma.offset),Bs.setEnd(Ma.element.dom,Ma.offset),l.selection.setRng(Bs),h.clearSelectedCells(ir.dom),q.some(Bs)}),Q=(ir,eh,au,Ma)=>(Bs,q3,K3=!1)=>{ei(Bs);const Ad=Fe.fromDom(l.getDoc()),X3=Zo(au,Ad,D),Y3={sizing:cd(l,Bs),resize:D0(l)?r0():c0(),section:L(Bs)};return eh(Bs)?ir(Bs,q3,X3,Y3).bind(th=>{m.refresh(Bs.dom),Ce(th.newRows,jm=>{nd(l,jm.dom)}),Ce(th.newCells,jm=>{O0(l,jm.dom)});const J3=W(Bs,th);return Lr(Bs)&&(ei(Bs),K3||yr(l,Bs.dom,Ma)),J3.map(jm=>({rng:jm,effect:Ma}))}):q.none()},ye=Q(Ik,w,nt,Wo),Be=Q(Fk,k,nt,Wo),Te=Q(A0,Se,nt,Wo),me=Q(Lp,Se,nt,Wo),Ne=Q(Pk,Se,F,Wo),ge=Q(g_,Se,F,Wo),He=Q(Me,Se,nt,Wo),gt=Q(zk,Se,nt,Wo),Et=Q(Vk,Se,nt,Wo),Ln=Q(uC,Se,nt,Wo),Ds=Q(dC,Se,nt,Wo),Co=Q(na,Se,nt,Wo),ps=Q(ts,Se,nt,fC),di=Q(iC,Se,nt,Wo),Qg=Q(lC,Se,nt,Wo),A1=Q(Lk,Se,nt,Wo),Ed=Q(T0,Se,nt,Wo),Cn=Q(_0,Se,nt,Wo),ar=Q(aC,Se,nt,Wo),Rs=Q(Hk,Se,nt,Wo);return{deleteRow:ye,deleteColumn:Be,insertRowsBefore:Te,insertRowsAfter:me,insertColumnsBefore:Ne,insertColumnsAfter:ge,mergeCells:He,unmergeCells:gt,pasteColsBefore:Et,pasteColsAfter:Ln,pasteRowsBefore:Ds,pasteRowsAfter:Co,pasteCells:ps,makeCellsHeader:di,unmakeCellsHeader:Qg,makeColumnsHeader:A1,unmakeColumnsHeader:Ed,makeRowsHeader:Cn,makeRowsBody:ar,makeRowsFooter:Rs,getTableRowType:Qi,getTableCellType:mC,getTableColType:h_}},Am=(l,m,h)=>{const v=Dr(l,m,1);h===1||v<=1?mo(l,m):Eo(l,m,Math.min(h,v))},rr=(l,m)=>h=>{const v=h.column+h.colspan-1,w=h.column;return v>=l&&w<m},wC=(l,m,h)=>{if(Ft.hasColumns(l)){const v=In(Ft.justColumns(l),rr(m,h)),w=Ct(v,D=>{const F=Su(D.element);return Am(F,"span",h-m),F}),k=Fe.fromTag("colgroup");return Ao(k,w),[k]}else return[]},xC=(l,m,h)=>Ct(l.all,v=>{const w=In(v.cells,rr(m,h)),k=Ct(w,F=>{const L=Su(F.element);return Am(L,"colspan",h-m),L}),D=Fe.fromTag("tr");return Ao(D,k),D}),SC=(l,m)=>{const h=Ft.fromTable(l);return ri(h,m).map(w=>{const k=w[w.length-1],D=w[0].column,F=k.column+k.colspan,L=wC(h,D,F),W=xC(h,D,F);return[...L,...W]})},zp=(l,m,h)=>{const v=Ft.fromTable(l);return Mr(v,m).bind(k=>{const D=qi(v,h,!1),L=Ls(D).rows.slice(k[0].row,k[k.length-1].row+k[k.length-1].rowspan),W=Xt(L,ye=>{const Be=In(ye.cells,Te=>!Te.isLocked);return Be.length>0?[{...ye,cells:Be}]:[]}),Q=Xi(W);return Fs(Q.length>0,Q)}).map(k=>eo(k))},xg=Ur.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),kC=(l,m,h)=>{const v=h.substring(0,h.length-l.length),w=parseFloat(v);return v===w.toString()?m(w):xg.invalid(h)},ad={...xg,from:l=>jd(l,"%")?kC("%",xg.percent,l):jd(l,"px")?kC("px",xg.pixels,l):xg.invalid(l)},Kk=(l,m)=>Ct(l,h=>ad.from(h).fold(()=>h,w=>w/m*100+"%",w=>w+"%")),Xk=(l,m,h)=>{const v=h/m;return Ct(l,w=>ad.from(w).fold(()=>w,D=>D*v+"px",D=>D/100*h+"px"))},EC=(l,m)=>{const h=l.fold(()=>X(""),v=>{const w=v/m;return X(w+"px")},()=>{const v=100/m;return X(v+"%")});return no(m,h)},Yk=(l,m,h)=>l.fold(()=>m,v=>Xk(m,h,v),v=>Kk(m,h)),AC=(l,m,h)=>{const v=ad.from(h),w=Ks(l,k=>k==="0px")?EC(v,l.length):Yk(v,l,m);return e3(w)},M0=(l,m)=>l.length===0?m:mr(l,(h,v)=>ad.from(v).fold(X(0),hn,hn)+h,0),Jk=(l,m)=>{const h=Math.floor(l);return{value:h+m,remainder:l-h}},Qk=(l,m)=>ad.from(l).fold(X(l),h=>h+m+"px",h=>h+m+"%"),e3=l=>{if(l.length===0)return l;const m=mr(l,(v,w)=>{const k=ad.from(w).fold(()=>({value:w,remainder:0}),D=>Jk(D,"px"),D=>({value:D+"%",remainder:0}));return{output:[k.value].concat(v.output),remainder:v.remainder+k.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([Qk(h[h.length-1],Math.round(m.remainder))])},t3=ad.from,$0=(l,m,h)=>{Ce(m,v=>{const w=l.slice(v.column,v.colspan+v.column),k=M0(w,Bf());Nn(v.element,"width",k+h)})},n3=(l,m,h)=>{Ce(m,(v,w)=>{const k=M0([l[w]],Bf());Nn(v.element,"width",k+h)})},Sg=(l,m,h,v)=>{Ce(h,w=>{const k=l.slice(w.row,w.rowspan+w.row),D=M0(k,Mf());Nn(w.element,"height",D+v)}),Ce(m,(w,k)=>{Nn(w.element,"height",l[k])})},Vp=l=>t3(l).fold(X("px"),X("px"),X("%")),N0=(l,m,h)=>{const v=Ft.fromTable(l),w=v.all,k=Ft.justCells(v),D=Ft.justColumns(v);m.each(F=>{const L=Vp(F),W=Xa(l),Q=nn(v,l),ye=AC(Q,W,F);Ft.hasColumns(v)?n3(ye,D,L):$0(ye,k,L),Nn(l,"width",F)}),h.each(F=>{const L=Vp(F),W=Bu(l),Q=Vo(v,l,_c),ye=AC(Q,W,F);Sg(ye,w,k,L),Nn(l,"height",F)})},P0=Ub,F0=pe,ql=us,id=l=>{mo(l,"width")},Kl=l=>{const m=nr(l);N0(l,q.some(m),q.none()),id(l)},kg=l=>{const m=ks(l);N0(l,q.some(m),q.none()),id(l)},TC=l=>{Bo(l,"width");const m=Jh(l),h=m.length>0?m:Tu(l);Ce(h,v=>{Bo(v,"width"),id(v)}),id(l)},tl={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},nl=()=>Fe.fromTag("th"),o3=()=>Fe.fromTag("td"),Xl=()=>Fe.fromTag("col"),Zp=(l,m,h,v)=>{const w=Fe.fromTag("tr");for(let k=0;k<l;k++){const D=v<m||k<h?nl():o3();k<h&&Eo(D,"scope","row"),v<m&&Eo(D,"scope","col"),bn(D,Fe.fromTag("br")),bn(w,D)}return w},s3=l=>{const m=Fe.fromTag("colgroup");return no(l,()=>bn(m,Xl())),m},I0=(l,m,h,v)=>no(l,w=>Zp(m,h,v,w)),r3=(l,m,h,v,w,k=tl)=>{const D=Fe.fromTag("table"),F=w!=="cells";Ro(D,k.styles),Bn(D,k.attributes),k.colGroups&&bn(D,s3(m));const L=Math.min(l,h);if(F&&h>0){const Te=Fe.fromTag("thead");bn(D,Te);const Ne=I0(h,m,w==="sectionCells"?L:0,v);Ao(Te,Ne)}const W=Fe.fromTag("tbody");bn(D,W);const Q=F?l-L:l,Be=I0(Q,m,F?0:h,v);return Ao(W,Be),D},c3=l=>l.dom.innerHTML,L0=l=>{const m=Fe.fromTag("div"),h=Fe.fromDom(l.dom.cloneNode(!0));return bn(m,h),c3(m)},Eg=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},Ag=(l,m)=>{Mi(m,"td,th").each(xn(Eg,l))},_C=(l,m)=>{Ce(Yn(m,"tr"),h=>{nd(l,h.dom),Ce(Yn(h,"th,td"),v=>{O0(l,v.dom)})})},H0=l=>bf(l)&&l.indexOf("%")!==-1,OC=(l,m,h,v,w)=>{const k=B0(l),D={styles:k,attributes:Gk(l),colGroups:qk(l)};return l.undoManager.ignore(()=>{const F=r3(h,m,w,v,vC(l),D);Eo(F,"data-mce-id","__mce");const L=L0(F);l.insertContent(L),l.addVisual()}),Mi(Kf(l),'table[data-mce-id="__mce"]').map(F=>(rd(l)?kg(F):wg(l)?TC(F):(sd(l)||H0(k.width))&&Kl(F),ei(F),mo(F,"data-mce-id"),_C(l,F),Ag(l,F),F.dom)).getOrNull()},DC=(l,m,h,v={})=>{const w=k=>Ar(k)&&k>0;if(w(m)&&w(h)){const k=v.headerRows||0,D=v.headerColumns||0;return OC(l,h,m,D,k)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Tg=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const z0="x-tinymce/dom-table-",Up=z0+"rows",Wp=z0+"columns",V0=l=>{const m=Tg.FakeClipboardItem(l);Tg.write([m])},Yl=l=>{var m;const h=(m=Tg.read())!==null&&m!==void 0?m:[];return Ys(h,v=>q.from(v.getType(l)))},Jl=l=>{Yl(l).isSome()&&Tg.clear()},_g=l=>{l.fold(b_,m=>V0({[Up]:m}))},Tm=()=>Yl(Up),b_=()=>Jl(Up),Oa=l=>{l.fold(Z0,m=>V0({[Wp]:m}))},Mc=()=>Yl(Wp),Z0=()=>Jl(Wp),jp=l=>Zu(rm(l),Hs(l)),a3=l=>o0(rm(l),Hs(l)),RC=(l,m)=>{const h=Hs(l),v=()=>jp(l).each(ge=>{fr(ge,h).filter(te(h)).each(He=>{const gt=Fe.fromText("");if(_l(He,gt),Qs(He),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Et=l.dom.createRng();Et.setStart(gt.dom,0),Et.setEnd(gt.dom,0),l.selection.setRng(Et),l.nodeChanged()}})}),w=ge=>jp(l).each(He=>{wg(l)||rd(l)||sd(l)||fr(He,h).each(Et=>{ge==="relative"&&!P0(Et)?Kl(Et):ge==="fixed"&&!F0(Et)?kg(Et):ge==="responsive"&&!ql(Et)&&TC(Et),ei(Et),yr(l,Et.dom,Wo)})}),k=ge=>fr(ge,h),D=ge=>a3(l).bind(He=>k(He).map(gt=>ge(gt,He))),F=(ge,He)=>{D(gt=>{l.formatter.toggle("tableclass",{value:He},gt.dom),yr(l,gt.dom,Cg)})},L=(ge,He)=>{D(gt=>{const Et=Zr(l),Ds=Ks(Et,Co=>l.formatter.match("tablecellclass",{value:He},Co.dom))?l.formatter.remove:l.formatter.apply;Ce(Et,Co=>Ds("tablecellclass",{value:He},Co.dom)),yr(l,gt.dom,Cg)})},W=()=>{jp(l).each(ge=>{fr(ge,h).each(He=>{Tt(He,"caption").fold(()=>{const gt=Fe.fromTag("caption");bn(gt,Fe.fromText("Caption")),XS(He,gt,0),l.selection.setCursorLocation(gt.dom,0)},gt=>{Yo("caption")(ge)&&Xc("td",He).each(Et=>l.selection.setCursorLocation(Et.dom,0)),Qs(gt)}),yr(l,He.dom,Wo)})})},Q=ge=>{l.focus()},ye=(ge,He=!1)=>D((gt,Et)=>{const Ln=rg(Zr(l),gt,Et);ge(gt,Ln,He).each(Q)}),Be=()=>D((ge,He)=>{const gt=rg(Zr(l),ge,He),Et=Zo(nt,Fe.fromDom(l.getDoc()),q.none());return zp(ge,gt,Et)}),Te=()=>D((ge,He)=>{const gt=rg(Zr(l),ge,He);return SC(ge,gt)}),me=(ge,He)=>He().each(gt=>{const Et=Ct(gt,Ln=>Su(Ln));D((Ln,Ds)=>{const Co=Qa(Fe.fromDom(l.getDoc())),ps=n0(Zr(l),Ds,Et,Co);ge(Ln,ps).each(Q)})}),Ne=ge=>(He,gt)=>ko(gt,"type").each(Et=>{ye(ge(Et),gt.no_events)});oo({mceTableSplitCells:()=>ye(m.unmergeCells),mceTableMergeCells:()=>ye(m.mergeCells),mceTableInsertRowBefore:()=>ye(m.insertRowsBefore),mceTableInsertRowAfter:()=>ye(m.insertRowsAfter),mceTableInsertColBefore:()=>ye(m.insertColumnsBefore),mceTableInsertColAfter:()=>ye(m.insertColumnsAfter),mceTableDeleteCol:()=>ye(m.deleteColumn),mceTableDeleteRow:()=>ye(m.deleteRow),mceTableCutCol:()=>Te().each(ge=>{Oa(ge),ye(m.deleteColumn)}),mceTableCutRow:()=>Be().each(ge=>{_g(ge),ye(m.deleteRow)}),mceTableCopyCol:()=>Te().each(ge=>Oa(ge)),mceTableCopyRow:()=>Be().each(ge=>_g(ge)),mceTablePasteColBefore:()=>me(m.pasteColsBefore,Mc),mceTablePasteColAfter:()=>me(m.pasteColsAfter,Mc),mceTablePasteRowBefore:()=>me(m.pasteRowsBefore,Tm),mceTablePasteRowAfter:()=>me(m.pasteRowsAfter,Tm),mceTableDelete:v,mceTableCellToggleClass:L,mceTableToggleClass:F,mceTableToggleCaption:W,mceTableSizingMode:(ge,He)=>w(He),mceTableCellType:Ne(ge=>ge==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Ne(ge=>ge==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Ne(ge=>{switch(ge){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(ge,He)=>l.addCommand(He,ge)),l.addCommand("mceInsertTable",(ge,He)=>{DC(l,He.rows,He.columns,He.options)}),l.addCommand("mceTableApplyCellStyle",(ge,He)=>{const gt=Ds=>"tablecell"+Ds.toLowerCase().replace("-","");if(!wn(He))return;const Et=Zr(l);if(Et.length===0)return;const Ln=ga(He,(Ds,Co)=>l.formatter.has(gt(Co))&&bf(Ds));Lo(Ln)||(oo(Ln,(Ds,Co)=>{const ps=gt(Co);Ce(Et,di=>{Ds===""?l.formatter.remove(ps,{value:null},di.dom,!0):l.formatter.apply(ps,{value:Ds},di.dom)})}),k(Et[0]).each(Ds=>yr(l,Ds.dom,Cg)))})},Og=(l,m)=>{const h=Hs(l),v=w=>o0(rm(l)).bind(k=>fr(k,h).map(D=>{const F=rg(Zr(l),D,k);return w(D,F)})).getOr("");oo({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(w,k)=>l.addQueryValueHandler(k,w))},ld=Ur.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),_m=(l,m,h,v)=>l.fold(m,h,v),BC=l=>l.fold(hn,hn,hn),Dg=ld.before,Gp=ld.on,i3=ld.after,Zs={before:Dg,on:Gp,after:i3,cata:_m,getStart:BC},yo={create:(l,m)=>({selection:l,kill:m})},Rg=(l,m)=>{const h=l.document.createRange();return h.selectNode(m.dom),h},ai=(l,m)=>{const h=l.document.createRange();return MC(h,m),h},MC=(l,m)=>l.selectNodeContents(m.dom),qp=(l,m)=>{m.fold(h=>{l.setStartBefore(h.dom)},(h,v)=>{l.setStart(h.dom,v)},h=>{l.setStartAfter(h.dom)})},ud=(l,m)=>{m.fold(h=>{l.setEndBefore(h.dom)},(h,v)=>{l.setEnd(h.dom,v)},h=>{l.setEndAfter(h.dom)})},Kp=(l,m,h)=>{const v=l.document.createRange();return qp(v,m),ud(v,h),v},Om=(l,m,h,v,w)=>{const k=l.document.createRange();return k.setStart(m.dom,h),k.setEnd(v.dom,w),k},l3=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),Dm=l=>{const m=l.getClientRects(),h=m.length>0?m[0]:l.getBoundingClientRect();return h.width>0||h.height>0?q.some(h).map(l3):q.none()},dd=Ur.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),$C=(l,m,h)=>m(Fe.fromDom(h.startContainer),h.startOffset,Fe.fromDom(h.endContainer),h.endOffset),W0=(l,m)=>m.match({domRange:h=>({ltr:X(h),rtl:q.none}),relative:(h,v)=>({ltr:Ga(()=>Kp(l,h,v)),rtl:Ga(()=>q.some(Kp(l,v,h)))}),exact:(h,v,w,k)=>({ltr:Ga(()=>Om(l,h,v,w,k)),rtl:Ga(()=>q.some(Om(l,w,k,h,v)))})}),ii=(l,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(w=>w.collapsed===!1).map(w=>dd.rtl(Fe.fromDom(w.endContainer),w.endOffset,Fe.fromDom(w.startContainer),w.startOffset)).getOrThunk(()=>$C(l,dd.ltr,h)):$C(l,dd.ltr,h)},j0=(l,m)=>{const h=W0(l,m);return ii(l,h)},Us=(l,m)=>j0(l,m).match({ltr:(v,w,k,D)=>{const F=l.document.createRange();return F.setStart(v.dom,w),F.setEnd(k.dom,D),F},rtl:(v,w,k,D)=>{const F=l.document.createRange();return F.setStart(k.dom,D),F.setEnd(v.dom,w),F}});dd.ltr,dd.rtl;const Rm={create:(l,m,h,v)=>({start:l,soffset:m,finish:h,foffset:v})},G0={create:(l,m,h,v)=>({start:Zs.on(l,m),finish:Zs.on(h,v)})},NC=(l,m)=>{const h=Us(l,m);return Rm.create(Fe.fromDom(h.startContainer),h.startOffset,Fe.fromDom(h.endContainer),h.endOffset)},$r=G0.create,Bg=(l,m,h,v,w,k,D)=>Hn(h,w)&&v===k?q.none():as(h,"td,th",m).bind(F=>as(w,"td,th",m).bind(L=>q0(l,m,F,L,D))),q0=(l,m,h,v,w)=>Hn(h,v)?q.none():ng(h,v,m).bind(k=>{const D=k.boxes.getOr([]);return D.length>1?(w(l,D,k.start,k.finish),q.some(yo.create(q.some($r(h,0,h,As(h))),!0))):q.none()}),Mg=(l,m,h,v,w)=>{const k=D=>(w.clearBeforeUpdate(h),w.selectRange(h,D.boxes,D.start,D.finish),D.boxes);return t0(v,l,m,w.firstSelectedSelector,w.lastSelectedSelector).map(k)},Cr=(l,m)=>({item:l,mode:m}),gc=(l,m,h,v=Po)=>l.property().parent(m).map(w=>Cr(w,v)),Po=(l,m,h,v=hc)=>h.sibling(l,m).map(w=>Cr(w,v)),hc=(l,m,h,v=hc)=>{const w=l.property().children(m);return h.first(w).map(D=>Cr(D,v))},Xp=[{current:gc,next:Po,fallback:q.none()},{current:Po,next:hc,fallback:q.some(gc)},{current:hc,next:hc,fallback:q.some(Po)}],$c=(l,m,h,v,w=Xp)=>R(w,D=>D.current===h).bind(D=>D.current(l,m,v,D.next).orThunk(()=>D.fallback.bind(F=>$c(l,m,F,v)))),$g={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?q.some(h[h.length-1]):q.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?q.some(h[0]):q.none()})},Yp=(l,m,h,v,w,k)=>$c(l,m,v,w).bind(F=>k(F.item)?q.none():h(F.item)?q.some(F.item):Yp(l,F.item,h,F.mode,w,k)),K0=(l,m,h,v)=>Yp(l,m,h,Po,$g.left(),v),X0=(l,m,h,v)=>Yp(l,m,h,Po,$g.right(),v),Mm=l=>m=>l.property().children(m).length===0,Y0=(l,m,h)=>J0(l,m,Mm(l),h),PC=(l,m,h)=>Q0(l,m,Mm(l),h),J0=K0,Q0=X0,Ng=zi(),Jp=(l,m)=>Y0(Ng,l,m),ev=(l,m)=>PC(Ng,l,m),tv=(l,m,h)=>J0(Ng,l,m,h),FC=(l,m,h)=>Q0(Ng,l,m,h),m3=(l,m,h)=>Wd(l,m,h).isSome(),Qp=Ur.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),f3=(l,m,h)=>{const v=l.getRect(m),w=l.getRect(h);return w.right>v.left&&w.left<v.right},g3=l=>as(l,"tr"),cr={...Qp,verify:(l,m,h,v,w,k,D)=>as(v,"td,th",D).bind(F=>as(m,"td,th",D).map(L=>Hn(F,L)?Hn(v,F)&&As(F)===w?k(L):Qp.none("in same cell"):Vi(g3,[F,L]).fold(()=>f3(l,L,F)?Qp.success():k(L),W=>k(L)))).getOr(Qp.none("default")),cata:(l,m,h,v,w)=>l.fold(m,h,v,w)},h3=(l,m,h,v)=>({parent:l,children:m,element:h,index:v}),Pg=l=>xu(l).bind(m=>{const h=Qr(m);return Fg(h,l).map(v=>h3(m,h,l,v))}),Fg=(l,m)=>yf(l,xn(Hn,m)),e1=Yo("br"),nv=(l,m,h)=>m(l,h).bind(v=>vs(v)&&Ll(v).trim().length===0?nv(v,m,h):q.some(v)),IC=(l,m,h)=>h.traverse(m).orThunk(()=>nv(m,h.gather,l)).map(h.relative),p3=(l,m)=>qh(l,m).filter(e1).orThunk(()=>qh(l,m-1).filter(e1)),wr=(l,m,h,v)=>p3(m,h).bind(w=>v.traverse(w).fold(()=>nv(w,v.gather,l).map(v.relative),k=>Pg(k).map(D=>Zs.on(D.parent,D.index)))),ov=(l,m,h,v)=>(e1(m)?IC(l,m,v):wr(l,m,h,v)).map(k=>({start:k,finish:k})),$m=l=>cr.cata(l,m=>q.none(),()=>q.none(),m=>q.some(Wi(m,0)),m=>q.some(Wi(m,As(m)))),ol=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),Ig=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),md=(l,m,h)=>({left:l.left+m,top:l.top+h,right:l.right+m,bottom:l.bottom+h}),t1=l=>l.top,b3=l=>l.bottom,v3=(l,m,h)=>h>=0&&h<As(m)?l.getRangedRect(m,h,m,h+1):h>0?l.getRangedRect(m,h-1,m,h):q.none(),n1=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Ql=(l,m)=>q.some(l.getRect(m)),o1=(l,m,h)=>tn(m)?Ql(l,m).map(n1):vs(m)?v3(l,m,h).map(n1):q.none(),eu=(l,m)=>tn(m)?Ql(l,m).map(n1):vs(m)?l.getRangedRect(m,0,m,As(m)).map(n1):q.none(),Ws=5,LC=100,oa=Ur.generate([{none:[]},{retry:["caret"]}]),HC=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,Lg=(l,m,h)=>Cs(m,Gt).fold(en,v=>eu(l,v).exists(w=>HC(h,w))),s1=(l,m,h,v,w)=>{const k=ol(w,Ws);return Math.abs(h.bottom-v.bottom)<1||h.top>w.bottom?oa.retry(k):h.top===w.bottom?oa.retry(ol(w,1)):Lg(l,m,w)?oa.retry(md(k,Ws,0)):oa.none()},Hg={point:t1,adjuster:(l,m,h,v,w)=>{const k=Ig(w,Ws);return Math.abs(h.top-v.top)<1||h.bottom<w.top?oa.retry(k):h.bottom===w.top?oa.retry(Ig(w,1)):Lg(l,m,w)?oa.retry(md(k,Ws,0)):oa.none()},move:Ig,gather:Jp},rv={point:b3,adjuster:s1,move:ol,gather:ev},zC=(l,m,h)=>l.elementFromPoint(m,h).filter(v=>gn(v)==="table").isSome(),Nm=(l,m,h,v,w)=>Pm(l,m,h,m.move(v,Ws),w),Pm=(l,m,h,v,w)=>w===0?q.some(v):zC(l,v.left,m.point(v))?Nm(l,m,h,v,w-1):l.situsFromPoint(v.left,m.point(v)).bind(k=>k.start.fold(q.none,D=>eu(l,D).bind(F=>m.adjuster(l,D,F,h,v).fold(q.none,L=>Pm(l,m,h,L,w-1))).orThunk(()=>q.some(v)),q.none)),y3=(l,m,h)=>l.point(m)>h.getInnerHeight()?q.some(l.point(m)-h.getInnerHeight()):l.point(m)<0?q.some(-l.point(m)):q.none(),tu=(l,m,h)=>{const v=l.move(h,Ws),w=Pm(m,l,h,v,LC).getOr(v);return y3(l,w,m).fold(()=>m.situsFromPoint(w.left,l.point(w)),k=>(m.scrollBy(0,k),m.situsFromPoint(w.left,l.point(w)-k)))},r1={tryUp:xn(tu,Hg),tryDown:xn(tu,rv),getJumpSize:X(Ws)},C3=20,cv=(l,m,h)=>l.getSelection().bind(v=>ov(m,v.finish,v.foffset,h).fold(()=>q.some(Wi(v.finish,v.foffset)),w=>{const k=l.fromSitus(w),D=cr.verify(l,v.finish,v.foffset,k.finish,k.foffset,h.failure,m);return $m(D)})),zg=(l,m,h,v,w,k)=>k===0?q.none():w_(l,m,h,v,w).bind(D=>{const F=l.fromSitus(D),L=cr.verify(l,h,v,F.finish,F.foffset,w.failure,m);return cr.cata(L,()=>q.none(),()=>q.some(D),W=>Hn(h,W)&&v===0?nu(l,h,v,Ig,w):zg(l,m,W,0,w,k-1),W=>Hn(h,W)&&v===As(W)?nu(l,h,v,ol,w):zg(l,m,W,As(W),w,k-1))}),nu=(l,m,h,v,w)=>o1(l,m,h).bind(k=>c1(l,w,v(k,r1.getJumpSize()))),c1=(l,m,h)=>{const v=$b().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,h):q.none()},w_=(l,m,h,v,w)=>o1(l,h,v).bind(k=>c1(l,w,k)),w3=(l,m,h)=>cv(l,m,h).bind(v=>zg(l,m,v.element,v.offset,h,C3).map(l.fromSitus)),VC=(l,m)=>m3(l,h=>xu(h).exists(v=>Hn(v,m))),ou=(l,m,h,v,w)=>as(v,"td,th",m).bind(k=>as(k,"table",m).bind(D=>VC(w,D)?w3(l,m,h).bind(F=>as(F.finish,"td,th",m).map(L=>({start:k,finish:L,range:F}))):q.none())),a1=(l,m,h,v,w,k)=>k(v,m).orThunk(()=>ou(l,m,h,v,w).map(D=>{const F=D.range;return yo.create(q.some($r(F.start,F.soffset,F.finish,F.foffset)),!0)})),It=(l,m)=>as(l,"tr",m).bind(h=>as(h,"table",m).bind(v=>{const w=Yn(v,"tr");return Hn(h,w[0])?tv(v,k=>xy(k).isSome(),m).map(k=>{const D=As(k);return yo.create(q.some($r(k,D,k,D)),!0)}):q.none()})),li=(l,m)=>as(l,"tr",m).bind(h=>as(h,"table",m).bind(v=>{const w=Yn(v,"tr");return Hn(h,w[w.length-1])?FC(v,k=>fp(k).isSome(),m).map(k=>yo.create(q.some($r(k,0,k,0)),!0)):q.none()})),su=(l,m,h,v,w,k,D)=>ou(l,h,v,w,k).bind(F=>q0(m,h,F.start,F.finish,D)),ru=l=>{let m=l;return{get:()=>m,set:w=>{m=w}}},av=l=>{const m=ru(q.none()),h=()=>m.get().each(l);return{clear:()=>{h(),m.set(q.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:F=>{h(),m.set(q.some(F))}}},Fm=()=>{const l=av(nt);return{...l,on:h=>l.get().each(h)}},ZC=(l,m)=>as(l,"td,th",m),sa=(l,m,h,v)=>{const w=Fm(),k=w.clear,D=Q=>{w.on(ye=>{v.clearBeforeUpdate(m),ZC(Q.target,h).each(Be=>{ng(ye,Be,h).each(Te=>{const me=Te.boxes.getOr([]);if(me.length===1){const Ne=me[0],ge=dc(Ne)==="false",He=we(Ap(Q.target),Ne,Hn);ge&&He&&(v.selectRange(m,me,Ne,Ne),l.selectContents(Ne))}else me.length>1&&(v.selectRange(m,me,Te.start,Te.finish),l.selectContents(Be))})})})};return{clearstate:k,mousedown:Q=>{v.clear(m),ZC(Q.target,h).each(w.set)},mouseover:Q=>{D(Q)},mouseup:Q=>{D(Q),k()}}},i1={traverse:Gh,gather:ev,relative:Zs.before,retry:r1.tryDown,failure:cr.failedDown},iv={traverse:W2,gather:Jp,relative:Zs.before,retry:r1.tryUp,failure:cr.failedUp},xr=l=>m=>m===l,ns=xr(38),lv=xr(40),Im=l=>l>=37&&l<=40,Vg={isBackward:xr(37),isForward:xr(39)},UC={isBackward:xr(39),isForward:xr(37)},uv=l=>{const m=l!==void 0?l.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return rc(h,v)},x3=(l,m,h)=>{const w=(h!==void 0?h.dom:document).defaultView;w&&w.scrollBy(l,m)},Zg=Ur.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),S3=l=>Zg.exact(l.start,l.soffset,l.finish,l.foffset),WC=l=>l.match({domRange:m=>Fe.fromDom(m.startContainer),relative:(m,h)=>Zs.getStart(m),exact:(m,h,v,w)=>m}),jC=Zg.domRange,k3=Zg.relative,GC=Zg.exact,qC=l=>{const m=WC(l);return Sf(m)},KC=Rm.create,fd={domRange:jC,relative:k3,exact:GC,exactFromRange:S3,getWin:qC,range:KC},l1=(l,m,h)=>{var v,w;return q.from((w=(v=l.dom).caretPositionFromPoint)===null||w===void 0?void 0:w.call(v,m,h)).bind(k=>{if(k.offsetNode===null)return q.none();const D=l.dom.createRange();return D.setStart(k.offsetNode,k.offset),D.collapse(),q.some(D)})},XC=(l,m,h)=>{var v,w;return q.from((w=(v=l.dom).caretRangeFromPoint)===null||w===void 0?void 0:w.call(v,m,h))},Lm=(()=>document.caretPositionFromPoint?l1:document.caretRangeFromPoint?XC:q.none)(),Ug=(l,m,h)=>{const v=Fe.fromDom(l.document);return Lm(v,m,h).map(w=>Rm.create(Fe.fromDom(w.startContainer),w.startOffset,Fe.fromDom(w.endContainer),w.endOffset))},u1=(l,m)=>{const h=gn(l);return h==="input"?Zs.after(l):A(["br","img"],h)?m===0?Zs.before(l):Zs.after(l):Zs.on(l,m)},E3=(l,m)=>{const h=l.fold(Zs.before,u1,Zs.after),v=m.fold(Zs.before,u1,Zs.after);return fd.relative(h,v)},A3=(l,m,h,v)=>{const w=u1(l,m),k=u1(h,v);return fd.relative(w,k)},T3=(l,m,h,v)=>{const k=Tl(l).dom.createRange();return k.setStart(l.dom,m),k.setEnd(h.dom,v),k},YC=(l,m,h,v)=>{const w=T3(l,m,h,v),k=Hn(l,h)&&m===v;return w.collapsed&&!k},Ie=l=>q.from(l.getSelection()),Fo=(l,m)=>{Ie(l).each(h=>{h.removeAllRanges(),h.addRange(m)})},Hm=(l,m,h,v,w)=>{const k=Om(l,m,h,v,w);Fo(l,k)},hs=(l,m,h,v,w,k)=>{m.collapse(h.dom,v),m.extend(w.dom,k)},pc=(l,m)=>j0(l,m).match({ltr:(h,v,w,k)=>{Hm(l,h,v,w,k)},rtl:(h,v,w,k)=>{Ie(l).each(D=>{if(D.setBaseAndExtent)D.setBaseAndExtent(h.dom,v,w.dom,k);else if(D.extend)try{hs(l,D,h,v,w,k)}catch{Hm(l,w,k,h,v)}else Hm(l,w,k,h,v)})}}),gd=(l,m,h,v,w)=>{const k=A3(m,h,v,w);pc(l,k)},zm=(l,m,h)=>{const v=E3(m,h);pc(l,v)},d1=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),h=l.getRangeAt(l.rangeCount-1);return q.some(Rm.create(Fe.fromDom(m.startContainer),m.startOffset,Fe.fromDom(h.endContainer),h.endOffset))}else return q.none()},_3=l=>{if(l.anchorNode===null||l.focusNode===null)return d1(l);{const m=Fe.fromDom(l.anchorNode),h=Fe.fromDom(l.focusNode);return YC(m,l.anchorOffset,h,l.focusOffset)?q.some(Rm.create(m,l.anchorOffset,h,l.focusOffset)):d1(l)}},JC=(l,m,h=!0)=>{const w=(h?ai:Rg)(l,m);Fo(l,w)},QC=l=>Ie(l).filter(m=>m.rangeCount>0).bind(_3),ew=l=>QC(l).map(m=>fd.exact(m.start,m.soffset,m.finish,m.foffset)),O3=(l,m)=>{const h=Us(l,m);return Dm(h)},D3=(l,m,h)=>Ug(l,m,h),tw=l=>{Ie(l).each(m=>m.removeAllRanges())},dv=l=>({elementFromPoint:(ge,He)=>Fe.fromPoint(Fe.fromDom(l.document),ge,He),getRect:ge=>ge.dom.getBoundingClientRect(),getRangedRect:(ge,He,gt,Et)=>{const Ln=fd.exact(ge,He,gt,Et);return O3(l,Ln)},getSelection:()=>ew(l).map(ge=>NC(l,ge)),fromSitus:ge=>{const He=fd.relative(ge.start,ge.finish);return NC(l,He)},situsFromPoint:(ge,He)=>D3(l,ge,He).map(gt=>G0.create(gt.start,gt.soffset,gt.finish,gt.foffset)),clearSelection:()=>{tw(l)},collapseSelection:(ge=!1)=>{ew(l).each(He=>He.fold(gt=>gt.collapse(ge),(gt,Et)=>{const Ln=ge?gt:Et;zm(l,Ln,Ln)},(gt,Et,Ln,Ds)=>{const Co=ge?gt:Ln,ps=ge?Et:Ds;gd(l,Co,ps,Co,ps)}))},setSelection:ge=>{gd(l,ge.start,ge.soffset,ge.finish,ge.foffset)},setRelativeSelection:(ge,He)=>{zm(l,ge,He)},selectNode:ge=>{JC(l,ge,!1)},selectContents:ge=>{JC(l,ge)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>uv(Fe.fromDom(l.document)).top,scrollBy:(ge,He)=>{x3(ge,He,Fe.fromDom(l.document))}}),hd=(l,m)=>({rows:l,cols:m}),m1=(l,m,h,v)=>{const w=dv(l),k=sa(w,m,h,v);return{clearstate:k.clearstate,mousedown:k.mousedown,mouseover:k.mouseover,mouseup:k.mouseup}},Wg=(l,m,h,v)=>{const w=dv(l),k=()=>(v.clear(m),q.none());return{keydown:(L,W,Q,ye,Be,Te)=>{const me=L.raw,Ne=me.which,ge=me.shiftKey===!0;return og(m,v.selectedSelector).fold(()=>(Im(Ne)&&!ge&&v.clearBeforeUpdate(m),lv(Ne)&&ge?xn(su,w,m,h,i1,ye,W,v.selectRange):ns(Ne)&&ge?xn(su,w,m,h,iv,ye,W,v.selectRange):lv(Ne)?xn(a1,w,h,i1,ye,W,li):ns(Ne)?xn(a1,w,h,iv,ye,W,It):q.none),gt=>{const Et=Ln=>()=>Ys(Ln,Co=>Mg(Co.rows,Co.cols,m,gt,v)).fold(()=>Cp(m,v.firstSelectedSelector,v.lastSelectedSelector).map(Co=>{const ps=lv(Ne)||Te.isForward(Ne)?Zs.after:Zs.before;return w.setRelativeSelection(Zs.on(Co.first,0),ps(Co.table)),v.clear(m),yo.create(q.none(),!0)}),Co=>q.some(yo.create(q.none(),!0)));return lv(Ne)&&ge?Et([hd(1,0)]):ns(Ne)&&ge?Et([hd(-1,0)]):Te.isBackward(Ne)&&ge?Et([hd(0,-1),hd(-1,0)]):Te.isForward(Ne)&&ge?Et([hd(0,1),hd(1,0)]):Im(Ne)&&!ge?k:q.none})()},keyup:(L,W,Q,ye,Be)=>og(m,v.selectedSelector).fold(()=>{const Te=L.raw,me=Te.which;return Te.shiftKey===!0&&Im(me)?Bg(m,h,W,Q,ye,Be,v.selectRange):q.none()},q.none)}},f1=(l,m,h,v)=>{const w=dv(l);return(k,D)=>{v.clearBeforeUpdate(m),ng(k,D,h).each(F=>{const L=F.boxes.getOr([]);v.selectRange(m,L,F.start,F.finish),w.selectContents(D),w.collapseSelection()})}},pd=(l,m)=>{const h=Ir(l,m);return h===void 0||h===""?[]:h.split(" ")},mv=(l,m,h)=>{const w=pd(l,m).concat([h]);return Eo(l,m,w.join(" ")),!0},nw=(l,m,h)=>{const v=In(pd(l,m),w=>w!==h);return v.length>0?Eo(l,m,v.join(" ")):mo(l,m),!1},bd=l=>l.dom.classList!==void 0,jg=l=>pd(l,"class"),R3=(l,m)=>mv(l,"class",m),B3=(l,m)=>nw(l,"class",m),sl=(l,m)=>{bd(l)?l.dom.classList.add(m):R3(l,m)},M3=l=>{(bd(l)?l.dom.classList:jg(l)).length===0&&mo(l,"class")},ow=(l,m)=>{bd(l)?l.dom.classList.remove(m):B3(l,m),M3(l)},Gg=(l,m)=>bd(l)&&l.dom.classList.contains(m),Qe=(l,m)=>{Ce(m,h=>{ow(l,h)})},ui=l=>m=>{sl(m,l)},js=l=>m=>{Qe(m,l)},Vm={byClass:l=>{const m=ui(l.selected),h=js([l.selected,l.lastSelected,l.firstSelected]),v=k=>{const D=Yn(k,l.selectedSelector);Ce(D,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(k,D,F,L)=>{v(k),Ce(D,m),sl(F,l.firstSelected),sl(L,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,h)=>{const v=L=>{mo(L,l.selected),mo(L,l.firstSelected),mo(L,l.lastSelected)},w=L=>{Eo(L,l.selected,"1")},k=L=>{D(L),h()},D=L=>{const W=Yn(L,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);Ce(W,v)};return{clearBeforeUpdate:D,clear:k,selectRange:(L,W,Q,ye)=>{k(L),Ce(W,w),Eo(Q,l.firstSelected,"1"),Eo(ye,l.lastSelected,"1"),m(W,Q,ye)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},fv=(l,m,h,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return h(l.elements)}},sw=()=>({tag:"none"}),gv=l=>({tag:"multiple",elements:l}),$3=l=>({tag:"single",element:l}),g1=(l,m,h)=>({get:()=>am(l(),h).fold(()=>m().fold(sw,$3),gv)}),hv=(l,m)=>{const h=l.slice(0,m[m.length-1].row+1),v=Xi(h);return Xt(v,w=>{const k=w.cells.slice(0,m[m.length-1].column+1);return Ct(k,D=>D.element)})},vd=(l,m)=>{const h=l.slice(m[0].row+m[0].rowspan-1,l.length),v=Xi(h);return Xt(v,w=>{const k=w.cells.slice(m[0].column+m[0].colspan-1,w.cells.length);return Ct(k,D=>D.element)})},pv=(l,m,h)=>{const v=Ft.fromTable(l);return Mr(v,m).map(k=>{const D=qi(v,h,!1),{rows:F}=Ls(D),L=hv(F,k),W=vd(F,k);return{upOrLeftCells:L,downOrRightCells:W}})},rw=(l,m,h,v,w,k,D)=>({target:l,x:m,y:h,stop:v,prevent:w,kill:k,raw:D}),h1=l=>{const m=Fe.fromDom(X2(l).getOr(l.target)),h=()=>l.stopPropagation(),v=()=>l.preventDefault(),w=_i(v,h);return rw(m,l.clientX,l.clientY,h,v,w,l)},bv=(l,m)=>h=>{l(h)&&m(h1(h))},_n=(l,m,h,v,w)=>{const k=bv(h,v);return l.dom.addEventListener(m,k,w),{unbind:xn(cw,l,m,k,w)}},Da=(l,m,h,v)=>_n(l,m,h,v,!1),cw=(l,m,h,v)=>{l.dom.removeEventListener(m,h,v)},aw=Se,yd=(l,m,h)=>Da(l,m,aw,h),Cd=h1,Zm=l=>!Gg(Fe.fromDom(l.target),"ephox-snooker-resizer-bar"),vv=(l,m)=>{const h=g1(()=>Fe.fromDom(l.getBody()),()=>o0(rm(l),Hs(l)),ni.selectedSelector),v=(L,W,Q)=>{fr(W).each(Be=>{const Te=pC(l),me=Zo(nt,Fe.fromDom(l.getDoc()),Te),Ne=Zr(l),ge=pv(Be,{selection:Ne},me);Ta(l,L,W,Q,ge)})},w=()=>od(l),k=Vm.byAttr(ni,v,w);return l.on("init",L=>{const W=l.getWin(),Q=Kf(l),ye=Hs(l),Be=()=>{const Cn=l.selection,ar=Fe.fromDom(Cn.getStart()),Rs=Fe.fromDom(Cn.getEnd());Vi(fr,[ar,Rs]).fold(()=>k.clear(Q),nt)},Te=m1(W,Q,ye,k),me=Wg(W,Q,ye,k),Ne=f1(W,Q,ye,k),ge=Cn=>Cn.raw.shiftKey===!0;l.on("TableSelectorChange",Cn=>Ne(Cn.start,Cn.finish));const He=(Cn,ar)=>{!ge(Cn)||(ar.kill&&Cn.kill(),ar.selection.each(Rs=>{const aa=fd.relative(Rs.start,Rs.finish),bc=Us(W,aa);l.selection.setRng(bc)}))},gt=Cn=>{const ar=Cd(Cn);if(ar.raw.shiftKey&&Im(ar.raw.which)){const Rs=l.selection.getRng(),aa=Fe.fromDom(Rs.startContainer),bc=Fe.fromDom(Rs.endContainer);me.keyup(ar,aa,Rs.startOffset,bc,Rs.endOffset).each(Wm=>{He(ar,Wm)})}},Et=Cn=>{const ar=Cd(Cn);m.hide();const Rs=l.selection.getRng(),aa=Fe.fromDom(Rs.startContainer),bc=Fe.fromDom(Rs.endContainer),Wm=Hf(Vg,UC)(Fe.fromDom(l.selection.getStart()));me.keydown(ar,aa,Rs.startOffset,bc,Rs.endOffset,Wm).each(ir=>{He(ar,ir)}),m.show()},Ln=Cn=>Cn.button===0,Ds=Cn=>Cn.buttons===void 0?!0:(Cn.buttons&1)!==0,Co=Cn=>{Te.clearstate()},ps=Cn=>{Ln(Cn)&&Zm(Cn)&&Te.mousedown(Cd(Cn))},di=Cn=>{Ds(Cn)&&Zm(Cn)&&Te.mouseover(Cd(Cn))},Qg=Cn=>{Ln(Cn)&&Zm(Cn)&&Te.mouseup(Cd(Cn))},Ed=(()=>{const Cn=ru(Fe.fromDom(Q)),ar=ru(0);return{touchEnd:aa=>{const bc=Fe.fromDom(aa.target);if(Yo("td")(bc)||Yo("th")(bc)){const Wm=Cn.get(),ir=ar.get();Hn(Wm,bc)&&aa.timeStamp-ir<300&&(aa.preventDefault(),Ne(bc,bc))}Cn.set(bc),ar.set(aa.timeStamp)}}})();l.on("dragstart",Co),l.on("mousedown",ps),l.on("mouseover",di),l.on("mouseup",Qg),l.on("touchend",Ed.touchEnd),l.on("keyup",gt),l.on("keydown",Et),l.on("NodeChange",Be)}),l.on("PreInit",()=>{l.serializer.addTempAttr(ni.firstSelected),l.serializer.addTempAttr(ni.lastSelected)}),{getSelectedCells:()=>fv(h.get(),X([]),L=>Ct(L,W=>W.dom),L=>[L.dom]),clearSelectedCells:L=>k.clear(Fe.fromDom(L))}},ca=l=>{let m=[];return{bind:k=>{if(k===void 0)throw new Error("Event bind error: undefined handler");m.push(k)},unbind:k=>{m=In(m,D=>D!==k)},trigger:(...k)=>{const D={};Ce(l,(F,L)=>{D[F]=k[L]}),Ce(m,F=>{F(D)})}}},wd=l=>{const m=hb(l,v=>({bind:v.bind,unbind:v.unbind})),h=hb(l,v=>v.trigger);return{registry:m,trigger:h}},iw=(l,m)=>{let h=null;const v=()=>{V2(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...k)=>{v(),h=setTimeout(()=>{h=null,l.apply(null,k)},m)}}},qg=l=>l.slice(0).sort(),Ra=(l,m)=>{throw new Error("All required keys ("+qg(l).join(", ")+") were not specified. Specified keys were: "+qg(m).join(", ")+".")},p1=l=>{throw new Error("Unsupported keys for object: "+qg(l).join(", "))},lw=(l,m)=>{if(!qc(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");Ce(m,h=>{if(!bf(h))throw new Error("The value "+h+" in the "+l+" fields was not a string.")})},N3=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+qg(l).join(", ")+") were not.")},P3=l=>{const m=qg(l);R(m,(v,w)=>w<m.length-1&&v===m[w+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},F3=(l,m)=>Pc(l,m,{validate:Ti,label:"function"}),Pc=(l,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return lw("required",m),P3(m),v=>{const w=mt(v);Ks(m,F=>A(w,F))||Ra(m,w),l(m,w);const D=In(m,F=>!h.validate(v[F],F));return D.length>0&&N3(D,h.label),v}},Sr=(l,m)=>{const h=In(m,v=>!A(l,v));h.length>0&&p1(h)},cu=l=>F3(Sr,l),Kg=cu(["compare","extract","mutate","sink"]),b1=cu(["element","start","stop","destroy"]),I3=cu(["forceDrop","drop","move","delayDrop"]),Ut=()=>{let l=q.none();const m=()=>{l=q.none()},h=(k,D)=>{const F=l.map(L=>k.compare(L,D));return l=q.some(D),F},v=(k,D)=>{D.extract(k).each(L=>{h(D,L).each(Q=>{w.trigger.move(Q)})})},w=wd({move:ca(["info"])});return{onEvent:v,reset:m,events:w.registry}},L3=()=>{const l=wd({move:ca(["info"])});return{onEvent:nt,reset:nt,events:l.registry}},v1=()=>{const l=L3(),m=Ut();let h=l;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=l},isOn:()=>h===m,onEvent:(F,L)=>{h.onEvent(F,L)},events:m.events}},yv=(l,m,h)=>{let v=!1;const w=wd({start:ca([]),stop:ca([])}),k=v1(),D=()=>{Te.stop(),k.isOn()&&(k.off(),w.trigger.stop())},F=iw(D,200),L=Ne=>{Te.start(Ne),k.on(),w.trigger.start()},W=Ne=>{F.cancel(),k.onEvent(Ne,m)};k.events.move.bind(Ne=>{m.mutate(l,Ne.info)});const Q=()=>{v=!0},ye=()=>{v=!1},Be=Ne=>(...ge)=>{v&&Ne.apply(null,ge)},Te=m.sink(I3({forceDrop:D,drop:Be(D),move:Be(W),delayDrop:Be(F.throttle)}),h),me=()=>{Te.destroy()};return{element:Te.element,go:L,on:Q,off:ye,destroy:me,events:w.registry}},uw=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},y1=uw("ephox-dragster").resolve,z3=l=>{const m={layerClass:y1("blocker"),...l},h=Fe.fromTag("div");return Eo(h,"role","presentation"),Ro(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),sl(h,y1("blocker")),sl(h,m.layerClass),{element:X(h),destroy:()=>{Qs(h)}}};var mw=Kg({compare:(l,m)=>rc(m.left-l.left,m.top-l.top),extract:l=>q.some(rc(l.x,l.y)),sink:(l,m)=>{const h=z3(m),v=yd(h.element(),"mousedown",l.forceDrop),w=yd(h.element(),"mouseup",l.drop),k=yd(h.element(),"mousemove",l.move),D=yd(h.element(),"mouseout",l.delayDrop),F=()=>{h.destroy(),w.unbind(),k.unbind(),D.unbind(),v.unbind()},L=Q=>{bn(Q,h.element())},W=()=>{Qs(h.element())};return b1({element:h.element,start:L,stop:W,destroy:F})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const S_=(l,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:mw;return yv(l,v,m)},C1=uw("ephox-snooker").resolve,wv=()=>{const l=wd({drag:ca(["xDelta","yDelta"])});return{mutate:(h,v)=>{l.trigger.drag(h,v)},events:l.registry}},w1=()=>{const l=wd({drag:ca(["xDelta","yDelta","target"])});let m=q.none();const h=wv();return h.events.drag.bind(k=>{m.each(D=>{l.trigger.drag(k.xDelta,k.yDelta,D)})}),{assign:k=>{m=q.some(k)},get:()=>m,mutate:h.mutate,events:l.registry}},x1=(l,m,h,v,w)=>{const k=Fe.fromTag("div");return Ro(k,{position:"absolute",left:m-v/2+"px",top:h+"px",height:w+"px",width:v+"px"}),Bn(k,{"data-column":l,role:"presentation"}),k},st=(l,m,h,v,w)=>{const k=Fe.fromTag("div");return Ro(k,{position:"absolute",left:m+"px",top:h-w/2+"px",height:w+"px",width:v+"px"}),Bn(k,{"data-row":l,role:"presentation"}),k},xv=C1("resizer-bar"),gw=C1("resizer-rows"),hw=C1("resizer-cols"),xd=7,pw=(l,m)=>Xt(l.all,(h,v)=>m(h.element)?[v]:[]),Z3=(l,m)=>{const h=[];return no(l.grid.columns,v=>{Ft.getColumnAt(l,v).map(k=>k.element).forall(m)&&h.push(v)}),In(h,v=>{const w=Ft.filterItems(l,k=>k.column===v);return Ks(w,k=>m(k.element))})},bw=l=>{const m=Yn(l.parent(),"."+xv);Ce(m,Qs)},U3=(l,m,h)=>{const v=l.origin();Ce(m,w=>{w.each(k=>{const D=h(v,k);sl(D,xv),bn(l.parent(),D)})})},Sv=(l,m,h,v)=>{U3(l,m,(w,k)=>{const D=x1(k.col,k.x-w.left,h.top-w.top,xd,v);return sl(D,hw),D})},W3=(l,m,h,v)=>{U3(l,m,(w,k)=>{const D=st(k.row,h.left-w.left,k.y-w.top,v,xd);return sl(D,gw),D})},kv=(l,m,h,v,w)=>{const k=ya(h),D=m.isResizable,F=v.length>0?_c.positions(v,h):[],L=F.length>0?pw(l,D):[],W=In(F,(Te,me)=>Oe(L,Ne=>me===Ne));W3(m,W,k,xs(h));const Q=w.length>0?Ss.positions(w,h):[],ye=Q.length>0?Z3(l,D):[],Be=In(Q,(Te,me)=>Oe(ye,Ne=>me===Ne));Sv(m,Be,k,Ue(h))},S1=(l,m)=>{if(bw(l),l.isResizable(m)){const h=Ft.fromTable(m),v=Jd(h),w=zr(h);kv(h,l,m,v,w)}},Ev=(l,m)=>{const h=Yn(l.parent(),"."+xv);Ce(h,m)},vw=l=>{Ev(l,m=>{Nn(m,"display","none")})},yw=l=>{Ev(l,m=>{Nn(m,"display","block")})},j3=l=>Gg(l,gw),Cw=l=>Gg(l,hw),ww=C1("resizer-bar-dragging"),xw=l=>{const m=w1(),h=S_(m,{});let v=q.none();const w=(me,Ne)=>q.from(Ir(me,Ne));m.events.drag.bind(me=>{w(me.target,"data-row").each(Ne=>{const ge=ls(me.target,"top");Nn(me.target,"top",ge+me.yDelta+"px")}),w(me.target,"data-column").each(Ne=>{const ge=ls(me.target,"left");Nn(me.target,"left",ge+me.xDelta+"px")})});const k=(me,Ne)=>{const ge=ls(me,Ne),He=Dr(me,"data-initial-"+Ne,0);return ge-He};h.events.stop.bind(()=>{m.get().each(me=>{v.each(Ne=>{w(me,"data-row").each(ge=>{const He=k(me,"top");mo(me,"data-initial-top"),Te.trigger.adjustHeight(Ne,He,parseInt(ge,10))}),w(me,"data-column").each(ge=>{const He=k(me,"left");mo(me,"data-initial-left"),Te.trigger.adjustWidth(Ne,He,parseInt(ge,10))}),S1(l,Ne)})})});const D=(me,Ne)=>{Te.trigger.startAdjust(),m.assign(me),Eo(me,"data-initial-"+Ne,ls(me,Ne)),sl(me,ww),Nn(me,"opacity","0.2"),h.go(l.parent())},F=yd(l.parent(),"mousedown",me=>{j3(me.target)&&D(me.target,"top"),Cw(me.target)&&D(me.target,"left")}),L=me=>Hn(me,l.view()),W=me=>as(me,"table",L).filter(Aa),Q=yd(l.view(),"mouseover",me=>{W(me.target).fold(()=>{Lr(me.target)&&bw(l)},Ne=>{v=q.some(Ne),S1(l,Ne)})}),ye=()=>{F.unbind(),Q.unbind(),h.destroy(),bw(l)},Be=me=>{S1(l,me)},Te=wd({adjustHeight:ca(["table","delta","row"]),adjustWidth:ca(["table","delta","column"]),startAdjust:ca([])});return{destroy:ye,refresh:Be,on:h.on,off:h.off,hideBars:xn(vw,l),showBars:xn(yw,l),events:Te.registry}},Sw={create:(l,m,h)=>{const v=_c,w=Ss,k=xw(l),D=wd({beforeResize:ca(["table","type"]),afterResize:ca(["table","type"]),startDrag:ca([])});return k.events.adjustHeight.bind(F=>{const L=F.table;D.trigger.beforeResize(L,"row");const W=v.delta(F.delta,L);h0(L,W,F.row,v),D.trigger.afterResize(L,"row")}),k.events.startAdjust.bind(F=>{D.trigger.startDrag()}),k.events.adjustWidth.bind(F=>{const L=F.table;D.trigger.beforeResize(L,"col");const W=w.delta(F.delta,L),Q=h(L);Wl(L,W,F.column,m,Q),D.trigger.afterResize(L,"col")}),{on:k.on,off:k.off,refreshBars:k.refresh,hideBars:k.hideBars,showBars:k.showBars,destroy:k.destroy,events:D.registry}}},kr={only:(l,m)=>{const h=Kc(l)?ze(l):l;return{parent:X(h),view:X(l),origin:X(rc(0,0)),isResizable:m}},detached:(l,m,h)=>{const v=()=>ya(m);return{parent:X(m),view:X(l),origin:v,isResizable:h}},body:(l,m,h)=>({parent:X(m),view:X(l),origin:X(rc(0,0)),isResizable:h})},Xg=()=>{const l=Fe.fromTag("div");return Ro(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),bn(QS(),l),l},Yg=(l,m)=>l.inline?kr.body(Fe.fromDom(l.getBody()),Xg(),m):kr.only(Fe.fromDom(l.getDoc()),m),E1=(l,m)=>{l.inline&&Qs(m.parent())},kd=l=>Jr(l)&&l.nodeName==="TABLE",Av="bar-",G3=l=>Ir(l,"data-mce-resize")!=="false",Jg=l=>{const m=Ft.fromTable(l);Ft.hasColumns(m)||Ce(Tu(l),h=>{const v=$i(h,"width");Nn(h,"width",v),mo(h,"width")})},kw=l=>{const m=Fm(),h=Fm(),v=Fm();let w,k;const D=me=>cd(l,me),F=()=>yC(l)?c0():r0(),L=me=>cg(me).columns,W=(me,Ne,ge)=>{const He=jd(Ne,"e");if(k===""&&Kl(me),ge!==w&&k!==""){Nn(me,"width",k);const gt=F(),Et=D(me),Ln=yC(l)||He?L(me)-1:0;Wl(me,ge-w,Ln,gt,Et)}else if(Hu(k)){const gt=parseFloat(k.replace("%","")),Et=ge*gt/w;Nn(me,"width",Et+"%")}Xf(k)&&Jg(me)},Q=()=>{h.on(me=>{me.destroy()}),v.on(me=>{E1(l,me)})};return l.on("init",()=>{const me=Yg(l,G3);if(v.set(me),bC(l)&&jk(l)){const Ne=F(),ge=Sw.create(me,Ne,D);ge.on(),ge.events.startDrag.bind(He=>{m.set(l.selection.getRng())}),ge.events.beforeResize.bind(He=>{const gt=He.table.dom;_a(l,gt,gp(gt),ti(gt),Av+He.type)}),ge.events.afterResize.bind(He=>{const gt=He.table,Et=gt.dom;ei(gt),m.on(Ln=>{l.selection.setRng(Ln),l.focus()}),Zk(l,Et,gp(Et),ti(Et),Av+He.type),l.undoManager.add()}),h.set(ge)}}),l.on("ObjectResizeStart",me=>{const Ne=me.target;if(kd(Ne)){const ge=Fe.fromDom(Ne);Ce(l.dom.select(".mce-clonedresizable"),He=>{l.dom.addClass(He,"mce-"+Gl(l)+"-columns")}),!F0(ge)&&rd(l)?kg(ge):!P0(ge)&&sd(l)&&Kl(ge),ql(ge)&&ku(me.origin,Av)&&Kl(ge),w=me.width,k=wg(l)?"":Vl(l,Ne).getOr("")}}),l.on("ObjectResized",me=>{const Ne=me.target;if(kd(Ne)){const ge=Fe.fromDom(Ne),He=me.origin;ku(He,"corner-")&&W(ge,He,me.width),ei(ge),yr(l,ge.dom,Cg)}}),l.on("SwitchMode",()=>{h.on(me=>{l.mode.isReadOnly()?me.hideBars():me.showBars()})}),l.on("remove",()=>{Q()}),{refresh:me=>{h.on(Ne=>Ne.refreshBars(Fe.fromDom(me)))},hide:()=>{h.on(me=>me.hideBars())},show:()=>{h.on(me=>me.showBars())}}},Zt=l=>{Wk(l);const m=kw(l),h=vv(l,m),v=Kn(l,m,h);return RC(l,v),Og(l,v),hk(l,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},Fc=l=>({table:Zt(l)});var Um=()=>{Rn.add("dom",Fc)};Um()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M17.8 9.8 15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8Zm0 0 2.2 5.7-2.3-5.8ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){const Rn=Object.getPrototypeOf,$s=(t,s,c)=>{var i;return c(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},Gc=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&$s(t,String,(c,i)=>i.isPrototypeOf(c))?"string":s},Sc=t=>s=>Gc(s)===t,ki=t=>s=>typeof s===t,pu=t=>s=>t===s,bf=(t,s)=>qc(t)&&$s(t,s,(c,i)=>Rn(c)===i),wn=Sc("string"),qc=Sc("object"),V2=t=>bf(t,Object),Ei=Sc("array"),vf=pu(null),Ai=ki("boolean"),Jr=pu(void 0),Ti=t=>t==null,Ar=t=>!Ti(t),nt=ki("function"),_i=ki("number"),Sl=(t,s)=>{if(Ei(t)){for(let c=0,i=t.length;c<i;++c)if(!s(t[c]))return!1;return!0}return!1},X=()=>{},hn=t=>()=>t(),Vh=(t,s)=>(...c)=>t(s.apply(null,c)),xn=(t,s)=>c=>t(s(c)),te=t=>()=>t,Wt=t=>t,dr=(t,s)=>t===s;function en(t,...s){return(...c)=>{const i=s.concat(c);return t.apply(null,i)}}const Se=t=>s=>!t(s),q=t=>()=>{throw new Error(t)},kc=t=>t(),kn=te(!1),dt=te(!0);var bu=tinymce.util.Tools.resolve("tinymce.ThemeManager");class A{constructor(s,c){this.tag=s,this.value=c}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,c){return this.tag?c(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s!=null?s:"Called getOrDie on None")}static from(s){return Ar(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}A.singletonNone=new A(!1);const Oe=Array.prototype.slice,no=Array.prototype.indexOf,Ct=Array.prototype.push,Ce=(t,s)=>no.call(t,s),Zh=(t,s)=>{const c=Ce(t,s);return c===-1?A.none():A.some(c)},qo=(t,s)=>Ce(t,s)>-1,In=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return!0}return!1},mr=(t,s)=>{const c=[];for(let i=0;i<t;i++)c.push(s(i));return c},pn=(t,s)=>{const c=[];for(let i=0;i<t.length;i+=s){const d=Oe.call(t,i,i+s);c.push(d)}return c},Ae=(t,s)=>{const c=t.length,i=new Array(c);for(let d=0;d<c;d++){const g=t[d];i[d]=s(g,d)}return i},R=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];s(d,c)}},yf=(t,s)=>{for(let c=t.length-1;c>=0;c--){const i=t[c];s(i,c)}},gb=(t,s)=>{const c=[],i=[];for(let d=0,g=t.length;d<g;d++){const b=t[d];(s(b,d)?c:i).push(b)}return{pass:c,fail:i}},Xt=(t,s)=>{const c=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&c.push(g)}return c},Ks=(t,s,c)=>(yf(t,(i,d)=>{c=s(c,i,d)}),c),Xs=(t,s,c)=>(R(t,(i,d)=>{c=s(c,i,d)}),c),$n=(t,s,c)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return A.some(g);if(c(g,i))break}return A.none()},Yt=(t,s)=>$n(t,s,kn),Jt=(t,s)=>{for(let c=0,i=t.length;c<i;c++){const d=t[c];if(s(d,c))return A.some(c)}return A.none()},ve=t=>{const s=[];for(let c=0,i=t.length;c<i;++c){if(!Ei(t[c]))throw new Error("Arr.flatten item "+c+" was not an array, input: "+t);Ct.apply(s,t[c])}return s},So=(t,s)=>ve(Ae(t,s)),Ys=(t,s)=>{for(let c=0,i=t.length;c<i;++c){const d=t[c];if(s(d,c)!==!0)return!1}return!0},mt=t=>{const s=Oe.call(t,0);return s.reverse(),s},fa=(t,s)=>Xt(t,c=>!qo(s,c)),oo=(t,s)=>{const c={};for(let i=0,d=t.length;i<d;i++){const g=t[i];c[String(g)]=s(g,i)}return c},hb=t=>[t],Ko=(t,s)=>{const c=Oe.call(t,0);return c.sort(s),c},kl=(t,s)=>s>=0&&s<t.length?A.some(t[s]):A.none(),Oi=t=>kl(t,0),ga=t=>kl(t,t.length-1),vu=nt(Array.from)?Array.from:t=>Oe.call(t),Fr=(t,s)=>{for(let c=0;c<t.length;c++){const i=s(t[c],c);if(i.isSome())return i}return A.none()},ko=Object.keys,Cf=Object.hasOwnProperty,Xo=(t,s)=>{const c=ko(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],b=t[g];s(b,g)}},Lo=(t,s)=>Tr(t,(c,i)=>({k:i,v:s(c,i)})),Tr=(t,s)=>{const c={};return Xo(t,(i,d)=>{const g=s(i,d);c[g.k]=g.v}),c},Ua=t=>(s,c)=>{t[c]=s},Js=(t,s,c,i)=>{Xo(t,(d,g)=>{(s(d,g)?c:i)(d,g)})},El=(t,s)=>{const c={},i={};return Js(t,s,Ua(c),Ua(i)),{t:c,f:i}},Z2=(t,s)=>{const c={};return Js(t,s,Ua(c),X),c},gn=(t,s)=>{const c=[];return Xo(t,(i,d)=>{c.push(s(i,d))}),c},Uh=(t,s)=>{const c=ko(t);for(let i=0,d=c.length;i<d;i++){const g=c[i],b=t[g];if(s(b,g,t))return A.some(b)}return A.none()},En=t=>gn(t,Wt),at=(t,s)=>tn(t,s)?A.from(t[s]):A.none(),tn=(t,s)=>Cf.call(t,s),vs=(t,s)=>tn(t,s)&&t[s]!==void 0&&t[s]!==null,Kc=(t,s,c=dr)=>t.exists(i=>c(i,s)),GS=(t,s,c=dr)=>Eo(t,s,c).getOr(t.isNone()&&s.isNone()),Yo=t=>{const s=[],c=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(c);return s},wf=t=>{const s=[];for(let c=0;c<t.length;c++){const i=t[c];if(i.isSome())s.push(i.getOrDie());else return A.none()}return A.some(s)},Eo=(t,s,c)=>t.isSome()&&s.isSome()?A.some(c(t.getOrDie(),s.getOrDie())):A.none(),Bn=(t,s,c,i)=>t.isSome()&&s.isSome()&&c.isSome()?A.some(i(t.getOrDie(),s.getOrDie(),c.getOrDie())):A.none(),Pt=(t,s)=>t!=null?A.some(s(t)):A.none(),Ir=(t,s)=>t?A.some(s):A.none(),Al=(t,s)=>t+s,mo=(t,s)=>t.substring(s),Wh=(t,s,c)=>s===""||t.length>=s.length&&t.substr(c,c+s.length)===s,pb=(t,s)=>yu(t,s)?mo(t,s.length):t,qS=(t,s)=>Cu(t,s)?t:Al(t,s),ys=(t,s,c=0,i)=>{const d=t.indexOf(s,c);return d!==-1?Jr(i)?!0:d+s.length<=i:!1},yu=(t,s)=>Wh(t,s,0),Cu=(t,s)=>Wh(t,s,t.length-s.length),_r=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),xf=t=>t.length>0,wu=t=>!xf(t),Xc=t=>t.style!==void 0&&nt(t.style.getPropertyValue),Hn=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return Tl(i.childNodes[0])},bb=(t,s)=>{const i=(s||document).createElement(t);return Tl(i)},KS=(t,s)=>{const i=(s||document).createTextNode(t);return Tl(i)},Tl=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},ze={fromHtml:Hn,fromTag:bb,fromText:KS,fromDom:Tl,fromPoint:(t,s,c)=>A.from(t.dom.elementFromPoint(s,c)).map(Tl)},Sf=typeof window<"u"?window:Function("return this;")(),xu=(t,s)=>{let c=s!=null?s:Sf;for(let i=0;i<t.length&&c!==void 0&&c!==null;++i)c=c[t[i]];return c},vb=(t,s)=>{const c=t.split(".");return xu(c,s)},U2=(t,s)=>vb(t,s),W2=(t,s)=>{const c=U2(t,s);if(c==null)throw new Error(t+" not available on this browser");return c},Gh=Object.getPrototypeOf,Qr=t=>W2("HTMLElement",t),qh=t=>{const s=vb("ownerDocument.defaultView",t);return qc(t)&&(Qr(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Gh(t).constructor.name))},Ns=9,Ho=11,_l=1,kf=3,bn=t=>t.dom.nodeName.toLowerCase(),XS=t=>t.dom.nodeType,Ef=t=>s=>XS(s)===t,ha=t=>Ao(t)&&qh(t.dom),Ao=Ef(_l),Di=Ef(kf),Qs=Ef(Ns),yb=Ef(Ho),pa=t=>s=>Ao(s)&&bn(s)===t,Kh=(t,s)=>{const c=t.dom;if(c.nodeType!==_l)return!1;{const i=c;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},Su=t=>t.nodeType!==_l&&t.nodeType!==Ns&&t.nodeType!==Ho||t.childElementCount===0,Cb=(t,s)=>{const c=s===void 0?document:s.dom;return Su(c)?[]:Ae(c.querySelectorAll(t),ze.fromDom)},j2=(t,s)=>{const c=s===void 0?document:s.dom;return Su(c)?A.none():A.from(c.querySelector(t)).map(ze.fromDom)},Wn=(t,s)=>t.dom===s.dom,Af=(t,s)=>{const c=t.dom,i=s.dom;return c===i?!1:c.contains(i)},Yc=t=>ze.fromDom(t.dom.ownerDocument),Tf=t=>Qs(t)?t:Yc(t),Xh=t=>ze.fromDom(Tf(t).dom.documentElement),Zd=t=>ze.fromDom(Tf(t).dom.defaultView),ba=t=>A.from(t.dom.parentNode).map(ze.fromDom),Ud=t=>A.from(t.dom.parentElement).map(ze.fromDom),_f=t=>A.from(t.dom.offsetParent).map(ze.fromDom),G2=t=>A.from(t.dom.nextSibling).map(ze.fromDom),To=t=>Ae(t.dom.childNodes,ze.fromDom),ec=(t,s)=>{const c=t.dom.childNodes;return A.from(c[s]).map(ze.fromDom)},q2=t=>ec(t,0),wb=(t,s)=>({element:t,offset:s}),xb=(t,s)=>{const c=To(t);return c.length>0&&s<c.length?wb(c[s],0):wb(t,s)},Yh=t=>yb(t)&&Ar(t.dom.host),Sb=nt(Element.prototype.attachShadow)&&nt(Node.prototype.getRootNode),K2=te(Sb),tc=Sb?t=>ze.fromDom(t.dom.getRootNode()):Tf,kb=t=>Yh(t)?t:ze.fromDom(Tf(t).dom.body),YS=t=>X2(t).isSome(),X2=t=>{const s=tc(t);return Yh(s)?A.some(s):A.none()},JS=t=>ze.fromDom(t.dom.host),Lr=t=>{if(K2()&&Ar(t.target)){const s=ze.fromDom(t.target);if(Ao(s)&&QS(s)&&t.composed&&t.composedPath){const c=t.composedPath();if(c)return Oi(c)}}return A.from(t.target)},QS=t=>Ar(t.dom.shadowRoot),Hr=t=>{const s=Di(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const c=s.ownerDocument;return X2(ze.fromDom(s)).fold(()=>c.body.contains(s),xn(Hr,JS))},er=()=>Wa(ze.fromDom(document)),Wa=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return ze.fromDom(s)},Ri=(t,s,c)=>{if(wn(c)||Ai(c)||_i(c))t.setAttribute(s,c+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",c,":: Element ",t),new Error("Attribute value was not simple")},Ot=(t,s,c)=>{Ri(t.dom,s,c)},ln=(t,s)=>{const c=t.dom;Xo(s,(i,d)=>{Ri(c,d,i)})},Yn=(t,s)=>{const c=t.dom.getAttribute(s);return c===null?void 0:c},Or=(t,s)=>A.from(Yn(t,s)),Wd=(t,s)=>{const c=t.dom;return c&&c.hasAttribute?c.hasAttribute(s):!1},Cs=(t,s)=>{t.dom.removeAttribute(s)},ek=t=>Xs(t.dom.attributes,(s,c)=>(s[c.name]=c.value,s),{}),Eb=(t,s,c)=>{if(!wn(c))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",c,":: Element ",t),new Error("CSS value must be a string: "+c);Xc(t)&&t.style.setProperty(s,c)},Bi=(t,s)=>{Xc(t)&&t.style.removeProperty(s)},Tt=(t,s,c)=>{const i=t.dom;Eb(i,s,c)},Mi=(t,s)=>{const c=t.dom;Xo(s,(i,d)=>{Eb(c,d,i)})},as=(t,s)=>{const c=t.dom;Xo(s,(i,d)=>{i.fold(()=>{Bi(c,d)},g=>{Eb(c,d,g)})})},we=(t,s)=>{const c=t.dom,d=window.getComputedStyle(c).getPropertyValue(s);return d===""&&!Hr(t)?Ol(c,s):d},Ol=(t,s)=>Xc(t)?t.style.getPropertyValue(s):"",Ps=(t,s)=>{const c=t.dom,i=Ol(c,s);return A.from(i).filter(d=>d.length>0)},Fs=t=>{const s={},c=t.dom;if(Xc(c))for(let i=0;i<c.style.length;i++){const d=c.style.item(i);s[d]=c.style[d]}return s},Ab=(t,s,c)=>{const i=ze.fromTag(t);return Tt(i,s,c),Ps(i,s).isSome()},Vt=(t,s)=>{const c=t.dom;Bi(c,s),Kc(Or(t,"style").map(_r),"")&&Cs(t,"style")},ku=t=>t.dom.offsetWidth,jd=(t,s)=>{const c=(C,S)=>{if(!_i(S)&&!S.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+S);const E=C.dom;Xc(E)&&(E.style[t]=S+"px")},i=C=>{const S=s(C);if(S<=0||S===null){const E=we(C,t);return parseFloat(E)||0}return S},d=i,g=(C,S)=>Xs(S,(E,T)=>{const O=we(C,T),N=O===void 0?0:parseInt(O,10);return isNaN(N)?E:E+N},0);return{set:c,get:i,getOuter:d,aggregate:g,max:(C,S,E)=>{const T=g(C,E);return S>T?S-T:0}}},Tb=jd("height",t=>{const s=t.dom;return Hr(t)?s.getBoundingClientRect().height:s.offsetHeight}),Jo=t=>Tb.get(t),Dl=t=>Tb.getOuter(t),so=(t,s)=>{const c=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=Tb.max(t,s,c);Tt(t,"max-height",i+"px")},Rl=(t,s)=>({left:t,top:s,translate:(i,d)=>Rl(t+i,s+d)}),zn=Rl,tk=t=>{const s=t.getBoundingClientRect();return zn(s.left,s.top)},Nn=(t,s)=>t!==void 0?t:s!==void 0?s:0,Ro=t=>{const s=t.dom.ownerDocument,c=s.body,i=s.defaultView,d=s.documentElement;if(c===t.dom)return zn(c.offsetLeft,c.offsetTop);const g=Nn(i==null?void 0:i.pageYOffset,d.scrollTop),b=Nn(i==null?void 0:i.pageXOffset,d.scrollLeft),C=Nn(d.clientTop,c.clientTop),S=Nn(d.clientLeft,c.clientLeft);return $i(t).translate(b-S,g-C)},$i=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?zn(i.offsetLeft,i.offsetTop):Hr(t)?tk(s):zn(0,0)},Of=jd("width",t=>t.dom.offsetWidth),Df=(t,s)=>Of.set(t,s),Bo=t=>Of.get(t),Mo=t=>Of.getOuter(t),Dr=(t,s)=>{const c=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=Of.max(t,s,c);Tt(t,"max-width",i+"px")},is=t=>{let s=!1,c;return(...i)=>(s||(s=!0,c=t.apply(null,i)),c)},va=(t,s,c,i)=>{const d=t.isiOS()&&/ipad/i.test(c)===!0,g=t.isiOS()&&!d,b=t.isiOS()||t.isAndroid(),C=b||i("(pointer:coarse)"),S=d||!g&&b&&i("(min-device-width:768px)"),E=g||b&&!S,T=s.isSafari()&&t.isiOS()&&/safari/i.test(c)===!1,O=!E&&!S&&!T;return{isiPad:te(d),isiPhone:te(g),isTablet:te(S),isPhone:te(E),isTouch:te(C),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:te(T),isDesktop:te(O)}},Rf=(t,s)=>{for(let c=0;c<t.length;c++){const i=t[c];if(i.test(s))return i}},ls=(t,s)=>{const c=Rf(t,s);if(!c)return{major:0,minor:0};const i=d=>Number(s.replace(c,"$"+d));return Bl(i(1),i(2))},Bf=(t,s)=>{const c=String(s).toLowerCase();return t.length===0?Mf():ls(t,c)},Mf=()=>Bl(0,0),Bl=(t,s)=>({major:t,minor:s}),Eu={nu:Bl,detect:Bf,unknown:Mf},nk=(t,s)=>Fr(s.brands,c=>{const i=c.brand.toLowerCase();return Yt(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:Eu.nu(parseInt(c.version,10),0)}))}),Au=(t,s)=>{const c=String(s).toLowerCase();return Yt(t,i=>i.search(c))},Tu=(t,s)=>Au(t,s).map(c=>{const i=Eu.detect(c.versionRegexes,s);return{current:c.name,version:i}}),Jh=(t,s)=>Au(t,s).map(c=>{const i=Eu.detect(c.versionRegexes,s);return{current:c.name,version:i}}),fr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ja=t=>s=>ys(s,t),Gd=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>ys(t,"edge/")&&ys(t,"chrome")&&ys(t,"safari")&&ys(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,fr],search:t=>ys(t,"chrome")&&!ys(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>ys(t,"msie")||ys(t,"trident")},{name:"Opera",versionRegexes:[fr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ja("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ja("firefox")},{name:"Safari",versionRegexes:[fr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(ys(t,"safari")||ys(t,"mobile/"))&&ys(t,"applewebkit")}],_b=[{name:"Windows",search:ja("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>ys(t,"iphone")||ys(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ja("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ja("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ja("linux"),versionRegexes:[]},{name:"Solaris",search:ja("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ja("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ja("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],$f={browsers:te(Gd),oses:te(_b)},Ob="Edge",Qh="Chromium",Ga="IE",Y2="Opera",J2="Firefox",Q2="Safari",Nf=()=>ey({current:void 0,version:Eu.unknown()}),ey=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isEdge:i(Ob),isChromium:i(Qh),isIE:i(Ga),isOpera:i(Y2),isFirefox:i(J2),isSafari:i(Q2)}},G={unknown:Nf,nu:ey,edge:te(Ob),chromium:te(Qh),ie:te(Ga),opera:te(Y2),firefox:te(J2),safari:te(Q2)},_u="Windows",Jc="iOS",ep="Android",ty="Linux",ny="macOS",vn="Solaris",tr="FreeBSD",Db="ChromeOS",Ni=()=>Rb({current:void 0,version:Eu.unknown()}),Rb=t=>{const s=t.current,c=t.version,i=d=>()=>s===d;return{current:s,version:c,isWindows:i(_u),isiOS:i(Jc),isAndroid:i(ep),isMacOS:i(ny),isLinux:i(ty),isSolaris:i(vn),isFreeBSD:i(tr),isChromeOS:i(Db)}},Ou={unknown:Ni,nu:Rb,windows:te(_u),ios:te(Jc),android:te(ep),linux:te(ty),macos:te(ny),solaris:te(vn),freebsd:te(tr),chromeos:te(Db)},oy={detect:(t,s,c)=>{const i=$f.browsers(),d=$f.oses(),g=s.bind(S=>nk(i,S)).orThunk(()=>Tu(i,t)).fold(G.unknown,G.nu),b=Jh(d,t).fold(Ou.unknown,Ou.nu),C=va(b,g,t,c);return{browser:g,os:b,deviceType:C}}},sy=t=>window.matchMedia(t).matches;let ry=is(()=>oy.detect(navigator.userAgent,A.from(navigator.userAgentData),sy));const nc=()=>ry(),Pf=(t,s,c,i,d,g,b)=>({target:t,x:s,y:c,stop:i,prevent:d,kill:g,raw:b}),tp=t=>{const s=ze.fromDom(Lr(t).getOr(t.target)),c=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=Vh(i,c);return Pf(s,t.clientX,t.clientY,c,i,d,t)},Bb=(t,s)=>c=>{t(c)&&s(tp(c))},ws=(t,s,c,i,d)=>{const g=Bb(c,i);return t.dom.addEventListener(s,g,d),{unbind:en(np,t,s,g,d)}},Ff=(t,s,c,i)=>ws(t,s,c,i,!1),Mb=(t,s,c,i)=>ws(t,s,c,i,!0),np=(t,s,c,i)=>{t.dom.removeEventListener(s,c,i)},Du=(t,s)=>{ba(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},cy=(t,s)=>{G2(t).fold(()=>{ba(t).each(d=>{oc(d,s)})},i=>{Du(i,s)})},op=(t,s)=>{q2(t).fold(()=>{oc(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},oc=(t,s)=>{t.dom.appendChild(s.dom)},ok=(t,s,c)=>{ec(t,c).fold(()=>{oc(t,s)},i=>{Du(i,s)})},qa=(t,s)=>{R(s,c=>{oc(t,c)})},qd=t=>{t.dom.textContent="",R(To(t),s=>{Ml(s)})},Ml=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},Ka=t=>{const s=t!==void 0?t.dom:document,c=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return zn(c,i)},ay=(t,s,c)=>{const d=(c!==void 0?c.dom:document).defaultView;d&&d.scrollTo(t,s)},iy=t=>{const s=t===void 0?window:t;return nc().browser.isFirefox()?A.none():A.from(s.visualViewport)},$b=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),$l=t=>{const s=t===void 0?window:t,c=s.document,i=Ka(ze.fromDom(c));return iy(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,b=d.clientHeight;return $b(i.left,i.top,g,b)},d=>$b(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},sp=()=>ze.fromDom(document),Ru=(t,s)=>t.view(s).fold(te([]),i=>{const d=t.owner(i),g=Ru(t,d);return[i].concat(g)}),ly=(t,s)=>{const c=s.owner(t),i=Ru(s,c);return A.some(i)};var uy=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?A.none():A.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(ze.fromDom)},owner:t=>Yc(t)});const Kd=t=>{const s=sp(),c=Ka(s);return ly(t,uy).fold(en(Ro,t),d=>{const g=$i(t),b=Ks(d,(C,S)=>{const E=$i(S);return{left:C.left+E.left,top:C.top+E.top}},{left:0,top:0});return zn(b.left+g.left+c.left,b.top+g.top+c.top)})},Pb=(t,s,c)=>({point:t,width:s,height:c}),Xa=(t,s,c,i)=>({x:t,y:s,width:c,height:i}),xs=(t,s,c,i)=>({x:t,y:s,width:c,height:i,right:t+c,bottom:s+i}),qn=t=>{const s=Ro(t),c=Mo(t),i=Dl(t);return xs(s.left,s.top,c,i)},sc=t=>{const s=Kd(t),c=Mo(t),i=Dl(t);return xs(s.left,s.top,c,i)},Ac=()=>$l(window),zo=t=>{const s=g=>g(t),c=te(t),i=()=>d,d={tag:!0,inner:t,fold:(g,b)=>b(t),isValue:dt,isError:kn,map:g=>St.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:c,or:i,getOrThunk:c,orThunk:i,getOrDie:c,each:g=>{g(t)},toOptional:()=>A.some(t)};return d},Xd=t=>{const s=()=>c,c={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:kn,isError:dt,map:s,mapError:i=>St.error(i(t)),bind:s,exists:kn,forall:dt,getOr:Wt,or:Wt,getOrThunk:kc,orThunk:kc,getOrDie:q(String(t)),each:X,toOptional:A.none};return c},St={value:zo,error:Xd,fromOption:(t,s)=>t.fold(()=>Xd(s),zo)};var Jn;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Jn||(Jn={}));const un=(t,s,c)=>t.stype===Jn.Error?s(t.serror):c(t.svalue),Is=t=>{const s=[],c=[];return R(t,i=>{un(i,d=>c.push(d),d=>s.push(d))}),{values:s,errors:c}},Ls=(t,s)=>t.stype===Jn.Error?{stype:Jn.Error,serror:s(t.serror)}:t,dy=(t,s)=>t.stype===Jn.Value?{stype:Jn.Value,svalue:s(t.svalue)}:t,If=(t,s)=>t.stype===Jn.Value?s(t.svalue):t,rp=(t,s)=>t.stype===Jn.Error?s(t.serror):t,Nl=t=>({stype:Jn.Value,svalue:t}),cp=t=>({stype:Jn.Error,serror:t}),fo={fromResult:t=>t.fold(cp,Nl),toResult:t=>un(t,St.error,St.value),svalue:Nl,partition:Is,serror:cp,bind:If,bindError:rp,map:dy,mapError:Ls,fold:un},my=(t,s,c,i)=>({tag:"field",key:t,newKey:s,presence:c,prop:i}),fy=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Fb=(t,s,c)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return c(t.newKey,t.instantiator)}},Lf=(t,s)=>s,m_=(t,s)=>V2(t)&&V2(s)?ro(t,s):s,ap=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const c={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)tn(d,g)&&(c[g]=t(c[g],d[g]))}return c},ro=ap(m_),Ft=ap(Lf),zr=()=>({tag:"required",process:{}}),Yd=t=>({tag:"defaultedThunk",process:t}),Jd=t=>Yd(te(t)),Ib=()=>({tag:"option",process:{}}),Hf=t=>({tag:"mergeWithThunk",process:t}),gy=t=>Hf(te(t)),Pl=(t,s)=>t.length>0?fo.svalue(ro(s,Ft.apply(void 0,t))):fo.svalue(s),Bu=t=>Vh(fo.serror,ve)(t),Tc={consolidateObj:(t,s)=>{const c=fo.partition(t);return c.errors.length>0?Bu(c.errors):Pl(c.values,s)},consolidateArr:t=>{const s=fo.partition(t);return s.errors.length>0?Bu(s.errors):fo.svalue(s.values)}},rc=t=>qc(t)&&ko(t).length>100?" removed due to size":JSON.stringify(t,null,2),py=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:te("... (only showing first ten failures)")}]):t;return Ae(s,c=>"Failed path: ("+c.path.join(" > ")+`)
`+c.getErrorInfo())},Fl=(t,s)=>fo.serror([{path:t,getErrorInfo:s}]),ya=(t,s,c)=>Fl(t,()=>'Could not find valid *required* value for "'+s+'" in '+rc(c)),rk=(t,s)=>Fl(t,()=>'Choice schema did not contain choice key: "'+s+'"'),Ya=(t,s,c)=>Fl(t,()=>'The chosen schema: "'+c+'" did not exist in branches: '+rc(s)),Lb=(t,s)=>Fl(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),ip=(t,s)=>Fl(t,te(s)),ke=t=>{const s=(i,d)=>fo.bindError(t(d),g=>ip(i,g)),c=te("val");return{extract:s,toString:c}},Hb=ke(fo.svalue),by=(t,s,c,i)=>at(s,c).fold(()=>ya(t,c,s),i),Ca=(t,s,c,i)=>{const d=at(t,s).getOrThunk(()=>c(t));return i(d)},zf=(t,s,c)=>c(at(t,s)),zb=(t,s,c,i)=>{const d=at(t,s).map(g=>g===!0?c(t):g);return i(d)},go=(t,s,c,i,d)=>{const g=C=>d.extract(s.concat([i]),C),b=C=>C.fold(()=>fo.svalue(A.none()),S=>{const E=d.extract(s.concat([i]),S);return fo.map(E,A.some)});switch(t.tag){case"required":return by(s,c,i,g);case"defaultedThunk":return Ca(c,i,t.process,g);case"option":return zf(c,i,b);case"defaultedOptionThunk":return zb(c,i,t.process,b);case"mergeWithThunk":return Ca(c,i,te({}),C=>{const S=ro(t.process(c),C);return g(S)})}},vy=(t,s,c)=>{const i={},d=[];for(const g of c)Fb(g,(b,C,S,E)=>{const T=go(S,t,s,b,E);fo.fold(T,O=>{d.push(...O)},O=>{i[C]=O})},(b,C)=>{i[b]=C(s)});return d.length>0?fo.serror(d):fo.svalue(i)},_c=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),Qn=t=>ko(Z2(t,Ar)),Rr=t=>{const s=ot(t),c=Ks(t,(d,g)=>Fb(g,b=>ro(d,{[b]:!0}),te(d)),{});return{extract:(d,g)=>{const b=Ai(g)?[]:Qn(g),C=Xt(b,S=>!vs(c,S));return C.length===0?s.extract(d,g):Lb(d,C)},toString:s.toString}},ot=t=>({extract:(i,d)=>vy(i,d,t),toString:()=>`obj{
`+Ae(t,d=>Fb(d,(g,b,C,S)=>g+" -> "+S.toString(),(g,b)=>"state("+g+")")).join(`
`)+"}"}),Ss=t=>({extract:(i,d)=>{const g=Ae(d,(b,C)=>t.extract(i.concat(["["+C+"]"]),b));return Tc.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Vb=(t,s)=>{const c=s!==void 0?s:Wt;return{extract:(g,b)=>{const C=[];for(const S of t){const E=S.extract(g,b);if(E.stype===Jn.Value)return{stype:Jn.Value,svalue:c(E.svalue)};C.push(E)}return Tc.consolidateArr(C)},toString:()=>"oneOf("+Ae(t,g=>g.toString()).join(", ")+")"}},ck=(t,s)=>{const c=(g,b)=>Ss(ke(t)).extract(g,b);return{extract:(g,b)=>{const C=ko(b),S=c(g,C);return fo.bind(S,E=>{const T=Ae(E,O=>my(O,O,zr(),s));return ot(T).extract(g,b)})},toString:()=>"setOf("+s.toString()+")"}},yy=(t,s)=>{const c=is(s);return{extract:(g,b)=>c().extract(g,b),toString:()=>c().toString()}},Zb=Vh(Ss,ot),Oc=te(Hb),lp=(t,s)=>ke(c=>{const i=typeof c;return t(c)?fo.svalue(c):fo.serror(`Expected type: ${s} but got: ${i}`)}),Vf=lp(_i,"number"),ho=lp(wn,"string"),wa=lp(Ai,"boolean"),up=lp(nt,"function"),Zf=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Zf(t[s]));default:return!1}},ak=ke(t=>Zf(t)?fo.svalue(t):fo.serror("Expected value to be acceptable for sending via postMessage")),Uf=(t,s,c,i)=>at(c,i).fold(()=>Ya(t,c,i),g=>g.extract(t.concat(["branch: "+i]),s)),Il=(t,s)=>({extract:(d,g)=>at(g,t).fold(()=>rk(d,t),C=>Uf(d,g,s,C)),toString:()=>"chooseOn("+t+"). Possible values: "+ko(s)}),Mu=()=>Ss(Hb),Qd=t=>ke(s=>t(s).fold(fo.serror,fo.svalue)),Cy=(t,s)=>ck(c=>fo.fromResult(t(c)),s),$u=(t,s,c)=>{const i=s.extract([t],c);return fo.mapError(i,d=>({input:c,errors:d}))},jt=(t,s,c)=>fo.toResult($u(t,s,c)),Ja=t=>t.fold(s=>{throw new Error(Nu(s))},Wt),gr=(t,s,c)=>Ja(jt(t,s,c)),Nu=t=>`Errors: 
`+py(t.errors).join(`
`)+`

Input object: `+rc(t.input),Dc=(t,s)=>Il(t,Lo(s,ot)),wy=(t,s)=>yy(t,s),ks=my,nr=fy,Ub=t=>Qd(s=>qo(t,s)?St.value(s):St.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),pe=t=>ks(t,t,zr(),Oc()),us=(t,s)=>ks(t,t,zr(),s),xa=t=>us(t,Vf),Qo=t=>us(t,ho),em=(t,s)=>ks(t,t,zr(),Ub(s)),Pu=t=>us(t,wa),Fi=t=>us(t,up),Wb=(t,s)=>ks(t,t,Ib(),ke(c=>fo.serror("The field: "+t+" is forbidden. "+s))),cc=(t,s)=>ks(t,t,zr(),ot(s)),dp=(t,s)=>ks(t,t,zr(),Zb(s)),hr=(t,s)=>ks(t,t,zr(),Ss(s)),nn=t=>ks(t,t,Ib(),Oc()),Ii=(t,s)=>ks(t,t,Ib(),s),Fu=t=>Ii(t,Vf),pr=t=>Ii(t,ho),Iu=(t,s)=>Ii(t,Ub(s)),Vo=t=>Ii(t,up),tm=(t,s)=>Ii(t,Ss(s)),Vr=(t,s)=>Ii(t,ot(s)),jb=(t,s)=>Ii(t,Rr(s)),ee=(t,s)=>ks(t,t,Jd(s),Oc()),Qc=(t,s,c)=>ks(t,t,Jd(s),c),Gb=(t,s)=>Qc(t,s,Vf),ac=(t,s)=>Qc(t,s,ho),Li=(t,s,c)=>Qc(t,s,Ub(c)),ic=(t,s)=>Qc(t,s,wa),es=(t,s)=>Qc(t,s,up),qb=(t,s)=>Qc(t,s,ak),Hi=(t,s,c)=>Qc(t,s,Ss(c)),Kb=(t,s,c)=>Qc(t,s,ot(c)),Ye=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},Es={generate:t=>{if(!Ei(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],c={};return R(t,(i,d)=>{const g=ko(i);if(g.length!==1)throw new Error("one and only one name per case");const b=g[0],C=i[b];if(c[b]!==void 0)throw new Error("duplicate key detected:"+b);if(b==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ei(C))throw new Error("case arguments must be an array");s.push(b),c[b]=(...S)=>{const E=S.length;if(E!==C.length)throw new Error("Wrong number of arguments to case "+b+". Expected "+C.length+" ("+C+"), got "+E);return{fold:(...O)=>{if(O.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+O.length);return O[d].apply(null,S)},match:O=>{const N=ko(O);if(s.length!==N.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+N.join(","));if(!Ys(s,z=>qo(N,z)))throw new Error("Not all branches were specified when using match. Specified: "+N.join(", ")+`
Required: `+s.join(", "));return O[b].apply(null,S)},log:O=>{console.log(O,{constructors:s,constructor:b,params:S})}}}}),c}};Es.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Yb=t=>{const s=[],c=[];return R(t,i=>{i.fold(d=>{s.push(d)},d=>{c.push(d)})}),{errors:s,values:c}},Ll=(t,s)=>{const c={};return Xo(t,(i,d)=>{qo(s,d)||(c[d]=i)}),c},Lu=(t,s)=>({[t]:s}),nm=t=>{const s={};return R(t,c=>{s[c.key]=c.value}),s},As=(t,s)=>Ll(t,s),Hl=(t,s)=>Lu(t,s),om=t=>nm(t),mp=(t,s)=>t.length===0?St.value(s):St.value(ro(s,Ft.apply(void 0,t))),fp=t=>St.error(ve(t)),xy=(t,s)=>{const c=Yb(t);return c.errors.length>0?fp(c.errors):mp(c.values,s)},Wf=t=>nt(t)?t:kn,jf=(t,s,c)=>{let i=t.dom;const d=Wf(c);for(;i.parentNode;){i=i.parentNode;const g=ze.fromDom(i),b=s(g);if(b.isSome())return b;if(d(g))break}return A.none()},Gf=(t,s,c)=>{const i=s(t),d=Wf(c);return i.orThunk(()=>d(t)?A.none():jf(t,s,d))},sm=(t,s)=>Wn(t.element,s.event.target),Jb={can:dt,abort:kn,run:X},zl=t=>{if(!vs(t,"can")&&!vs(t,"abort")&&!vs(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Jb,...t}},ik=(t,s)=>(...c)=>Xs(t,(i,d)=>i&&s(d).apply(void 0,c),!0),lk=(t,s)=>(...c)=>Xs(t,(i,d)=>i||s(d).apply(void 0,c),!1),uk=t=>nt(t)?{can:dt,abort:kn,run:t}:t,dk=t=>{const s=ik(t,d=>d.can),c=lk(t,d=>d.abort);return{can:s,abort:c,run:(...d)=>{R(t,g=>{g.run.apply(void 0,d)})}}},Zo=te,Qa=Zo("touchstart"),qf=Zo("touchmove"),Br=Zo("touchend"),Kf=Zo("touchcancel"),Hs=Zo("mousedown"),ei=Zo("mousemove"),rm=Zo("mouseout"),gp=Zo("mouseup"),ti=Zo("mouseover"),Vl=Zo("focusin"),Hu=Zo("focusout"),Xf=Zo("keydown"),Sy=Zo("keyup"),zu=Zo("input"),cm=Zo("change"),Yf=Zo("click"),ky=Zo("transitioncancel"),Jf=Zo("transitionend"),hp=Zo("transitionstart"),Ey=Zo("selectstart"),po=t=>te("alloy."+t),mk={tap:po("tap")},Zl=po("focus"),$o=po("blur.post"),Qb=po("paste.post"),Sa=po("receive"),lc=po("execute"),zi=po("focus.item"),Qf=mk.tap,fk=po("longpress"),pp=po("sandbox.close"),eg=po("typeahead.cancel"),bp=po("system.init"),vp=po("system.touchmove"),yp=po("system.touchend"),e0=po("system.scroll"),tg=po("system.resize"),Vi=po("system.attached"),ea=po("system.detached"),Ul=po("system.dismissRequested"),ng=po("system.repositionRequested"),og=po("focusmanager.shifted"),sg=po("slotcontainer.visibility"),Cp=po("change.tab"),Ay=po("dismiss.tab"),t0=po("highlight"),am=po("dehighlight"),mn=(t,s)=>{Zi(t,t.element,s,{})},lt=(t,s,c)=>{Zi(t,t.element,s,c)},uc=t=>{mn(t,lc())},im=(t,s,c)=>{Zi(t,s,c,{})},Zi=(t,s,c,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(c,s,d)},gk=(t,s,c,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(c,s,d)},Vu=(t,s,c,i)=>{t.getSystem().triggerEvent(c,s,i.event)},Bt=t=>om(t),wp=(t,s)=>({key:t,value:zl({abort:s})}),xp=(t,s)=>({key:t,value:zl({can:s})}),Ty=t=>({key:t,value:zl({run:(s,c)=>{c.event.prevent()}})}),fe=(t,s)=>({key:t,value:zl({run:s})}),ni=(t,s,c)=>({key:t,value:zl({run:(i,d)=>{s.apply(void 0,[i,d].concat(c))}})}),rg=t=>s=>fe(t,s),Sp=t=>s=>({key:t,value:zl({run:(c,i)=>{sm(c,i)&&s(c,i)}})}),n0=(t,s)=>fe(t,(c,i)=>{c.getSystem().getByUid(s).each(d=>{Vu(d,d.element,t,i)})}),Rc=(t,s,c)=>{const i=s.partUids[c];return n0(t,i)},lm=(t,s)=>fe(t,(c,i)=>{const d=i.event,g=c.getSystem().getByDom(d.target).getOrThunk(()=>Gf(d.target,C=>c.getSystem().getByDom(C).toOptional(),kn).getOr(c));s(c,g,i)}),Zu=t=>fe(t,(s,c)=>{c.cut()}),o0=t=>fe(t,(s,c)=>{c.stop()}),Zr=(t,s)=>Sp(t)(s),bo=Sp(Vi()),ka=Sp(ea()),s0=Sp(bp()),Ui=rg(lc()),hk=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,To(ze.fromDom(i))},Wi=t=>t.dom.innerHTML,oi=(t,s)=>{const i=Yc(t).dom,d=ze.fromDom(i.createDocumentFragment()),g=hk(s,i);qa(d,g),qd(t),oc(t,d)},_y=t=>{const s=ze.fromTag("div"),c=ze.fromDom(t.dom.cloneNode(!0));return oc(s,c),Wi(s)},um=(t,s)=>ze.fromDom(t.dom.cloneNode(s)),pk=t=>um(t,!1),Uu=t=>{if(Yh(t))return"#shadow-root";{const s=pk(t);return _y(s)}},si=t=>Uu(t),bk=(t,s,c)=>Wn(s,t.element)&&!Wn(s,c),dm=Bt([xp(Zl(),(t,s)=>{const c=s.event,i=c.originator,d=c.target;return bk(t,i,d)?(console.warn(Zl()+` did not get interpreted by the desired target. 
Originator: `+si(i)+`
Target: `+si(d)+`
Check the `+Zl()+" event handlers"),!1):!0})]);var Oy=Object.freeze({__proto__:null,events:dm});let Wu=0;const Ke=t=>{const c=new Date().getTime(),i=Math.floor(Math.random()*1e9);return Wu++,t+"_"+i+Wu+String(c)},mm=te("alloy-id-"),r0=te("data-alloy-id"),c0=mm(),cg=r0(),kp=(t,s)=>{const c=Ke(c0+t);return yn(s,c),c},yn=(t,s)=>{Object.defineProperty(t.dom,cg,{value:s,writable:!0})},ag=t=>{const s=Ao(t)?t.dom[cg]:null;return A.from(s)},ju=t=>Ke(t),a0=Wt,Gu=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+si(t().element)+" is not in context.":""),c=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:te("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:c("build"),buildOrPatch:c("buildOrPatch"),addToWorld:c("addToWorld"),removeFromWorld:c("removeFromWorld"),addToGui:c("addToGui"),removeFromGui:c("removeFromGui"),getByUid:c("getByUid"),getByDom:c("getByDom"),isConnected:kn}},Dy=Gu(),Ea=(t,s,c)=>{const i=c.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),b=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:_o(b.slice(0,1).concat(b.slice(3)))}),t},_o=t=>Ae(t,s=>Cu(s,"/*")?s.substring(0,s.length-2):s),Ep=(t,s)=>{const c=t.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:_o(g)}),t},Ry=(t,s)=>{const c=s.toString(),i=c.indexOf(")")+1,d=c.indexOf("("),g=c.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:_o(g.slice(1))}),t},ji=Ke("alloy-premade"),i0=t=>(Object.defineProperty(t.element.dom,ji,{value:t.uid,writable:!0}),Hl(ji,t)),vk=t=>tn(t.dom,ji),ig=t=>at(t,ji),Ap=t=>Ry((s,...c)=>t(s.getApis(),s,...c),t),Aa={init:()=>dc({readState:te("No State required")})},dc=t=>t,Tp=(t,s)=>{const c=Ae(s,d=>Vr(d.name(),[pe("config"),ee("state",Aa)])),i=jt("component.behaviours",ot(c),t.behaviours).fold(d=>{throw new Error(Nu(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Wt);return{list:s,data:Lo(i,d=>{const g=d.map(b=>({config:b.config,state:b.state.init(b.config)}));return te(g)})}},yk=t=>t.list,f_=t=>t.data,ta=(t,s)=>{const c={};return Xo(t,(i,d)=>{Xo(i,(g,b)=>{const C=at(c,b).getOr([]);c[b]=C.concat([s(d,g)])})}),c},eo=t=>({classes:Jr(t.classes)?[]:t.classes,attributes:Jr(t.attributes)?{}:t.attributes,styles:Jr(t.styles)?{}:t.styles}),Ck=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),wk=(t,s,c,i)=>{const d={...s};R(c,T=>{d[T.name()]=T.exhibit(t,i)});const g=ta(d,(T,O)=>({name:T,modification:O})),b=T=>Ks(T,(O,N)=>({...N.modification,...O}),{}),C=Ks(g.classes,(T,O)=>O.modification.concat(T),[]),S=b(g.attributes),E=b(g.styles);return eo({classes:C,attributes:S,styles:E})},Gi=(t,s,c,i)=>{try{const d=Ko(c,(g,b)=>{const C=g[s],S=b[s],E=i.indexOf(C),T=i.indexOf(S);if(E===-1)throw new Error("The ordering for "+t+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(T===-1)throw new Error("The ordering for "+t+" does not have an entry for "+S+`.
Order specified: `+JSON.stringify(i,null,2));return E<T?-1:T<E?1:0});return St.value(d)}catch(d){return St.error([d])}},_p=(t,s)=>({handler:t,purpose:s}),l0=(t,s)=>({cHandler:t,purpose:s}),qi=(t,s)=>l0(en.apply(void 0,[t.handler].concat(s)),t.purpose),Ki=t=>t.cHandler,Xi=(t,s)=>({name:t,handler:s}),qu=(t,s)=>{const c={};return R(t,i=>{c[i.name()]=i.handlers(s)}),c},Ku=(t,s,c)=>{const i={...c,...qu(s,t)};return ta(i,Xi)},No=(t,s,c,i)=>{const d=Ku(t,c,i);return My(d,s)},By=t=>{const s=uk(t);return(c,i,...d)=>{const g=[c,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},Op=(t,s)=>St.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ae(s,c=>c.name),null,2)]),xk=(t,s,c)=>{const i=s[c];return i?Gi("Event: "+c,"name",t,i).map(d=>{const g=Ae(d,b=>b.handler);return dk(g)}):Op(c,t)},My=(t,s)=>{const c=gn(t,(i,d)=>(i.length===1?St.value(i[0].handler):xk(i,s,d)).map(b=>{const C=By(b),S=i.length>1?Xt(s[d],E=>In(i,T=>T.name===E)).join(" > "):i[0].name;return Hl(d,_p(C,S))}));return xy(c,{})},Mr="alloy.base.behaviour",ri=ot([ks("dom","dom",zr(),ot([pe("tag"),ee("styles",{}),ee("classes",[]),ee("attributes",{}),nn("value"),nn("innerHtml")])),pe("components"),pe("uid"),ee("events",{}),ee("apis",{}),ks("eventOrder","eventOrder",gy({[lc()]:["disabling",Mr,"toggling","typeaheadevents"],[Zl()]:[Mr,"focusing","keying"],[bp()]:[Mr,"disabling","toggling","representing"],[zu()]:[Mr,"representing","streaming","invalidating"],[ea()]:[Mr,"representing","item-events","tooltipping"],[Hs()]:["focusing",Mr,"item-type-events"],[Qa()]:["focusing",Mr,"item-type-events"],[ti()]:["item-type-events","tooltipping"],[Sa()]:["receiving","reflecting","tooltipping"]}),Oc()),nn("domModification")]),Sk=t=>jt("custom.definition",ri,t),$y=t=>({...t.dom,uid:t.uid,domChildren:Ae(t.components,s=>s.element)}),kk=t=>t.domModification.fold(()=>eo({}),eo),Ny=t=>t.events,Dp=(t,s)=>{const c=Yn(t,s);return c===void 0||c===""?[]:c.split(" ")},Py=(t,s,c)=>{const d=Dp(t,s).concat([c]);return Ot(t,s,d.join(" ")),!0},Ek=(t,s,c)=>{const i=Xt(Dp(t,s),d=>d!==c);return i.length>0?Ot(t,s,i.join(" ")):Cs(t,s),!1},fm=t=>t.dom.classList!==void 0,Xu=t=>Dp(t,"class"),u0=(t,s)=>Py(t,"class",s),Fy=(t,s)=>Ek(t,"class",s),ds=(t,s)=>{fm(t)?t.dom.classList.add(s):u0(t,s)},lg=t=>{(fm(t)?t.dom.classList:Xu(t)).length===0&&Cs(t,"class")},Vn=(t,s)=>{fm(t)?t.dom.classList.remove(s):Fy(t,s),lg(t)},Ts=(t,s)=>fm(t)&&t.dom.classList.contains(s),mc=(t,s)=>{R(s,c=>{ds(t,c)})},fc=(t,s)=>{R(s,c=>{Vn(t,c)})},Ak=(t,s)=>Ys(s,c=>Ts(t,c)),Iy=t=>{const s=t.dom.classList,c=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(c[i]=d)}return c},ug=t=>fm(t)?Iy(t):Xu(t),or=t=>t.dom.value,Yu=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},Tk=(t,s,c)=>ec(t,s).map(d=>{if(c.exists(b=>!Wn(b,d))){const b=c.map(bn).getOr("span"),C=ze.fromTag(b);return Du(d,C),C}else return d}),d0=(t,s,c)=>{c.fold(()=>oc(t,s),i=>{Wn(i,s)||(Du(i,s),Ml(i))})},m0=(t,s,c)=>{const i=Ae(s,c),d=To(t);return R(d.slice(i.length),Ml),i},Ly=(t,s,c,i)=>{const d=ec(t,s),g=i(c,d),b=Tk(t,s,d);return d0(t,g.element,b),g},dg=(t,s,c)=>m0(t,s,(i,d)=>Ly(t,d,i,c)),Yi=(t,s)=>m0(t,s,(c,i)=>{const d=ec(t,i);return d0(t,c,d),c}),Hy=(t,s)=>{const c=ko(t),i=ko(s),d=fa(i,c),g=El(t,(b,C)=>!tn(s,C)||b!==s[C]).t;return{toRemove:d,toSet:g}},zy=(t,s)=>{const{class:c,style:i,...d}=ek(s),{toSet:g,toRemove:b}=Hy(t.attributes,d),C=()=>{R(b,Le=>Cs(s,Le)),ln(s,g)},S=Fs(s),{toSet:E,toRemove:T}=Hy(t.styles,S),O=()=>{R(T,Le=>Vt(s,Le)),Mi(s,E)},N=ug(s),P=fa(N,t.classes),z=fa(t.classes,N),j=()=>{mc(s,z),fc(s,P)},oe=Le=>{oi(s,Le)},Y=()=>{const Le=t.domChildren;Yi(s,Le)},se=()=>{const Le=s,ue=t.value.getOrUndefined();ue!==or(Le)&&Yu(Le,ue!=null?ue:"")};return C(),j(),O(),t.innerHtml.fold(Y,oe),se(),s},Vy=t=>{const s=ze.fromTag(t.tag);ln(s,t.attributes),mc(s,t.classes),Mi(s,t.styles),t.innerHtml.each(i=>oi(s,i));const c=t.domChildren;return qa(s,c),t.value.each(i=>{Yu(s,i)}),s},Zy=(t,s)=>{try{const c=zy(t,s);return A.some(c)}catch{return A.none()}},_k=t=>t.innerHtml.isSome()&&t.domChildren.length>0,Uy=(t,s)=>{const c=d=>bn(d)===t.tag&&!_k(t)&&!vk(d),i=s.filter(c).bind(d=>Zy(t,d)).getOrThunk(()=>Vy(t));return yn(i,t.uid),i},Ok=t=>{const s=at(t,"behaviours").getOr({});return So(ko(s),c=>{const i=s[c];return Ar(i)?[i.me]:[]})},Wy=(t,s)=>Tp(t,s),jy=t=>{const s=Ok(t);return Wy(t,s)},mg=(t,s,c)=>{const i=$y(t),d=kk(t),g={"alloy.base.modification":d},b=s.length>0?wk(c,g,s,i):d;return Ck(i,b)},Dk=(t,s,c)=>{const i={"alloy.base.behaviour":Ny(t)};return No(c,t.eventOrder,s,i).getOrDie()},gm=(t,s)=>{const c=()=>Le,i=Ye(Dy),d=Ja(Sk(t)),g=jy(t),b=yk(g),C=f_(g),S=mg(d,b,C),E=Uy(S,s),T=Dk(d,b,C),O=Ye(d.components),N=ue=>{i.set(ue)},P=()=>{i.set(Gu(c))},z=()=>{const ue=To(E),Ve=So(ue,Xe=>i.get().getByDom(Xe).fold(()=>[],hb));O.set(Ve)},j=ue=>{const Ve=C;return(nt(Ve[ue.name()])?Ve[ue.name()]:()=>{throw new Error("Could not find "+ue.name()+" in "+JSON.stringify(t,null,2))})()},oe=ue=>nt(C[ue.name()]),Y=()=>d.apis,se=ue=>C[ue]().map(Ve=>Ve.state.readState()).getOr("not enabled"),Le={uid:t.uid,getSystem:i.get,config:j,hasConfigured:oe,spec:t,readState:se,getApis:Y,connect:N,disconnect:P,element:E,syncComponents:z,components:O.get,events:T};return Le},f0=(t,s)=>{const c=at(t,"components").getOr([]);return s.fold(()=>Ae(c,br),i=>Ae(c,(d,g)=>pm(d,ec(i,g))))},Gy=(t,s)=>{const{events:c,...i}=a0(t),d=f0(i,s),g={...i,events:{...Oy,...c},components:d};return St.value(gm(g,s))},vo=t=>{const s=ze.fromText(t);return hm({element:s})},hm=t=>{const s=gr("external.component",Rr([pe("element"),nn("uid")]),t),c=Ye(Gu()),i=C=>{c.set(C)},d=()=>{c.set(Gu(()=>b))},g=s.uid.getOrThunk(()=>ju("external"));yn(s.element,g);const b={uid:g,getSystem:c.get,config:A.none,hasConfigured:kn,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:te("No state"),syncComponents:X,components:te([]),events:{}};return i0(b)},Rp=ju,qy=t=>tn(t,"uid"),pm=(t,s)=>ig(t).getOrThunk(()=>{const c=qy(t)?t:{uid:Rp(""),...t};return Gy(c,s).getOrDie()}),br=t=>pm(t,A.none()),Bc=i0;var Ky=(t,s,c,i,d)=>t(c,i)?A.some(c):nt(d)&&d(c)?A.none():s(c,i,d);const Ur=(t,s,c)=>{let i=t.dom;const d=nt(c)?c:kn;for(;i.parentNode;){i=i.parentNode;const g=ze.fromDom(i);if(s(g))return A.some(g);if(d(g))break}return A.none()},Ju=(t,s,c)=>Ky((d,g)=>g(d),Ur,t,s,c),bm=(t,s)=>{const c=d=>s(ze.fromDom(d));return Yt(t.dom.childNodes,c).map(ze.fromDom)},le=(t,s)=>{const c=i=>{for(let d=0;d<i.childNodes.length;d++){const g=ze.fromDom(i.childNodes[d]);if(s(g))return A.some(g);const b=c(i.childNodes[d]);if(b.isSome())return b}return A.none()};return c(t.dom)},fg=(t,s,c)=>Ju(t,s,c).isSome(),gg=(t,s,c)=>Ur(t,i=>Kh(i,s),c),Rk=(t,s)=>bm(t,c=>Kh(c,s)),Uo=(t,s)=>j2(s,t),ms=(t,s,c)=>Ky((d,g)=>Kh(d,g),gg,t,s,c),vm="aria-controls",Xy=t=>Ju(t,c=>{if(!Ao(c))return!1;const i=Yn(c,"id");return i!==void 0&&i.indexOf(vm)>-1}).bind(c=>{const i=Yn(c,"id"),d=tc(c);return Uo(d,`[${vm}="${i}"]`)}),g0=()=>{const t=Ke(vm);return{id:t,link:i=>{Ot(i,vm,t)},unlink:i=>{Cs(i,vm)}}},hg=(t,s)=>Xy(s).exists(c=>Wl(t,c)),Wl=(t,s)=>fg(s,c=>Wn(c,t.element),kn)||hg(t,s),h0="unknown";var ym;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(ym||(ym={}));const Bp=Ye({}),Cm=(t,s)=>{const c=[],i=new Date().getTime();return{logEventCut:(d,g,b)=>{c.push({outcome:"cut",target:g,purpose:b})},logEventStopped:(d,g,b)=>{c.push({outcome:"stopped",target:g,purpose:b})},logNoParent:(d,g,b)=>{c.push({outcome:"no-parent",target:g,purpose:b})},logEventNoHandlers:(d,g)=>{c.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,b)=>{c.push({outcome:"response",purpose:b,target:g})},write:()=>{const d=new Date().getTime();qo(["mousemove","mouseover","mouseout",bp()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Ae(c,g=>qo(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+si(g.target)+")":g.outcome)})}}},p0=(t,s,c)=>{switch(at(Bp.get(),t).orThunk(()=>{const d=ko(Bp.get());return Fr(d,g=>t.indexOf(g)>-1?A.some(Bp.get()[g]):A.none())}).getOr(ym.NORMAL)){case ym.NORMAL:return c(Bk());case ym.LOGGING:{const d=Cm(t,s),g=c(d);return d.write(),g}case ym.STOP:return!0}},Yy=["alloy/data/Fields","alloy/debugging/Debugging"],Jy=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return Yt(s,c=>c.indexOf("alloy")>0&&!In(Yy,i=>c.indexOf(i)>-1)).getOr(h0)}else return h0},Qy={logEventCut:X,logEventStopped:X,logNoParent:X,logEventNoHandlers:X,logEventResponse:X,write:X},wm=(t,s,c)=>p0(t,s,c),Bk=te(Qy),Mp=te([pe("menu"),pe("selectedMenu")]),eC=te([pe("item"),pe("selectedItem")]);te(ot(eC().concat(Mp())));const vr=te(ot(eC())),tC=cc("initSize",[pe("numColumns"),pe("numRows")]),nC=()=>us("markers",vr()),pg=()=>cc("markers",[pe("backgroundMenu")].concat(Mp()).concat(eC())),Qu=t=>cc("markers",Ae(t,pe)),ed=(t,s,c)=>(Jy(),ks(s,s,c,Qd(i=>St.value((...d)=>i.apply(void 0,d))))),Gt=t=>ed("onHandler",t,Jd(X)),Wr=t=>ed("onKeyboardHandler",t,Jd(A.none)),jl=t=>ed("onHandler",t,zr()),$p=t=>ed("onKeyboardHandler",t,zr()),Mn=(t,s)=>nr(t,te(s)),bg=t=>nr(t,Wt),xm=te(tC),fs=(t,s,c,i,d,g,b,C=!1)=>({x:t,y:s,bubble:c,direction:i,placement:d,restriction:g,label:`${b}-${d}`,alwaysFit:C}),td=Es.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Zn=(t,s,c,i,d,g,b,C,S)=>t.fold(s,c,i,d,g,b,C,S),b0=(t,s,c,i)=>t.fold(s,s,i,i,s,i,c,c),ci=(t,s,c,i)=>t.fold(s,i,s,i,c,c,s,i),Np=td.southeast,v0=td.southwest,y0=td.northeast,C0=td.northwest,w0=td.south,x0=td.north,oC=td.east,vg=td.west,Sm=(t,s,c,i)=>{const d=t+s;return d>i?c:d<c?i:d},jr=(t,s,c)=>Math.min(Math.max(t,s),c),Mk=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},_s=(t,s)=>oo(["left","right","top","bottom"],c=>at(s,c).map(i=>Mk(t,i))),$k=(t,s,c)=>{const i=(S,E)=>s[S].map(T=>{const O=S==="top"||S==="bottom",N=O?c.top:c.left,z=(S==="left"||S==="top"?Math.max:Math.min)(T,E)+N;return O?jr(z,t.y,t.bottom):jr(z,t.x,t.right)}).getOr(E),d=i("left",t.x),g=i("top",t.y),b=i("right",t.right),C=i("bottom",t.bottom);return xs(d,g,b-d,C-g)},Ji="layout",We=t=>t.x,Pp=(t,s)=>t.x+t.width/2-s.width/2,km=(t,s)=>t.x+t.width-s.width,S0=(t,s)=>t.y-s.height,k0=t=>t.y+t.height,sC=(t,s)=>t.y+t.height/2-s.height/2,rC=t=>t.x+t.width,Nk=(t,s)=>t.x-s.width,zs=(t,s,c)=>fs(We(t),k0(t),c.southeast(),Np(),"southeast",_s(t,{left:1,top:3}),Ji),Os=(t,s,c)=>fs(km(t,s),k0(t),c.southwest(),v0(),"southwest",_s(t,{right:0,top:3}),Ji),sr=(t,s,c)=>fs(We(t),S0(t,s),c.northeast(),y0(),"northeast",_s(t,{left:1,bottom:2}),Ji),Un=(t,s,c)=>fs(km(t,s),S0(t,s),c.northwest(),C0(),"northwest",_s(t,{right:0,bottom:2}),Ji),Vs=(t,s,c)=>fs(Pp(t,s),S0(t,s),c.north(),x0(),"north",_s(t,{bottom:2}),Ji),gs=(t,s,c)=>fs(Pp(t,s),k0(t),c.south(),w0(),"south",_s(t,{top:3}),Ji),Fp=(t,s,c)=>fs(rC(t),sC(t,s),c.east(),oC(),"east",_s(t,{left:0}),Ji),Ip=(t,s,c)=>fs(Nk(t,s),sC(t,s),c.west(),vg(),"west",_s(t,{right:1}),Ji),cC=()=>[zs,Os,sr,Un,gs,Vs,Fp,Ip],E0=()=>[Os,zs,Un,sr,gs,Vs,Fp,Ip],yg=()=>[sr,Un,zs,Os,Vs,gs],Em=()=>[Un,sr,Os,zs,Vs,gs],A0=()=>[zs,Os,sr,Un,gs,Vs],Lp=()=>[Os,zs,Un,sr,gs,Vs],Pk=(t,s)=>s.universal?t:Xt(t,c=>qo(s.channels,c));var Fk=Object.freeze({__proto__:null,events:t=>Bt([fe(Sa(),(s,c)=>{const i=t.channels,d=ko(i),g=c,b=Pk(d,g);R(b,C=>{const S=i[C],E=S.schema,T=gr("channel["+C+`] data
Receiver: `+si(s.element),E,g.data);S.onReceive(s,T)})})])}),Ik=[us("channels",Cy(St.value,Rr([jl("onReceive"),ee("schema",Oc())])))];const Lk=(t,s,c)=>Ui(i=>{c(i,t,s)}),T0=(t,s,c)=>s0((i,d)=>{c(i,t,s)}),_0=(t,s,c,i,d,g)=>{const b=Rr(t),C=Vr(s,[jb("config",t)]);return lC(b,C,s,c,i,d,g)},aC=(t,s,c,i,d,g)=>{const b=t,C=Vr(s,[Ii("config",t)]);return lC(b,C,s,c,i,d,g)},Hk=(t,s,c)=>Ea((d,...g)=>{const b=[d].concat(g);return d.config({name:te(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+c)},C=>{const S=Array.prototype.slice.call(b,1);return s.apply(void 0,[d,C.config,C.state].concat(S))})},c,s),iC=t=>({key:t,value:void 0}),lC=(t,s,c,i,d,g,b)=>{const C=O=>vs(O,c)?O[c]():A.none(),S=Lo(d,(O,N)=>Hk(c,O,N)),T={...Lo(g,(O,N)=>Ep(O,N)),...S,revoke:en(iC,c),config:O=>{const N=gr(c+"-config",t,O);return{key:c,value:{config:N,me:T,configAsRaw:is(()=>gr(c+"-config",t,O)),initialConfig:O,state:b}}},schema:te(s),exhibit:(O,N)=>Eo(C(O),at(i,"exhibit"),(P,z)=>z(N,P.config,P.state)).getOrThunk(()=>eo({})),name:te(c),handlers:O=>C(O).map(N=>at(i,"events").getOr(()=>({}))(N.config,N.state)).getOr({})};return T},Me=t=>om(t),zk=Rr([pe("fields"),pe("name"),ee("active",{}),ee("apis",{}),ee("state",Aa),ee("extra",{})]),ts=t=>{const s=gr("Creating behaviour: "+t.name,zk,t);return _0(s.fields,s.name,s.active,s.apis,s.extra,s.state)},Vk=Rr([pe("branchKey"),pe("branches"),pe("name"),ee("active",{}),ee("apis",{}),ee("state",Aa),ee("extra",{})]),uC=t=>{const s=gr("Creating behaviour: "+t.name,Vk,t);return aC(Dc(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},dC=te(void 0),na=ts({fields:Ik,name:"receiving",active:Fk});var mC=Object.freeze({__proto__:null,exhibit:(t,s)=>eo({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const Qi=t=>t.dom.focus(),nd=t=>t.dom.blur(),O0=t=>{const s=tc(t).dom;return t.dom===s.activeElement},yr=(t=sp())=>A.from(t.dom.activeElement).map(ze.fromDom),Ta=t=>yr(tc(t)).filter(s=>t.dom.contains(s.dom)),od=(t,s)=>{const c=tc(s),i=yr(c).bind(g=>{const b=C=>Wn(g,C);return b(s)?A.some(s):le(s,b)}),d=t(s);return i.each(g=>{yr(c).filter(b=>Wn(b,g)).fold(()=>{Qi(g)},X)}),d},_a=(t,s,c,i,d)=>{const g=b=>b+"px";return{position:t,left:s.map(g),top:c.map(g),right:i.map(g),bottom:d.map(g)}},Zk=t=>({...t,position:A.some(t.position)}),Cg=(t,s)=>{as(t,Zk(s))},Wo=Es.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),fC=(t,s,c,i,d,g)=>{const b=s.rect,C=b.x-c,S=b.y-i,E=b.width,T=b.height,O=d-(C+E),N=g-(S+T),P=A.some(C),z=A.some(S),j=A.some(O),oe=A.some(N),Y=A.none();return Zn(s.direction,()=>_a(t,P,z,Y,Y),()=>_a(t,Y,z,j,Y),()=>_a(t,P,Y,Y,oe),()=>_a(t,Y,Y,j,oe),()=>_a(t,P,z,Y,Y),()=>_a(t,P,Y,Y,oe),()=>_a(t,P,z,Y,Y),()=>_a(t,Y,z,j,Y))},el=(t,s)=>t.fold(()=>{const c=s.rect;return _a("absolute",A.some(c.x),A.some(c.y),A.none(),A.none())},(c,i,d,g)=>fC("absolute",s,c,i,d,g),(c,i,d,g)=>fC("fixed",s,c,i,d,g)),Hp=(t,s)=>{const c=en(Kd,s),i=t.fold(c,c,()=>{const b=Ka();return Kd(s).translate(-b.left,-b.top)}),d=Mo(s),g=Dl(s);return xs(i.left,i.top,d,g)},gC=(t,s)=>s.fold(()=>t.fold(Ac,Ac,xs),c=>t.fold(c,c,()=>{const i=c(),d=hC(t,i.x,i.y);return xs(d.left,d.top,i.width,i.height)})),hC=(t,s,c)=>{const i=zn(s,c),d=()=>{const g=Ka();return i.translate(-g.left,-g.top)};return t.fold(te(i),te(i),d)},Uk=(t,s,c,i)=>t.fold(s,c,i);Wo.none;const Wk=Wo.relative,pC=Wo.fixed,bC=(t,s)=>({anchorBox:t,origin:s}),vC=(t,s)=>bC(t,s),Gl="data-alloy-placement",yC=(t,s)=>{Ot(t,Gl,s)},D0=t=>Or(t,Gl),R0=t=>Cs(t,Gl),sd=Es.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),rd=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:b,y:C,right:S,bottom:E,width:T,height:O}=t,N=b>=c&&b<=d,P=C>=i&&C<=g,z=N&&P,j=S<=d&&S>=c,oe=E<=g&&E>=i,Y=j&&oe,se=Math.min(T,b>=c?d-b:S-c),Le=Math.min(O,C>=i?g-C:E-i);return{originInBounds:z,sizeInBounds:Y,visibleW:se,visibleH:Le}},wg=(t,s)=>{const{x:c,y:i,right:d,bottom:g}=s,{x:b,y:C,width:S,height:E}=t,T=Math.max(c,d-S),O=Math.max(i,g-E),N=jr(b,c,T),P=jr(C,i,O),z=Math.min(N+S,d)-N,j=Math.min(P+E,g)-P;return xs(N,P,z,j)},jk=(t,s,c)=>{const i=te(s.bottom-c.y),d=te(c.bottom-s.y),g=b0(t,d,d,i),b=te(s.right-c.x),C=te(c.right-s.x);return{maxWidth:ci(t,C,C,b),maxHeight:g}},CC=(t,s,c,i)=>{const d=t.bubble,g=d.offset,b=$k(i,t.restriction,g),C=t.x+g.left,S=t.y+g.top,E=xs(C,S,s,c),{originInBounds:T,sizeInBounds:O,visibleW:N,visibleH:P}=rd(E,b),z=T&&O,j=z?E:wg(E,b),oe=j.width>0&&j.height>0,{maxWidth:Y,maxHeight:se}=jk(t.direction,j,i),Le={rect:j,maxHeight:se,maxWidth:Y,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:S};return z||t.alwaysFit?sd.fit(Le):sd.nofit(Le,N,P,oe)},Gk=(t,s,c,i,d,g)=>{const b=i.width,C=i.height,S=(T,O,N,P,z)=>{const j=T(c,i,d,t,g),oe=CC(j,b,C,g);return oe.fold(te(oe),(Y,se,Le,ue)=>(z===ue?Le>P||se>N:!z&&ue)?oe:sd.nofit(O,N,P,z))};return Xs(s,(T,O)=>{const N=en(S,O);return T.fold(te(T),N)},sd.nofit({rect:c,maxHeight:i.height,maxWidth:i.width,direction:Np(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:c.y},-1,-1,!1)).fold(Wt,Wt)},B0=t=>{const s=Ye(A.none()),c=()=>s.get().each(t);return{clear:()=>{c(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{c(),s.set(A.some(C))}}},qk=()=>B0(t=>t.destroy()),cd=()=>B0(t=>t.unbind()),Kn=()=>{const t=B0(X);return{...t,on:c=>t.get().each(c)}},Am=dt,rr=(t,s,c)=>Ff(t,s,Am,c),wC=(t,s,c)=>Mb(t,s,Am,c),xC=tp,SC=["top","bottom","right","left"],zp="data-alloy-transition-timer",xg=(t,s)=>Ak(t,s.classes),kC=(t,s,c)=>c.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),p_=(t,s)=>{const c=i=>parseFloat(i).toFixed(3);return Uh(s,(i,d)=>{const g=t[d].map(c),b=i.map(c);return!GS(g,b)}).isSome()},ad=t=>{const s=g=>{const C=we(t,g).split(/\s*,\s*/);return Xt(C,xf)},c=g=>{if(wn(g)&&/^[\d.]+/.test(g)){const b=parseFloat(g);return Cu(g,"ms")?b:b*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return Xs(d,(g,b,C)=>{const S=c(i[C])+c(b);return Math.max(g,S)},0)},Kk=(t,s)=>{const c=cd(),i=cd();let d;const g=E=>{var T;const O=(T=E.raw.pseudoElement)!==null&&T!==void 0?T:"";return Wn(E.target,t)&&wu(O)&&qo(SC,E.raw.propertyName)},b=E=>{if(Ti(E)||g(E)){c.clear(),i.clear();const T=E==null?void 0:E.raw.type;(Ti(T)||T===Jf())&&(clearTimeout(d),Cs(t,zp),fc(t,s.classes))}},C=rr(t,hp(),E=>{g(E)&&(C.unbind(),c.set(rr(t,Jf(),b)),i.set(rr(t,ky(),b)))}),S=ad(t);requestAnimationFrame(()=>{d=setTimeout(b,S+17),Ot(t,zp,d)})},Xk=(t,s)=>{mc(t,s.classes),Or(t,zp).each(c=>{clearTimeout(parseInt(c,10)),Cs(t,zp)}),Kk(t,s)},EC=(t,s,c,i,d,g)=>{const b=kC(i,d,g);if(b||xg(t,i)){Tt(t,"position",c.position);const C=Hp(s,t),S=el(s,{...d,rect:C}),E=oo(SC,T=>S[T]);p_(c,E)&&(as(t,E),b&&Xk(t,i),ku(t))}else fc(t,i.classes)},Yk=t=>({width:Mo(t),height:Dl(t)}),AC=(t,s,c,i)=>{Vt(s,"max-height"),Vt(s,"max-width");const d=Yk(s);return Gk(s,i.preference,t,d,c,i.bounds)},M0=(t,s)=>{const c=s.classes;fc(t,c.off),mc(t,c.on)},Jk=(t,s,c)=>{const i=c.maxHeightFunction;i(t,s.maxHeight)},Qk=(t,s,c)=>{const i=c.maxWidthFunction;i(t,s.maxWidth)},e3=(t,s,c)=>{const i=el(c.origin,s);c.transition.each(d=>{EC(t,c.origin,i,d,s,c.lastPlacement)}),Cg(t,i)},t3=(t,s)=>{yC(t,s.placement)},$0=(t,s)=>{so(t,Math.floor(s))},n3=te((t,s)=>{$0(t,s),Mi(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Sg=te((t,s)=>{$0(t,s)}),Vp=(t,s,c)=>t[s]===void 0?c:t[s],N0=(t,s,c,i,d,g,b,C)=>{const S=Vp(b,"maxHeightFunction",n3()),E=Vp(b,"maxWidthFunction",X),T=t.anchorBox,O=t.origin,N={bounds:gC(O,g),origin:O,preference:i,maxHeightFunction:S,maxWidthFunction:E,lastPlacement:d,transition:C};return P0(T,s,c,N)},P0=(t,s,c,i)=>{const d=AC(t,s,c,i);return e3(s,d,i),t3(s,d),M0(s,d),Jk(s,d,i),Qk(s,d,i),{layout:d.layout,placement:d.placement}},F0=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],ql=(t,s,c,i=1)=>{const d=t*i,g=s*i,b=S=>at(c,S).getOr([]),C=(S,E,T)=>{const O=fa(F0,T);return{offset:zn(S,E),classesOn:So(T,b),classesOff:So(O,b)}};return{southeast:()=>C(-t,s,["top","alignLeft"]),southwest:()=>C(t,s,["top","alignRight"]),south:()=>C(-t/2,s,["top","alignCentre"]),northeast:()=>C(-t,-s,["bottom","alignLeft"]),northwest:()=>C(t,-s,["bottom","alignRight"]),north:()=>C(-t/2,-s,["bottom","alignCentre"]),east:()=>C(t,-s/2,["valignCentre","left"]),west:()=>C(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},id=()=>ql(0,0,{}),Kl=Wt,kg=(t,s)=>c=>TC(c)==="rtl"?s:t,TC=t=>we(t,"direction")==="rtl"?"rtl":"ltr";var tl;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(tl||(tl={}));const nl="data-alloy-vertical-dir",o3=t=>fg(t,s=>Ao(s)&&Yn(s,"data-alloy-vertical-dir")===tl.BottomToTop),Xl=()=>Vr("layouts",[pe("onLtr"),pe("onRtl"),nn("onBottomLtr"),nn("onBottomRtl")]),Zp=(t,s,c,i,d,g,b)=>{const C=b.map(o3).getOr(!1),S=s.layouts.map(P=>P.onLtr(t)),E=s.layouts.map(P=>P.onRtl(t)),T=C?s.layouts.bind(P=>P.onBottomLtr.map(z=>z(t))).or(S).getOr(d):S.getOr(c),O=C?s.layouts.bind(P=>P.onBottomRtl.map(z=>z(t))).or(E).getOr(g):E.getOr(i);return kg(T,O)(t)},s3=(t,s,c)=>{const i=s.hotspot,d=Hp(c,i.element),g=Zp(t.element,s,A0(),Lp(),yg(),Em(),A.some(s.hotspot.element));return A.some(Kl({anchorBox:d,bubble:s.bubble.getOr(id()),overrides:s.overrides,layouts:g,placer:A.none()}))};var I0=[pe("hotspot"),nn("bubble"),ee("overrides",{}),Xl(),Mn("placement",s3)];const r3=(t,s,c)=>{const i=hC(c,s.x,s.y),d=xs(i.left,i.top,s.width,s.height),g=Zp(t.element,s,cC(),E0(),cC(),E0(),A.none());return A.some(Kl({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g,placer:A.none()}))};var c3=[pe("x"),pe("y"),ee("height",0),ee("width",0),ee("bubble",id()),ee("overrides",{}),Xl(),Mn("placement",r3)];const L0=Es.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Eg=t=>t.fold(Wt,(s,c,i)=>s.translate(-c,-i)),Ag=t=>t.fold(Wt,Wt),_C=t=>Xs(t,(s,c)=>s.translate(c.left,c.top),zn(0,0)),H0=t=>{const s=Ae(t,Eg);return _C(s)},OC=t=>{const s=Ae(t,Ag);return _C(s)},DC=L0.screen,Tg=L0.absolute,z0=(t,s,c)=>{const i=Zd(c.root).dom,d=g=>{const b=Yc(g),C=Yc(t.element);return Wn(b,C)};return A.from(i.frameElement).map(ze.fromDom).filter(d).map(Ro)},Up=(t,s,c)=>{const i=Yc(t.element),d=Ka(i),g=z0(t,s,c).getOr(d);return Tg(g,d.left,d.top)},Wp=(t,s,c,i)=>{const d=DC(zn(t,s));return A.some(Pb(d,c,i))},V0=(t,s,c,i,d)=>t.map(g=>{const b=[s,g.point],C=Uk(i,()=>OC(b),()=>OC(b),()=>H0(b)),S=Xa(C.left,C.top,g.width,g.height),E=c.showAbove?yg():A0(),T=c.showAbove?Em():Lp(),O=Zp(d,c,E,T,E,T,A.none());return Kl({anchorBox:S,bubble:c.bubble.getOr(id()),overrides:c.overrides,layouts:O,placer:A.none()})}),Yl=(t,s,c)=>{const i=Up(t,c,s);return s.node.filter(Hr).bind(d=>{const g=d.dom.getBoundingClientRect(),b=Wp(g.left,g.top,g.width,g.height),C=s.node.getOr(t.element);return V0(b,i,s,c,C)})};var Jl=[pe("node"),pe("root"),nn("bubble"),Xl(),ee("overrides",{}),ee("showAbove",!1),Mn("placement",Yl)];const _g="\uFEFF",Tm="\xA0",Oa={create:(t,s,c,i)=>({start:t,soffset:s,finish:c,foffset:i})},Mc=Es.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Z0=(t,s,c,i)=>t.fold(s,c,i),jp=t=>t.fold(Wt,Wt,Wt),a3=Mc.before,RC=Mc.on,Og=Mc.after,ld={before:a3,on:RC,after:Og,cata:Z0,getStart:jp},_m=Es.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),BC=t=>_m.exact(t.start,t.soffset,t.finish,t.foffset),Dg=t=>t.match({domRange:s=>ze.fromDom(s.startContainer),relative:(s,c)=>ld.getStart(s),exact:(s,c,i,d)=>s}),Gp=_m.domRange,i3=_m.relative,Zs=_m.exact,U0=t=>{const s=Dg(t);return Zd(s)},yo=Oa.create,Rg={domRange:Gp,relative:i3,exact:Zs,exactFromRange:BC,getWin:U0,range:yo},ai=(t,s)=>{s.fold(c=>{t.setStartBefore(c.dom)},(c,i)=>{t.setStart(c.dom,i)},c=>{t.setStartAfter(c.dom)})},MC=(t,s)=>{s.fold(c=>{t.setEndBefore(c.dom)},(c,i)=>{t.setEnd(c.dom,i)},c=>{t.setEndAfter(c.dom)})},qp=(t,s,c)=>{const i=t.document.createRange();return ai(i,s),MC(i,c),i},ud=(t,s,c,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,c),g.setEnd(i.dom,d),g},Kp=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),Om=t=>{const s=t.getClientRects(),c=s.length>0?s[0]:t.getBoundingClientRect();return c.width>0||c.height>0?A.some(c).map(Kp):A.none()},l3=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(Kp):A.none()},Dm=Es.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),dd=(t,s,c)=>s(ze.fromDom(c.startContainer),c.startOffset,ze.fromDom(c.endContainer),c.endOffset),$C=(t,s)=>s.match({domRange:c=>({ltr:te(c),rtl:A.none}),relative:(c,i)=>({ltr:is(()=>qp(t,c,i)),rtl:is(()=>A.some(qp(t,i,c)))}),exact:(c,i,d,g)=>({ltr:is(()=>ud(t,c,i,d,g)),rtl:is(()=>A.some(ud(t,d,g,c,i)))})}),W0=(t,s)=>{const c=s.ltr();return c.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Dm.rtl(ze.fromDom(d.endContainer),d.endOffset,ze.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>dd(t,Dm.ltr,c)):dd(t,Dm.ltr,c)},ii=(t,s)=>{const c=$C(t,s);return W0(t,c)},j0=(t,s)=>ii(t,s).match({ltr:(i,d,g,b)=>{const C=t.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,b),C},rtl:(i,d,g,b)=>{const C=t.document.createRange();return C.setStart(g.dom,b),C.setEnd(i.dom,d),C}});Dm.ltr,Dm.rtl;const Us=(t,s)=>Cb(s,t),u3=(t,s,c,i)=>{const g=Yc(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(c.dom,i),g},Rm=(t,s,c,i)=>{const d=u3(t,s,c,i),g=Wn(t,c)&&s===i;return d.collapsed&&!g},d3=t=>A.from(t.getSelection()),G0=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),c=t.getRangeAt(t.rangeCount-1);return A.some(Oa.create(ze.fromDom(s.startContainer),s.startOffset,ze.fromDom(c.endContainer),c.endOffset))}else return A.none()},NC=t=>{if(t.anchorNode===null||t.focusNode===null)return G0(t);{const s=ze.fromDom(t.anchorNode),c=ze.fromDom(t.focusNode);return Rm(s,t.anchorOffset,c,t.focusOffset)?A.some(Oa.create(s,t.anchorOffset,c,t.focusOffset)):G0(t)}},$r=t=>d3(t).filter(s=>s.rangeCount>0).bind(NC),Bg=(t,s)=>{const c=j0(t,s);return Om(c)},q0=(t,s)=>{const c=j0(t,s);return l3(c)},Cr=((t,s)=>{const c=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?A.from(g.dom.nodeValue):A.none();return{get:c,getOption:i,set:(g,b)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=b}}})(Di,"text"),gc=t=>Cr.get(t),Po=(t,s)=>({element:t,offset:s}),hc=(t,s)=>{const c=To(t);if(c.length===0)return Po(t,s);if(s<c.length)return Po(c[s],0);{const i=c[c.length-1],d=Di(i)?gc(i).length:To(i).length;return Po(i,d)}},Xp=(t,s)=>Di(t)?Po(t,s):hc(t,s),$c=(t,s)=>s.getSelection.getOrThunk(()=>()=>$r(t))().map(i=>{const d=Xp(i.start,i.soffset),g=Xp(i.finish,i.foffset);return Rg.range(d.element,d.offset,g.element,g.offset)}),Bm=(t,s,c)=>{const i=Zd(s.root).dom,d=Up(t,c,s),g=$c(i,s).bind(S=>q0(i,Rg.exactFromRange(S)).orThunk(()=>{const T=ze.fromText(_g);Du(S.start,T);const O=Bg(i,Rg.exact(T,0,T,1));return Ml(T),O}).bind(T=>Wp(T.left,T.top,T.width,T.height))),C=$c(i,s).bind(S=>Ao(S.start)?A.some(S.start):Ud(S.start)).getOr(t.element);return V0(g,d,s,c,C)};var v_=[nn("getSelection"),pe("root"),nn("bubble"),Xl(),ee("overrides",{}),ee("showAbove",!1),Mn("placement",Bm)];const $g="link-layout",Yp=t=>t.x+t.width,K0=(t,s)=>t.x-s.width,X0=(t,s)=>t.y-s.height+t.height,Mm=t=>t.y,Y0=(t,s,c)=>fs(Yp(t),Mm(t),c.southeast(),Np(),"southeast",_s(t,{left:0,top:2}),$g),PC=(t,s,c)=>fs(K0(t,s),Mm(t),c.southwest(),v0(),"southwest",_s(t,{right:1,top:2}),$g),J0=(t,s,c)=>fs(Yp(t),X0(t,s),c.northeast(),y0(),"northeast",_s(t,{left:0,bottom:3}),$g),Q0=(t,s,c)=>fs(K0(t,s),X0(t,s),c.northwest(),C0(),"northwest",_s(t,{right:1,bottom:3}),$g),Ng=()=>[Y0,PC,J0,Q0],Jp=()=>[PC,Y0,Q0,J0],ev=(t,s,c)=>{const i=Hp(c,s.item.element),d=Zp(t.element,s,Ng(),Jp(),Ng(),Jp(),A.none());return A.some(Kl({anchorBox:i,bubble:id(),overrides:s.overrides,layouts:d,placer:A.none()}))};var tv=[pe("item"),Xl(),ee("overrides",{}),Mn("placement",ev)],FC=Dc("type",{selection:v_,node:Jl,hotspot:I0,submenu:tv,makeshift:c3});const m3=[hr("classes",ho),Li("mode","all",["all","layout","placement"])],Qp=[ee("useFixed",kn),nn("getBounds")],f3=[us("anchor",FC),Vr("transition",m3)],g3=()=>{const t=document.documentElement;return pC(0,0,t.clientWidth,t.clientHeight)},y_=t=>{const s=Ro(t.element),c=t.element.dom.getBoundingClientRect();return Wk(s.left,s.top,c.width,c.height)},C_=(t,s,c,i,d,g,b)=>{const C=vC(c.anchorBox,s);return N0(C,d.element,c.bubble,c.layouts,g,i,c.overrides,b)},cr=(t,s,c,i,d)=>{h3(t,s,c,i,d,A.none())},h3=(t,s,c,i,d,g)=>{const b=g.map(qn);return Pg(t,s,c,i,d,b)},Pg=(t,s,c,i,d,g)=>{const b=gr("placement.info",ot(f3),d),C=b.anchor,S=i.element,E=c.get(i.uid);od(()=>{Tt(S,"position","fixed");const T=Ps(S,"visibility");Tt(S,"visibility","hidden");const O=s.useFixed()?g3():y_(t),N=C.placement,P=g.map(te).or(s.getBounds);N(t,C,O).each(z=>{const oe=z.placer.getOr(C_)(t,O,z,P,i,E,b.transition);c.set(i.uid,oe)}),T.fold(()=>{Vt(S,"visibility")},z=>{Tt(S,"visibility",z)}),Ps(S,"left").isNone()&&Ps(S,"top").isNone()&&Ps(S,"right").isNone()&&Ps(S,"bottom").isNone()&&Kc(Ps(S,"position"),"fixed")&&Vt(S,"position")},S)};var nv=Object.freeze({__proto__:null,position:cr,positionWithin:h3,positionWithinBounds:Pg,getMode:(t,s,c)=>s.useFixed()?"fixed":"absolute",reset:(t,s,c,i)=>{const d=i.element;R(["position","left","right","top","bottom"],g=>Vt(d,g)),R0(d),c.clear(i.uid)}}),p3=Object.freeze({__proto__:null,init:()=>{let t={};return dc({readState:()=>t,clear:d=>{Ar(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>at(t,d)})}});const wr=ts({fields:Qp,name:"positioning",active:mC,apis:nv,state:p3}),ov=t=>t.getSystem().isConnected(),$m=t=>{mn(t,ea());const s=t.components();R(s,$m)},ol=t=>{const s=t.components();R(s,ol),mn(t,Vi())},Ig=(t,s)=>{t.getSystem().addToWorld(s),Hr(t.element)&&ol(s)},md=t=>{$m(t),t.getSystem().removeFromWorld(t)},t1=(t,s)=>{oc(t.element,s.element)},b3=t=>{R(t.components(),s=>Ml(s.element)),qd(t.element),t.syncComponents()},v3=(t,s,c)=>{const i=t.components();b3(t);const d=c(s),g=fa(i,d);R(g,b=>{$m(b),t.getSystem().removeFromWorld(b)}),R(d,b=>{ov(b)?t1(t,b):(t.getSystem().addToWorld(b),t1(t,b),Hr(t.element)&&ol(b))}),t.syncComponents()},n1=(t,s,c)=>{const i=t.components(),d=So(s,C=>ig(C).toArray());R(i,C=>{qo(d,C)||md(C)});const g=c(s),b=fa(i,g);R(b,C=>{ov(C)&&md(C)}),R(g,C=>{ov(C)||Ig(t,C)}),t.syncComponents()},Ql=(t,s)=>{o1(t,s,oc)},o1=(t,s,c)=>{t.getSystem().addToWorld(s),c(t.element,s.element),Hr(t.element)&&ol(s),t.syncComponents()},eu=t=>{$m(t),Ml(t.element),t.getSystem().removeFromWorld(t)},Ws=t=>{const s=ba(t.element).bind(c=>t.getSystem().getByDom(c).toOptional());eu(t),s.each(c=>{c.syncComponents()})},LC=t=>{const s=t.components();R(s,eu),qd(t.element),t.syncComponents()},oa=(t,s)=>{Lg(t,s,oc)},HC=(t,s)=>{Lg(t,s,cy)},Lg=(t,s,c)=>{c(t,s.element);const i=To(s.element);R(i,d=>{s.getByDom(d).each(ol)})},s1=t=>{const s=To(t.element);R(s,c=>{t.getByDom(c).each($m)}),Ml(t.element)},sv=(t,s,c,i)=>{c.get().each(b=>{LC(t)});const d=s.getAttachPoint(t);Ql(d,t);const g=t.getSystem().build(i);return Ql(t,g),c.set(g),g},Hg=(t,s,c,i)=>{const d=sv(t,s,c,i);return s.onOpen(t,d),d},rv=(t,s,c,i)=>c.get().map(()=>sv(t,s,c,i)),zC=(t,s,c,i,d)=>{cv(t,s),Hg(t,s,c,i),d(),nu(t,s)},Nm=(t,s,c)=>{c.get().each(i=>{LC(t),Ws(t),s.onClose(t,i),c.clear()})},Pm=(t,s,c)=>c.isOpen(),y3=(t,s,c,i)=>Pm(t,s,c)&&c.get().exists(d=>s.isPartOf(t,d,i)),tu=(t,s,c)=>c.get(),r1=(t,s,c,i)=>{Ps(t.element,s).fold(()=>{Cs(t.element,c)},d=>{Ot(t.element,c,d)}),Tt(t.element,s,i)},C3=(t,s,c)=>{Or(t.element,c).fold(()=>Vt(t.element,s),i=>Tt(t.element,s,i))},cv=(t,s,c)=>{const i=s.getAttachPoint(t);Tt(t.element,"position",wr.getMode(i)),r1(t,"visibility",s.cloakVisibilityAttr,"hidden")},zg=t=>In(["top","left","right","bottom"],s=>Ps(t,s).isSome()),nu=(t,s,c)=>{zg(t.element)||Vt(t.element,"position"),C3(t,"visibility",s.cloakVisibilityAttr)};var c1=Object.freeze({__proto__:null,cloak:cv,decloak:nu,open:Hg,openWhileCloaked:zC,close:Nm,isOpen:Pm,isPartOf:y3,getState:tu,setContent:rv}),w3=Object.freeze({__proto__:null,events:(t,s)=>Bt([fe(pp(),(c,i)=>{Nm(c,t,s)})])}),VC=[Gt("onOpen"),Gt("onClose"),pe("isPartOf"),pe("getAttachPoint"),ee("cloakVisibilityAttr","data-precloak-visibility")],a1=Object.freeze({__proto__:null,init:()=>{const t=Kn(),s=te("not-implemented");return dc({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const It=ts({fields:VC,name:"sandboxing",active:w3,apis:c1,state:a1}),li=te("dismiss.popups"),su=te("reposition.popups"),ru=te("mouse.released"),av=Rr([ee("isExtraPart",kn),Vr("fireEventInstead",[ee("event",Ul())])]),Fm=t=>{const s=gr("Dismissal",av,t);return{[li()]:{schema:Rr([pe("target")]),onReceive:(c,i)=>{It.isOpen(c)&&(It.isPartOf(c,i.target)||s.isExtraPart(c,i.target)||s.fireEventInstead.fold(()=>It.close(c),g=>mn(c,g.event)))}}}},ZC=Rr([Vr("fireEventInstead",[ee("event",ng())]),Fi("doReposition")]),sa=t=>{const s=gr("Reposition",ZC,t);return{[su()]:{onReceive:c=>{It.isOpen(c)&&s.fireEventInstead.fold(()=>s.doReposition(c),i=>mn(c,i.event))}}}},i1=(t,s,c)=>{s.store.manager.onLoad(t,s,c)},iv=(t,s,c)=>{s.store.manager.onUnload(t,s,c)};var Im=Object.freeze({__proto__:null,onLoad:i1,onUnload:iv,setValue:(t,s,c,i)=>{s.store.manager.setValue(t,s,c,i)},getValue:(t,s,c)=>s.store.manager.getValue(t,s,c),getState:(t,s,c)=>c}),UC=Object.freeze({__proto__:null,events:(t,s)=>{const c=t.resetOnDom?[bo((i,d)=>{i1(i,t,s)}),ka((i,d)=>{iv(i,t,s)})]:[T0(t,s,i1)];return Bt(c)}});const uv=()=>{const t=Ye(null),s=()=>({mode:"memory",value:t.get()}),c=()=>t.get()===null,i=()=>{t.set(null)};return dc({set:t.set,get:t.get,isNotSet:c,clear:i,readState:s})},x3=()=>dc({readState:X}),Zg=()=>{const t=Ye({}),s=Ye({});return dc({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:b=>at(t.get(),b).orThunk(()=>at(s.get(),b)),update:b=>{const C=t.get(),S=s.get(),E={},T={};R(b,O=>{E[O.value]=O,at(O,"meta").each(N=>{at(N,"text").each(P=>{T[P]=O})})}),t.set({...C,...E}),s.set({...S,...T})},clear:()=>{t.set({}),s.set({})}})};var WC=Object.freeze({__proto__:null,memory:uv,dataset:Zg,manual:x3,init:t=>t.store.manager.state(t)});const jC=(t,s,c,i)=>{const d=s.store;c.update([i]),d.setValue(t,i),s.onSetValue(t,i)},k3=(t,s,c)=>{const i=s.store,d=i.getDataKey(t);return c.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},GC=(t,s,c)=>{s.store.initialValue.each(d=>{jC(t,s,c,d)})},qC=(t,s,c)=>{c.clear()};var KC=[nn("initialValue"),pe("getFallbackEntry"),pe("getDataKey"),pe("setValue"),Mn("manager",{setValue:jC,getValue:k3,onLoad:GC,onUnload:qC,state:Zg})];const fd=(t,s,c)=>s.store.getValue(t),l1=(t,s,c,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},XC=(t,s,c)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var Lm=[pe("getValue"),ee("setValue",X),nn("initialValue"),Mn("manager",{setValue:l1,getValue:fd,onLoad:XC,onUnload:X,state:Aa.init})];const Ug=(t,s,c,i)=>{c.set(i),s.onSetValue(t,i)},u1=(t,s,c)=>c.get(),E3=(t,s,c)=>{s.store.initialValue.each(i=>{c.isNotSet()&&c.set(i)})},A3=(t,s,c)=>{c.clear()};var T3=[nn("initialValue"),Mn("manager",{setValue:Ug,getValue:u1,onLoad:E3,onUnload:A3,state:uv})],YC=[Qc("store",{mode:"memory"},Dc("mode",{memory:T3,manual:Lm,dataset:KC})),Gt("onSetValue"),ee("resetOnDom",!1)];const Ie=ts({fields:YC,name:"representing",active:UC,apis:Im,extra:{setValueFrom:(t,s)=>{const c=Ie.getValue(s);Ie.setValue(t,c)}},state:WC}),Fo=(t,s)=>Kb(t,{},Ae(s,c=>Wb(c.name(),"Cannot configure "+c.name()+" for "+t)).concat([nr("dump",Wt)])),Hm=t=>t.dump,hs=(t,s)=>({...Me(s),...t.dump}),pc={field:Fo,augment:hs,get:Hm},gd="placeholder",zm=Es.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),d1=t=>tn(t,"uiType"),_3=(t,s,c,i)=>t.exists(d=>d!==c.owner)?zm.single(!0,te(c)):at(i,c.name).fold(()=>{throw new Error("Unknown placeholder component: "+c.name+`
Known: [`+ko(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(c,null,2))},d=>d.replace()),JC=(t,s,c,i)=>d1(c)&&c.uiType===gd?_3(t,s,c,i):zm.single(!1,te(c)),QC=(t,s,c,i)=>JC(t,s,c,i).fold((g,b)=>{const C=d1(c)?b(s,c.config,c.validated):b(s),S=at(C,"components").getOr([]),E=So(S,T=>QC(t,s,T,i));return[{...C,components:E}]},(g,b)=>{if(d1(c)){const C=b(s,c.config,c.validated);return c.validated.preprocess.getOr(Wt)(C)}else return b(s)}),ew=(t,s,c,i)=>So(c,d=>QC(t,s,d,i)),O3=(t,s)=>{let c=!1;const i=()=>c,d=()=>{if(c)throw new Error("Trying to use the same placeholder more than once: "+t);return c=!0,s},g=()=>s.fold((b,C)=>b,(b,C)=>b);return{name:te(t),required:g,used:i,replace:d}},D3=(t,s,c,i)=>{const d=Lo(i,(b,C)=>O3(C,b)),g=ew(t,s,c,d);return Xo(d,b=>{if(b.used()===!1&&b.required())throw new Error("Placeholder: "+b.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},tw=zm.single,dv=zm.multiple,hd=te(gd),m1=Es.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Wg=ee("factory",{sketch:Wt}),f1=ee("schema",[]),pd=pe("name"),mv=ks("pname","pname",Yd(t=>"<alloy."+Ke(t.name)+">"),Oc()),nw=nr("schema",()=>[nn("preprocess")]),bd=ee("defaults",te({})),jg=ee("overrides",te({})),R3=ot([Wg,f1,pd,mv,bd,jg]),B3=ot([Wg,f1,pd,bd,jg]),sl=ot([Wg,f1,pd,mv,bd,jg]),M3=ot([Wg,nw,pd,pe("unit"),mv,bd,jg]),ow=t=>t.fold(A.some,A.none,A.some,A.some),Gg=t=>{const s=c=>c.name;return t.fold(s,s,s,s)},Qe=t=>t.fold(Wt,Wt,Wt,Wt),ui=(t,s)=>c=>{const i=gr("Converting part type",s,c);return t(i)},js=ui(m1.required,R3),ra=ui(m1.external,B3),Nc=ui(m1.optional,sl),Vm=ui(m1.group,M3),fv=te("entirety");var sw=Object.freeze({__proto__:null,required:js,external:ra,optional:Nc,group:Vm,asNamedPart:ow,name:Gg,asCommon:Qe,original:fv});const gv=(t,s,c,i)=>ro(s.defaults(t,c,i),c,{uid:t.partUids[s.name]},s.overrides(t,c,i)),$3=(t,s,c)=>{const i={},d={};return R(c,g=>{g.fold(b=>{i[b.pname]=tw(!0,(C,S,E)=>b.factory.sketch(gv(C,b,S,E)))},b=>{const C=s.parts[b.name];d[b.name]=te(b.factory.sketch(gv(s,b,C[fv()]),C))},b=>{i[b.pname]=tw(!1,(C,S,E)=>b.factory.sketch(gv(C,b,S,E)))},b=>{i[b.pname]=dv(!0,(C,S,E)=>{const T=C[b.name];return Ae(T,O=>b.factory.sketch(ro(b.defaults(C,O,E),O,b.overrides(C,O))))})})}),{internals:te(i),externals:te(d)}},g1=(t,s)=>{const c={};return R(s,i=>{ow(i).each(d=>{const g=hv(t,d.pname);c[d.name]=b=>{const C=gr("Part: "+d.name+" in "+t,ot(d.schema),b);return{...g,config:b,validated:C}}})}),c},hv=(t,s)=>({uiType:hd(),owner:t,name:s}),vd=(t,s,c)=>({uiType:hd(),owner:t,name:s,config:c,validated:{}}),pv=t=>So(t,s=>s.fold(A.none,A.some,A.none,A.none).map(c=>cc(c.name,c.schema.concat([bg(fv())]))).toArray()),rw=t=>Ae(t,Gg),h1=(t,s,c)=>$3(t,s,c),bv=(t,s,c)=>D3(A.some(t),s,s.components,c),_n=(t,s,c)=>{const i=s.partUids[c];return t.getSystem().getByUid(i).toOptional()},Da=(t,s,c)=>_n(t,s,c).getOrDie("Could not find part: "+c),cw=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return R(c,b=>{i[b]=te(g.getByUid(d[b]))}),i},aw=(t,s)=>{const c=t.getSystem();return Lo(s.partUids,(i,d)=>te(c.getByUid(i)))},yd=t=>ko(t.partUids),Cd=(t,s,c)=>{const i={},d=s.partUids,g=t.getSystem();return R(c,b=>{i[b]=te(g.getByUid(d[b]).getOrDie())}),i},Zm=(t,s)=>{const c=rw(s);return om(Ae(c,i=>({key:i,value:t+"-"+i})))},vv=t=>ks("partUids","partUids",Hf(s=>Zm(s.uid,t)),Oc());var ca=Object.freeze({__proto__:null,generate:g1,generateOne:vd,schemas:pv,names:rw,substitutes:h1,components:bv,defaultUids:Zm,defaultUidsSchema:vv,getAllParts:aw,getAllPartNames:yd,getPart:_n,getPartOrDie:Da,getParts:cw,getPartsOrDie:Cd});const wd=(t,s)=>(t.length>0?[cc("parts",t)]:[]).concat([pe("uid"),ee("dom",{}),ee("components",[]),bg("originalSpec"),ee("debug.sketcher",{})]).concat(s),iw=(t,s,c,i,d)=>{const g=wd(i,d);return gr(t+" [SpecSchema]",Rr(g.concat(s)),c)},qg=(t,s,c,i)=>{const d=lw(i),g=iw(t,s,d,[],[]);return c(g,d)},Ra=(t,s,c,i,d)=>{const g=lw(d),b=pv(c),C=vv(c),S=iw(t,s,g,b,[C]),E=h1(t,S,c),T=bv(t,S,E.internals());return i(S,T,g,E.externals())},p1=t=>tn(t,"uid"),lw=t=>p1(t)?t:{...t,uid:ju("uid")},N3=t=>t.uid!==void 0,P3=Rr([pe("name"),pe("factory"),pe("configFields"),ee("apis",{}),ee("extraApis",{})]),F3=Rr([pe("name"),pe("factory"),pe("configFields"),pe("partFields"),ee("apis",{}),ee("extraApis",{})]),Pc=t=>{const s=gr("Sketcher for "+t.name,P3,t),c=g=>qg(s.name,s.configFields,s.factory,g),i=Lo(s.apis,Ap),d=Lo(s.extraApis,(g,b)=>Ep(g,b));return{name:s.name,configFields:s.configFields,sketch:c,...i,...d}},Sr=t=>{const s=gr("Sketcher for "+t.name,F3,t),c=b=>Ra(s.name,s.configFields,s.partFields,s.factory,b),i=g1(s.name,s.partFields),d=Lo(s.apis,Ap),g=Lo(s.extraApis,(b,C)=>Ep(b,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:c,parts:i,...d,...g}},cu=t=>pa("input")(t)&&Yn(t,"type")!=="radio"||pa("textarea")(t);var b1=Object.freeze({__proto__:null,getCurrent:(t,s,c)=>s.find(t)});const I3=[pe("find")],Ut=ts({fields:I3,name:"composing",apis:b1}),L3=["input","button","textarea","select"],v1=(t,s,c)=>{(s.disabled()?dw:Cv)(t,s)},yv=(t,s)=>s.useNative===!0&&qo(L3,bn(t.element)),uw=t=>Wd(t.element,"disabled"),H3=t=>{Ot(t.element,"disabled","disabled")},y1=t=>{Cs(t.element,"disabled")},z3=t=>Yn(t.element,"aria-disabled")==="true",V3=t=>{Ot(t.element,"aria-disabled","true")},x_=t=>{Ot(t.element,"aria-disabled","false")},dw=(t,s,c)=>{s.disableClass.each(d=>{ds(t.element,d)}),(yv(t,s)?H3:V3)(t),s.onDisabled(t)},Cv=(t,s,c)=>{s.disableClass.each(d=>{Vn(t.element,d)}),(yv(t,s)?y1:x_)(t),s.onEnabled(t)},mw=(t,s)=>yv(t,s)?uw(t):z3(t);var fw=Object.freeze({__proto__:null,enable:Cv,disable:dw,isDisabled:mw,onLoad:v1,set:(t,s,c,i)=>{(i?dw:Cv)(t,s)}}),w1=Object.freeze({__proto__:null,exhibit:(t,s)=>eo({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>Bt([wp(lc(),(c,i)=>mw(c,t)),T0(t,s,v1)])}),x1=[es("disabled",kn),ee("useNative",!0),nn("disableClass"),Gt("onDisabled"),Gt("onEnabled")];const st=ts({fields:x1,name:"disabling",active:w1,apis:fw}),xv=(t,s,c,i)=>{const d=Us(t.element,"."+s.highlightClass);R(d,g=>{In(i,C=>Wn(C.element,g))||(Vn(g,s.highlightClass),t.getSystem().getByDom(g).each(C=>{s.onDehighlight(t,C),mn(C,am())}))})},gw=(t,s,c)=>xv(t,s,c,[]),hw=(t,s,c,i)=>{Sv(t,s,c,i)&&(Vn(i.element,s.highlightClass),s.onDehighlight(t,i),mn(i,am()))},xd=(t,s,c,i)=>{xv(t,s,c,[i]),Sv(t,s,c,i)||(ds(i.element,s.highlightClass),s.onHighlight(t,i),mn(i,t0()))},pw=(t,s,c)=>{S1(t,s).each(i=>{xd(t,s,c,i)})},Z3=(t,s,c)=>{Ev(t,s).each(i=>{xd(t,s,c,i)})},bw=(t,s,c,i)=>{kv(t,s,c,i).fold(d=>{throw d},d=>{xd(t,s,c,d)})},U3=(t,s,c,i)=>{const d=Cw(t,s);Yt(d,i).each(b=>{xd(t,s,c,b)})},Sv=(t,s,c,i)=>Ts(i.element,s.highlightClass),W3=(t,s,c)=>Uo(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),kv=(t,s,c,i)=>{const d=Us(t.element,"."+s.itemClass);return A.from(d[i]).fold(()=>St.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},S1=(t,s,c)=>Uo(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),Ev=(t,s,c)=>{const i=Us(t.element,"."+s.itemClass);return(i.length>0?A.some(i[i.length-1]):A.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},vw=(t,s,c,i)=>{const d=Us(t.element,"."+s.itemClass);return Jt(d,b=>Ts(b,s.highlightClass)).bind(b=>{const C=Sm(b,i,0,d.length-1);return t.getSystem().getByDom(d[C]).toOptional()})},yw=(t,s,c)=>vw(t,s,c,-1),j3=(t,s,c)=>vw(t,s,c,1),Cw=(t,s,c)=>{const i=Us(t.element,"."+s.itemClass);return Yo(Ae(i,d=>t.getSystem().getByDom(d).toOptional()))};var ww=Object.freeze({__proto__:null,dehighlightAll:gw,dehighlight:hw,highlight:xd,highlightFirst:pw,highlightLast:Z3,highlightAt:bw,highlightBy:U3,isHighlighted:Sv,getHighlighted:W3,getFirst:S1,getLast:Ev,getPrevious:yw,getNext:j3,getCandidates:Cw}),xw=[pe("highlightClass"),pe("itemClass"),Gt("onHighlight"),Gt("onDehighlight")];const cn=ts({fields:xw,name:"highlighting",apis:ww}),Sw=[8],Sd=[9],Ba=[13],k1=[27],kr=[32],Xg=[37],Yg=[38],E1=[39],kd=[40],Av=(t,s,c)=>{const i=mt(t.slice(0,s)),d=mt(t.slice(s+1));return Yt(i.concat(d),c)},G3=(t,s,c)=>{const i=mt(t.slice(0,s));return Yt(i,c)},Jg=(t,s,c)=>{const i=t.slice(0,s),d=t.slice(s+1);return Yt(d.concat(i),c)},kw=(t,s,c)=>{const i=t.slice(s+1);return Yt(i,c)},Zt=t=>s=>{const c=s.raw;return qo(t,c.which)},Fc=t=>s=>Ys(t,c=>c(s)),Um=t=>t.raw.shiftKey===!0,l=t=>t.raw.ctrlKey===!0,m=Se(Um),h=(t,s)=>({matches:t,classification:s}),v=(t,s)=>Yt(t,i=>i.matches(s)).map(i=>i.classification),w=(t,s,c)=>{s.exists(d=>c.exists(g=>Wn(g,d)))||lt(t,og(),{prevFocus:s,newFocus:c})},k=()=>{const t=c=>Ta(c.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().triggerFocus(i,c.element);const g=t(c);w(c,d,g)}}},D=()=>{const t=c=>cn.getHighlighted(c).map(i=>i.element);return{get:t,set:(c,i)=>{const d=t(c);c.getSystem().getByDom(i).fold(X,b=>{cn.highlight(c,b)});const g=t(c);w(c,d,g)}}};var F;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(F||(F={}));const L=(t,s,c,i,d)=>{const g=()=>t.concat([ee("focusManager",k()),Qc("focusInside","onFocus",Qd(E=>qo(["onFocus","onEnterOrSpace","onApi"],E)?St.value(E):St.error("Invalid value for focusInside"))),Mn("handler",S),Mn("state",s),Mn("sendFocusIn",d)]),b=(E,T,O,N,P)=>{const z=O(E,T,N,P);return v(z,T.event).bind(j=>j(E,T,N,P))},S={schema:g,processKey:b,toEvents:(E,T)=>{const O=E.focusInside!==F.OnFocusMode?A.none():d(E).map(z=>fe(Zl(),(j,oe)=>{z(j,E,T),oe.stop()})),N=(z,j)=>{const oe=Zt(kr.concat(Ba))(j.event);E.focusInside===F.OnEnterOrSpaceMode&&oe&&sm(z,j)&&d(E).each(Y=>{Y(z,E,T),j.stop()})},P=[fe(Xf(),(z,j)=>{b(z,j,c,E,T).fold(()=>{N(z,j)},oe=>{j.stop()})}),fe(Sy(),(z,j)=>{b(z,j,i,E,T).each(oe=>{j.stop()})})];return Bt(O.toArray().concat(P))}};return S},W=t=>{const s=[nn("onEscape"),nn("onEnter"),ee("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ee("firstTabstop",0),ee("useTabstopAt",dt),nn("visibilitySelector")].concat([t]),c=(j,oe)=>{const Y=j.visibilitySelector.bind(se=>ms(oe,se)).getOr(oe);return Jo(Y)>0},i=(j,oe)=>{const Y=Us(j.element,oe.selector),se=Xt(Y,Le=>c(oe,Le));return A.from(se[oe.firstTabstop])},d=(j,oe)=>oe.focusManager.get(j).bind(Y=>ms(Y,oe.selector)),g=(j,oe)=>c(j,oe)&&j.useTabstopAt(oe),b=(j,oe,Y)=>{i(j,oe).each(se=>{oe.focusManager.set(j,se)})},C=(j,oe,Y,se,Le)=>Le(oe,Y,ue=>g(se,ue)).fold(()=>se.cyclic?A.some(!0):A.none(),ue=>(se.focusManager.set(j,ue),A.some(!0))),S=(j,oe,Y,se)=>{const Le=Us(j.element,Y.selector);return d(j,Y).bind(ue=>Jt(Le,en(Wn,ue)).bind(Xe=>C(j,Le,Xe,Y,se)))},E=(j,oe,Y)=>{const se=Y.cyclic?Av:G3;return S(j,oe,Y,se)},T=(j,oe,Y)=>{const se=Y.cyclic?Jg:kw;return S(j,oe,Y,se)},O=(j,oe,Y)=>Y.onEnter.bind(se=>se(j,oe)),N=(j,oe,Y)=>Y.onEscape.bind(se=>se(j,oe)),P=te([h(Fc([Um,Zt(Sd)]),E),h(Zt(Sd),T),h(Fc([m,Zt(Ba)]),O)]),z=te([h(Zt(k1),N)]);return L(s,Aa.init,P,z,()=>A.some(b))};var Q=W(nr("cyclic",kn)),ye=W(nr("cyclic",dt));const Be=(t,s,c)=>(im(t,c,lc()),A.some(!0)),Te=(t,s,c)=>cu(c)&&Zt(kr)(s.event)?A.none():Be(t,s,c),me=(t,s)=>A.some(!0),Ne=[ee("execute",Te),ee("useSpace",!1),ee("useEnter",!0),ee("useControlEnter",!1),ee("useDown",!1)],ge=(t,s,c)=>c.execute(t,s,t.element),He=(t,s,c,i)=>{const d=c.useSpace&&!cu(t.element)?kr:[],g=c.useEnter?Ba:[],b=c.useDown?kd:[],C=d.concat(g).concat(b);return[h(Zt(C),ge)].concat(c.useControlEnter?[h(Fc([l,Zt(Ba)]),ge)]:[])},gt=(t,s,c,i)=>c.useSpace&&!cu(t.element)?[h(Zt(kr),me)]:[];var Et=L(Ne,Aa.init,He,gt,()=>A.none());const Ln=()=>{const t=Kn();return dc({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var Co=Object.freeze({__proto__:null,flatgrid:Ln,init:t=>t.state(t)});const ps=t=>(s,c,i,d)=>{const g=t(s.element);return Ed(g,s,c,i,d)},di=(t,s)=>{const c=kg(t,s);return ps(c)},Qg=(t,s)=>{const c=kg(s,t);return ps(c)},A1=t=>(s,c,i,d)=>Ed(t,s,c,i,d),Ed=(t,s,c,i,d)=>i.focusManager.get(s).bind(b=>t(s.element,b,i,d)).map(b=>(i.focusManager.set(s,b),!0)),Cn=A1,ar=A1,Rs=A1,aa=t=>t.offsetWidth<=0&&t.offsetHeight<=0,bc=t=>!aa(t.dom),Wm=(t,s)=>Jt(t,s).map(c=>({index:c,candidates:t})),ir=(t,s,c)=>{const i=b=>Wn(b,s),d=Us(t,c),g=Xt(d,bc);return Wm(g,i)},eh=(t,s)=>Jt(t,c=>Wn(s,c)),au=(t,s,c,i)=>{const d=Math.floor(s/c),g=s%c;return i(d,g).bind(b=>{const C=b.row*c+b.column;return C>=0&&C<t.length?A.some(t[C]):A.none()})},Ma=(t,s,c,i,d)=>au(t,s,i,(g,b)=>{const S=g===c-1?t.length-g*i:i,E=Sm(b,d,0,S-1);return A.some({row:g,column:E})}),Bs=(t,s,c,i,d)=>au(t,s,i,(g,b)=>{const C=Sm(g,d,0,c-1),E=C===c-1?t.length-C*i:i,T=jr(b,0,E-1);return A.some({row:C,column:T})}),q3=(t,s,c,i)=>Ma(t,s,c,i,1),K3=(t,s,c,i)=>Ma(t,s,c,i,-1),Ad=(t,s,c,i)=>Bs(t,s,c,i,-1),X3=(t,s,c,i)=>Bs(t,s,c,i,1),Y3=[pe("selector"),ee("execute",Te),Wr("onEscape"),ee("captureTab",!1),xm()],th=(t,s,c)=>{Uo(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},J3=(t,s)=>s.focusManager.get(t).bind(c=>ms(c,s.selector)),jm=(t,s,c,i)=>J3(t,c).bind(d=>c.execute(t,s,d)),Tv=t=>(s,c,i,d)=>ir(s,c,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),Q3=(t,s,c)=>c.captureTab?A.some(!0):A.none(),k_=(t,s,c)=>c.onEscape(t,s),E_=Tv(K3),A_=Tv(q3),C6=Tv(Ad),e4=Tv(X3),w6=te([h(Zt(Xg),di(E_,A_)),h(Zt(E1),Qg(E_,A_)),h(Zt(Yg),Cn(C6)),h(Zt(kd),ar(e4)),h(Fc([Um,Zt(Sd)]),Q3),h(Fc([m,Zt(Sd)]),Q3),h(Zt(kr.concat(Ba)),jm)]),x6=te([h(Zt(k1),k_),h(Zt(kr),me)]);var S6=L(Y3,Ln,w6,x6,()=>A.some(th));const _v=(t,s,c,i)=>{const d=b=>bn(b)==="button"&&Yn(b,"disabled")==="disabled",g=(b,C,S)=>{const E=Sm(C,i,0,S.length-1);return E===b?A.none():d(S[E])?g(b,E,S):A.from(S[E])};return ir(t,c,s).bind(b=>{const C=b.index,S=b.candidates;return g(C,C,S)})},k6=[pe("selector"),ee("getInitial",A.none),ee("execute",Te),Wr("onEscape"),ee("executeOnMove",!1),ee("allowVertical",!0)],E6=(t,s)=>s.focusManager.get(t).bind(c=>ms(c,s.selector)),t4=(t,s,c)=>E6(t,c).bind(i=>c.execute(t,s,i)),T_=(t,s,c)=>{s.getInitial(t).orThunk(()=>Uo(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},__=(t,s,c)=>_v(t,c.selector,s,-1),O_=(t,s,c)=>_v(t,c.selector,s,1),n4=t=>(s,c,i,d)=>t(s,c,i,d).bind(()=>i.executeOnMove?t4(s,c,i):A.some(!0)),A6=(t,s,c)=>c.onEscape(t,s),T6=(t,s,c,i)=>{const d=Xg.concat(c.allowVertical?Yg:[]),g=E1.concat(c.allowVertical?kd:[]);return[h(Zt(d),n4(di(__,O_))),h(Zt(g),n4(Qg(__,O_))),h(Zt(Ba),t4),h(Zt(kr),t4)]},Ew=te([h(Zt(kr),me),h(Zt(k1),A6)]);var _6=L(k6,Aa.init,T6,Ew,()=>A.some(T_));const Ov=(t,s,c)=>A.from(t[s]).bind(i=>A.from(i[c]).map(d=>({rowIndex:s,columnIndex:c,cell:d}))),Gr=(t,s,c,i)=>{const g=t[s].length,b=Sm(c,i,0,g-1);return Ov(t,s,b)},D_=(t,s,c,i)=>{const d=Sm(c,i,0,t.length-1),g=t[d].length,b=jr(s,0,g-1);return Ov(t,d,b)},o4=(t,s,c,i)=>{const g=t[s].length,b=jr(c+i,0,g-1);return Ov(t,s,b)},R_=(t,s,c,i)=>{const d=jr(c+i,0,t.length-1),g=t[d].length,b=jr(s,0,g-1);return Ov(t,d,b)},O6=(t,s,c)=>Gr(t,s,c,1),B_=(t,s,c)=>Gr(t,s,c,-1),D6=(t,s,c)=>D_(t,c,s,-1),R6=(t,s,c)=>D_(t,c,s,1),B6=(t,s,c)=>o4(t,s,c,-1),M6=(t,s,c)=>o4(t,s,c,1),$6=(t,s,c)=>R_(t,c,s,-1),M_=(t,s,c)=>R_(t,c,s,1),$_=[cc("selectors",[pe("row"),pe("cell")]),ee("cycles",!0),ee("previousSelector",A.none),ee("execute",Te)],Gm=(t,s,c)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return Uo(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},N_=(t,s,c)=>Ta(t.element).bind(i=>c.execute(t,s,i)),P_=(t,s)=>Ae(t,c=>Us(c,s.selectors.cell)),T1=(t,s)=>(c,i,d)=>{const g=d.cycles?t:s;return ms(i,d.selectors.row).bind(b=>{const C=Us(b,d.selectors.cell);return eh(C,i).bind(S=>{const E=Us(c,d.selectors.row);return eh(E,b).bind(T=>{const O=P_(E,d);return g(O,T,S).map(N=>N.cell)})})})},F_=T1(B_,B6),I_=T1(O6,M6),N6=T1(D6,$6),P6=T1(R6,M_),L_=te([h(Zt(Xg),di(F_,I_)),h(Zt(E1),Qg(F_,I_)),h(Zt(Yg),Cn(N6)),h(Zt(kd),ar(P6)),h(Zt(kr.concat(Ba)),N_)]),s4=te([h(Zt(kr),me)]);var r4=L($_,Aa.init,L_,s4,()=>A.some(Gm));const F6=[pe("selector"),ee("execute",Te),ee("moveOnTab",!1)],Td=(t,s,c)=>c.focusManager.get(t).bind(i=>c.execute(t,s,i)),H_=(t,s,c)=>{Uo(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},c4=(t,s,c)=>_v(t,c.selector,s,-1),z_=(t,s,c)=>_v(t,c.selector,s,1),I6=(t,s,c,i)=>c.moveOnTab?Rs(c4)(t,s,c,i):A.none(),Dv=(t,s,c,i)=>c.moveOnTab?Rs(z_)(t,s,c,i):A.none(),Rv=te([h(Zt(Yg),Rs(c4)),h(Zt(kd),Rs(z_)),h(Fc([Um,Zt(Sd)]),I6),h(Fc([m,Zt(Sd)]),Dv),h(Zt(Ba),Td),h(Zt(kr),Td)]),V_=te([h(Zt(kr),me)]);var Z_=L(F6,Aa.init,Rv,V_,()=>A.some(H_));const qm=[Wr("onSpace"),Wr("onEnter"),Wr("onShiftEnter"),Wr("onLeft"),Wr("onRight"),Wr("onTab"),Wr("onShiftTab"),Wr("onUp"),Wr("onDown"),Wr("onEscape"),ee("stopSpaceKeyup",!1),nn("focusIn")],Km=(t,s,c)=>[h(Zt(kr),c.onSpace),h(Fc([m,Zt(Ba)]),c.onEnter),h(Fc([Um,Zt(Ba)]),c.onShiftEnter),h(Fc([Um,Zt(Sd)]),c.onShiftTab),h(Fc([m,Zt(Sd)]),c.onTab),h(Zt(Yg),c.onUp),h(Zt(kd),c.onDown),h(Zt(Xg),c.onLeft),h(Zt(E1),c.onRight),h(Zt(kr),c.onSpace)],L6=(t,s,c)=>[...c.stopSpaceKeyup?[h(Zt(kr),me)]:[],h(Zt(k1),c.onEscape)];var H6=L(qm,Aa.init,Km,L6,t=>t.focusIn);const U_=Q.schema(),_d=ye.schema(),a4=_6.schema(),W_=S6.schema(),j_=r4.schema(),G_=Et.schema(),i4=Z_.schema(),q_=H6.schema();var z6=Object.freeze({__proto__:null,acyclic:U_,cyclic:_d,flow:a4,flatgrid:W_,matrix:j_,execution:G_,menu:i4,special:q_});const V6=t=>vs(t,"setGridSize"),rt=uC({branchKey:"mode",branches:z6,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,c)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,c)})},setGridSize:(t,s,c,i,d)=>{V6(c)?c.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:Co}),Bv=(t,s)=>{od(()=>{v3(t,s,()=>Ae(s,t.getSystem().build))},t.element)},Aw=(t,s)=>{od(()=>{n1(t,s,()=>dg(t.element,s,t.getSystem().buildOrPatch))},t.element)},l4=(t,s,c,i)=>{md(s);const d=Ly(t.element,c,i,t.getSystem().buildOrPatch);Ig(t,d),t.syncComponents()},u4=(t,s,c)=>{const i=t.getSystem().build(c);o1(t,i,s)},Z6=(t,s,c,i)=>{Ws(s),u4(t,(d,g)=>ok(d,g,c),i)},K_=(t,s,c,i)=>(s.reuseDom?Aw:Bv)(t,i),X_=(t,s,c,i)=>{u4(t,oc,i)},Y_=(t,s,c,i)=>{u4(t,op,i)},J_=(t,s,c,i)=>{const d=Tw(t);Yt(d,b=>Wn(i.element,b.element)).each(Ws)},Tw=(t,s)=>t.components(),_w=(t,s,c,i,d)=>{const g=Tw(t);return A.from(g[i]).map(b=>(d.fold(()=>Ws(b),C=>{(s.reuseDom?l4:Z6)(t,b,i,C)}),b))};var U6=Object.freeze({__proto__:null,append:X_,prepend:Y_,remove:J_,replaceAt:_w,replaceBy:(t,s,c,i,d)=>{const g=Tw(t);return Jt(g,i).bind(b=>_w(t,s,c,b,d))},set:K_,contents:Tw});const Dt=ts({fields:[ic("reuseDom",!0)],name:"replacing",apis:U6}),W6=(t,s)=>{const c=Bt(s);return ts({fields:[pe("enabled")],name:t,active:{events:te(c)}})},Lt=(t,s)=>{const c=W6(t,s);return{key:t,value:{config:{},me:c,configAsRaw:te({}),initialConfig:{},state:Aa}}},Q_=(t,s)=>{s.ignore||(Qi(t.element),s.onFocus(t))};var Mv=Object.freeze({__proto__:null,focus:Q_,blur:(t,s)=>{s.ignore||nd(t.element)},isFocused:t=>O0(t.element)}),d4=Object.freeze({__proto__:null,exhibit:(t,s)=>{const c=s.ignore?{}:{attributes:{tabindex:"-1"}};return eo(c)},events:t=>Bt([fe(Zl(),(s,c)=>{Q_(s,t),c.stop()})].concat(t.stopMousedown?[fe(Hs(),(s,c)=>{c.event.prevent()})]:[]))}),eO=[Gt("onFocus"),ee("stopMousedown",!1),ee("ignore",!1)];const ht=ts({fields:eO,name:"focusing",active:d4,apis:Mv}),j6=t=>({init:()=>{const c=Ye(t);return{get:()=>c.get(),set:C=>c.set(C),clear:()=>c.set(t),readState:()=>c.get()}}}),G6=(t,s,c)=>{const i=s.aria;i.update(t,i,c.get())},tO=(t,s,c)=>{s.toggleClass.each(i=>{c.get()?ds(t.element,i):Vn(t.element,i)})},$v=(t,s,c,i)=>{const d=c.get();c.set(i),tO(t,s,c),G6(t,s,c),d!==i&&s.onToggled(t,i)},m4=(t,s,c)=>{$v(t,s,c,!c.get())},q6=(t,s,c)=>{$v(t,s,c,!0)},K6=(t,s,c)=>{$v(t,s,c,!1)},nO=(t,s,c)=>c.get(),Nv=(t,s,c)=>{$v(t,s,c,s.selected)};var f4=Object.freeze({__proto__:null,onLoad:Nv,toggle:m4,isOn:nO,on:q6,off:K6,set:$v}),X6=Object.freeze({__proto__:null,exhibit:()=>eo({}),events:(t,s)=>{const c=Lk(t,s,m4),i=T0(t,s,Nv);return Bt(ve([t.toggleOnExecute?[c]:[],[i]]))}});const Y6=(t,s,c)=>{Ot(t.element,"aria-pressed",c),s.syncWithExpanded&&g4(t,s,c)},J6=(t,s,c)=>{Ot(t.element,"aria-selected",c)},sO=(t,s,c)=>{Ot(t.element,"aria-checked",c)},g4=(t,s,c)=>{Ot(t.element,"aria-expanded",c)};var Q6=[ee("selected",!1),nn("toggleClass"),ee("toggleOnExecute",!0),Gt("onToggled"),Qc("aria",{mode:"none"},Dc("mode",{pressed:[ee("syncWithExpanded",!1),Mn("update",Y6)],checked:[Mn("update",sO)],expanded:[Mn("update",g4)],selected:[Mn("update",J6)],none:[Mn("update",X)]}))];const Qt=ts({fields:Q6,name:"toggling",active:X6,apis:f4,state:j6(!1)}),rO=()=>{const t=(s,c)=>{c.stop(),uc(s)};return[fe(Yf(),t),fe(Qf(),t),Zu(Qa()),Zu(Hs())]},Dw=t=>{const s=c=>Ui((i,d)=>{c(i),d.stop()});return Bt(ve([t.map(s).toArray(),rO()]))},cO="alloy.item-hover",aO="alloy.item-focus",h4="alloy.item-toggled",iO=t=>{(Ta(t.element).isNone()||ht.isFocused(t))&&(ht.isFocused(t)||ht.focus(t),lt(t,cO,{item:t}))},lO=t=>{lt(t,aO,{item:t})},eN=(t,s)=>{lt(t,h4,{item:t,state:s})},uO=te(cO),tN=te(aO),nh=te(h4),nN=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),oN=t=>({aria:{mode:"checked"},...Z2(t,(s,c)=>c!=="exclusive"),onToggled:(s,c)=>{nt(t.onToggled)&&t.onToggled(s,c),eN(s,c)}}),oh=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:nN(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:pc.augment(t.itemBehaviours,[t.toggling.fold(Qt.revoke,s=>Qt.config(oN(s))),ht.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{lO(s)}}),rt.config({mode:"execution"}),Ie.config({store:{mode:"memory",initialValue:t.data}}),Lt("item-type-events",[...rO(),fe(ti(),iO),fe(zi(),ht.focus)])]),components:t.components,eventOrder:t.eventOrder}),sN=[pe("data"),pe("components"),pe("dom"),ee("hasSubmenu",!1),nn("toggling"),pc.field("itemBehaviours",[Qt,ht,rt,Ie]),ee("ignoreFocus",!1),ee("domModification",{}),Mn("builder",oh),ee("eventOrder",{})],rN=t=>({dom:t.dom,components:t.components,events:Bt([o0(zi())])}),Xm=[pe("dom"),pe("components"),Mn("builder",rN)],p4=te("item-widget"),b4=te([js({name:"widget",overrides:t=>({behaviours:Me([Ie.config({store:{mode:"manual",getValue:s=>t.data,setValue:X}})])})})]),$a=t=>{const s=h1(p4(),t,b4()),c=bv(p4(),t,s.internals()),i=g=>_n(g,t,"widget").map(b=>(rt.focusIn(b),b)),d=(g,b)=>cu(b.event.target)?A.none():(()=>(t.autofocus&&b.setSource(g.element),A.none()))();return{dom:t.dom,components:c,domModification:t.domModification,events:Bt([Ui((g,b)=>{i(g).each(C=>{b.stop()})}),fe(ti(),iO),fe(zi(),(g,b)=>{t.autofocus?i(g):ht.focus(g)})]),behaviours:pc.augment(t.widgetBehaviours,[Ie.config({store:{mode:"memory",initialValue:t.data}}),ht.config({ignore:t.ignoreFocus,onFocus:g=>{lO(g)}}),rt.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:dC(),onLeft:d,onRight:d,onEscape:(g,b)=>!ht.isFocused(g)&&!t.autofocus?(ht.focus(g),A.some(!0)):(t.autofocus&&b.setSource(g.element),A.none())})])}},dO=[pe("uid"),pe("data"),pe("components"),pe("dom"),ee("autofocus",!1),ee("ignoreFocus",!1),pc.field("widgetBehaviours",[Ie,ht,rt]),ee("domModification",{}),vv(b4()),Mn("builder",$a)],mO=Dc("type",{widget:dO,item:sN,separator:Xm}),fO=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),cN=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}),gO=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),aN=te([Vm({factory:{sketch:t=>{const s=gr("menu.spec item",mO,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>tn(s,"uid")?s:{...s,uid:ju("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),iN=te([pe("value"),pe("items"),pe("dom"),pe("components"),ee("eventOrder",{}),Fo("menuBehaviours",[cn,Ie,Ut,rt]),Qc("movement",{mode:"menu",moveOnTab:!0},Dc("mode",{grid:[xm(),Mn("config",fO)],matrix:[Mn("config",cN),pe("rowSelector")],menu:[ee("moveOnTab",!0),Mn("config",gO)]})),nC(),ee("fakeFocus",!1),ee("focusManager",k()),Gt("onHighlight"),Gt("onDehighlight")]),hO=te("alloy.menu-focus"),Rw=(t,s)=>{const c=Us(t.element,'[role="menuitemradio"][aria-checked="true"]');R(c,i=>{Wn(i,s.element)||t.getSystem().getByDom(i).each(d=>{Qt.off(d)})})},v4=(t,s,c,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:hs(t.menuBehaviours,[cn.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),Ie.config({store:{mode:"memory",initialValue:t.value}}),Ut.config({find:A.some}),rt.config(t.movement.config(t,t.movement))]),events:Bt([fe(tN(),(d,g)=>{const b=g.event;d.getSystem().getByDom(b.target).each(C=>{cn.highlight(d,C),g.stop(),lt(d,hO(),{menu:d,item:C})})}),fe(uO(),(d,g)=>{const b=g.event.item;cn.highlight(d,b)}),fe(nh(),(d,g)=>{const{item:b,state:C}=g.event;C&&Yn(b.element,"role")==="menuitemradio"&&Rw(d,b)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),sh=Sr({name:"Menu",configFields:iN(),partFields:aN(),factory:v4}),pO=t=>Tr(t,(s,c)=>({k:s,v:c})),y4=(t,s,c,i)=>at(c,i).bind(d=>at(t,d).bind(g=>{const b=y4(t,s,c,g);return A.some([g].concat(b))})).getOr([]),lN=(t,s)=>{const c={};Xo(t,(b,C)=>{R(b,S=>{c[S]=C})});const i=s,d=pO(s),g=Lo(d,(b,C)=>[C].concat(y4(c,i,d,C)));return Lo(c,b=>at(g,b).getOr([b]))},C4=()=>{const t=Ye({}),s=Ye({}),c=Ye({}),i=Kn(),d=Ye({}),g=()=>{t.set({}),s.set({}),c.set({}),i.clear()},b=()=>i.get().isNone(),C=(Ve,Xe)=>{s.set({...s.get(),[Ve]:{type:"prepared",menu:Xe}})},S=(Ve,Xe,Ze,it)=>{i.set(Ve),t.set(Ze),s.set(Xe),d.set(it);const ft=lN(it,Ze);c.set(ft)},E=Ve=>Uh(t.get(),(Xe,Ze)=>Xe===Ve),T=(Ve,Xe,Ze)=>j(Ve).bind(it=>E(Ve).bind(ft=>Xe(ft).map(Ht=>({triggeredMenu:it,triggeringItem:Ht,triggeringPath:Ze})))),O=(Ve,Xe)=>{const Ze=Xt(Y(Ve).toArray(),it=>j(it).isSome());return at(c.get(),Ve).bind(it=>{const ft=mt(Ze.concat(it)),Ht=So(ft,(on,ct)=>T(on,Xe,ft.slice(0,ct+1)).fold(()=>Kc(i.get(),on)?[]:[A.none()],sn=>[A.some(sn)]));return wf(Ht)})},N=Ve=>at(t.get(),Ve).map(Xe=>{const Ze=at(c.get(),Ve).getOr([]);return[Xe].concat(Ze)}),P=Ve=>at(c.get(),Ve).bind(Xe=>Xe.length>1?A.some(Xe.slice(1)):A.none()),z=Ve=>at(c.get(),Ve),j=Ve=>oe(Ve).bind(bO),oe=Ve=>at(s.get(),Ve),Y=Ve=>at(t.get(),Ve);return{setMenuBuilt:C,setContents:S,expand:N,refresh:z,collapse:P,lookupMenu:oe,lookupItem:Y,otherMenus:Ve=>{const Xe=d.get();return fa(ko(Xe),Ve)},getPrimary:()=>i.get().bind(j),getMenus:()=>s.get(),clear:g,isClear:b,getTriggeringPath:O}},bO=t=>t.type==="prepared"?A.some(t.menu):A.none(),Bw={init:C4,extractPreparedMenu:bO},vO=Ke("tiered-menu-item-highlight"),_1=Ke("tiered-menu-item-dehighlight");var lr;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(lr||(lr={}));const yO=(t,s)=>{const c=Kn(),i=($e,qe,xt)=>Lo(xt,(zt,Tn)=>{const uo=()=>sh.sketch({...zt,value:Tn,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Pr,Yr)=>{lt(Pr,vO,{menuComp:Pr,itemComp:Yr})},onDehighlight:(Pr,Yr)=>{lt(Pr,_1,{menuComp:Pr,itemComp:Yr})},focusManager:t.fakeFocus?D():k()});return Tn===qe?{type:"prepared",menu:$e.getSystem().build(uo())}:{type:"notbuilt",nbMenu:uo}}),d=Bw.init(),g=$e=>{const qe=i($e,t.data.primary,t.data.menus),xt=S();return d.setContents(t.data.primary,qe,t.data.expansions,xt),d.getPrimary()},b=$e=>Ie.getValue($e).value,C=($e,qe,xt)=>Fr(qe,zt=>{if(!zt.getSystem().isConnected())return A.none();const Tn=cn.getCandidates(zt);return Yt(Tn,uo=>b(uo)===xt)}),S=$e=>Lo(t.data.menus,(qe,xt)=>So(qe.items,zt=>zt.type==="separator"?[]:[zt.data.value])),E=cn.highlight,T=($e,qe)=>{E($e,qe),cn.getHighlighted(qe).orThunk(()=>cn.getFirst(qe)).each(xt=>{t.fakeFocus?cn.highlight(qe,xt):im($e,xt.element,zi())})},O=($e,qe)=>Yo(Ae(qe,xt=>$e.lookupMenu(xt).bind(zt=>zt.type==="prepared"?A.some(zt.menu):A.none()))),N=($e,qe,xt)=>{const zt=O(qe,qe.otherMenus(xt));R(zt,Tn=>{fc(Tn.element,[t.markers.backgroundMenu]),t.stayInDom||Dt.remove($e,Tn)})},P=$e=>c.get().getOrThunk(()=>{const qe={},xt=Us($e.element,`.${t.markers.item}`),zt=Xt(xt,Tn=>Yn(Tn,"aria-haspopup")==="true");return R(zt,Tn=>{$e.getSystem().getByDom(Tn).each(uo=>{const Pr=b(uo);qe[Pr]=uo})}),c.set(qe),qe}),z=($e,qe)=>{const xt=P($e);Xo(xt,(zt,Tn)=>{const uo=qo(qe,Tn);Ot(zt.element,"aria-expanded",uo)})},j=($e,qe,xt)=>A.from(xt[0]).bind(zt=>qe.lookupMenu(zt).bind(Tn=>{if(Tn.type==="notbuilt")return A.none();{const uo=Tn.menu,Pr=O(qe,xt.slice(1));return R(Pr,Yr=>{ds(Yr.element,t.markers.backgroundMenu)}),Hr(uo.element)||Dt.append($e,Bc(uo)),fc(uo.element,[t.markers.backgroundMenu]),T($e,uo),N($e,qe,xt),A.some(uo)}}));let oe;(function($e){$e[$e.HighlightSubmenu=0]="HighlightSubmenu",$e[$e.HighlightParent=1]="HighlightParent"})(oe||(oe={}));const Y=($e,qe,xt)=>{if(xt.type==="notbuilt"){const zt=$e.getSystem().build(xt.nbMenu());return d.setMenuBuilt(qe,zt),zt}else return xt.menu},se=($e,qe,xt=oe.HighlightSubmenu)=>{if(qe.hasConfigured(st)&&st.isDisabled(qe))return A.some(qe);{const zt=b(qe);return d.expand(zt).bind(Tn=>(z($e,Tn),A.from(Tn[0]).bind(uo=>d.lookupMenu(uo).bind(Pr=>{const Yr=Y($e,uo,Pr);return Hr(Yr.element)||Dt.append($e,Bc(Yr)),t.onOpenSubmenu($e,qe,Yr,mt(Tn)),xt===oe.HighlightSubmenu?(cn.highlightFirst(Yr),j($e,d,Tn)):(cn.dehighlightAll(Yr),A.some(qe))}))))}},Le=($e,qe)=>{const xt=b(qe);return d.collapse(xt).bind(zt=>(z($e,zt),j($e,d,zt).map(Tn=>(t.onCollapseMenu($e,qe,Tn),Tn))))},ue=($e,qe)=>{const xt=b(qe);return d.refresh(xt).bind(zt=>(z($e,zt),j($e,d,zt)))},Ve=($e,qe)=>cu(qe.element)?A.none():se($e,qe,oe.HighlightSubmenu),Xe=($e,qe)=>cu(qe.element)?A.none():Le($e,qe),Ze=($e,qe)=>Le($e,qe).orThunk(()=>t.onEscape($e,qe).map(()=>$e)),it=$e=>(qe,xt)=>ms(xt.getSource(),`.${t.markers.item}`).bind(zt=>qe.getSystem().getByDom(zt).toOptional().bind(Tn=>$e(qe,Tn).map(dt))),ft=Bt([fe(hO(),($e,qe)=>{const xt=qe.event.item;d.lookupItem(b(xt)).each(()=>{const zt=qe.event.menu;cn.highlight($e,zt);const Tn=b(qe.event.item);d.refresh(Tn).each(uo=>N($e,d,uo))})}),Ui(($e,qe)=>{const xt=qe.event.target;$e.getSystem().getByDom(xt).each(zt=>{b(zt).indexOf("collapse-item")===0&&Le($e,zt),se($e,zt,oe.HighlightSubmenu).fold(()=>{t.onExecute($e,zt)},X)})}),bo(($e,qe)=>{g($e).each(xt=>{Dt.append($e,Bc(xt)),t.onOpenMenu($e,xt),t.highlightOnOpen===lr.HighlightMenuAndItem?T($e,xt):t.highlightOnOpen===lr.HighlightJustMenu&&E($e,xt)})}),fe(vO,($e,qe)=>{t.onHighlightItem($e,qe.event.menuComp,qe.event.itemComp)}),fe(_1,($e,qe)=>{t.onDehighlightItem($e,qe.event.menuComp,qe.event.itemComp)}),...t.navigateOnHover?[fe(uO(),($e,qe)=>{const xt=qe.event.item;ue($e,xt),se($e,xt,oe.HighlightParent),t.onHover($e,xt)})]:[]]),Ht=$e=>cn.getHighlighted($e).bind(cn.getHighlighted),on=$e=>{Ht($e).each(qe=>{Le($e,qe)})},ct=$e=>{d.getPrimary().each(qe=>{T($e,qe)})},sn=$e=>A.from($e.components()[0]).filter(qe=>Yn(qe.element,"role")==="menu"),rn={collapseMenu:on,highlightPrimary:ct,repositionMenus:$e=>{d.getPrimary().bind(xt=>Ht($e).bind(zt=>{const Tn=b(zt),uo=En(d.getMenus()),Pr=Yo(Ae(uo,Bw.extractPreparedMenu));return d.getTriggeringPath(Tn,Yr=>C($e,Pr,Yr))}).map(zt=>({primary:xt,triggeringPath:zt}))).fold(()=>{sn($e).each(xt=>{t.onRepositionMenu($e,xt,[])})},({primary:xt,triggeringPath:zt})=>{t.onRepositionMenu($e,xt,zt)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:hs(t.tmenuBehaviours,[rt.config({mode:"special",onRight:it(Ve),onLeft:it(Xe),onEscape:it(Ze),focusIn:($e,qe)=>{d.getPrimary().each(xt=>{im($e,xt.element,zi())})}}),cn.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Ut.config({find:$e=>cn.getHighlighted($e)}),Dt.config({})]),eventOrder:t.eventOrder,apis:rn,events:ft}},CO=te("collapse-item"),uN=(t,s,c)=>({primary:t,menus:s,expansions:c}),dN=(t,s)=>({primary:t,menus:Hl(t,s),expansions:{}}),mN=t=>({value:Ke(CO()),meta:{text:t}}),rh=Pc({name:"TieredMenu",configFields:[$p("onExecute"),$p("onEscape"),jl("onOpenMenu"),jl("onOpenSubmenu"),Gt("onRepositionMenu"),Gt("onCollapseMenu"),ee("highlightOnOpen",lr.HighlightMenuAndItem),cc("data",[pe("primary"),pe("menus"),pe("expansions")]),ee("fakeFocus",!1),Gt("onHighlightItem"),Gt("onDehighlightItem"),Gt("onHover"),pg(),pe("dom"),ee("navigateOnHover",!0),ee("stayInDom",!1),Fo("tmenuBehaviours",[rt,cn,Ut,Dt]),ee("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:yO,extraApis:{tieredData:uN,singleData:dN,collapseItem:mN}}),w4=(t,s,c,i,d)=>{const g=()=>t.lazySink(s),b=i.type==="horizontal"?{layouts:{onLtr:()=>A0(),onRtl:()=>Lp()}}:{},C=E=>E.length===2,S=E=>C(E)?b:{};return rh.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(It.close(s),t.onEscape.map(E=>E(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(E,T)=>{wr.positionWithinBounds(g().getOrDie(),T,c,d())},onOpenSubmenu:(E,T,O,N)=>{const P=g().getOrDie();wr.position(P,O,{anchor:{type:"submenu",item:T,...S(N)}})},onRepositionMenu:(E,T,O)=>{const N=g().getOrDie();wr.positionWithinBounds(N,T,c,d()),R(O,P=>{const z=S(P.triggeringPath);wr.position(N,P.triggeredMenu,{anchor:{type:"submenu",item:P.triggeringItem,...z}})})}})},wO=(t,s)=>{const c=(P,z)=>t.getRelated(P).exists(oe=>Wl(oe,z)),i=(P,z)=>{It.setContent(P,z)},d=(P,z,j)=>{g(P,z,j,A.none())},g=(P,z,j,oe)=>{b(P,z,j,()=>oe.map(Y=>qn(Y)))},b=(P,z,j,oe)=>{const Y=t.lazySink(P).getOrDie();It.openWhileCloaked(P,z,()=>wr.positionWithinBounds(Y,P,j,oe())),Ie.setValue(P,A.some({mode:"position",config:j,getBounds:oe}))},C=(P,z,j)=>{S(P,z,j,A.none)},S=(P,z,j,oe)=>{const Y=w4(t,P,z,j,oe);It.open(P,Y),Ie.setValue(P,A.some({mode:"menu",menu:Y}))},E=P=>{It.isOpen(P)&&(Ie.setValue(P,A.none()),It.close(P))},T=P=>It.getState(P),O=P=>{It.isOpen(P)&&Ie.getValue(P).each(z=>{switch(z.mode){case"menu":It.getState(P).each(rh.repositionMenus);break;case"position":const j=t.lazySink(P).getOrDie();wr.positionWithinBounds(j,P,z.config,z.getBounds());break}})},N={setContent:i,showAt:d,showWithin:g,showWithinBounds:b,showMenuAt:C,showMenuWithinBounds:S,hide:E,getContent:T,reposition:O,isOpen:It.isOpen};return{uid:t.uid,dom:t.dom,behaviours:hs(t.inlineBehaviours,[It.config({isPartOf:(P,z,j)=>Wl(z,j)||c(P,j),getAttachPoint:P=>t.lazySink(P).getOrDie(),onOpen:P=>{t.onShow(P)},onClose:P=>{t.onHide(P)}}),Ie.config({store:{mode:"memory",initialValue:A.none()}}),na.config({channels:{...Fm({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({})}),...sa({...t.fireRepositionEventInstead.map(P=>({fireEventInstead:{event:P.event}})).getOr({}),doReposition:O})}})]),eventOrder:t.eventOrder,apis:N}},wo=Pc({name:"InlineView",configFields:[pe("lazySink"),Gt("onShow"),Gt("onHide"),Vo("onEscape"),Fo("inlineBehaviours",[It,Ie,na]),Vr("fireDismissalEventInstead",[ee("event",Ul())]),Vr("fireRepositionEventInstead",[ee("event",ng())]),ee("getRelated",A.none),ee("isExtraPart",kn),ee("eventOrder",A.none)],factory:wO,apis:{showAt:(t,s,c,i)=>{t.showAt(s,c,i)},showWithin:(t,s,c,i,d)=>{t.showWithin(s,c,i,d)},showWithinBounds:(t,s,c,i,d)=>{t.showWithinBounds(s,c,i,d)},showMenuAt:(t,s,c,i)=>{t.showMenuAt(s,c,i)},showMenuWithinBounds:(t,s,c,i,d)=>{t.showMenuWithinBounds(s,c,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,c)=>{t.setContent(s,c)},reposition:(t,s)=>{t.reposition(s)}}});var O1=tinymce.util.Tools.resolve("tinymce.util.Delay");const qr=Pc({name:"Button",factory:t=>{const s=Dw(t.action),c=t.dom.tag,i=g=>at(t.dom,"attributes").bind(b=>at(b,g)),d=()=>{if(c==="button"){const g=i("type").getOr("button"),b=i("role").map(C=>({role:C})).getOr({});return{type:g,...b}}else return{role:i("role").getOr("button")}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:pc.augment(t.buttonBehaviours,[ht.config({}),rt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[ee("uid",void 0),pe("dom"),ee("components",[]),pc.field("buttonBehaviours",[ht,rt]),nn("action"),nn("role"),ee("eventOrder",{})]}),Pn=t=>{const s=N3(t)&&vs(t,"uid")?t.uid:ju("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var mi=tinymce.util.Tools.resolve("tinymce.util.I18n");const fN={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},x4="temporary-placeholder",S4=t=>()=>at(t,x4).getOr("!not found!"),k4=(t,s)=>{const c=t.toLowerCase();if(mi.isRtl()){const i=qS(c,"-rtl");return tn(s,i)?i:c}else return c},Mw=(t,s)=>at(s,k4(t,s)),E4=(t,s)=>{const c=s();return Mw(t,c).getOrThunk(S4(c))},xO=(t,s,c)=>{const i=s();return Mw(t,i).or(c).getOrThunk(S4(i))},gN=t=>mi.isRtl()?tn(fN,t):!1,Pv=()=>Lt("add-focusable",[bo(t=>{Rk(t.element,"svg").each(s=>Ot(s,"focusable","false"))})]),SO=(t,s,c,i)=>{var d,g;const b=gN(s)?["tox-icon--flip"]:[],C=at(c,k4(s,c)).or(i).getOrThunk(S4(c));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(b),innerHtml:C},behaviours:Me([...(g=t.behaviours)!==null&&g!==void 0?g:[],Pv()])}},rl=(t,s,c,i=A.none())=>SO(s,t,c(),i),hN=(t,s,c)=>{const i=c(),d=Yt(t,g=>tn(i,k4(g,i)));return SO(s,d.getOr(x4),i,A.none())},pN={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},$w=Pc({name:"Notification",factory:t=>{const s=Pn({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:Me([Dt.config({})])}),c=P=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${P}%`}}}),i=P=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${P}%`}}),d=Pn({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(0)]},i(0)],behaviours:Me([Dt.config({})])}),C={updateProgress:(P,z)=>{P.getSystem().isConnected()&&d.getOpt(P).each(j=>{Dt.set(j,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[c(z)]},i(z)])})},updateText:(P,z)=>{if(P.getSystem().isConnected()){const j=s.get(P);Dt.set(j,[vo(z)])}}},S=ve([t.icon.toArray(),t.level.toArray(),t.level.bind(P=>A.from(pN[P])).toArray()]),E=Pn(qr.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[rl("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:P=>{t.onAction(P)}})),T=hN(S,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),O={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:Me([Dt.config({})])},N=[T,O];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(P=>["tox-notification","tox-notification--in",`tox-notification--${P}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:Me([ht.config({}),Lt("notification-events",[fe(Vl(),P=>{E.getOpt(P).each(ht.focus)})])]),components:N.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[E.asSpec()]:[]),apis:C}},configFields:[nn("level"),pe("progress"),nn("icon"),pe("onAction"),pe("text"),pe("iconProvider"),pe("translationProvider"),ic("closeButton",!0)],apis:{updateProgress:(t,s,c)=>{t.updateProgress(s,c)},updateText:(t,s,c)=>{t.updateText(s,c)}}});var A4=(t,s,c)=>{const i=s.backstage.shared,d=()=>{const S=qn(ze.fromDom(t.getContentAreaContainer())),E=Ac(),T=jr(E.x,S.x,S.right),O=jr(E.y,S.y,S.bottom),N=Math.max(S.right,E.right),P=Math.max(S.bottom,E.bottom);return A.some(xs(T,O,N-T,P-O))};return{open:(S,E)=>{const T=()=>{E(),wo.hide(N)},O=br($w.sketch({text:S.text,level:qo(["success","error","warning","warn","info"],S.type)?S.type:void 0,progress:S.progressBar===!0,icon:S.icon,closeButton:S.closeButton,onAction:T,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),N=br(wo.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{},...i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));c.add(N),_i(S.timeout)&&S.timeout>0&&O1.setEditorTimeout(t,()=>{T()},S.timeout);const z={close:T,reposition:()=>{const j=Bc(O),oe={maxHeightFunction:Sg()},Y=t.notificationManager.getNotifications();if(Y[0]===z){const se={...i.anchors.banner(),overrides:oe};wo.showWithinBounds(N,j,{anchor:se},d)}else Zh(Y,z).each(se=>{const Le=Y[se-1].getEl(),ue={type:"node",root:er(),node:A.some(ze.fromDom(Le)),overrides:oe,layouts:{onRtl:()=>[gs],onLtr:()=>[gs]}};wo.showWithinBounds(N,j,{anchor:ue},d)})},text:j=>{$w.updateText(O,j)},settings:S,getEl:()=>O.element.dom,progressBar:{value:j=>{$w.updateProgress(O,j)}}};return z},close:S=>{S.close()},getArgs:S=>S.settings}},Fv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Nw=tinymce.util.Tools.resolve("tinymce.EditorManager"),D1=tinymce.util.Tools.resolve("tinymce.Env"),Na;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Na||(Na={}));var Iv;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(Iv||(Iv={}));const Fn=t=>s=>s.options.get(t),Lv=t=>s=>A.from(t(s)),kO=t=>{const s=D1.deviceType.isPhone(),c=D1.deviceType.isTablet()||s,i=t.options.register,d=b=>wn(b)||b===!1,g=b=>wn(b)||_i(b);i("skin",{processor:b=>wn(b)||b===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:Fv.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:b=>wn(b)||Ai(b),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:b=>Ai(b)||wn(b)||Ei(b)?{value:b,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),mr(9,b=>{i("toolbar"+(b+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:c?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Iv.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:b=>b==="both"||Ai(b),default:!D1.deviceType.isTouch()}),i("sidebar_show",{processor:"string"})},T4=Fn("readonly"),_4=Fn("height"),O4=Fn("width"),Hv=Lv(Fn("min_width")),Od=Lv(Fn("min_height")),Pw=Lv(Fn("max_width")),D4=Lv(Fn("max_height")),Fw=Lv(Fn("style_formats")),EO=Fn("style_formats_merge"),R4=Fn("style_formats_autohide"),AO=Fn("content_langs"),B4=Fn("removed_menuitems"),ch=Fn("toolbar_mode"),Iw=Fn("toolbar_groups"),M4=Fn("toolbar_location"),TO=Fn("fixed_toolbar_container"),bN=Fn("fixed_toolbar_container_target"),R1=Fn("toolbar_persist"),_O=Fn("toolbar_sticky_offset"),Lw=Fn("menubar"),B1=Fn("toolbar"),OO=Fn("file_picker_callback"),DO=Fn("file_picker_validator_handler"),Hw=Fn("file_picker_types"),RO=Fn("typeahead_urls"),BO=Fn("anchor_top"),MO=Fn("anchor_bottom"),$O=Fn("draggable_modal"),NO=Fn("statusbar"),PO=Fn("elementpath"),FO=Fn("branding"),IO=Fn("resize"),LO=Fn("paste_as_text"),HO=Fn("sidebar_show"),zO=Fn("promotion"),$4=t=>t.options.get("skin")===!1,M1=t=>t.options.get("menubar")!==!1,VO=t=>{const s=t.options.get("skin_url");if($4(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const c=t.options.get("skin");return Nw.baseURL+"/skins/ui/"+c}},ZO=t=>t.options.get("line_height_formats").split(" "),zw=t=>{const s=B1(t),c=wn(s),i=Ei(s)&&s.length>0;return!zv(t)&&(i||c||s===!0)},Vw=t=>{const s=mr(9,i=>t.options.get("toolbar"+(i+1))),c=Xt(s,wn);return Ir(c.length>0,c)},zv=t=>Vw(t).fold(()=>{const s=B1(t);return Sl(s,wn)&&s.length>0},dt),N4=t=>M4(t)===Iv.bottom,UO=t=>{var s;if(!t.inline)return A.none();const c=(s=TO(t))!==null&&s!==void 0?s:"";if(c.length>0)return Uo(er(),c);const i=bN(t);return Ar(i)?A.some(ze.fromDom(i)):A.none()},Vv=t=>t.inline&&UO(t).isSome(),P4=t=>UO(t).getOrThunk(()=>kb(tc(ze.fromDom(t.getElement())))),F4=t=>t.inline&&!M1(t)&&!zw(t)&&!zv(t),ah=t=>(t.options.get("toolbar_sticky")||t.inline)&&!Vv(t)&&!F4(t),WO=t=>{const s=t.options.get("menu");return Lo(s,c=>({...c,items:c.items}))};var vN=Object.freeze({__proto__:null,get ToolbarMode(){return Na},get ToolbarLocation(){return Iv},register:kO,getSkinUrl:VO,isReadOnly:T4,isSkinDisabled:$4,getHeightOption:_4,getWidthOption:O4,getMinWidthOption:Hv,getMinHeightOption:Od,getMaxWidthOption:Pw,getMaxHeightOption:D4,getUserStyleFormats:Fw,shouldMergeStyleFormats:EO,shouldAutoHideStyleFormats:R4,getLineHeightFormats:ZO,getContentLanguages:AO,getRemovedMenuItems:B4,isMenubarEnabled:M1,isMultipleToolbars:zv,isToolbarEnabled:zw,isToolbarPersist:R1,getMultipleToolbarsOption:Vw,getUiContainer:P4,useFixedContainer:Vv,getToolbarMode:ch,isDraggableModal:$O,isDistractionFree:F4,isStickyToolbar:ah,getStickyToolbarOffset:_O,getToolbarLocation:M4,isToolbarLocationBottom:N4,getToolbarGroups:Iw,getMenus:WO,getMenubar:Lw,getToolbar:B1,getFilePickerCallback:OO,getFilePickerTypes:Hw,useTypeaheadUrls:RO,getAnchorTop:BO,getAnchorBottom:MO,getFilePickerValidatorHandler:DO,useStatusBar:NO,useElementPath:PO,promotionEnabled:zO,useBranding:FO,getResize:IO,getPasteAsText:LO,getSidebarShow:HO});const jO="[data-mce-autocompleter]",GO=t=>ms(t,jO),yN=t=>Uo(t,jO),CN={setup:(t,s)=>{const c=(d,g)=>{lt(d,Xf(),{raw:g})},i=()=>t.getMenu().bind(cn.getHighlighted);s.on("keydown",d=>{const g=d.which;!t.isActive()||(t.isMenuOpen()?g===13?(i().each(uc),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(cn.highlightFirst)},b=>{c(b,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(b=>{c(b,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&GO(ze.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var I4;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(I4||(I4={}));var cl=I4;const L4="tox-menu-nav__js",Zw="tox-collection__item",$1="tox-swatch",wN={normal:L4,color:$1},Uw="tox-collection__item--enabled",xN="tox-collection__group-heading",qO="tox-collection__item-icon",H4="tox-collection__item-label",SN="tox-collection__item-accessory",z4="tox-collection__item-caret",kN="tox-collection__item-checkmark",ih="tox-collection__item--active",Ww="tox-collection__item-container",KO="tox-collection__item-container--column",jw="tox-collection__item-container--row",Gw="tox-collection__item-container--align-right",XO="tox-collection__item-container--align-left",iu="tox-collection__item-container--valign-top",V4="tox-collection__item-container--valign-middle",EN="tox-collection__item-container--valign-bottom",YO=t=>at(wN,t).getOr(L4),AN=t=>t==="color"?"tox-swatches":"tox-menu",Z4=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:AN(t),tieredMenu:"tox-tiered-menu"}),fi=t=>{const s=Z4(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:YO(t)}},TN=(t,s,c)=>{const i=Z4(c);return{tag:"div",classes:ve([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},_N=[sh.parts.items({})],Zv=(t,s,c)=>{const i=Z4(c);return{dom:{tag:"div",classes:ve([[i.tieredMenu]])},markers:fi(c)}},U4=te([nn("data"),ee("inputAttributes",{}),ee("inputStyles",{}),ee("tag","input"),ee("inputClasses",[]),Gt("onSetValue"),ee("styles",{}),ee("eventOrder",{}),Fo("inputBehaviours",[Ie,ht]),ee("selectOnFocus",!0)]),qw=t=>Me([ht.config({onFocus:t.selectOnFocus?s=>{const c=s.element,i=or(c);c.dom.setSelectionRange(0,i.length)}:X})]),ON=t=>({...qw(t),...hs(t.inputBehaviours,[Ie.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>or(s.element),setValue:(s,c)=>{or(s.element)!==c&&Yu(s.element,c)}},onSetValue:t.onSetValue})])}),Kw=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),W4=(t,s)=>({uid:t.uid,dom:Kw(t),components:[],behaviours:ON(t),eventOrder:t.eventOrder}),N1=Pc({name:"Input",configFields:U4(),factory:W4}),j4=Ke("refetch-trigger-event"),G4=Ke("redirect-menu-item-interaction"),JO="tox-menu__searcher",Xw=t=>Uo(t.element,`.${JO}`).bind(s=>t.getSystem().getByDom(s).toOptional()),QO=Xw,DN=(t,s)=>{Ie.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},eD=t=>{const s=Ie.getValue(t),c=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:c,selectionEnd:i}},RN=(t,s)=>{Or(s.element,"id").each(c=>Ot(t.element,"aria-activedescendant",c))},BN=t=>{const s=(d,g)=>(g.cut(),A.none()),c=(d,g)=>{const b={interactionEvent:g.event,eventType:g.event.raw.type};return lt(d,G4,b),A.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[Zw]},components:[N1.sketch({inputClasses:[JO,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:Me([Lt(i,[fe(zu(),d=>{mn(d,j4)}),fe(Xf(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),rt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:c,onEscape:c,onUp:c,onDown:c})]),eventOrder:{keydown:[i,rt.name()]}})]}},Yw="tox-collection--results__js",P1=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Ke("aria-item-search-result-id"),"aria-selected":"false"}}}:t},Jw=(t,s)=>c=>{const i=pn(c,s);return Ae(i,d=>({dom:t,components:d}))},MN=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[sh.parts.items({preprocess:t!=="auto"?Jw({tag:"div",classes:["tox-swatches__row"]},t):Wt})]}]}),$N=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[sh.parts.items({preprocess:Jw({tag:"div",classes:["tox-collection__group"]},t)})]}),q4=(t,s)=>{const c=[];let i=[];return R(t,(d,g)=>{s(d,g)?(i.length>0&&c.push(i),i=[],(tn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&c.push(i),Ae(c,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},K4=(t,s,c)=>sh.parts.items({preprocess:i=>{const d=Ae(i,c);return t!=="auto"&&t>1?Jw({tag:"div",classes:["tox-collection__group"]},t)(d):q4(d,(g,b)=>s[b].type==="separator")}}),tD=(t,s,c=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[K4(t,s,Wt)]}),nD=(t,s,c=!0)=>{const i=Ke("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",Yw].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[K4(t,s,P1)]}},oD=(t,s,c)=>{const i=Ke("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[BN({i18n:mi.translate,placeholder:c.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],Yw],attributes:{id:i}},components:[K4(t,s,P1)]}]}},sD=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[sh.parts.items({preprocess:c=>q4(c,(i,d)=>t[d].type==="separator")})]}),Uv=t=>In(t,s=>"icon"in s&&s.icon!==void 0),Dd=t=>(console.error(Nu(t)),console.log(t),A.none()),NN=(t,s,c,i,d)=>{const g=sD(c);return{value:t,dom:g.dom,components:g.components,items:c}},Qw=(t,s,c,i,d)=>{const g=()=>d.menuType!=="searchable"?tD(i,c):d.searchMode.searchMode==="search-with-field"?oD(i,c,d.searchMode):nD(i,c);if(d.menuType==="color"){const b=MN(i);return{value:t,dom:b.dom,components:b.components,items:c}}else if(d.menuType==="normal"&&i==="auto"){const b=tD(i,c);return{value:t,dom:b.dom,components:b.components,items:c}}else if(d.menuType==="normal"||d.menuType==="searchable"){const b=g();return{value:t,dom:b.dom,components:b.components,items:c}}else if(d.menuType==="listpreview"&&i!=="auto"){const b=$N(i);return{value:t,dom:b.dom,components:b.components,items:c}}else return{value:t,dom:TN(s,i,d.menuType),components:_N,items:c}},xo=Qo("type"),Wv=Qo("name"),ex=Qo("label"),Rd=Qo("text"),rD=Qo("title"),cD=Qo("icon"),lh=Qo("value"),PN=Fi("fetch"),aD=Fi("getSubmenuItems"),uh=Fi("onAction"),F1=Fi("onItemAction"),dh=es("onSetup",()=>X),X4=pr("name"),Bd=pr("text"),al=pr("icon"),jv=pr("tooltip"),tx=pr("label"),iD=pr("shortcut"),Y4=Vo("select"),Gv=ic("active",!1),FN=ic("borderless",!1),gi=ic("enabled",!0),qv=ic("primary",!1),J4=t=>ee("columns",t),nx=ee("meta",{}),Q4=es("onAction",X),Ym=t=>ac("type",t),mh=t=>ks("name","name",Yd(()=>Ke(`${t}-name`)),ho),IN=t=>ks("value","value",Yd(()=>Ke(`${t}-value`)),Oc()),lD=ot([xo,Bd]),LN=t=>jt("separatormenuitem",lD,t),uD=ot([Ym("autocompleteitem"),Gv,gi,nx,lh,Bd,al]),dD=t=>jt("Autocompleter.Separator",lD,t),HN=t=>jt("Autocompleter.Item",uD,t),Kv=[gi,jv,al,Bd,dh],zN=ot([xo,uh].concat(Kv)),mD=t=>jt("toolbarbutton",zN,t),eE=[Gv].concat(Kv),ox=ot(eE.concat([xo,uh])),fD=t=>jt("ToggleButton",ox,t),tE=[es("predicate",kn),Li("scope","node",["node","editor"]),Li("position","selection",["node","selection","line"])],gD=Kv.concat([Ym("contextformbutton"),qv,uh,nr("original",Wt)]),hD=eE.concat([Ym("contextformbutton"),qv,uh,nr("original",Wt)]),VN=Kv.concat([Ym("contextformbutton")]),pD=eE.concat([Ym("contextformtogglebutton")]),bD=Dc("type",{contextformbutton:gD,contextformtogglebutton:hD}),vD=ot([Ym("contextform"),es("initValue",te("")),tx,hr("commands",bD),Ii("launch",Dc("type",{contextformbutton:VN,contextformtogglebutton:pD}))].concat(tE)),yD=t=>jt("ContextForm",vD,t),ZN=ot([Ym("contexttoolbar"),Qo("items")].concat(tE)),UN=t=>jt("ContextToolbar",ZN,t),WN=[xo,Qo("src"),pr("alt"),Hi("classes",[],ho)],jN=ot(WN),fh=[xo,Rd,X4,Hi("classes",["tox-collection__item-label"],ho)],nE=ot(fh),CD=_c(()=>Il("type",{cardimage:jN,cardtext:nE,cardcontainer:sx})),sx=ot([xo,ac("direction","horizontal"),ac("align","left"),ac("valign","middle"),hr("items",CD)]),vc=[gi,Bd,iD,IN("menuitem"),nx],GN=ot([xo,tx,hr("items",CD),dh,Q4].concat(vc)),qN=t=>jt("cardmenuitem",GN,t),KN=ot([xo,Gv,al].concat(vc)),oE=t=>jt("choicemenuitem",KN,t),wD=[xo,Qo("fancytype"),Q4],XN=[ee("initData",{})].concat(wD),xD=[Kb("initData",{},[ic("allowCustomColors",!0),tm("colors",Oc())])].concat(wD),YN=Dc("fancytype",{inserttable:XN,colorswatch:xD}),JN=t=>jt("fancymenuitem",YN,t),QN=ot([xo,dh,Q4,al].concat(vc)),Ic=t=>jt("menuitem",QN,t),lu=ot([xo,aD,dh,al].concat(vc)),eP=t=>jt("nestedmenuitem",lu,t),SD=ot([xo,al,Gv,dh,uh].concat(vc)),rx=t=>jt("togglemenuitem",SD,t),Xv=(t,s,c)=>{const i=Us(t.element,"."+c);if(i.length>0){const d=Jt(i,g=>{const b=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(b-C)>s}).getOr(i.length);return A.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return A.none()},kD=(t,s)=>Me([Lt(t,s)]),Jm={namedEvents:kD,unnamedEvents:t=>kD(Ke("unnamed-events"),t)},Yv=Ke("tooltip.exclusive"),Jv=Ke("tooltip.show"),hi=Ke("tooltip.hide"),ED=(t,s,c)=>{t.getSystem().broadcastOn([Yv],{})};var Lc=Object.freeze({__proto__:null,hideAllExclusive:ED,setComponents:(t,s,c,i)=>{c.getTooltip().each(d=>{d.getSystem().isConnected()&&Dt.set(d,i)})}}),il=Object.freeze({__proto__:null,events:(t,s)=>{const c=d=>{s.getTooltip().each(g=>{Ws(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},i=d=>{if(!s.isShowing()){ED(d);const g=t.lazySink(d).getOrDie(),b=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Bt(t.mode==="normal"?[fe(ti(),C=>{mn(d,Jv)}),fe(rm(),C=>{mn(d,hi)})]:[]),behaviours:Me([Dt.config({})])});s.setTooltip(b),Ql(g,b),t.onShow(d,b),wr.position(g,b,{anchor:t.anchor(d)})}};return Bt(ve([[fe(Jv,d=>{s.resetTimer(()=>{i(d)},t.delay)}),fe(hi,d=>{s.resetTimer(()=>{c(d)},t.delay)}),fe(Sa(),(d,g)=>{const b=g;b.universal||qo(b.channels,Yv)&&c(d)}),ka(d=>{c(d)})],t.mode==="normal"?[fe(Vl(),d=>{mn(d,Jv)}),fe($o(),d=>{mn(d,hi)}),fe(ti(),d=>{mn(d,Jv)}),fe(rm(),d=>{mn(d,hi)})]:[fe(t0(),(d,g)=>{mn(d,Jv)}),fe(am(),d=>{mn(d,hi)})]]))}}),tP=[pe("lazySink"),pe("tooltipDom"),ee("exclusive",!0),ee("tooltipComponents",[]),ee("delay",300),Li("mode","normal",["normal","follow-highlight"]),ee("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:te([gs,Vs,zs,sr,Os,Un]),onRtl:te([gs,Vs,zs,sr,Os,Un])}})),Gt("onHide"),Gt("onShow")],gh=Object.freeze({__proto__:null,init:()=>{const t=Kn(),s=Kn(),c=()=>{t.on(clearTimeout)},i=(g,b)=>{c(),t.set(setTimeout(g,b))},d=te("not-implemented");return dc({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:c,resetTimer:i,readState:d})}});const Qv=ts({fields:tP,name:"tooltipping",active:il,state:gh,apis:Lc}),TD=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),e2="silver.readonly",sE=ot([Pu("readonly")]),cx=(t,s)=>{const i=t.outerContainer.element;s&&(t.mothership.broadcastOn([li()],{target:i}),t.uiMothership.broadcastOn([li()],{target:i})),t.mothership.broadcastOn([e2],{readonly:s}),t.uiMothership.broadcastOn([e2],{readonly:s})},ax=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&cx(s,!0)}),t.on("SwitchMode",()=>cx(s,t.mode.isReadOnly())),T4(t)&&t.mode.set("readonly")},os=()=>na.config({channels:{[e2]:{schema:sE,onReceive:(t,s)=>{st.set(t,s.readonly)}}}}),Hc={item:t=>st.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>st.config({disabled:t}),splitButton:t=>st.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>st.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},ix=(t,s)=>{const c=t.getApi(s);return i=>{i(c)}},t2=(t,s)=>bo(c=>{ix(t,c)(d=>{const g=t.onSetup(d);nt(g)&&s.set(g)})}),n2=(t,s)=>ka(c=>ix(t,c)(s.get())),rP=(t,s)=>Ui((c,i)=>{ix(t,c)(t.onAction),!t.triggersSubmenu&&s===cl.CLOSE_ON_EXECUTE&&(c.getSystem().isConnected()&&mn(c,pp()),i.stop())}),cP={[lc()]:["disabling","alloy.base.behaviour","toggling","item-events"]},o2=Yo,I1=(t,s,c,i)=>{const d=Ye(X);return{type:"item",dom:s.dom,components:o2(s.optComponents),data:t.data,eventOrder:cP,hasSubmenu:t.triggersSubmenu,itemBehaviours:Me([Lt("item-events",[rP(t,c),t2(t,d),n2(t,d)]),Hc.item(()=>!t.enabled||i.isDisabled()),os(),Dt.config({})].concat(t.itemBehaviours))}},L1=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),aP=t=>{const s=D1.os.isMacOS()||D1.os.isiOS(),d=s?{alt:"\u2325",ctrl:"\u2303",shift:"\u21E7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),b=Ae(g,C=>{const S=C.toLowerCase().trim();return tn(d,S)?d[S]:C});return s?b.join(""):b.join("+")},rE=(t,s,c=[qO])=>rl(t,{tag:"div",classes:c},s),cE=t=>({dom:{tag:"div",classes:[H4]},components:[vo(mi.translate(t))]}),OD=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),DD=(t,s)=>({dom:{tag:"div",classes:[H4]},components:[{dom:{tag:t.tag,styles:t.styles},components:[vo(mi.translate(s))]}]}),RD=t=>({dom:{tag:"div",classes:[SN]},components:[vo(aP(t))]}),BD=t=>rE("checkmark",t,[kN]),iP=t=>rE("chevron-right",t,[z4]),lP=t=>rE("chevron-down",t,[z4]),uP=(t,s)=>{const c=t.direction==="vertical"?KO:jw,i=t.align==="left"?XO:Gw;return{dom:{tag:"div",classes:[Ww,c,i,(()=>{switch(t.valign){case"top":return iu;case"middle":return V4;case"bottom":return EN}})()]},components:s}},dP=(t,s,c)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:c.getOr("")}}}),mP=(t,s,c)=>{const i="custom",d="remove",g=t.ariaLabel,b=t.value,C=t.iconContent.map(E=>xO(E,s.icons,c));return{dom:(()=>{const E=$1,T=C.getOr(""),N={tag:"div",attributes:g.map(P=>({title:s.translate(P)})).getOr({}),classes:[E]};return b===i?{...N,tag:"button",classes:[...N.classes,"tox-swatches__picker-btn"],innerHtml:T}:b===d?{...N,classes:[...N.classes,"tox-swatch--remove"],innerHtml:T}:Ar(b)?{...N,attributes:{...N.attributes,"data-mce-color":b},styles:{"background-color":b}}:N})(),optComponents:[]}},MD=t=>{const s=t.map(c=>({attributes:{title:mi.translate(c)}})).getOr({});return{tag:"div",classes:[L4,Zw],...s}},aE=(t,s,c,i)=>{const d={tag:"div",classes:[qO]},g=N=>rl(N,d,s.icons,i),b=()=>A.some({dom:d}),C=c?t.iconContent.map(g).orThunk(b):A.none(),S=t.checkMark,E=A.from(t.meta).fold(()=>cE,N=>tn(N,"style")?en(DD,N.style):cE),T=t.htmlContent.fold(()=>t.textContent.map(E),N=>A.some(OD(N,[H4])));return{dom:MD(t.ariaLabel),optComponents:[C,T,t.shortcutContent.map(RD),S,t.caret]}},H1=(t,s,c,i=A.none())=>t.presets==="color"?mP(t,s,i):aE(t,s,c,i),$D=(t,s)=>at(t,"tooltipWorker").map(c=>[Qv.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:i=>({type:"submenu",item:i,overrides:{maxHeightFunction:Sg}}),mode:"follow-highlight",onShow:(i,d)=>{c(g=>{Qv.setComponents(i,[hm({element:ze.fromDom(g)})])})}})]).getOr([]),fP=t=>Fv.DOM.encode(t),iE=(t,s)=>{const c=mi.translate(t),i=fP(c);if(s.length>0){const d=new RegExp(TD(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},gP=(t,s,c,i,d,g,b,C=!0)=>{const S=H1({presets:i,textContent:A.none(),htmlContent:c?t.text.map(E=>iE(E,s)):A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:t.value},b.providers,C,t.icon);return I1({data:L1(t),enabled:t.enabled,getApi:te({}),onAction:E=>d(t.value,t.meta),onSetup:te(X),triggersSubmenu:!1,itemBehaviours:$D(t.meta,b)},S,g,b.providers)},ND=(t,s)=>Ae(t,c=>{switch(c.type){case"cardcontainer":return uP(c,ND(c.items,s));case"cardimage":return dP(c.src,c.classes,c.alt);case"cardtext":const d=c.name.exists(g=>qo(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return OD(iE(c.text,d),c.classes)}}),PD=(t,s,c,i)=>{const d=b=>({isEnabled:()=>!st.isDisabled(b),setEnabled:C=>{st.set(b,!C),R(Us(b.element,"*"),S=>{b.getSystem().getByDom(S).each(E=>{E.hasConfigured(st)&&st.set(E,!C)})})}}),g={dom:MD(t.label),optComponents:[A.some({dom:{tag:"div",classes:[Ww,jw]},components:ND(t.items,i)})]};return I1({data:L1({text:A.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(i.itemBehaviours).getOr([])},g,s,c.providers)},FD=(t,s,c,i,d,g,b,C=!0)=>{const S=T=>({setActive:O=>{Qt.set(T,O)},isActive:()=>Qt.isOn(T),isEnabled:()=>!st.isDisabled(T),setEnabled:O=>st.set(T,!O)}),E=H1({presets:c,textContent:s?t.text:A.none(),htmlContent:A.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:A.none(),checkMark:s?A.some(BD(b.icons)):A.none(),caret:A.none(),value:t.value},b,C);return ro(I1({data:L1(t),enabled:t.enabled,getApi:S,onAction:T=>i(t.value),onSetup:T=>(T.setActive(d),X),triggersSubmenu:!1,itemBehaviours:[]},E,g,b),{toggling:{toggleClass:Uw,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},lE=g1(p4(),b4()),ID=t=>({value:t}),LD=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,HD=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,zD=t=>LD.test(t)||HD.test(t),hP=t=>pb(t,"#").toUpperCase(),VD=t=>zD(t)?A.some({value:hP(t)}):A.none(),pP=t=>({value:t.value.replace(LD,(c,i,d,g)=>i+i+d+d+g+g)}),bP=t=>{const s=pP(t),c=HD.exec(s.value);return c===null?["FFFFFF","FF","FF","FF"]:c},uE=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},s2=t=>{const s=uE(t.red)+uE(t.green)+uE(t.blue);return ID(s)},ZD=Math.min,UD=Math.max,r2=Math.round,ll=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,WD=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Md=(t,s,c,i)=>({red:t,green:s,blue:c,alpha:i}),dE=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},jD=t=>{let s,c,i;const d=(t.hue||0)%360;let g=t.saturation/100,b=t.value/100;if(g=UD(0,ZD(g,1)),b=UD(0,ZD(b,1)),g===0)return s=c=i=r2(255*b),Md(s,c,i,1);const C=d/60,S=b*g,E=S*(1-Math.abs(C%2-1)),T=b-S;switch(Math.floor(C)){case 0:s=S,c=E,i=0;break;case 1:s=E,c=S,i=0;break;case 2:s=0,c=S,i=E;break;case 3:s=0,c=E,i=S;break;case 4:s=E,c=0,i=S;break;case 5:s=S,c=0,i=E;break;default:s=c=i=0}return s=r2(255*(s+T)),c=r2(255*(c+T)),i=r2(255*(i+T)),Md(s,c,i,1)},hh=t=>{const s=bP(t),c=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return Md(c,i,d,1)},GD=(t,s,c,i)=>{const d=parseInt(t,10),g=parseInt(s,10),b=parseInt(c,10),C=parseFloat(i);return Md(d,g,b,C)},qD=t=>{if(t==="transparent")return A.some(Md(0,0,0,0));const s=ll.exec(t);if(s!==null)return A.some(GD(s[1],s[2],s[3],"1"));const c=WD.exec(t);return c!==null?A.some(GD(c[1],c[2],c[3],c[4])):A.none()},mE=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,KD=Md(255,0,0,1),vP=t=>{t.dispatch("SkinLoaded")},yP=(t,s)=>{t.dispatch("SkinLoadError",s)},z1=t=>{t.dispatch("ResizeEditor")},fE=(t,s)=>{t.dispatch("ResizeContent",s)},XD=(t,s)=>{t.dispatch("ScrollContent",s)},YD=(t,s)=>{t.dispatch("TextColorChange",s)},JD=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},gE=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),ph=(t,s,c)=>({hue:t,saturation:s,value:c}),c2=t=>{let s=0,c=0,i=0;const d=t.red/255,g=t.green/255,b=t.blue/255,C=Math.min(d,Math.min(g,b)),S=Math.max(d,Math.max(g,b));if(C===S)return i=C,ph(0,0,i*100);const E=d===C?g-b:b===C?d-g:b-d;return s=d===C?3:b===C?1:5,s=60*(s-E/(S-C)),c=(S-C)/S,i=S,ph(Math.round(s),Math.round(c*100),Math.round(i*100))},QD=t=>c2(hh(t)),eR=t=>s2(jD(t)),tR=t=>VD(t).orThunk(()=>qD(t).map(s2)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const c=s.getContext("2d");c.clearRect(0,0,s.width,s.height),c.fillStyle="#FFFFFF",c.fillStyle=t,c.fillRect(0,0,1,1);const i=c.getImageData(0,0,1,1).data,d=i[0],g=i[1],b=i[2],C=i[3];return s2(Md(d,g,b,C))});var lx=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const nR="tinymce-custom-colors",hE=((t=10)=>{const s=lx.getItem(nR),c=wn(s)?JSON.parse(s):[],d=(S=>t-S.length<0?S.slice(0,t):S)(c),g=S=>{Zh(d,S).each(b),d.unshift(S),d.length>t&&d.pop(),lx.setItem(nR,JSON.stringify(d))},b=S=>{d.splice(S,1)};return{add:g,state:()=>d.slice(0)}})(10),oR=t=>Math.max(5,Math.ceil(Math.sqrt(t))),sR=t=>{const s=[];for(let c=0;c<t.length;c+=2)s.push({text:t[c+1],value:"#"+tR(t[c]).value,type:"choiceitem"});return s},pE=t=>s=>s.options.get(t),CP=t=>{const s=t.options.register;s("color_map",{processor:c=>Sl(c,wn)?{value:sR(c),valid:!0}:{valid:!1,message:"Must be an array of strings."},default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_cols",{processor:"number",default:oR(bE(t).length)}),s("custom_colors",{processor:"boolean",default:!0})},rR=pE("color_cols"),cR=pE("custom_colors"),bE=pE("color_map"),wP=()=>Ae(hE.state(),t=>({type:"choiceitem",text:t,value:t})),aR=t=>{hE.add(t)},vE="#000000",xP=t=>Ar(t.style),SP=(t,s)=>{let c;return t.dom.getParents(t.selection.getStart(),i=>{const d=xP(i)?i.style[s==="forecolor"?"color":"backgroundColor"]:null;d&&(c=c||d)}),A.from(c)},kP=(t,s,c)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:c}),t.nodeChanged()})},iR=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},EP=t=>{t.addCommand("mceApplyTextcolor",(s,c)=>{kP(t,s,c)}),t.addCommand("mceRemoveTextcolor",s=>{iR(t,s)})},lR=t=>{const s="choiceitem",c={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[c,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[c]},yE=(t,s,c,i)=>{c==="custom"?fR(t)(g=>{g.each(b=>{aR(b),t.execCommand("mceApplyTextcolor",s,b),i(b)})},vE):c==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(c),t.execCommand("mceApplyTextcolor",s,c))},uR=(t,s)=>t.concat(wP().concat(lR(s))),dR=(t,s)=>c=>{c(uR(t,s))},a2=(t,s,c)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,c)},CE=(t,s,c,i,d)=>{t.ui.registry.addSplitButton(s,{tooltip:i,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:g=>SP(t,c).bind(C=>qD(C).map(S=>{const E=s2(S).value;return ys(g.toLowerCase(),E)})).getOr(!1),columns:rR(t),fetch:dR(bE(t),cR(t)),onAction:g=>{yE(t,c,d.get(),X)},onItemAction:(g,b)=>{yE(t,c,b,C=>{d.set(C),YD(t,{name:s,color:C})})},onSetup:g=>{a2(g,s,d.get());const b=C=>{C.name===s&&a2(g,C.name,C.color)};return t.on("TextColorChange",b),()=>{t.off("TextColorChange",b)}}})},mR=(t,s,c,i)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",onAction:d=>{yE(t,c,d.value,X)}}]})},fR=t=>(s,c)=>{let i=!1;const d=C=>{const E=C.getData().colorpicker;i?(s(A.from(E)),C.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",E]))},g=(C,S)=>{S.name==="hex-valid"&&(i=S.value)},b={colorpicker:c};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:b,onAction:g,onSubmit:d,onClose:X,onCancel:()=>{s(A.none())}})},AP=t=>{EP(t);const s=Ye(vE),c=Ye(vE);CE(t,"forecolor","forecolor","Text color",s),CE(t,"backcolor","hilitecolor","Background color",c),mR(t,"forecolor","forecolor","Text color"),mR(t,"backcolor","hilitecolor","Background color")},wE=(t,s,c,i,d,g,b,C)=>{const S=Uv(s),T=TP(s,c,i,d!=="color"?"normal":"color",g,b,C);return Qw(t,S,T,i,{menuType:d})},TP=(t,s,c,i,d,g,b)=>Yo(Ae(t,C=>C.type==="choiceitem"?oE(C).fold(Dd,S=>A.some(FD(S,c===1,i,s,g(S.value),d,b,Uv(t)))):A.none())),ux=(t,s)=>{const c=fi(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+c.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group")}},xE=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${$1}`:`.${Zw}`}},gR=(t,s)=>{const c=hR(t,s),i=s.colorinput.getColorCols(),d="color",b={...wE(Ke("menu-value"),c,C=>{t.onAction({value:C})},i,d,cl.CLOSE_ON_EXECUTE,kn,s.shared.providers),markers:fi(d),movement:ux(i,d)};return{type:"widget",data:{value:Ke("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[lE.widget(sh.sketch(b))]}},hR=(t,s)=>{const c=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>uR(s.colorinput.getColors(),c),i=>i.concat(lR(c)))},pR=Ke("cell-over"),SE=Ke("cell-execute"),_P=(t,s,c)=>{const i=b=>lt(b,pR,{row:t,col:s}),d=b=>lt(b,SE,{row:t,col:s}),g=(b,C)=>{C.stop(),d(b)};return br({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:c}},behaviours:Me([Lt("insert-table-picker-cell",[fe(ti(),ht.focus),fe(lc(),d),fe(Yf(),g),fe(Qf(),g)]),Qt.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),ht.config({onFocus:i})])})},OP=(t,s,c)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let b=0;b<c;b++)g.push(_P(d,b,t));i.push(g)}return i},DP=(t,s,c,i,d)=>{for(let g=0;g<i;g++)for(let b=0;b<d;b++)Qt.set(t[g][b],g<=s&&b<=c)},RP=t=>So(t,s=>Ae(s,Bc)),bR=(t,s)=>vo(`${s}x${t}`),BP={inserttable:t=>{const i=Ke("size-label"),d=OP(i,10,10),g=bR(0,0),b=Pn({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:i}},components:[g],behaviours:Me([Dt.config({})])});return{type:"widget",data:{value:Ke("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[lE.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:RP(d).concat(b.asSpec()),behaviours:Me([Lt("insert-table-picker",[bo(C=>{Dt.set(b.get(C),[g])}),lm(pR,(C,S,E)=>{const{row:T,col:O}=E.event;DP(d,T,O,10,10),Dt.set(b.get(C),[bR(T+1,O+1)])}),lm(SE,(C,S,E)=>{const{row:T,col:O}=E.event;t.onAction({numRows:T+1,numColumns:O+1}),mn(C,pp())})]),rt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:gR},MP=(t,s)=>at(BP,t.fancytype).map(c=>c(t,s)),$P=(t,s,c,i=!0,d=!1)=>{const g=d?lP(c.icons):iP(c.icons),b=S=>({isEnabled:()=>!st.isDisabled(S),setEnabled:E=>st.set(S,!E)}),C=H1({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(g),checkMark:A.none(),shortcutContent:t.shortcut},c,i);return I1({data:L1(t),getApi:b,enabled:t.enabled,onAction:X,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,c)},NP=(t,s,c,i=!0)=>{const d=b=>({isEnabled:()=>!st.isDisabled(b),setEnabled:C=>st.set(b,!C)}),g=H1({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.none(),checkMark:A.none(),shortcutContent:t.shortcut},c,i);return I1({data:L1(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c)},dx=t=>({type:"separator",dom:{tag:"div",classes:[Zw,xN]},components:t.text.map(vo).toArray()}),kE=(t,s,c,i=!0)=>{const d=b=>({setActive:C=>{Qt.set(b,C)},isActive:()=>Qt.isOn(b),isEnabled:()=>!st.isDisabled(b),setEnabled:C=>st.set(b,!C)}),g=H1({iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,checkMark:A.some(BD(c.icons)),caret:A.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},c,i);return ro(I1({data:L1(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,c),{toggling:{toggleClass:Uw,toggleOnExecute:!1,selected:t.active}})},EE=gP,AE=dx,PP=NP,FP=$P,TE=kE,_E=MP,mx=PD;var LP=Object.freeze({__proto__:null,getCoupled:(t,s,c,i)=>c.getOrCreate(t,s,i),getExistingCoupled:(t,s,c,i)=>c.getExisting(t,s,i)}),HP=[us("others",Cy(St.value,Oc()))],zP=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,b)=>{if(ko(g.others).length===0)throw new Error("Cannot find any known coupled components");return at(t,b)},c=(g,b,C)=>s(b,C).getOrThunk(()=>{const E=at(b.others,C).getOrDie("No information found for coupled component: "+C)(g),T=g.getSystem().build(E);return t[C]=T,T}),i=(g,b,C)=>s(b,C).orThunk(()=>(at(b.others,C).getOrDie("No information found for coupled component: "+C),A.none())),d=te({});return dc({readState:d,getExisting:i,getOrCreate:c})}});const co=ts({fields:HP,name:"coupling",apis:LP,state:zP}),OE=t=>{let s=A.none(),c=[];const i=E=>OE(T=>{d(O=>{T(E(O))})}),d=E=>{b()?S(E):c.push(E)},g=E=>{b()||(s=A.some(E),C(c),c=[])},b=()=>s.isSome(),C=E=>{R(E,S)},S=E=>{s.each(T=>{setTimeout(()=>{E(T)},0)})};return t(g),{get:d,map:i,isReady:b}},VP={nu:OE,pure:t=>OE(s=>{s(t)})},ZP=t=>{setTimeout(()=>{throw t},0)},V1=t=>{const s=S=>{t().then(S,ZP)};return{map:S=>V1(()=>t().then(S)),bind:S=>V1(()=>t().then(E=>S(E).toPromise())),anonBind:S=>V1(()=>t().then(()=>S.toPromise())),toLazy:()=>VP.nu(s),toCached:()=>{let S=null;return V1(()=>(S===null&&(S=t()),S))},toPromise:t,get:s}},Gs={nu:t=>V1(()=>new Promise(t)),pure:t=>V1(()=>Promise.resolve(t))},vR=te("sink"),yR=te(Nc({name:vR(),overrides:te({dom:{tag:"div"},behaviours:Me([wr.config({useFixed:dt})]),events:Bt([Zu(Xf()),Zu(Hs()),Zu(Yf())])})})),ul=(t,s)=>{const c=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:c,overrides:d}),g=>({type:i,hotspot:c,overrides:d,layouts:g}))},UP=(t,s,c)=>{const i=t.fetch;return i(c).map(s)},WP=(t,s,c,i,d,g,b)=>{const C=UP(t,s,i),S=CR(i,t);return C.map(E=>E.bind(T=>A.from(rh.sketch({...g.menu(),uid:ju(""),data:T,highlightOnOpen:b,onOpenMenu:(O,N)=>{const P=S().getOrDie();wr.position(P,N,{anchor:c}),It.decloak(d)},onOpenSubmenu:(O,N,P)=>{const z=S().getOrDie();wr.position(z,P,{anchor:{type:"submenu",item:N}}),It.decloak(d)},onRepositionMenu:(O,N,P)=>{const z=S().getOrDie();wr.position(z,N,{anchor:c}),R(P,j=>{wr.position(z,j.triggeredMenu,{anchor:{type:"submenu",item:j.triggeringItem}})})},onEscape:()=>(ht.focus(i),It.close(d),A.some(!0))}))))},Z1=(t,s,c,i,d,g,b)=>{const C=ul(t,c);return WP(t,s,C,c,i,d,b).map(E=>(E.fold(()=>{It.isOpen(i)&&It.close(i)},T=>{It.cloak(i),It.open(i,T),g(i)}),i))},jo=(t,s,c,i,d,g,b)=>(It.close(i),Gs.pure(i)),DE=(t,s,c,i,d,g)=>{const b=co.getCoupled(c,"sandbox");return(It.isOpen(b)?jo:Z1)(t,s,c,b,i,d,g)},jP=(t,s,c)=>{const i=Ut.getCurrent(s).getOr(s),d=Bo(t.element);c?Tt(i.element,"min-width",d+"px"):Df(i.element,d)},CR=(t,s)=>t.getSystem().getByUid(s.uid+"-"+vR()).map(c=>()=>St.value(c)).getOrThunk(()=>s.lazySink.fold(()=>()=>St.error(new Error("No internal sink is specified, nor could an external sink be found")),c=>()=>c(t))),wR=t=>{It.getState(t).each(s=>{rh.repositionMenus(s)})},RE=(t,s,c)=>{const i=g0(),d=(C,S)=>{const E=ul(t,s);i.link(s.element),t.matchWidth&&jP(E.hotspot,S,t.useMinWidth),t.onOpen(E,C,S),c!==void 0&&c.onOpen!==void 0&&c.onOpen(C,S)},g=(C,S)=>{i.unlink(s.element),c!==void 0&&c.onClose!==void 0&&c.onClose(C,S)},b=CR(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:pc.augment(t.sandboxBehaviours,[Ie.config({store:{mode:"memory",initialValue:s}}),It.config({onOpen:d,onClose:g,isPartOf:(C,S,E)=>Wl(S,E)||Wl(s,E),getAttachPoint:()=>b().getOrDie()}),Ut.config({find:C=>It.getState(C).bind(S=>Ut.getCurrent(S))}),na.config({channels:{...Fm({isExtraPart:kn}),...sa({doReposition:wR})}})])}},xR=t=>{const s=co.getCoupled(t,"sandbox");wR(s)},BE=()=>[ee("sandboxClasses",[]),pc.field("sandboxBehaviours",[Ut,na,It,Ie])],GP=te([pe("dom"),pe("fetch"),Gt("onOpen"),Wr("onExecute"),ee("getHotspot",A.some),ee("getAnchorOverrides",te({})),Xl(),Fo("dropdownBehaviours",[Qt,co,rt,ht]),pe("toggleClass"),ee("eventOrder",{}),nn("lazySink"),ee("matchWidth",!1),ee("useMinWidth",!1),nn("role")].concat(BE())),qP=te([ra({schema:[pg(),ee("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),yR()]),KP=(t,s,c,i)=>{const d=T=>at(t.dom,"attributes").bind(O=>at(O,T)),g=T=>{It.getState(T).each(O=>{rh.highlightPrimary(O)})},b=(T,O,N)=>DE(t,Wt,T,i,O,N),C=T=>{b(T,g,lr.HighlightMenuAndItem).get(X)},S={expand:T=>{Qt.isOn(T)||b(T,X,lr.HighlightNone).get(X)},open:T=>{Qt.isOn(T)||b(T,X,lr.HighlightMenuAndItem).get(X)},refetch:T=>co.getExistingCoupled(T,"sandbox").fold(()=>b(T,X,lr.HighlightMenuAndItem).map(X),N=>Z1(t,Wt,T,N,i,X,lr.HighlightMenuAndItem).map(X)),isOpen:Qt.isOn,close:T=>{Qt.isOn(T)&&b(T,X,lr.HighlightMenuAndItem).get(X)},repositionMenus:T=>{Qt.isOn(T)&&xR(T)}},E=(T,O)=>(uc(T),A.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:hs(t.dropdownBehaviours,[Qt.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),co.config({others:{sandbox:T=>RE(t,T,{onOpen:()=>Qt.on(T),onClose:()=>Qt.off(T)})}}),rt.config({mode:"special",onSpace:E,onEnter:E,onDown:(T,O)=>{if(Pa.isOpen(T)){const N=co.getCoupled(T,"sandbox");g(N)}else Pa.open(T);return A.some(!0)},onEscape:(T,O)=>Pa.isOpen(T)?(Pa.close(T),A.some(!0)):A.none()}),ht.config({})]),events:Dw(A.some(C)),eventOrder:{...t.eventOrder,[lc()]:["disabling","toggling","alloy.base.behaviour"]},apis:S,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),T=>({role:T})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Pa=Sr({name:"Dropdown",configFields:GP(),partFields:qP(),factory:KP,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),XP=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},YP=t=>{const s=Ie.getValue(t),c=Xw(t).map(eD);Pa.refetch(s).get(()=>{const i=co.getCoupled(s,"sandbox");c.each(d=>Xw(i).each(g=>DN(g,d)))})},JP=(t,s)=>{QP(t).each(c=>{gk(t,c.element,s.event.eventType,s.event.interactionEvent)})},QP=t=>It.getState(t).bind(cn.getHighlighted).bind(cn.getHighlighted),e8=t=>Ts(t.element,Yw)?A.some(t.element):Uo(t.element,"."+Yw),SR=(t,s,c)=>{QO(t).each(i=>{RN(i,c),e8(s).each(g=>{Or(g,"id").each(b=>Ot(i.element,"aria-controls",b))})}),Ot(c.element,"aria-selected","true")},t8=(t,s,c)=>{Ot(c.element,"aria-selected","false")},n8=t=>{QO(t).each(s=>ht.focus(s))},o8=t=>co.getExistingCoupled(t,"sandbox").bind(Xw).map(eD).map(c=>c.fetchPattern).getOr("");var fx;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(fx||(fx={}));const s8=(t,s,c,i,d)=>{const g=c.shared.providers,b=C=>d?{...C,shortcut:A.none(),icon:C.text.isSome()?A.none():C.icon}:C;switch(t.type){case"menuitem":return Ic(t).fold(Dd,C=>A.some(PP(b(C),s,g,i)));case"nestedmenuitem":return eP(t).fold(Dd,C=>A.some(FP(b(C),s,g,i,d)));case"togglemenuitem":return rx(t).fold(Dd,C=>A.some(TE(b(C),s,g,i)));case"separator":return LN(t).fold(Dd,C=>A.some(AE(C)));case"fancymenuitem":return JN(t).fold(Dd,C=>_E(C,c));default:return console.error("Unknown item in general menu",t),A.none()}},r8=(t,s,c,i,d,g,b)=>{const C=i===1,S=!C||Uv(t);return Yo(Ae(t,E=>{switch(E.type){case"separator":return dD(E).fold(Dd,T=>A.some(AE(T)));case"cardmenuitem":return qN(E).fold(Dd,T=>A.some(mx({...T,onAction:O=>{T.onAction(O),c(T.value,T.meta)}},d,g,{itemBehaviours:$D(T.meta,g),cardText:{matchText:s,highlightOn:b}})));case"autocompleteitem":default:return HN(E).fold(Dd,T=>A.some(EE(T,s,C,"normal",c,d,g,S)))}}))},kR=(t,s,c,i,d,g)=>{const b=Uv(s),C=Yo(Ae(s,T=>{const O=P=>d?!tn(P,"text"):b,N=P=>s8(P,c,i,O(P),d);return T.type==="nestedmenuitem"&&T.getSubmenuItems().length<=0?N({...T,enabled:!1}):N(T)})),S=XP(g);return(d?NN:Qw)(t,b,C,1,S)},ME=t=>rh.singleData(t.value,t),ER=(t,s,c,i)=>{const d=ux(s,i),g=fi(i);return{data:ME({...t,movement:d,menuBehaviours:Jm.unnamedEvents(s!=="auto"?[]:[bo((b,C)=>{Xv(b,4,g.item).each(({numColumns:S,numRows:E})=>{rt.setGridSize(b,E,S)})})])}),menu:{markers:fi(i),fakeFocus:c===fx.ContentFocus}}},c8=(t,s)=>GO(ze.fromDom(s.startContainer)).map(c=>{const i=t.createRng();return i.selectNode(c.dom),i}),a8={register:(t,s)=>{const c=Ye(!1),i=Ye(!1),d=br(wo.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Me([Lt("dismissAutocompleter",[fe(Ul(),()=>E())])]),lazySink:s.getSink})),g=()=>wo.isOpen(d),b=i.get,C=()=>{g()&&wo.hide(d)},S=()=>wo.getContent(d).bind(z=>kl(z.components(),0)),E=()=>t.execCommand("mceAutocompleterClose"),T=z=>{const j=Fr(z,oe=>A.from(oe.columns)).getOr(1);return So(z,oe=>{const Y=oe.items;return r8(Y,oe.matchText,(se,Le)=>{const ue=t.selection.getRng();c8(t.dom,ue).each(Ve=>{const Xe={hide:()=>E(),reload:Ze=>{C(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ze})}};c.set(!0),oe.onAction(Xe,Ve,se,Le),c.set(!1)})},j,cl.BUBBLE_TO_SANDBOX,s,oe.highlightOn)})},O=(z,j)=>{yN(ze.fromDom(t.getBody())).each(oe=>{const Y=Fr(z,se=>A.from(se.columns)).getOr(1);wo.showMenuAt(d,{anchor:{type:"node",root:ze.fromDom(t.getBody()),node:A.from(oe)}},ER(Qw("autocompleter-value",!0,j,Y,{menuType:"normal"}),Y,fx.ContentFocus,"normal"))}),S().each(cn.highlightFirst)},N=z=>{const j=T(z);j.length>0?O(z,j):C()};t.on("AutocompleterStart",({lookupData:z})=>{i.set(!0),c.set(!1),N(z)}),t.on("AutocompleterUpdate",({lookupData:z})=>N(z)),t.on("AutocompleterEnd",()=>{C(),i.set(!1),c.set(!1)});const P={cancelIfNecessary:E,isMenuOpen:g,isActive:b,isProcessingAction:c.get,getMenu:S};CN.setup(P,t)}},U1=(t,s,c)=>ms(t,s,c).isSome(),AR=(t,s)=>{let c=null;return{cancel:()=>{c!==null&&(clearTimeout(c),c=null)},schedule:(...g)=>{c=setTimeout(()=>{t.apply(null,g),c=null},s)}}},TR=5,i8=400,$E=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},l8=(t,s)=>{const c=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return c>TR||i>TR},u8=t=>{const s=Kn(),c=Ye(!1),i=AR(E=>{t.triggerEvent(fk(),E),c.set(!0)},i8),d=E=>($E(E).each(T=>{i.cancel();const O={x:T.clientX,y:T.clientY,target:E.target};i.schedule(E),c.set(!1),s.set(O)}),A.none()),g=E=>(i.cancel(),$E(E).each(T=>{s.on(O=>{l8(T,O)&&s.clear()})}),A.none()),b=E=>{i.cancel();const T=O=>Wn(O.target,E.target);return s.get().filter(T).map(O=>c.get()?(E.prevent(),!1):t.triggerEvent(Qf(),E))},C=om([{key:Qa(),value:d},{key:qf(),value:g},{key:Br(),value:b}]);return{fireIfReady:(E,T)=>at(C,T).bind(O=>O(E))}},d8=t=>t.raw.which===Sw[0]&&!qo(["input","textarea"],bn(t.target))&&!U1(t.target,'[contenteditable="true"]'),m8=(t,s)=>{const c={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=u8(c),g=Ae(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),P=>rr(t,P,z=>{d.fireIfReady(z,P).each(oe=>{oe&&z.kill()}),c.triggerEvent(P,z)&&z.kill()})),b=Kn(),C=rr(t,"paste",P=>{d.fireIfReady(P,"paste").each(j=>{j&&P.kill()}),c.triggerEvent("paste",P)&&P.kill(),b.set(setTimeout(()=>{c.triggerEvent(Qb(),P)},0))}),S=rr(t,"keydown",P=>{c.triggerEvent("keydown",P)?P.kill():c.stopBackspace&&d8(P)&&P.prevent()}),E=rr(t,"focusin",P=>{c.triggerEvent("focusin",P)&&P.kill()}),T=Kn(),O=rr(t,"focusout",P=>{c.triggerEvent("focusout",P)&&P.kill(),T.set(setTimeout(()=>{c.triggerEvent($o(),P)},0))});return{unbind:()=>{R(g,P=>{P.unbind()}),S.unbind(),E.unbind(),O.unbind(),C.unbind(),b.on(clearTimeout),T.on(clearTimeout)}}},NE=(t,s)=>{const c=at(t,"target").getOr(s);return Ye(c)},f8=(t,s)=>{const c=Ye(!1),i=Ye(!1);return{stop:()=>{c.set(!0)},cut:()=>{i.set(!0)},isStopped:c.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},_R=t=>{const s=Ye(!1);return{stop:()=>{s.set(!0)},cut:X,isStopped:s.get,isCut:kn,event:t,setSource:q("Cannot set source of a broadcasted event"),getSource:q("Cannot get source of a broadcasted event")}},i2=Es.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),PE=(t,s,c,i,d,g)=>{const b=t(s,i),C=f8(c,d);return b.fold(()=>(g.logEventNoHandlers(s,i),i2.complete()),S=>{const E=S.descHandler;return Ki(E)(C),C.isStopped()?(g.logEventStopped(s,S.element,E.purpose),i2.stopped()):C.isCut()?(g.logEventCut(s,S.element,E.purpose),i2.complete()):ba(S.element).fold(()=>(g.logNoParent(s,S.element,E.purpose),i2.complete()),O=>(g.logEventResponse(s,S.element,E.purpose),i2.resume(O)))})},OR=(t,s,c,i,d,g)=>PE(t,s,c,i,d,g).fold(dt,b=>OR(t,s,c,b,d,g),kn),g8=(t,s,c,i,d)=>{const g=NE(c,i);return PE(t,s,c,i,g,d)},h8=(t,s,c)=>{const i=_R(s);return R(t,d=>{const g=d.descHandler;Ki(g)(i)}),i.isStopped()},p8=(t,s,c,i)=>DR(t,s,c,c.target,i),DR=(t,s,c,i,d)=>{const g=NE(c,i);return OR(t,s,c,i,g,d)},b8=(t,s)=>({element:t,descHandler:s}),v8=(t,s)=>({id:t,descHandler:s}),y8=()=>{const t={},s=(b,C,S)=>{Xo(S,(E,T)=>{const O=t[T]!==void 0?t[T]:{};O[C]=qi(E,b),t[T]=O})},c=(b,C)=>ag(C).bind(S=>at(b,S)).map(S=>b8(C,S));return{registerId:s,unregisterId:b=>{Xo(t,(C,S)=>{tn(C,b)&&delete C[b]})},filterByType:b=>at(t,b).map(C=>gn(C,(S,E)=>v8(E,S))).getOr([]),find:(b,C,S)=>at(t,C).bind(E=>Gf(S,T=>c(E,T),b))}},C8=()=>{const t=y8(),s={},c=E=>{const T=E.element;return ag(T).getOrThunk(()=>kp("uid-",E.element))},i=(E,T)=>{const O=s[T];if(O===E)g(E);else throw new Error('The tagId "'+T+'" is already used by: '+si(O.element)+`
Cannot use it for: `+si(E.element)+`
The conflicting element is`+(Hr(O.element)?" ":" not ")+"already in the DOM")},d=E=>{const T=c(E);vs(s,T)&&i(E,T);const O=[E];t.registerId(O,T,E.events),s[T]=E},g=E=>{ag(E.element).each(T=>{delete s[T],t.unregisterId(T)})};return{find:(E,T,O)=>t.find(E,T,O),filter:E=>t.filterByType(E),register:d,unregister:g,getById:E=>at(s,E)}},$d=Pc({name:"Container",factory:t=>{const{attributes:s,...c}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...c},components:t.components,behaviours:Hm(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[ee("components",[]),Fo("containerBehaviours",[]),ee("events",{}),ee("domModification",{}),ee("eventOrder",{})]}),RR=t=>{const s=Y=>ba(t.element).fold(dt,se=>Wn(Y,se)),c=C8(),i=(Y,se)=>c.find(s,Y,se),d=m8(t.element,{triggerEvent:(Y,se)=>wm(Y,se.target,Le=>p8(i,Y,se,Le))}),g={debugInfo:te("real"),triggerEvent:(Y,se,Le)=>{wm(Y,se,ue=>DR(i,Y,Le,se,ue))},triggerFocus:(Y,se)=>{ag(Y).fold(()=>{Qi(Y)},Le=>{wm(Zl(),Y,ue=>(g8(i,Zl(),{originator:se,kill:X,prevent:X,target:Y},Y,ue),!1))})},triggerEscape:(Y,se)=>{g.triggerEvent("keydown",Y.element,se.event)},getByUid:Y=>j(Y),getByDom:Y=>oe(Y),build:br,buildOrPatch:pm,addToGui:Y=>{S(Y)},removeFromGui:Y=>{E(Y)},addToWorld:Y=>{b(Y)},removeFromWorld:Y=>{C(Y)},broadcast:Y=>{N(Y)},broadcastOn:(Y,se)=>{P(Y,se)},broadcastEvent:(Y,se)=>{z(Y,se)},isConnected:dt},b=Y=>{Y.connect(g),Di(Y.element)||(c.register(Y),R(Y.components(),b),g.triggerEvent(bp(),Y.element,{target:Y.element}))},C=Y=>{Di(Y.element)||(R(Y.components(),C),c.unregister(Y)),Y.disconnect()},S=Y=>{Ql(t,Y)},E=Y=>{Ws(Y)},T=()=>{d.unbind(),Ml(t.element)},O=Y=>{const se=c.filter(Sa());R(se,Le=>{const ue=Le.descHandler;Ki(ue)(Y)})},N=Y=>{O({universal:!0,data:Y})},P=(Y,se)=>{O({universal:!1,channels:Y,data:se})},z=(Y,se)=>{const Le=c.filter(Y);return h8(Le,se)},j=Y=>c.getById(Y).fold(()=>St.error(new Error('Could not find component with uid: "'+Y+'" in system.')),St.value),oe=Y=>{const se=ag(Y).getOr("not found");return j(se)};return b(t),{root:t,element:t.element,destroy:T,add:S,remove:E,getByUid:j,getByDom:oe,addToWorld:b,removeFromWorld:C,broadcast:N,broadcastOn:P,broadcastEvent:z}},BR=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ae(t.items,s.interpreter)}),w8=te([ee("prefix","form-field"),Fo("fieldBehaviours",[Ut,Ie])]),x8=te([Nc({schema:[pe("dom")],name:"label"}),Nc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[pe("text")],name:"aria-descriptor"}),js({factory:{sketch:t=>{const s=As(t,["factory"]);return t.factory.sketch(s)}},schema:[pe("factory")],name:"field"})]),S8=(t,s,c,i)=>{const d=hs(t.fieldBehaviours,[Ut.config({find:C=>_n(C,t,"field")}),Ie.config({store:{mode:"manual",getValue:C=>Ut.getCurrent(C).bind(Ie.getValue),setValue:(C,S)=>{Ut.getCurrent(C).each(E=>{Ie.setValue(E,S)})}}})]),g=Bt([bo((C,S)=>{const E=cw(C,t,["label","field","aria-descriptor"]);E.field().each(T=>{const O=Ke(t.prefix);E.label().each(N=>{Ot(N.element,"for",O),Ot(T.element,"id",O)}),E["aria-descriptor"]().each(N=>{const P=Ke(t.prefix);Ot(N.element,"id",P),Ot(T.element,"aria-describedby",P)})})})]),b={getField:C=>_n(C,t,"field"),getLabel:C=>_n(C,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:b}},dn=Sr({name:"FormField",configFields:w8(),partFields:x8(),factory:S8,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var FE=Object.freeze({__proto__:null,exhibit:(t,s)=>eo({attributes:om([{key:s.tabAttr,value:"true"}])})}),k8=[ee("tabAttr","data-alloy-tabstop")];const Oo=ts({fields:k8,name:"tabstopping",active:FE});var E8=tinymce.util.Tools.resolve("tinymce.html.Entities");const l2=(t,s,c,i)=>{const d=T8(t,s,c,i);return dn.sketch(d)},A8=(t,s)=>l2(t,s,[],[]),T8=(t,s,c,i)=>({dom:MR(c),components:t.toArray().concat([s]),fieldBehaviours:Me(i)}),gx=()=>MR([]),MR=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),dl=(t,s)=>dn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[vo(s.translate(t))]}),zc=Ke("form-component-change"),u2=Ke("form-close"),bh=Ke("form-cancel"),Nd=Ke("form-action"),hx=Ke("form-submit"),W1=Ke("form-block"),Qm=Ke("form-unblock"),IE=Ke("form-tabchange"),LE=Ke("form-resize"),_8=(t,s,c)=>{const i=t.label.map(O=>dl(O,s)),d=O=>(N,P)=>{ms(P.event.target,"[data-collection-item-value]").each(z=>{O(N,P,z,Yn(z,"data-collection-item-value"))})},g=(O,N)=>{const P=Ae(N,oe=>{const Y=mi.translate(oe.text),se=t.columns===1?`<div class="tox-collection__item-label">${Y}</div>`:"",Le=`<div class="tox-collection__item-icon">${oe.icon}</div>`,ue={_:" "," - ":" ","-":" "},Ve=Y.replace(/\_| \- |\-/g,Ze=>ue[Ze]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${E8.encodeAllRaw(oe.value)}" title="${Ve}" aria-label="${Ve}">${Le}${se}</div>`}),z=t.columns!=="auto"&&t.columns>1?pn(P,t.columns):[P],j=Ae(z,oe=>`<div class="tox-collection__group">${oe.join("")}</div>`);oi(O.element,j.join(""))},b=d((O,N,P,z)=>{N.stop(),s.isDisabled()||lt(O,Nd,{name:t.name,value:z})}),C=[fe(ti(),d((O,N,P)=>{Qi(P)})),fe(Yf(),b),fe(Qf(),b),fe(Vl(),d((O,N,P)=>{Uo(O.element,"."+ih).each(z=>{Vn(z,ih)}),ds(P,ih)})),fe(Hu(),d(O=>{Uo(O.element,"."+ih).each(N=>{Vn(N,ih)})})),Ui(d((O,N,P,z)=>{lt(O,Nd,{name:t.name,value:z})}))],S=(O,N)=>Ae(Us(O.element,".tox-collection__item"),N),E=dn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Wt},behaviours:Me([st.config({disabled:s.isDisabled,onDisabled:O=>{S(O,N=>{ds(N,"tox-collection__item--state-disabled"),Ot(N,"aria-disabled",!0)})},onEnabled:O=>{S(O,N=>{Vn(N,"tox-collection__item--state-disabled"),Cs(N,"aria-disabled")})}}),os(),Dt.config({}),Ie.config({store:{mode:"memory",initialValue:c.getOr([])},onSetValue:(O,N)=>{g(O,N),t.columns==="auto"&&Xv(O,5,"tox-collection__item").each(({numRows:P,numColumns:z})=>{rt.setGridSize(O,P,z)}),mn(O,LE)}}),Oo.config({}),rt.config(xE(t.columns,"normal")),Lt("collection-events",C)]),eventOrder:{[lc()]:["disabling","alloy.base.behaviour","collection-events"]}});return l2(i,E,["tox-form__group--collection"],[])},O8=["input","textarea"],$R=t=>{const s=bn(t);return qo(O8,s)},NR=(t,s)=>{const c=s.getRoot(t).getOr(t.element);Vn(c,s.invalidClass),s.notify.each(i=>{$R(t.element)&&Ot(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{oi(d,i.validHtml)}),i.onValid(t)})},PR=(t,s,c,i)=>{const d=s.getRoot(t).getOr(t.element);ds(d,s.invalidClass),s.notify.each(g=>{$R(t.element)&&Ot(t.element,"aria-invalid",!0),g.getContainer(t).each(b=>{oi(b,i)}),g.onInvalid(t,i)})},FR=(t,s,c)=>s.validator.fold(()=>Gs.pure(St.value(!0)),i=>i.validate(t)),HE=(t,s,c)=>(s.notify.each(i=>{i.onValidate(t)}),FR(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(PR(t,s,c,d),St.error(d)),d=>(NR(t,s),St.value(d))):St.error("No longer in system")));var D8=Object.freeze({__proto__:null,markValid:NR,markInvalid:PR,query:FR,run:HE,isInvalid:(t,s)=>{const c=s.getRoot(t).getOr(t.element);return Ts(c,s.invalidClass)}}),R8=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(c=>Bt([fe(c.onEvent,i=>{HE(i,t,s).get(Wt)})].concat(c.validateOnLoad?[bo(i=>{HE(i,t,s).get(X)})]:[]))).getOr({})}),IR=[pe("invalidClass"),ee("getRoot",A.none),Vr("notify",[ee("aria","alert"),ee("getContainer",A.none),ee("validHtml",""),Gt("onValid"),Gt("onInvalid"),Gt("onValidate")]),Vr("validator",[pe("validate"),ee("onEvent","input"),ee("validateOnLoad",!0)])];const Vc=ts({fields:IR,name:"invalidating",active:R8,apis:D8,extra:{validation:t=>s=>{const c=Ie.getValue(s);return Gs.pure(t(c))}}});var LR=Object.freeze({__proto__:null,events:()=>Bt([wp(Ey(),dt)]),exhibit:()=>eo({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const G1=ts({fields:[],name:"unselecting",active:LR}),px=(t,s)=>Pa.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:Me([Hc.button(s.providers.isDisabled),os(),G1.config({}),Oo.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:c=>Gs.nu(i=>t.fetch(i)).map(i=>A.from(ME(ro(wE(Ke("menu-value"),i,d=>{t.onItemAction(c,d)},t.columns,t.presets,cl.CLOSE_ON_EXECUTE,kn,s.providers),{movement:ux(t.columns,t.presets)})))),parts:{menu:Zv(!1,1,t.presets)}}),HR=Ke("color-input-change"),q1=Ke("color-swatch-change"),K1=Ke("color-picker-cancel"),B8=(t,s,c,i)=>{const d=dn.parts.field({factory:N1,inputClasses:["tox-textfield"],data:i,onSetValue:E=>Vc.run(E).get(X),inputBehaviours:Me([st.config({disabled:s.providers.isDisabled}),os(),Oo.config({}),Vc.config({invalidClass:"tox-textbox-field-invalid",getRoot:E=>Ud(E.element),notify:{onValid:E=>{const T=Ie.getValue(E);lt(E,HR,{color:T})}},validator:{validateOnLoad:!1,validate:E=>{const T=Ie.getValue(E);if(T.length===0)return Gs.pure(St.value(!0));{const O=ze.fromTag("span");Tt(O,"background-color",T);const N=Ps(O,"background-color").fold(()=>St.error("blah"),P=>St.value(T));return Gs.pure(N)}}}})]),selectOnFocus:!1}),g=t.label.map(E=>dl(E,s.providers)),b=(E,T)=>{lt(E,q1,{value:T})},C=(E,T)=>{S.getOpt(E).each(O=>{T==="custom"?c.colorPicker(N=>{N.fold(()=>mn(O,K1),P=>{b(O,P),aR(P)})},"#ffffff"):T==="remove"?b(O,""):b(O,T)})},S=Pn(px({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Os,zs,gs],onLtr:()=>[zs,Os,gs]},components:[],fetch:dR(c.getColors(),c.hasCustomColors()),columns:c.getColorCols(),presets:"color",onItemAction:C},s));return dn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,S.asSpec()]}]),fieldBehaviours:Me([Lt("form-field-events",[fe(HR,(E,T)=>{S.getOpt(E).each(O=>{Tt(O.element,"background-color",T.event.color)}),lt(E,zc,{name:t.name})}),fe(q1,(E,T)=>{dn.getField(E).each(O=>{Ie.setValue(O,T.event.value),Ut.getCurrent(E).each(ht.focus)})}),fe(K1,(E,T)=>{dn.getField(E).each(O=>{Ut.getCurrent(E).each(ht.focus)})})])])})},M8=Nc({schema:[pe("dom")],name:"label"}),ef=t=>Nc({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:Bt([ni(Qa(),(d,g,b)=>i(d,b),[s]),ni(Hs(),(d,g,b)=>i(d,b),[s]),ni(ei(),(d,g,b)=>{b.mouseIsDown.get()&&i(d,b)},[s])])}))}),$8=ef("top-left"),N8=ef("top"),P8=ef("top-right"),bx=ef("right"),F8=ef("bottom-right"),I8=ef("bottom"),L8=ef("bottom-left"),zR=ef("left"),H8=js({name:"thumb",defaults:te({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:Bt([Rc(Qa(),t,"spectrum"),Rc(qf(),t,"spectrum"),Rc(Br(),t,"spectrum"),Rc(Hs(),t,"spectrum"),Rc(ei(),t,"spectrum"),Rc(gp(),t,"spectrum")])})}),z8=js({schema:[nr("mouseIsDown",()=>Ye(!1))],name:"spectrum",overrides:t=>{const c=t.model.manager,i=(d,g)=>c.getValueFromEvent(g).map(b=>c.setValueFrom(d,t,b));return{behaviours:Me([rt.config({mode:"special",onLeft:d=>c.onLeft(d,t),onRight:d=>c.onRight(d,t),onUp:d=>c.onUp(d,t),onDown:d=>c.onDown(d,t)}),ht.config({})]),events:Bt([fe(Qa(),i),fe(qf(),i),fe(Hs(),i),fe(ei(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var V8=[M8,zR,bx,N8,I8,$8,P8,L8,F8,H8,z8];const d2=te("slider.change.value"),VR=t=>t.type.indexOf("touch")!==-1,zE=t=>{const s=t.event.raw;if(VR(s)){const c=s;return c.touches!==void 0&&c.touches.length===1?A.some(c.touches[0]).map(i=>zn(i.clientX,i.clientY)):A.none()}else{const c=s;return c.clientX!==void 0?A.some(c).map(i=>zn(i.clientX,i.clientY)):A.none()}},Z8="top",U8="right",W8="bottom",j8="left",tf=t=>t.model.minX,nf=t=>t.model.minY,vx=t=>t.model.minX-1,yx=t=>t.model.minY-1,vh=t=>t.model.maxX,of=t=>t.model.maxY,Pd=t=>t.model.maxX+1,Cx=t=>t.model.maxY+1,ZR=(t,s,c)=>s(t)-c(t),VE=t=>ZR(t,vh,tf),X1=t=>ZR(t,of,nf),ia=t=>VE(t)/2,wx=t=>X1(t)/2,yh=t=>t.stepSize,UR=t=>t.snapToGrid,WR=t=>t.snapStart,jR=t=>t.rounded,xx=(t,s)=>t[s+"-edge"]!==void 0,ZE=t=>xx(t,j8),UE=t=>xx(t,U8),GR=t=>xx(t,Z8),qR=t=>xx(t,W8),uu=t=>t.model.value.get(),sf=(t,s)=>({x:t,y:s}),Fa=(t,s)=>{lt(t,d2(),{value:s})},KR=(t,s)=>{Fa(t,sf(vx(s),yx(s)))},XR=(t,s)=>{Fa(t,yx(s))},G8=(t,s)=>{Fa(t,sf(ia(s),yx(s)))},q8=(t,s)=>{Fa(t,sf(Pd(s),yx(s)))},K8=(t,s)=>{Fa(t,Pd(s))},X8=(t,s)=>{Fa(t,sf(Pd(s),wx(s)))},Y8=(t,s)=>{Fa(t,sf(Pd(s),Cx(s)))},J8=(t,s)=>{Fa(t,Cx(s))},WE=(t,s)=>{Fa(t,sf(ia(s),Cx(s)))},Q8=(t,s)=>{Fa(t,sf(vx(s),Cx(s)))},e7=(t,s)=>{Fa(t,vx(s))},t7=(t,s)=>{Fa(t,sf(vx(s),wx(s)))},jE=(t,s,c,i)=>t<s?t:t>c?c:t===s?s-1:Math.max(s,t-i),GE=(t,s,c,i)=>t>c?t:t<s?s:t===c?c+1:Math.min(c,t+i),YR=(t,s,c)=>Math.max(s,Math.min(c,t)),n7=(t,s,c,i,d)=>d.fold(()=>{const g=t-s,b=Math.round(g/i)*i;return YR(s+b,s-1,c+1)},g=>{const b=(t-g)%i,C=Math.round(b/i),S=Math.floor((t-g)/i),E=Math.floor((c-g)/i),T=Math.min(E,S+C),O=g+T*i;return Math.max(g,O)}),JR=(t,s,c)=>Math.min(c,Math.max(t,s))-s,qE=t=>{const{min:s,max:c,range:i,value:d,step:g,snap:b,snapStart:C,rounded:S,hasMinEdge:E,hasMaxEdge:T,minBound:O,maxBound:N,screenRange:P}=t,z=E?s-1:s,j=T?c+1:c;if(d<O)return z;if(d>N)return j;{const oe=JR(d,O,N),Y=YR(oe/P*i+s,z,j);return b&&Y>=s&&Y<=c?n7(Y,s,c,g,C):S?Math.round(Y):Y}},QR=t=>{const{min:s,max:c,range:i,value:d,hasMinEdge:g,hasMaxEdge:b,maxBound:C,maxOffset:S,centerMinEdge:E,centerMaxEdge:T}=t;return d<s?g?0:E:d>c?b?C:T:(d-s)/i*S},KE="top",e5="right",t5="bottom",XE="left",n5="width",o5="height",ml=t=>t.element.dom.getBoundingClientRect(),la=(t,s)=>t[s],Sx=t=>{const s=ml(t);return la(s,XE)},YE=t=>{const s=ml(t);return la(s,e5)},kx=t=>{const s=ml(t);return la(s,KE)},s5=t=>{const s=ml(t);return la(s,t5)},r5=t=>{const s=ml(t);return la(s,n5)},c5=t=>{const s=ml(t);return la(s,o5)},Ex=(t,s,c)=>(t+s)/2-c,du=(t,s)=>{const c=ml(t),i=ml(s),d=la(c,XE),g=la(c,e5),b=la(i,XE);return Ex(d,g,b)},a5=(t,s)=>{const c=ml(t),i=ml(s),d=la(c,KE),g=la(c,t5),b=la(i,KE);return Ex(d,g,b)},rf=(t,s)=>{lt(t,d2(),{value:s})},JE=(t,s,c)=>{const i={min:tf(s),max:vh(s),range:VE(s),value:c,step:yh(s),snap:UR(s),snapStart:WR(s),rounded:jR(s),hasMinEdge:ZE(s),hasMaxEdge:UE(s),minBound:Sx(t),maxBound:YE(t),screenRange:r5(t)};return qE(i)},QE=(t,s,c)=>{const i=JE(t,s,c);return rf(t,i),i},o7=(t,s)=>{const c=tf(s);rf(t,c)},s7=(t,s)=>{const c=vh(s);rf(t,c)},r7=(t,s,c)=>{const d=(t>0?GE:jE)(uu(c),tf(c),vh(c),yh(c));return rf(s,d),A.some(d)},eA=t=>(s,c)=>r7(t,s,c).map(dt),c7=t=>zE(t).map(c=>c.left),tA=(t,s,c,i,d)=>{const b=r5(t),C=i.bind(T=>A.some(du(T,t))).getOr(0),S=d.bind(T=>A.some(du(T,t))).getOr(b),E={min:tf(s),max:vh(s),range:VE(s),value:c,hasMinEdge:ZE(s),hasMaxEdge:UE(s),minBound:Sx(t),minOffset:0,maxBound:YE(t),maxOffset:b,centerMinEdge:C,centerMaxEdge:S};return QR(E)},m2=(t,s,c,i,d,g)=>{const b=tA(s,g,c,i,d);return Sx(s)-Sx(t)+b},nA=(t,s,c,i)=>{const d=uu(c),g=m2(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),c),b=Bo(s.element)/2;Tt(s.element,"left",g-b+"px")},a7=eA(-1),ua=eA(1),i7=A.none,l7=A.none,i5={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(K8),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(e7)};var l5=Object.freeze({__proto__:null,setValueFrom:QE,setToMin:o7,setToMax:s7,findValueOfOffset:JE,getValueFromEvent:c7,findPositionOfValue:m2,setPositionFromValue:nA,onLeft:a7,onRight:ua,onUp:i7,onDown:l7,edgeActions:i5});const Ax=(t,s)=>{lt(t,d2(),{value:s})},oA=(t,s,c)=>{const i={min:nf(s),max:of(s),range:X1(s),value:c,step:yh(s),snap:UR(s),snapStart:WR(s),rounded:jR(s),hasMinEdge:GR(s),hasMaxEdge:qR(s),minBound:kx(t),maxBound:s5(t),screenRange:c5(t)};return qE(i)},u7=(t,s,c)=>{const i=oA(t,s,c);return Ax(t,i),i},d7=(t,s)=>{const c=nf(s);Ax(t,c)},m7=(t,s)=>{const c=of(s);Ax(t,c)},f7=(t,s,c)=>{const d=(t>0?GE:jE)(uu(c),nf(c),of(c),yh(c));return Ax(s,d),A.some(d)},u5=t=>(s,c)=>f7(t,s,c).map(dt),d5=t=>zE(t).map(c=>c.top),g7=(t,s,c,i,d)=>{const b=c5(t),C=i.bind(T=>A.some(a5(T,t))).getOr(0),S=d.bind(T=>A.some(a5(T,t))).getOr(b),E={min:nf(s),max:of(s),range:X1(s),value:c,hasMinEdge:GR(s),hasMaxEdge:qR(s),minBound:kx(t),minOffset:0,maxBound:s5(t),maxOffset:b,centerMinEdge:C,centerMaxEdge:S};return QR(E)},sA=(t,s,c,i,d,g)=>{const b=g7(s,g,c,i,d);return kx(s)-kx(t)+b},h7=(t,s,c,i)=>{const d=uu(c),g=sA(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),c),b=Jo(s.element)/2;Tt(s.element,"top",g-b+"px")},m5=A.none,rA=A.none,p7=u5(-1),cA=u5(1),Y1={"top-left":A.none(),top:A.some(XR),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(J8),"bottom-left":A.none(),left:A.none()};var f5=Object.freeze({__proto__:null,setValueFrom:u7,setToMin:d7,setToMax:m7,findValueOfOffset:oA,getValueFromEvent:d5,findPositionOfValue:sA,setPositionFromValue:h7,onLeft:m5,onRight:rA,onUp:p7,onDown:cA,edgeActions:Y1});const f2=(t,s)=>{lt(t,d2(),{value:s})},g2=(t,s)=>({x:t,y:s}),b7=(t,s,c)=>{const i=JE(t,s,c.left),d=oA(t,s,c.top),g=g2(i,d);return f2(t,g),g},v7=(t,s,c,i)=>{const d=t>0?GE:jE,g=s?uu(i).x:d(uu(i).x,tf(i),vh(i),yh(i)),b=s?d(uu(i).y,nf(i),of(i),yh(i)):uu(i).y;return f2(c,g2(g,b)),A.some(g)},Ch=(t,s)=>(c,i)=>v7(t,s,c,i).map(dt),y7=(t,s)=>{const c=tf(s),i=nf(s);f2(t,g2(c,i))},C7=(t,s)=>{const c=vh(s),i=of(s);f2(t,g2(c,i))},g5=t=>zE(t),h5=(t,s,c,i)=>{const d=uu(c),g=m2(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),c),b=sA(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),c),C=Bo(s.element)/2,S=Jo(s.element)/2;Tt(s.element,"left",g-C+"px"),Tt(s.element,"top",b-S+"px")},aA=Ch(-1,!1),p5=Ch(1,!1),Kr=Ch(-1,!0),b5=Ch(1,!0),w7={"top-left":A.some(KR),top:A.some(G8),"top-right":A.some(q8),right:A.some(X8),"bottom-right":A.some(Y8),bottom:A.some(WE),"bottom-left":A.some(Q8),left:A.some(t7)};var x7=Object.freeze({__proto__:null,setValueFrom:b7,setToMin:y7,setToMax:C7,getValueFromEvent:g5,setPositionFromValue:h5,onLeft:aA,onRight:p5,onUp:Kr,onDown:b5,edgeActions:w7});const v5=[ee("stepSize",1),ee("onChange",X),ee("onChoose",X),ee("onInit",X),ee("onDragStart",X),ee("onDragEnd",X),ee("snapToGrid",!1),ee("rounded",!0),nn("snapStart"),us("model",Dc("mode",{x:[ee("minX",0),ee("maxX",100),nr("value",t=>Ye(t.mode.minX)),pe("getInitialValue"),Mn("manager",l5)],y:[ee("minY",0),ee("maxY",100),nr("value",t=>Ye(t.mode.minY)),pe("getInitialValue"),Mn("manager",f5)],xy:[ee("minX",0),ee("maxX",100),ee("minY",0),ee("maxY",100),nr("value",t=>Ye({x:t.mode.minX,y:t.mode.minY})),pe("getInitialValue"),Mn("manager",x7)]})),Fo("sliderBehaviours",[rt,Ie]),nr("mouseIsDown",()=>Ye(!1))],pi=Sr({name:"Slider",configFields:v5,partFields:V8,factory:(t,s,c,i)=>{const d=ue=>Da(ue,t,"thumb"),g=ue=>Da(ue,t,"spectrum"),b=ue=>_n(ue,t,"left-edge"),C=ue=>_n(ue,t,"right-edge"),S=ue=>_n(ue,t,"top-edge"),E=ue=>_n(ue,t,"bottom-edge"),T=t.model,O=T.manager,N=(ue,Ve)=>{O.setPositionFromValue(ue,Ve,t,{getLeftEdge:b,getRightEdge:C,getTopEdge:S,getBottomEdge:E,getSpectrum:g})},P=(ue,Ve)=>{T.value.set(Ve);const Xe=d(ue);N(ue,Xe)},z=(ue,Ve)=>{P(ue,Ve);const Xe=d(ue);return t.onChange(ue,Xe,Ve),A.some(!0)},j=ue=>{O.setToMin(ue,t)},oe=ue=>{O.setToMax(ue,t)},Y=ue=>{const Ve=()=>{_n(ue,t,"thumb").each(Ze=>{const it=T.value.get();t.onChoose(ue,Ze,it)})},Xe=t.mouseIsDown.get();t.mouseIsDown.set(!1),Xe&&Ve()},se=(ue,Ve)=>{Ve.stop(),t.mouseIsDown.set(!0),t.onDragStart(ue,d(ue))},Le=(ue,Ve)=>{Ve.stop(),t.onDragEnd(ue,d(ue)),Y(ue)};return{uid:t.uid,dom:t.dom,components:s,behaviours:hs(t.sliderBehaviours,[rt.config({mode:"special",focusIn:ue=>_n(ue,t,"spectrum").map(rt.focusIn).map(dt)}),Ie.config({store:{mode:"manual",getValue:ue=>T.value.get(),setValue:P}}),na.config({channels:{[ru()]:{onReceive:Y}}})]),events:Bt([fe(d2(),(ue,Ve)=>{z(ue,Ve.event.value)}),bo((ue,Ve)=>{const Xe=T.getInitialValue();T.value.set(Xe);const Ze=d(ue);N(ue,Ze);const it=g(ue);t.onInit(ue,Ze,it,T.value.get())}),fe(Qa(),se),fe(Br(),Le),fe(Hs(),se),fe(gp(),Le)]),apis:{resetToMin:j,resetToMax:oe,setValue:P,refresh:N},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,c)=>{t.setValue(s,c)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),iA=Ke("rgb-hex-update"),lA=Ke("slider-update"),fl=Ke("palette-update"),uA=(t,s)=>{const c=pi.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=pi.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return pi.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:te(0)},components:[c,i],sliderBehaviours:Me([ht.config({})]),onChange:(d,g,b)=>{lt(d,lA,{value:b})}})},dA="form",Tx=[Fo("formBehaviours",[Ie])],_x=t=>"<alloy.field."+t+">",S7=t=>{const s=(()=>{const g=[];return{field:(C,S)=>(g.push(C),vd(dA,_x(C),S)),record:te(g)}})(),c=t(s),i=s.record(),d=Ae(i,g=>js({name:g,pname:_x(g)}));return Ra(dA,Tx,d,E7,c)},k7=(t,s)=>t.fold(()=>St.error(s),St.value),E7=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:hs(t.formBehaviours,[Ie.config({store:{mode:"manual",getValue:c=>{const i=aw(c,t);return Lo(i,(d,g)=>d().bind(b=>{const C=Ut.getCurrent(b);return k7(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+si(b.element)))}).map(Ie.getValue))},setValue:(c,i)=>{Xo(i,(d,g)=>{_n(c,t,g).each(b=>{Ut.getCurrent(b).each(C=>{Ie.setValue(C,d)})})})}}})]),apis:{getField:(c,i)=>_n(c,t,i).bind(Ut.getCurrent)}}),J1={getField:Ap((t,s,c)=>t.getField(s,c)),sketch:S7},y5=Ke("valid-input"),C5=Ke("invalid-input"),w5=Ke("validating-input"),Ox="colorcustom.rgb.",A7=(t,s,c,i)=>{const d=(N,P)=>Vc.config({invalidClass:s("invalid"),notify:{onValidate:z=>{lt(z,w5,{type:N})},onValid:z=>{lt(z,y5,{type:N,value:Ie.getValue(z)})},onInvalid:z=>{lt(z,C5,{type:N,value:Ie.getValue(z)})}},validator:{validate:z=>{const j=Ie.getValue(z),oe=P(j)?St.value(!0):St.error(t("aria.input.invalid"));return Gs.pure(oe)},validateOnLoad:!1}}),g=(N,P,z,j,oe)=>{const Y=t(Ox+"range"),se=dn.parts.label({dom:{tag:"label",attributes:{"aria-label":j}},components:[vo(z)]}),Le=dn.parts.field({data:oe,factory:N1,inputAttributes:{type:"text",...P==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:Me([d(P,N),Oo.config({})]),onSetValue:Ze=>{Vc.isInvalid(Ze)&&Vc.run(Ze).get(X)}}),ue=[se,Le],Ve=P!=="hex"?[dn.parts["aria-descriptor"]({text:Y})]:[],Xe=ue.concat(Ve);return{dom:{tag:"div",attributes:{role:"presentation"}},components:Xe}},b=(N,P)=>{const z=s2(P);return J1.getField(N,"hex").each(j=>{ht.isFocused(j)||Ie.setValue(N,{hex:z.value})}),z},C=(N,P)=>{const z=P.red,j=P.green,oe=P.blue;Ie.setValue(N,{red:z,green:j,blue:oe})},S=Pn({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),E=(N,P)=>{S.getOpt(N).each(z=>{Tt(z.element,"background-color","#"+P.value)})};return Pc({factory:()=>{const N={red:Ye(A.some(255)),green:Ye(A.some(255)),blue:Ye(A.some(255)),hex:Ye(A.some("ffffff"))},P=(ct,sn)=>{const an=hh(sn);C(ct,an),Y(an)},z=ct=>N[ct].get(),j=(ct,sn)=>{N[ct].set(sn)},oe=()=>z("red").bind(ct=>z("green").bind(sn=>z("blue").map(an=>Md(ct,sn,an,1)))),Y=ct=>{const sn=ct.red,an=ct.green,rn=ct.blue;j("red",A.some(sn)),j("green",A.some(an)),j("blue",A.some(rn))},se=(ct,sn)=>{const an=sn.event;an.type!=="hex"?j(an.type,A.none()):i(ct)},Le=(ct,sn)=>{c(ct);const an=ID(sn);j("hex",A.some(sn));const rn=hh(an);C(ct,rn),Y(rn),lt(ct,iA,{hex:an}),E(ct,an)},ue=(ct,sn,an)=>{const rn=parseInt(an,10);j(sn,A.some(rn)),oe().each($e=>{const qe=b(ct,$e);lt(ct,iA,{hex:qe}),E(ct,qe)})},Ve=ct=>ct.type==="hex",Xe=(ct,sn)=>{const an=sn.event;Ve(an)?Le(ct,an.value):ue(ct,an.type,an.value)},Ze=ct=>({label:t(Ox+ct+".label"),description:t(Ox+ct+".description")}),it=Ze("red"),ft=Ze("green"),Ht=Ze("blue"),on=Ze("hex");return ro(J1.sketch(ct=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[ct.field("red",dn.sketch(g(dE,"red",it.label,it.description,255))),ct.field("green",dn.sketch(g(dE,"green",ft.label,ft.description,255))),ct.field("blue",dn.sketch(g(dE,"blue",Ht.label,Ht.description,255))),ct.field("hex",dn.sketch(g(zD,"hex",on.label,on.description,"ffffff"))),S.asSpec()],formBehaviours:Me([Vc.config({invalidClass:s("form-invalid")}),Lt("rgb-form-events",[fe(y5,Xe),fe(C5,se),fe(w5,se)])])})),{apis:{updateHex:(ct,sn)=>{Ie.setValue(ct,{hex:sn.value}),P(ct,sn),E(ct,sn)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(N,P,z)=>{N.updateHex(P,z)}},extraApis:{}})},mu=(t,s)=>{const c=pi.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=pi.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(E,T)=>{const{width:O,height:N}=E,P=E.getContext("2d");if(P===null)return;P.fillStyle=T,P.fillRect(0,0,O,N);const z=P.createLinearGradient(0,0,O,0);z.addColorStop(0,"rgba(255,255,255,1)"),z.addColorStop(1,"rgba(255,255,255,0)"),P.fillStyle=z,P.fillRect(0,0,O,N);const j=P.createLinearGradient(0,0,0,N);j.addColorStop(0,"rgba(0,0,0,0)"),j.addColorStop(1,"rgba(0,0,0,1)"),P.fillStyle=j,P.fillRect(0,0,O,N)},g=(E,T)=>{const O=E.components()[0].element.dom,N=ph(T,100,100),P=jD(N);d(O,mE(P))},b=(E,T)=>{const O=c2(hh(T));pi.setValue(E,{x:O.saturation,y:100-O.value})};return Pc({factory:E=>{const T=te({x:0,y:0}),O=(z,j,oe)=>{lt(z,fl,{value:oe})},N=(z,j,oe,Y)=>{d(oe.element.dom,mE(KD))},P=Me([Ut.config({find:A.some}),ht.config({})]);return pi.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:T},rounded:!1,components:[c,i],onChange:O,onInit:N,sliderBehaviours:P})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(E,T,O)=>{g(T,O)},setThumb:(E,T,O)=>{b(T,O)}},extraApis:{}})},Dx=(t,s)=>{const c=d=>{const g=A7(t,s,d.onValidHex,d.onInvalidHex),b=mu(t,s),C=Xe=>(100-Xe)/100*360,S=Xe=>100-Xe/360*100,E={paletteRgba:Ye(KD),paletteHue:Ye(0)},T=Pn(uA(t,s)),O=Pn(b.sketch({})),N=Pn(g.sketch({})),P=(Xe,Ze,it)=>{O.getOpt(Xe).each(ft=>{b.setHue(ft,it)})},z=(Xe,Ze)=>{N.getOpt(Xe).each(it=>{g.updateHex(it,Ze)})},j=(Xe,Ze,it)=>{T.getOpt(Xe).each(ft=>{pi.setValue(ft,S(it))})},oe=(Xe,Ze)=>{O.getOpt(Xe).each(it=>{b.setThumb(it,Ze)})},Y=(Xe,Ze)=>{const it=hh(Xe);E.paletteRgba.set(it),E.paletteHue.set(Ze)},se=(Xe,Ze,it,ft)=>{Y(Ze,it),R(ft,Ht=>{Ht(Xe,Ze,it)})},Le=()=>{const Xe=[z];return(Ze,it)=>{const ft=it.event.value,Ht=E.paletteHue.get(),on=ph(Ht,ft.x,100-ft.y),ct=eR(on);se(Ze,ct,Ht,Xe)}},ue=()=>{const Xe=[P,z];return(Ze,it)=>{const ft=C(it.event.value),Ht=E.paletteRgba.get(),on=c2(Ht),ct=ph(ft,on.saturation,on.value),sn=eR(ct);se(Ze,sn,ft,Xe)}},Ve=()=>{const Xe=[P,j,oe];return(Ze,it)=>{const ft=it.event.hex,Ht=QD(ft);se(Ze,ft,Ht.hue,Xe)}};return{uid:d.uid,dom:d.dom,components:[O.asSpec(),T.asSpec(),N.asSpec()],behaviours:Me([Lt("colour-picker-events",[fe(iA,Ve()),fe(fl,Le()),fe(lA,ue())]),Ut.config({find:Xe=>N.getOpt(Xe)}),rt.config({mode:"acyclic"})])}};return Pc({name:"ColourPicker",configFields:[pe("dom"),ee("onValidHex",X),ee("onInvalidHex",X)],factory:c})},Ia={self:()=>Ut.config({find:A.some}),memento:t=>Ut.config({find:t.getOpt}),childAt:t=>Ut.config({find:s=>ec(s.element,t).bind(c=>s.getSystem().getByDom(c).toOptional())})},mA=ot([ee("preprocess",Wt),ee("postprocess",Wt)]),Rx=(t,s)=>{const c=gr("RepresentingConfigs.memento processors",mA,s);return Ie.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=Ie.getValue(d);return c.postprocess(g)},setValue:(i,d)=>{const g=c.preprocess(d),b=t.get(i);Ie.setValue(b,g)}}})},Q1=(t,s,c)=>Ie.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:c}}),wh=(t,s,c)=>Q1(t,i=>s(i.element),(i,d)=>c(i.element,d)),La={memento:Rx,withElement:wh,withComp:Q1,domValue:t=>wh(t,or,Yu),domHtml:t=>wh(t,Wi,oi),memory:t=>Ie.config({store:{mode:"memory",initialValue:t}})},D7={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},R7=t=>s=>t.translate(D7[s]),B7=(t,s,c)=>{const i=S=>"tox-"+S,d=Dx(R7(s),i),g=S=>{lt(S,Nd,{name:"hex-valid",value:!0})},b=S=>{lt(S,Nd,{name:"hex-valid",value:!1})},C=Pn(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:b}));return{dom:{tag:"div"},components:[C.asSpec()],behaviours:Me([La.withComp(c,S=>{const E=C.get(S);return Ut.getCurrent(E).bind(N=>Ie.getValue(N).hex).map(N=>"#"+N).getOr("")},(S,E)=>{const T=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,O=A.from(T.exec(E)).bind(z=>kl(z,1)),N=C.get(S);Ut.getCurrent(N).fold(()=>{console.log("Can not find form")},z=>{Ie.setValue(z,{hex:O.getOr("")}),J1.getField(z,"hex").each(j=>{mn(j,zu())})})}),Ia.self()])}};var M7=tinymce.util.Tools.resolve("tinymce.Resource");const $7=t=>tn(t,"init"),x5=t=>{const s=Kn(),c=Pn({dom:{tag:t.tag}}),i=Kn();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Me([Lt("custom-editor-events",[bo(d=>{c.getOpt(d).each(g=>{($7(t)?t.init(g.element.dom):M7.load(t.scriptId,t.scriptUrl).then(b=>b(g.element.dom,t.settings))).then(b=>{i.on(C=>{b.setValue(C)}),i.clear(),s.set(b)})})})]),La.withComp(A.none(),()=>s.get().fold(()=>i.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>i.set(g),b=>b.setValue(g))}),Ia.self()]),components:[c.asSpec()]}};var cf=tinymce.util.Tools.resolve("tinymce.util.Tools");const N7=(t,s)=>{const c=cf.explode(s.getOption("images_file_types")),i=d=>In(c,g=>Cu(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Xt(vu(t),i)},S5=(t,s,c)=>{const i=(N,P)=>{P.stop()},d=N=>(P,z)=>{R(N,j=>{j(P,z)})},g=(N,P)=>{var z;if(!st.isDisabled(N)){const j=P.event.raw;C(N,(z=j.dataTransfer)===null||z===void 0?void 0:z.files)}},b=(N,P)=>{const z=P.event.raw.target;C(N,z.files)},C=(N,P)=>{P&&(Ie.setValue(N,N7(P,s)),lt(N,zc,{name:t.name}))},S=Pn({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Me([Lt("input-file-events",[Zu(Yf()),Zu(Qf())])])}),E=N=>({uid:N.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Me([La.memory(c.getOr([])),Ia.self(),st.config({}),Qt.config({toggleClass:"dragenter",toggleOnExecute:!1}),Lt("dropzone-events",[fe("dragenter",d([i,Qt.toggle])),fe("dragleave",d([i,Qt.toggle])),fe("dragover",i),fe("drop",d([i,g])),fe(cm(),b)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[vo(s.translate("Drop an image here"))]},qr.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[vo(s.translate("Browse for an image")),S.asSpec()],action:P=>{S.get(P).element.dom.click()},buttonBehaviours:Me([Oo.config({}),Hc.button(s.isDisabled),os()])})]}]}),T=t.label.map(N=>dl(N,s)),O=dn.parts.field({factory:{sketch:E}});return l2(T,O,["tox-form__group--stretched"],[])},P7=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ae(t.items,s.interpreter)}),Bx=Ke("alloy-fake-before-tabstop"),xh=Ke("alloy-fake-after-tabstop"),k5=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:Me([ht.config({ignore:!0}),Oo.config({})])}),fA=t=>({dom:{tag:"div",classes:["tox-navobj"]},components:[k5([Bx]),t,k5([xh])],behaviours:Me([Ia.childAt(1)])}),E5=(t,s)=>{lt(t,Xf(),{raw:{which:9,shiftKey:s}})},F7=(t,s)=>{const c=s.element;Ts(c,Bx)?E5(t,!0):Ts(c,xh)&&E5(t,!1)},h2=t=>U1(t,["."+Bx,"."+xh].join(","),kn),I7=t=>{const s=Ye(t.getOr(""));return{getValue:c=>s.get(),setValue:(c,i)=>{s.get()!==i&&Ot(c.element,"srcdoc",i),s.set(i)}}},A5=(t,s,c)=>{const i=t.sandboxed,d=t.transparent,g="tox-dialog__iframe",b={...t.label.map(O=>({title:O})).getOr({}),...c.map(O=>({srcdoc:O})).getOr({}),...i?{sandbox:"allow-scripts allow-same-origin"}:{}},C=I7(c),S=t.label.map(O=>dl(O,s)),E=O=>fA({uid:O.uid,dom:{tag:"iframe",attributes:b,classes:d?[g]:[g,`${g}--opaque`]},behaviours:Me([Oo.config({}),ht.config({}),La.withComp(c,C.getValue,C.setValue)])}),T=dn.parts.field({factory:{sketch:E}});return l2(S,T,["tox-form__group--stretched"],[])},L7=t=>new Promise((s,c)=>{const i=()=>{g(),s(t)},d=[rr(t,"load",i),rr(t,"error",()=>{g(),c("Unable to load data from image: "+t.dom.src)})],g=()=>R(d,b=>b.unbind());t.dom.complete&&i()}),T5=(t,s,c,i,d)=>{const g=c*d,b=i*d,C=Math.max(0,t/2-g/2),S=Math.max(0,s/2-b/2);return{left:C.toString()+"px",top:S.toString()+"px",width:g.toString()+"px",height:b.toString()+"px"}},gA=(t,s,c)=>{const i=Bo(t),d=Jo(t);return Math.min(i/s,d/c,1)},Fd=(t,s)=>{const c=Ye(s.getOr({url:""})),i=Pn({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(S=>({src:S.url})).getOr({})}}),d=Pn({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(S,E)=>{const T={url:E.url};E.zoom.each(N=>T.zoom=N),E.cachedWidth.each(N=>T.cachedWidth=N),E.cachedHeight.each(N=>T.cachedHeight=N),c.set(T);const O=()=>{const{cachedWidth:N,cachedHeight:P,zoom:z}=T;if(!Jr(N)&&!Jr(P)){if(Jr(z)){const oe=gA(S.element,N,P);T.zoom=oe}const j=T5(Bo(S.element),Jo(S.element),N,P,T.zoom);d.getOpt(S).each(oe=>{Mi(oe.element,j)})}};i.getOpt(S).each(N=>{const P=N.element;E.url!==Yn(P,"src")&&(Ot(P,"src",E.url),Vn(S.element,"tox-imagepreview__loaded")),O(),L7(P).then(z=>{S.getSystem().isConnected()&&(ds(S.element,"tox-imagepreview__loaded"),T.cachedWidth=z.dom.naturalWidth,T.cachedHeight=z.dom.naturalHeight,O())})})},b={};t.height.each(S=>b.height=S);const C=s.map(S=>({url:S.url,zoom:A.from(S.zoom),cachedWidth:A.from(S.cachedWidth),cachedHeight:A.from(S.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:b,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:Me([Ia.self(),La.withComp(C,()=>c.get(),g)])}},hA=(t,s)=>{const c={dom:{tag:"label",classes:["tox-label"]},components:[vo(s.providers.translate(t.label))]},i=Ae(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[c,...i],behaviours:Me([Ia.self(),Dt.config({}),La.domHtml(A.none()),rt.config({mode:"acyclic"})])}},pA=Ke("toolbar.button.execute"),_5=t=>Ui((s,c)=>{ix(t,s)(i=>{lt(s,pA,{buttonApi:i}),t.onAction(i)})}),Mx={[lc()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},bA=(t,s,c)=>rl(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:c},s),Sh=(t,s)=>bA(t,s,[]),vA=(t,s)=>bA(t,s,[Dt.config({})]),$x=(t,s,c)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[vo(c.translate(t))],behaviours:Me([Dt.config({})])}),eb=Ke("update-menu-text"),O5=Ke("update-menu-icon"),yA=(t,s,c)=>{const i=Ye(X),d=t.text.map(O=>Pn($x(O,s,c.providers))),g=t.icon.map(O=>Pn(vA(O,c.providers.icons))),b=(O,N)=>{const P=Ie.getValue(O);return ht.focus(P),lt(P,"keydown",{raw:N.event.raw}),Pa.close(P),A.some(!0)},C=t.role.fold(()=>({}),O=>({role:O})),S=t.tooltip.fold(()=>({}),O=>{const N=c.providers.translate(O);return{title:N,"aria-label":N}}),E=rl("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},c.providers.icons);return Pn(Pa.sketch({...t.uid?{uid:t.uid}:{},...C,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ae(t.classes,O=>`${s}--${O}`)),attributes:{...S}},components:o2([g.map(O=>O.asSpec()),d.map(O=>O.asSpec()),A.some(E)]),matchWidth:!0,useMinWidth:!0,onOpen:(O,N,P)=>{t.searchable&&n8(P)},dropdownBehaviours:Me([...t.dropdownBehaviours,Hc.button(()=>t.disabled||c.providers.isDisabled()),os(),G1.config({}),Dt.config({}),Lt("dropdown-events",[t2(t,i),n2(t,i)]),Lt("menubutton-update-display-text",[fe(eb,(O,N)=>{d.bind(P=>P.getOpt(O)).each(P=>{Dt.set(P,[vo(c.providers.translate(N.event.text))])})}),fe(O5,(O,N)=>{g.bind(P=>P.getOpt(O)).each(P=>{Dt.set(P,[vA(N.event.icon,c.providers.icons)])})})])]),eventOrder:ro(Mx,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Me([rt.config({mode:"special",onLeft:b,onRight:b}),Lt("dropdown-sandbox-events",[fe(j4,(O,N)=>{YP(O),N.stop()}),fe(G4,(O,N)=>{JP(O,N),N.stop()})])]),lazySink:c.getSink,toggleClass:`${s}--active`,parts:{menu:{...Zv(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:SR,onCollapseMenu:(O,N,P)=>{cn.getHighlighted(P).each(z=>{SR(O,P,z)})},onDehighlightItem:t8}},fetch:O=>Gs.nu(en(t.fetch,O))})).asSpec()},H7=t=>wn(t),D5=t=>t.type==="separator",R5=t=>tn(t,"getSubmenuItems"),B5={type:"separator"},z7=(t,s)=>{const c=Xs(t,(i,d)=>H7(d)?d===""?i:d==="|"?i.length>0&&!D5(i[i.length-1])?i.concat([B5]):i:tn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return c.length>0&&D5(c[c.length-1])&&c.pop(),c},V7=(t,s)=>{const c=t.getSubmenuItems(),i=p2(c,s),d=ro(i.menus,{[t.value]:i.items}),g=ro(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},Z7=t=>{const s=at(t,"value").getOrThunk(()=>Ke("generated-menu-item"));return ro({value:s},t)},p2=(t,s)=>{const c=z7(wn(t)?t.split(" "):t,s);return Ks(c,(i,d)=>{if(R5(d)){const g=Z7(d),b=V7(g,s);return{menus:ro(i.menus,b.menus),items:[b.item,...i.items],expansions:ro(i.expansions,b.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},U7=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),W7=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),kh=(t,s,c,i)=>{const d=Ke("primary-menu"),g=p2(t,c.shared.providers.menuItems());if(g.items.length===0)return A.none();const b=U7(i),C=kR(d,g.items,s,c,i.isHorizontalMenu,b),S=W7(i),E=Lo(g.menus,(O,N)=>kR(N,O,s,c,!1,S)),T=ro(E,Hl(d,C));return A.from(rh.tieredData(d,T,g.expansions))},Nx=t=>!tn(t,"items"),M5="data-value",$5=(t,s,c,i)=>Ae(c,d=>Nx(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===i,onAction:()=>{Ie.setValue(t,d.value),lt(t,zc,{name:s}),ht.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>$5(t,s,d.items,i)}),b2=(t,s)=>Fr(t,c=>Nx(c)?Ir(c.value===s,c):b2(c.items,s)),j7=(t,s,c)=>{const i=s.shared.providers,d=c.bind(S=>b2(t.items,S)).orThunk(()=>Oi(t.items).filter(Nx)),g=t.label.map(S=>dl(S,i)),b=dn.parts.field({dom:{},factory:{sketch:S=>yA({uid:S.uid,text:d.map(E=>E.text),icon:A.none(),tooltip:t.label,role:A.none(),fetch:(E,T)=>{const O=$5(E,t.name,t.items,Ie.getValue(E));T(kh(O,cl.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:te(X),getApi:te({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Oo.config({}),La.withComp(d.map(E=>E.value),E=>Yn(E.element,M5),(E,T)=>{b2(t.items,T).each(O=>{Ot(E.element,M5,O.value),lt(E,eb,{text:O.text})})})]},"tox-listbox",s.shared)}}),C={dom:{tag:"div",classes:["tox-listboxfield"]},components:[b]};return dn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ve([g.toArray(),[C]]),fieldBehaviours:Me([st.config({disabled:te(!t.enabled),onDisabled:S=>{dn.getField(S).each(st.disable)},onEnabled:S=>{dn.getField(S).each(st.enable)}})])})},G7=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ae(t.items,s.shared.interpreter)}),q7=(t,s)=>{const c=Ae(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>Hl("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:c,behaviours:hs(t.selectBehaviours,[ht.config({}),Ie.config({store:{mode:"manual",getValue:d=>or(d.element),setValue:(d,g)=>{Yt(t.options,C=>C.value===g).isSome()&&Yu(d.element,g)},...i}})])}},K7=Pc({name:"HtmlSelect",configFields:[pe("options"),Fo("selectBehaviours",[ht,Ie]),ee("selectClasses",[]),ee("selectAttributes",{}),nn("data")],factory:q7}),CA=(t,s,c)=>{const i=Ae(t.items,S=>({text:s.translate(S.text),value:S.value})),d=t.label.map(S=>dl(S,s)),g=dn.parts.field({dom:{},...c.map(S=>({data:S})).getOr({}),selectAttributes:{size:t.size},options:i,factory:K7,selectBehaviours:Me([st.config({disabled:()=>!t.enabled||s.isDisabled()}),Oo.config({}),Lt("selectbox-change",[fe(cm(),(S,E)=>{lt(S,zc,{name:t.name})})])])}),b=t.size>1?A.none():A.some(rl("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:ve([[g],b.toArray()])};return dn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ve([d.toArray(),[C]]),fieldBehaviours:Me([st.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:S=>{dn.getField(S).each(st.disable)},onEnabled:S=>{dn.getField(S).each(st.enable)}}),os()])})},wA=te([ee("field1Name","field1"),ee("field2Name","field2"),jl("onLockedChange"),Qu(["lockClass"]),ee("locked",!1),pc.field("coupledFieldBehaviours",[Ut,Ie])]),X7=(t,s,c)=>_n(t,s,c).bind(Ut.getCurrent),N5=(t,s)=>js({factory:dn,name:t,overrides:c=>({fieldBehaviours:Me([Lt("coupled-input-behaviour",[fe(zu(),i=>{X7(i,c,s).each(d=>{_n(i,c,"lock").each(g=>{Qt.isOn(g)&&c.onLockedChange(i,d,g)})})})])])})}),xA=te([N5("field1","field2"),N5("field2","field1"),js({factory:qr,schema:[pe("dom")],name:"lock",overrides:t=>({buttonBehaviours:Me([Qt.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),Y7=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:pc.augment(t.coupledFieldBehaviours,[Ut.config({find:A.some}),Ie.config({store:{mode:"manual",getValue:d=>{const g=Cd(d,t,["field1","field2"]);return{[t.field1Name]:Ie.getValue(g.field1()),[t.field2Name]:Ie.getValue(g.field2())}},setValue:(d,g)=>{const b=Cd(d,t,["field1","field2"]);vs(g,t.field1Name)&&Ie.setValue(b.field1(),g[t.field1Name]),vs(g,t.field2Name)&&Ie.setValue(b.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>_n(d,t,"field1"),getField2:d=>_n(d,t,"field2"),getLock:d=>_n(d,t,"lock")}}),yc=Sr({name:"FormCoupledInputs",configFields:wA(),partFields:xA(),factory:Y7,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),P5=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},c=d=>d in s?s[d]:1;let i=t.value.toFixed(c(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},SA=t=>{const c=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(c!==null){const i=parseFloat(c[1]),d=c[2];return St.value({value:i,unit:d})}else return St.error(t)},F5=(t,s)=>{const c={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>tn(c,d);return t.unit===s?A.some(t.value):i(t.unit)&&i(s)?c[t.unit]===c[s]?A.some(t.value):A.some(t.value/c[t.unit]*c[s]):A.none()},Px=t=>A.none(),I5=(t,s)=>c=>F5(c,s).map(i=>({value:i*t,unit:s})),J7=(t,s)=>{const c=SA(t).toOptional(),i=SA(s).toOptional();return Eo(c,i,(d,g)=>F5(d,g.unit).map(b=>g.value/b).map(b=>I5(b,g.unit)).getOr(Px)).getOr(Px)},L5=(t,s)=>{let c=Px;const i=Ke("ratio-event"),d=O=>rl(O,{tag:"span",classes:["tox-icon","tox-lock-icon__"+O]},s.icons),g=yc.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:Me([st.config({disabled:()=>!t.enabled||s.isDisabled()}),os(),Oo.config({})])}),b=O=>({dom:{tag:"div",classes:["tox-form__group"]},components:O}),C=O=>dn.parts.field({factory:N1,inputClasses:["tox-textfield"],inputBehaviours:Me([st.config({disabled:()=>!t.enabled||s.isDisabled()}),os(),Oo.config({}),Lt("size-input-events",[fe(Vl(),(N,P)=>{lt(N,i,{isField1:O})}),fe(cm(),(N,P)=>{lt(N,zc,{name:t.name})})])]),selectOnFocus:!1}),S=O=>({dom:{tag:"label",classes:["tox-label"]},components:[vo(s.translate(O))]}),E=yc.parts.field1(b([dn.parts.label(S("Width")),C(!0)])),T=yc.parts.field2(b([dn.parts.label(S("Height")),C(!1)]));return yc.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[E,T,b([S(Tm),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(O,N,P)=>{SA(Ie.getValue(O)).each(z=>{c(z).each(j=>{Ie.setValue(N,P5(j))})})},coupledFieldBehaviours:Me([st.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:O=>{yc.getField1(O).bind(dn.getField).each(st.disable),yc.getField2(O).bind(dn.getField).each(st.disable),yc.getLock(O).each(st.disable)},onEnabled:O=>{yc.getField1(O).bind(dn.getField).each(st.enable),yc.getField2(O).bind(dn.getField).each(st.enable),yc.getLock(O).each(st.enable)}}),os(),Lt("size-input-events2",[fe(i,(O,N)=>{const P=N.event.isField1,z=P?yc.getField1(O):yc.getField2(O),j=P?yc.getField2(O):yc.getField1(O),oe=z.map(Ie.getValue).getOr(""),Y=j.map(Ie.getValue).getOr("");c=J7(oe,Y)})])])})},H5=(t,s,c)=>{const i=pi.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[vo(s.translate(t.label))]}),d=pi.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=pi.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return pi.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:te(c.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:Me([Ia.self(),ht.config({})]),onChoose:(b,C,S)=>{lt(b,zc,{name:t.name,value:S})}})},Q7=(t,s)=>{const c=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ae(C,c)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:Ae(C,d)}),b=C=>({dom:{tag:"tbody"},components:Ae(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),b(t.cells)],behaviours:Me([Oo.config({}),ht.config({})])}},kA=(t,s)=>{const c=t.label.map(N=>dl(N,s)),i=[st.config({disabled:()=>t.disabled||s.isDisabled()}),os(),rt.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:N=>(mn(N,hx),A.some(!0))}),Lt("textfield-change",[fe(zu(),(N,P)=>{lt(N,zc,{name:t.name})}),fe(Qb(),(N,P)=>{lt(N,zc,{name:t.name})})]),Oo.config({})],d=t.validation.map(N=>Vc.config({getRoot:P=>Ud(P.element),invalidClass:"tox-invalid",validator:{validate:P=>{const z=Ie.getValue(P),j=N.validator(z);return Gs.pure(j===!0?St.value(z):St.error(j))},validateOnLoad:N.validateOnLoad}})).toArray(),g=t.placeholder.fold(te({}),N=>({placeholder:s.translate(N)})),b=t.inputMode.fold(te({}),N=>({inputmode:N})),C={...g,...b},S=dn.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(N=>({data:N})).getOr({}),inputAttributes:C,inputClasses:[t.classname],inputBehaviours:Me(ve([i,d])),selectOnFocus:!1,factory:N1}),T=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),O=[st.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:N=>{dn.getField(N).each(st.disable)},onEnabled:N=>{dn.getField(N).each(st.enable)}}),os()];return l2(c,S,T,O)},z5=(t,s,c)=>kA({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized,data:c},s),V5=(t,s,c)=>kA({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized,data:c},s);var eF=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return Bt([fe(t.event,i),ka(()=>s.cancel())].concat(t.cancelEvent.map(d=>[fe(d,()=>s.cancel())]).getOr([])))}});const tF=(t,s)=>{let c=null;return{cancel:()=>{vf(c)||(clearTimeout(c),c=null)},throttle:(...g)=>{vf(c)&&(c=setTimeout(()=>{c=null,t.apply(null,g)},s))}}},EA=(t,s)=>{let c=null;const i=()=>{vf(c)||(clearTimeout(c),c=null)};return{cancel:i,throttle:(...g)=>{i(),c=setTimeout(()=>{c=null,t.apply(null,g)},s)}}},Z5=t=>{const s=Ye(null);return dc({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var oF=Object.freeze({__proto__:null,throttle:Z5,init:t=>t.stream.streams.state(t)});const sF=(t,s)=>{const c=t.stream,i=EA(t.onStream,c.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),c.stopEvent&&g.stop()}};var AA=[us("stream",Dc("mode",{throttle:[pe("delay"),ee("stopEvent",!0),Mn("streams",{setup:sF,state:Z5})]})),ee("event","input"),nn("cancelEvent"),jl("onStream")];const TA=ts({fields:AA,name:"streaming",active:eF,state:oF}),Fx=(t,s,c)=>{const i=Ie.getValue(c);Ie.setValue(s,i),_A(s)},U5=(t,s)=>{const c=t.element,i=or(c),d=c.dom;Yn(c,"type")!=="number"&&s(d,i)},_A=t=>{U5(t,(s,c)=>s.setSelectionRange(c.length,c.length))},rF=(t,s)=>{U5(t,(c,i)=>c.setSelectionRange(s,i.length))},W5=(t,s,c)=>{if(t.selectsOver){const i=Ie.getValue(s),d=t.getDisplayText(i),g=Ie.getValue(c);return t.getDisplayText(g).indexOf(d)===0?A.some(()=>{Fx(t,s,c),rF(s,d.length)}):A.none()}else return A.none()},OA=te("alloy.typeahead.itemexecute"),j5=(t,s,c,i)=>{const d=(O,N,P)=>{t.previewing.set(!1);const z=co.getCoupled(O,"sandbox");if(It.isOpen(z))Ut.getCurrent(z).each(j=>{cn.getHighlighted(j).fold(()=>{P(j)},()=>{Vu(z,j.element,"keydown",N)})});else{const j=oe=>{Ut.getCurrent(oe).each(P)};Z1(t,b(O),O,z,i,j,lr.HighlightMenuAndItem).get(X)}},g=qw(t),b=O=>N=>N.map(P=>{const z=En(P.menus),j=So(z,Y=>Xt(Y.items,se=>se.type==="item"));return Ie.getState(O).update(Ae(j,Y=>Y.data)),P}),C=O=>Ut.getCurrent(O),S="typeaheadevents",E=[ht.config({}),Ie.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:O=>or(O.element),getFallbackEntry:O=>({value:O,meta:{}}),setValue:(O,N)=>{Yu(O.element,t.model.getDisplayText(N))},...t.initialData.map(O=>Hl("initialValue",O)).getOr({})}}),TA.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(O,N)=>{const P=co.getCoupled(O,"sandbox");if(ht.isFocused(O)&&or(O.element).length>=t.minChars){const j=C(P).bind(Y=>cn.getHighlighted(Y).map(Ie.getValue));t.previewing.set(!0);const oe=Y=>{C(P).each(se=>{j.fold(()=>{t.model.selectsOver&&cn.highlightFirst(se)},Le=>{cn.highlightBy(se,ue=>Ie.getValue(ue).value===Le.value),cn.getHighlighted(se).orThunk(()=>(cn.highlightFirst(se),A.none()))})})};Z1(t,b(O),O,P,i,oe,lr.HighlightJustMenu).get(X)}},cancelEvent:eg()}),rt.config({mode:"special",onDown:(O,N)=>(d(O,N,cn.highlightFirst),A.some(!0)),onEscape:O=>{const N=co.getCoupled(O,"sandbox");return It.isOpen(N)?(It.close(N),A.some(!0)):A.none()},onUp:(O,N)=>(d(O,N,cn.highlightLast),A.some(!0)),onEnter:O=>{const N=co.getCoupled(O,"sandbox"),P=It.isOpen(N);if(P&&!t.previewing.get())return C(N).bind(z=>cn.getHighlighted(z)).map(z=>(lt(O,OA(),{item:z}),!0));{const z=Ie.getValue(O);return mn(O,eg()),t.onExecute(N,O,z),P&&It.close(N),A.some(!0)}}}),Qt.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),co.config({others:{sandbox:O=>RE(t,O,{onOpen:()=>Qt.on(O),onClose:()=>Qt.off(O)})}}),Lt(S,[bo(O=>{t.lazyTypeaheadComp.set(A.some(O))}),ka(O=>{t.lazyTypeaheadComp.set(A.none())}),Ui(O=>{const N=X;DE(t,b(O),O,i,N,lr.HighlightMenuAndItem).get(X)}),fe(OA(),(O,N)=>{const P=co.getCoupled(O,"sandbox");Fx(t.model,O,N.event.item),mn(O,eg()),t.onItemExecute(O,P,N.event.item,Ie.getValue(O)),It.close(P),_A(O)})].concat(t.dismissOnBlur?[fe($o(),O=>{const N=co.getCoupled(O,"sandbox");Ta(N.element).isNone()&&It.close(N)})]:[]))],T={[ea()]:[Ie.name(),TA.name(),S],...t.eventOrder};return{uid:t.uid,dom:Kw(ro(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...hs(t.typeaheadBehaviours,E)},eventOrder:T}},cF=te([nn("lazySink"),pe("fetch"),ee("minChars",5),ee("responseTime",1e3),Gt("onOpen"),ee("getHotspot",A.some),ee("getAnchorOverrides",te({})),ee("layouts",A.none()),ee("eventOrder",{}),Kb("model",{},[ee("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),ee("selectsOver",!0),ee("populateFromBrowse",!0)]),Gt("onSetValue"),Wr("onExecute"),Gt("onItemExecute"),ee("inputClasses",[]),ee("inputAttributes",{}),ee("inputStyles",{}),ee("matchWidth",!0),ee("useMinWidth",!1),ee("dismissOnBlur",!0),Qu(["openClass"]),nn("initialData"),Fo("typeaheadBehaviours",[ht,Ie,TA,rt,Qt,co]),nr("lazyTypeaheadComp",()=>Ye(A.none)),nr("previewing",()=>Ye(!0))].concat(U4()).concat(BE())),aF=te([ra({schema:[pg()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,c,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{W5(t.model,d,i).fold(()=>{t.model.selectsOver?(cn.dehighlight(c,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&Fx(t.model,d,i)})},onExecute:(s,c)=>t.lazyTypeaheadComp.get().map(i=>(lt(i,OA(),{item:c}),!0)),onHover:(s,c)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&Fx(t.model,i,c)})}})})]),iF=Sr({name:"Typeahead",configFields:cF(),partFields:aF(),factory:j5}),bi=t=>({...t,toCached:()=>bi(t.toCached()),bindFuture:S=>bi(t.bind(E=>E.fold(T=>Gs.pure(St.error(T)),T=>S(T)))),bindResult:S=>bi(t.map(E=>E.bind(S))),mapResult:S=>bi(t.map(E=>E.map(S))),mapError:S=>bi(t.map(E=>E.mapError(S))),foldResult:(S,E)=>t.map(T=>T.fold(S,E)),withTimeout:(S,E)=>bi(Gs.nu(T=>{let O=!1;const N=setTimeout(()=>{O=!0,T(St.error(E()))},S);t.get(P=>{O||(clearTimeout(N),T(P))})}))}),DA=t=>bi(Gs.nu(t)),G5=t=>bi(Gs.pure(St.value(t))),uF={nu:DA,wrap:bi,pure:G5,value:G5,error:t=>bi(Gs.pure(St.error(t))),fromResult:t=>bi(Gs.pure(t)),fromFuture:t=>bi(t.map(St.value)),fromPromise:t=>DA(s=>{t.then(c=>{s(St.value(c))},c=>{s(St.error(c))})})},q5=t=>({isEnabled:()=>!st.isDisabled(t),setEnabled:s=>st.set(t,!s),setActive:s=>{const c=t.element;s?(ds(c,"tox-tbtn--enabled"),Ot(c,"aria-pressed",!0)):(Vn(c,"tox-tbtn--enabled"),Cs(c,"aria-pressed"))},isActive:()=>Ts(t.element,"tox-tbtn--enabled")}),RA=(t,s,c,i)=>yA({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(d,g)=>{const b={pattern:t.search.isSome()?o8(d):""};t.fetch(C=>{g(kh(C,cl.CLOSE_ON_EXECUTE,c,{isHorizontalMenu:!1,search:t.search}))},b)},onSetup:t.onSetup,getApi:q5,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Oo.config({})]},s,c.shared),dF=(t,s,c)=>{const i=g=>b=>{const C=!b.isActive();b.setActive(C),g.storage.set(C),c.shared.getSink().each(S=>{s().getOpt(S).each(E=>{Qi(E.element),lt(E,Nd,{name:g.name,value:g.storage.get()})})})},d=g=>b=>{b.setActive(g.storage.get())};return g=>{g(Ae(t,b=>{const C=b.text.fold(()=>({}),S=>({text:S}));return{type:b.type,active:!1,...C,onAction:i(b),onSetup:d(b)}}))}},BA=(t,s,c=[],i,d,g)=>{const b=s.fold(()=>({}),E=>({action:E})),C={buttonBehaviours:Me([Hc.button(()=>!t.enabled||g.isDisabled()),os(),Oo.config({}),Lt("button press",[Ty("click"),Ty("mousedown")])].concat(c)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...b},S=ro(C,{dom:i});return ro(S,{components:d})},K5=(t,s,c,i=[])=>{const d=t.tooltip.map(S=>({"aria-label":c.translate(S),title:c.translate(S)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},b=t.icon.map(S=>Sh(S,c.icons)),C=o2([b]);return BA(t,s,i,g,C,c)},X5=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},v2=(t,s,c,i=[],d=[])=>{const g=c.translate(t.text),b=t.icon.map(N=>Sh(N,c.icons)),C=[b.getOrThunk(()=>vo(g))],S=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),O={tag:"button",classes:[...X5(S),...b.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return BA(t,s,i,O,C,c)},Y5=(t,s,c,i=[],d=[])=>{const g=v2(t,A.some(s),c,i,d);return qr.sketch(g)},J5=(t,s)=>c=>{s==="custom"?lt(c,Nd,{name:t,value:{}}):s==="submit"?mn(c,hx):s==="cancel"?mn(c,bh):console.error("Unknown button type: ",s)},mF=(t,s)=>s==="menu",fF=(t,s)=>s==="custom"||s==="cancel"||s==="submit",y2=(t,s,c)=>{if(mF(t,s)){const i=()=>b,d=t,g={...t,type:"menubutton",search:A.none(),onSetup:C=>(C.setEnabled(t.enabled),X),fetch:dF(d.items,i,c)},b=Pn(RA(g,"tox-tbtn",c,A.none()));return b.asSpec()}else if(fF(t,s)){const i=J5(t.name,s),d={...t,borderless:!1};return Y5(d,i,c.shared.providers,[])}else throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")},Q5=(t,s)=>{const c=J5(t.name,"custom");return A8(A.none(),dn.parts.field({factory:qr,...v2(t,A.some(c),s,[La.memory(""),Ia.self()])}))},gF={type:"separator"},hF=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:X}),Ix=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:X}),pF=t=>Ae(t,hF),bF=(t,s)=>Xt(s,c=>c.type===t),Mt=(t,s)=>pF(bF(t,s)),C2=t=>Mt("header",t.targets),eB=t=>Mt("anchor",t.targets),tB=t=>A.from(t.anchorTop).map(s=>Ix("<top>",s)).toArray(),nB=t=>A.from(t.anchorBottom).map(s=>Ix("<bottom>",s)).toArray(),oB=t=>Ae(t,s=>Ix(s,s)),sB=t=>Xs(t,(s,c)=>s.length===0||c.length===0?s.concat(c):s.concat(gF,c),[]),rB=(t,s)=>{const c=t.toLowerCase();return Xt(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,b=(d=i.value)!==null&&d!==void 0?d:"";return ys(g.toLowerCase(),c)||ys(b.toLowerCase(),c)})},w2=(t,s,c)=>{const i=Ie.getValue(s),d=i.meta.text!==void 0?i.meta.text:i.value;return c.getLinkInformation().fold(()=>[],b=>{const C=rB(d,oB(c.getHistory(t)));return t==="file"?sB([C,rB(d,C2(b)),rB(d,ve([tB(b),eB(b),nB(b)]))]):C})},cB=Ke("aria-invalid"),aB=(t,s,c,i)=>{const d=s.shared.providers,g=se=>{const Le=Ie.getValue(se);c.addToHistory(Le.value,t.filetype)},b={...i.map(se=>({initialData:se})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":cB,type:"url"},minChars:0,responseTime:0,fetch:se=>{const Le=w2(t.filetype,se,c),ue=kh(Le,cl.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return Gs.pure(ue)},getHotspot:se=>z.getOpt(se),onSetValue:(se,Le)=>{se.hasConfigured(Vc)&&Vc.run(se).get(X)},typeaheadBehaviours:Me([...c.getValidationHandler().map(se=>Vc.config({getRoot:Le=>Ud(Le.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(Le,ue)=>{T.getOpt(Le).each(Ve=>{Ot(Ve.element,"title",d.translate(ue))})}},validator:{validate:Le=>{const ue=Ie.getValue(Le);return uF.nu(Ve=>{se({type:t.filetype,url:ue.value},Xe=>{if(Xe.status==="invalid"){const Ze=St.error(Xe.message);Ve(Ze)}else{const Ze=St.value(Xe.message);Ve(Ze)}})})},validateOnLoad:!1}})).toArray(),st.config({disabled:()=>!t.enabled||d.isDisabled()}),Oo.config({}),Lt("urlinput-events",[fe(zu(),se=>{const Le=or(se.element),ue=Le.trim();ue!==Le&&Yu(se.element,ue),t.filetype==="file"&&lt(se,zc,{name:t.name})}),fe(cm(),se=>{lt(se,zc,{name:t.name}),g(se)}),fe(Qb(),se=>{lt(se,zc,{name:t.name}),g(se)})])]),eventOrder:{[zu()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:se=>se.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Zv(!1,1,"normal")},onExecute:(se,Le,ue)=>{lt(Le,hx,{})},onItemExecute:(se,Le,ue,Ve)=>{g(se),lt(se,zc,{name:t.name})}},C=dn.parts.field({...b,factory:iF}),S=t.label.map(se=>dl(se,d)),T=Pn(((se,Le,ue=se,Ve=se)=>rl(ue,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+se],attributes:{title:d.translate(Ve),"aria-live":"polite",...Le.fold(()=>({}),Xe=>({id:Xe}))}},d.icons))("invalid",A.some(cB),"warning")),O=Pn({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[T.asSpec()]}),N=c.getUrlPicker(t.filetype),P=Ke("browser.url.event"),z=Pn({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,O.asSpec()],behaviours:Me([st.config({disabled:()=>!t.enabled||d.isDisabled()})])}),j=Pn(Y5({name:t.name,icon:A.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:A.none(),borderless:!0},se=>mn(se,P),d,[],["tox-browse-url"])),oe=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:ve([[z.asSpec()],N.map(()=>j.asSpec()).toArray()])}),Y=se=>{Ut.getCurrent(se).each(Le=>{const ue=Ie.getValue(Le),Ve={fieldname:t.name,...ue};N.each(Xe=>{Xe(Ve).get(Ze=>{Ie.setValue(Le,Ze),lt(se,zc,{name:t.name})})})})};return dn.sketch({dom:gx(),components:S.toArray().concat([oe()]),fieldBehaviours:Me([st.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:se=>{dn.getField(se).each(st.disable),j.getOpt(se).each(st.disable)},onEnabled:se=>{dn.getField(se).each(st.enable),j.getOpt(se).each(st.enable)}}),os(),Lt("url-input-events",[fe(P,Y)])])})},vF=(t,s)=>$d.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[qr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:E4(t.icon,s.icons),attributes:{title:s.translate(t.iconTooltip)}},action:c=>{lt(c,Nd,{name:"alert-banner",value:t.url})},buttonBehaviours:Me([Pv()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]}),yF=(t,s)=>{t.dom.checked=s},CF=t=>t.dom.checked,iB=(t,s,c)=>{const i=S=>(S.element.dom.click(),A.some(!0)),d=dn.parts.field({factory:{sketch:Wt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Me([Ia.self(),st.config({disabled:()=>!t.enabled||s.isDisabled()}),Oo.config({}),ht.config({}),La.withElement(c,CF,yF),rt.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),Lt("checkbox-events",[fe(cm(),(S,E)=>{lt(S,zc,{name:t.name})})])])}),g=dn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[vo(s.translate(t.label))],behaviours:Me([G1.config({})])}),b=S=>rl(S==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+S]},s.icons),C=Pn({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[b("checked"),b("unchecked")]});return dn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:Me([st.config({disabled:()=>!t.enabled||s.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:S=>{dn.getField(S).each(st.disable)},onEnabled:S=>{dn.getField(S).each(st.enable)}}),os()])})},MA=t=>t.presets==="presentation"?$d.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):$d.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:Me([Oo.config({}),ht.config({})])}),ss=t=>(s,c,i,d)=>at(c,"name").fold(()=>t(c,d,A.none()),g=>s.field(g,t(c,d,at(i,g)))),wF=t=>(s,c,i,d)=>{const g=ro(c,{source:"dynamic"});return ss(t)(s,g,i,d)},xF={bar:ss((t,s)=>BR(t,s.shared)),collection:ss((t,s,c)=>_8(t,s.shared.providers,c)),alertbanner:ss((t,s)=>vF(t,s.shared.providers)),input:ss((t,s,c)=>z5(t,s.shared.providers,c)),textarea:ss((t,s,c)=>V5(t,s.shared.providers,c)),label:ss((t,s)=>hA(t,s.shared)),iframe:wF((t,s,c)=>A5(t,s.shared.providers,c)),button:ss((t,s)=>Q5(t,s.shared.providers)),checkbox:ss((t,s,c)=>iB(t,s.shared.providers,c)),colorinput:ss((t,s,c)=>B8(t,s.shared,s.colorinput,c)),colorpicker:ss((t,s,c)=>B7(t,s.shared.providers,c)),dropzone:ss((t,s,c)=>S5(t,s.shared.providers,c)),grid:ss((t,s)=>P7(t,s.shared)),listbox:ss((t,s,c)=>j7(t,s,c)),selectbox:ss((t,s,c)=>CA(t,s.shared.providers,c)),sizeinput:ss((t,s)=>L5(t,s.shared.providers)),slider:ss((t,s,c)=>H5(t,s.shared.providers,c)),urlinput:ss((t,s,c)=>aB(t,s,s.urlinput,c)),customeditor:ss(x5),htmlpanel:ss(MA),imagepreview:ss((t,s,c)=>Fd(t,c)),table:ss((t,s)=>Q7(t,s.shared.providers)),panel:ss((t,s)=>G7(t,s))},SF={field:(t,s)=>s,record:te([])},$A=(t,s,c,i)=>{const d=ro(i,{shared:{interpreter:g=>NA(t,g,c,d)}});return NA(t,s,c,d)},NA=(t,s,c,i)=>at(xF,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,c,i)),kF=(t,s,c)=>NA(SF,t,s,c),af="layout-inset",PA=t=>t.x,FA=(t,s)=>t.x+t.width/2-s.width/2,IA=(t,s)=>t.x+t.width-s.width,LA=t=>t.y,HA=(t,s)=>t.y+t.height-s.height,lB=(t,s)=>t.y+t.height/2-s.height/2,Lx=(t,s,c)=>fs(IA(t,s),HA(t,s),c.insetSouthwest(),C0(),"southwest",_s(t,{right:0,bottom:3}),af),Hx=(t,s,c)=>fs(PA(t),HA(t,s),c.insetSoutheast(),y0(),"southeast",_s(t,{left:1,bottom:3}),af),x2=(t,s,c)=>fs(IA(t,s),LA(t),c.insetNorthwest(),v0(),"northwest",_s(t,{right:0,top:2}),af),S2=(t,s,c)=>fs(PA(t),LA(t),c.insetNortheast(),Np(),"northeast",_s(t,{left:1,top:2}),af),fu=(t,s,c)=>fs(FA(t,s),LA(t),c.insetNorth(),w0(),"north",_s(t,{top:2}),af),k2=(t,s,c)=>fs(FA(t,s),HA(t,s),c.insetSouth(),x0(),"south",_s(t,{bottom:3}),af),uB=(t,s,c)=>fs(IA(t,s),lB(t,s),c.insetEast(),vg(),"east",_s(t,{right:0}),af),zA=(t,s,c)=>fs(PA(t),lB(t,s),c.insetWest(),oC(),"west",_s(t,{left:1}),af),EF=t=>{switch(t){case"north":return fu;case"northeast":return S2;case"northwest":return x2;case"south":return k2;case"southeast":return Hx;case"southwest":return Lx;case"east":return uB;case"west":return zA}},dB=(t,s,c,i,d)=>D0(i).map(EF).getOr(fu)(t,s,c,i,d),AF=t=>{switch(t){case"north":return k2;case"northeast":return Hx;case"northwest":return Lx;case"south":return fu;case"southeast":return S2;case"southwest":return x2;case"east":return zA;case"west":return uB}},TF=(t,s,c,i,d)=>D0(i).map(AF).getOr(fu)(t,s,c,i,d),mB={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},_F=(t,s,c)=>{const d={maxHeightFunction:Sg()},g=()=>({type:"node",root:kb(tc(t())),node:A.from(t()),bubble:ql(12,12,mB),layouts:{onRtl:()=>[S2],onLtr:()=>[x2]},overrides:d}),b=()=>({type:"hotspot",hotspot:s(),bubble:ql(-12,12,mB),layouts:{onRtl:()=>[zs],onLtr:()=>[Os]},overrides:d});return()=>c()?g():b()},fB=(t,s,c)=>{const i=()=>({type:"node",root:kb(tc(t())),node:A.from(t()),layouts:{onRtl:()=>[fu],onLtr:()=>[fu]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[gs],onLtr:()=>[gs]}});return()=>c()?i():d()},OF=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const c=t.selection.getRng();return A.some(Rg.range(ze.fromDom(c.startContainer),c.startOffset,ze.fromDom(c.endContainer),c.endOffset))}}),gB=t=>s=>({type:"node",root:t(),node:s}),DF=(t,s,c)=>{const i=Vv(t),d=()=>ze.fromDom(t.getBody()),g=()=>ze.fromDom(t.getContentAreaContainer()),b=()=>i||!c();return{inlineDialog:_F(g,s,b),banner:fB(g,s,b),cursor:OF(t,d),node:gB(d)}},hB=t=>(s,c)=>{fR(t)(s,c)},pB=t=>()=>cR(t),bB=t=>()=>bE(t),RF=t=>()=>rR(t),vB=t=>({colorPicker:hB(t),hasCustomColors:pB(t),getColors:bB(t),getColorCols:RF(t)}),yB=t=>()=>$O(t),BF=t=>({isDraggableModal:yB(t)}),CB=t=>{const s=Ye(N4(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},wB=t=>vs(t,"items"),xB=t=>vs(t,"format"),vi=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],zx=t=>tn(t,"items"),Vx=t=>tn(t,"block"),MF=t=>tn(t,"inline"),VA=t=>tn(t,"selector"),SB=t=>Xs(t,(s,c)=>{if(zx(c)){const i=SB(c.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:c.title,items:i.formats}])}}else if(MF(c)||Vx(c)||VA(c)){const d=`custom-${wn(c.name)?c.name:c.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:c}]),formats:s.formats.concat([{title:c.title,format:d,icon:c.icon}])}}else return{...s,formats:s.formats.concat(c)}},{customFormats:[],formats:[]}),ZA=(t,s)=>{const c=SB(s),i=d=>{R(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(c.customFormats):t.on("init",()=>{i(c.customFormats)}),c.formats},UA=t=>Fw(t).map(s=>{const c=ZA(t,s);return EO(t)?vi.concat(c):c}).getOr(vi),WA=t=>{const s=ko(t);return s.length===1&&qo(s,"title")},kB=(t,s,c)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:c(t.format)}),jA=(t,s,c,i)=>{const d=S=>kB(S,c,i),g=S=>{const E=C(S.items);return{...S,type:"submenu",getStyleItems:te(E)}},b=S=>{const E=wn(S.name)?S.name:Ke(S.title),T=`custom-${E}`,O={...S,type:"formatter",format:T,isSelected:c(T),getStylePreview:i(T)};return t.formatter.register(E,O),O},C=S=>Ae(S,E=>wB(E)?g(E):xB(E)?d(E):WA(E)?{...E,type:"separator"}:b(E));return C(s)},EB=t=>{const s=C=>()=>t.formatter.match(C),c=C=>()=>{const S=t.formatter.get(C);return S!==void 0?A.some({tag:S.length>0&&(S[0].inline||S[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(C))}):A.none()},i=Ye([]),d=Ye([]),g=Ye(!1);return t.on("PreInit",C=>{const S=UA(t),E=jA(t,S,s,c);i.set(E)}),t.on("addStyleModifications",C=>{const S=jA(t,C.items,s,c);d.set(S),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),S=d.get();return C.concat(S)}}},GA=t=>Ar(t)&&t.nodeType===1,$F=cf.trim,AB=t=>s=>!!(GA(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),TB=AB("true"),NF=AB("false"),_B=(t,s,c,i,d)=>({type:t,title:s,url:c,level:i,attach:d}),OB=t=>{let s=t;for(;s=s.parentNode;){const c=s.contentEditable;if(c&&c!=="inherit")return TB(s)}return!1},DB=(t,s)=>Ae(Us(ze.fromDom(s),t),c=>c.dom),RB=t=>t.innerText||t.textContent,PF=t=>t.id?t.id:Ke("h"),FF=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,IF=t=>FF(t)&&yi(t),qA=t=>t&&/^(H[1-6])$/.test(t.nodeName),yi=t=>OB(t)&&!NF(t),KA=t=>qA(t)&&yi(t),LF=t=>qA(t)?parseInt(t.nodeName.substr(1),10):0,HF=t=>{var s;const c=PF(t),i=()=>{t.id=c};return _B("header",(s=RB(t))!==null&&s!==void 0?s:"","#"+c,LF(t),i)},zF=t=>{const s=t.id||t.name,c=RB(t);return _B("anchor",c||"#"+s,"#"+s,0,X)},VF=t=>Ae(Xt(t,KA),HF),ZF=t=>Ae(Xt(t,IF),zF),BB=t=>DB("h1,h2,h3,h4,h5,h6,a:not([href])",t),MB=t=>$F(t.title).length>0,Oz={find:t=>{const s=BB(t);return Xt(VF(s).concat(ZF(s)),MB)}},bs="tinymce-url-history",Zx=5,$B=t=>wn(t)&&/^https?/.test(t),Ux=t=>Ei(t)&&t.length<=Zx&&Ys(t,$B),NB=t=>qc(t)&&Uh(t,s=>!Ux(s)).isNone(),PB=()=>{const t=lx.getItem(bs);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(c){if(c instanceof SyntaxError)return console.log("Local storage "+bs+" was not valid JSON",c),{};throw c}return NB(s)?s:(console.log("Local storage "+bs+" was not valid format",s),{})},UF=t=>{if(!NB(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));lx.setItem(bs,JSON.stringify(t))},WF=t=>{const s=PB();return at(s,t).getOr([])},jF=(t,s)=>{if(!$B(t))return;const c=PB(),i=at(c,s).getOr([]),d=Xt(i,g=>g!==t);c[s]=[t].concat(d).slice(0,Zx),UF(c)},FB=t=>!!t,GF=t=>Lo(cf.makeMap(t,/[, ]/),FB),XA=t=>A.from(OO(t)),IB=t=>{const s=A.from(Hw(t)).filter(FB).map(GF);return XA(t).fold(kn,c=>s.fold(dt,i=>ko(i).length>0?i:!1))},Wx=(t,s)=>{const c=IB(t);return Ai(c)?c?XA(t):A.none():c[s]?XA(t):A.none()},qF=(t,s)=>Wx(t,s).map(c=>i=>Gs.nu(d=>{const g=(C,S)=>{if(!wn(C))throw new Error("Expected value to be string");if(S!==void 0&&!qc(S))throw new Error("Expected meta to be a object");d({value:C,meta:S})},b={filetype:s,fieldname:i.fieldname,...A.from(i.meta).getOr({})};c.call(t,g,i.value,b)})),YA=t=>A.from(t).filter(wn).getOrUndefined(),KF=t=>RO(t)?A.some({targets:Oz.find(t.getBody()),anchorTop:YA(BO(t)),anchorBottom:YA(MO(t))}):A.none(),LB=t=>A.from(DO(t)),XF=t=>({getHistory:WF,addToHistory:jF,getLinkInformation:()=>KF(t),getValidationHandler:()=>LB(t),getUrlPicker:s=>qF(t,s)}),YF=(t,s,c)=>{const i=Ye(!1),d=CB(s),g={shared:{providers:{icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:mi.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},interpreter:b=>kF(b,{},g),anchors:DF(s,c,d.isPositionedAtTop),header:d,getSink:t},urlinput:XF(s),styles:EB(s),colorinput:vB(s),dialog:BF(s),isContextMenuOpen:()=>i.get(),setContextMenuState:b=>i.set(b)};return g},HB=(t,s,c)=>{const i=(ue,Ve)=>{R([s,c],Xe=>{Xe.broadcastEvent(ue,Ve)})},d=(ue,Ve)=>{R([s,c],Xe=>{Xe.broadcastOn([ue],Ve)})},g=ue=>d(li(),{target:ue.target}),b=sp(),C=rr(b,"touchstart",g),S=rr(b,"touchmove",ue=>i(vp(),ue)),E=rr(b,"touchend",ue=>i(yp(),ue)),T=rr(b,"mousedown",g),O=rr(b,"mouseup",ue=>{ue.raw.button===0&&d(ru(),{target:ue.target})}),N=ue=>d(li(),{target:ze.fromDom(ue.target)}),P=ue=>{ue.button===0&&d(ru(),{target:ze.fromDom(ue.target)})},z=()=>{R(t.editorManager.get(),ue=>{t!==ue&&ue.dispatch("DismissPopups",{relatedTarget:t})})},j=ue=>i(e0(),xC(ue)),oe=ue=>{d(su(),{}),i(tg(),xC(ue))},Y=()=>d(su(),{}),se=ue=>{ue.state&&d(li(),{target:ze.fromDom(t.getContainer())})},Le=ue=>{d(li(),{target:ze.fromDom(ue.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",N),t.on("tap",N),t.on("mouseup",P),t.on("mousedown",z),t.on("ScrollWindow",j),t.on("ResizeWindow",oe),t.on("ResizeEditor",Y),t.on("AfterProgressState",se),t.on("DismissPopups",Le)}),t.on("remove",()=>{t.off("click",N),t.off("tap",N),t.off("mouseup",P),t.off("mousedown",z),t.off("ScrollWindow",j),t.off("ResizeWindow",oe),t.off("ResizeEditor",Y),t.off("AfterProgressState",se),t.off("DismissPopups",Le),T.unbind(),C.unbind(),S.unbind(),E.unbind(),O.unbind()}),t.on("detach",()=>{s1(s),s1(c),s.destroy(),c.destroy()})},Zc=ca,Eh=sw,JF=te([ee("shell",!1),pe("makeItem"),ee("setupItem",X),pc.field("listBehaviours",[Dt])]),QF=Nc({name:"items",overrides:()=>({behaviours:Me([Dt.config({})])})}),zB=te([QF]),JA=te("CustomList"),eI=(t,s,c,i)=>{const d=(C,S)=>{b(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},E=>{const T=Dt.contents(E),O=S.length,N=O-T.length,P=N>0?mr(N,()=>t.makeItem()):[],z=T.slice(O);R(z,oe=>Dt.remove(E,oe)),R(P,oe=>Dt.append(E,oe));const j=Dt.contents(E);R(j,(oe,Y)=>{t.setupItem(C,oe,S[Y],Y)})})},g=t.shell?{behaviours:[Dt.config({})],components:[]}:{behaviours:[],components:s},b=C=>t.shell?A.some(C):_n(C,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:hs(t.listBehaviours,g.behaviours),apis:{setItems:d}}},VB=Sr({name:JA(),configFields:JF(),partFields:zB(),factory:eI,apis:{setItems:(t,s,c)=>{t.setItems(s,c)}}}),Ah=te([pe("dom"),ee("shell",!0),Fo("toolbarBehaviours",[Dt])]),tI=te([Nc({name:"groups",overrides:()=>({behaviours:Me([Dt.config({})])})})]),nI=(t,s,c,i)=>{const d=(C,S)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},E=>{Dt.set(E,S)})},g=C=>t.shell?A.some(C):_n(C,t,"groups"),b=t.shell?{behaviours:[Dt.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:b.components,behaviours:hs(t.toolbarBehaviours,b.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},gl=Sr({name:"Toolbar",configFields:Ah(),partFields:tI(),factory:nI,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)}}}),QA=X,ZB=kn,UB=te([]);var oI=Object.freeze({__proto__:null,setup:QA,isDocked:ZB,getBehaviours:UB});const WB=t=>(Kc(Ps(t,"position"),"fixed")?A.none():_f(t)).orThunk(()=>{const i=ze.fromTag("span");return ba(t).bind(d=>{oc(d,i);const g=_f(i);return Ml(i),g})}),jB=t=>WB(t).map(Ro).getOrThunk(()=>zn(0,0)),jx=Es.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),sI=(t,s)=>{const c=t.element;ds(c,s.transitionClass),Vn(c,s.fadeOutClass),ds(c,s.fadeInClass),s.onShow(t)},Gx=(t,s)=>{const c=t.element;ds(c,s.transitionClass),Vn(c,s.fadeInClass),ds(c,s.fadeOutClass),s.onHide(t)},rI=(t,s)=>t.y<s.bottom&&t.bottom>s.y,qx=(t,s)=>t.y>=s.y,cI=(t,s)=>t.bottom<=s.bottom,Kx=(t,s,c)=>Ys(t,i=>{switch(i){case"bottom":return cI(s,c);case"top":return qx(s,c)}}),tb=(t,s)=>s.getInitialPos().map(c=>xs(c.bounds.x,c.bounds.y,Bo(t),Jo(t))),GB=(t,s,c)=>{c.setInitialPos({style:Fs(t),position:we(t,"position")||"static",bounds:s})},qB=(t,s,c)=>c.getInitialPos().bind(i=>{switch(c.clearInitialPos(),i.position){case"static":return A.some(jx.static());case"absolute":const d=WB(t).map(qn).getOrThunk(()=>qn(er()));return A.some(jx.absolute(_a("absolute",at(i.style,"left").map(g=>s.x-d.x),at(i.style,"top").map(g=>s.y-d.y),at(i.style,"right").map(g=>d.right-s.right),at(i.style,"bottom").map(g=>d.bottom-s.bottom))));default:return A.none()}}),KB=(t,s,c)=>tb(t,c).filter(i=>Kx(c.getModes(),i,s)).bind(i=>qB(t,i,c)),XB=(t,s,c)=>{const i=qn(t);if(Kx(c.getModes(),i,s))return A.none();{GB(t,i,c);const d=Ac(),g=i.x-d.x,b=s.y-d.y,C=d.bottom-s.bottom,S=i.y<=s.y;return A.some(jx.fixed(_a("fixed",A.some(g),S?A.some(b):A.none(),A.none(),S?A.none():A.some(C))))}},YB=(t,s,c)=>{const i=t.element;return Kc(Ps(i,"position"),"fixed")?KB(i,s,c):XB(i,s,c)},aI=(t,s)=>{const c=t.element;return tb(c,s).bind(i=>qB(c,i,s))},Xx=(t,s,c)=>{c.setDocked(!1),R(["left","right","top","bottom","position"],i=>Vt(t.element,i)),s.onUndocked(t)},nb=(t,s,c,i)=>{const d=i.position==="fixed";c.setDocked(d),Cg(t.element,i),(d?s.onDocked:s.onUndocked)(t)},JB=(t,s,c,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(b=>{const C=rI(b,i);C!==c.isVisible()&&(c.setVisible(C),d&&!C?(mc(t.element,[g.fadeOutClass]),g.onHide(t)):(C?sI:Gx)(t,g))})})},iI=(t,s,c)=>{const i=s.lazyViewport(t);c.isDocked()&&JB(t,s,c,i),YB(t,i,c).each(g=>{g.fold(()=>Xx(t,s,c),b=>nb(t,s,c,b),b=>{JB(t,s,c,i,!0),nb(t,s,c,b)})})},ob=(t,s,c)=>{const i=t.element;c.setDocked(!1),aI(t,c).each(d=>{d.fold(()=>Xx(t,s,c),g=>nb(t,s,c,g),X)}),c.setVisible(!0),s.contextual.each(d=>{fc(i,[d.fadeInClass,d.fadeOutClass,d.transitionClass]),d.onShow(t)}),Yx(t,s,c)},Yx=(t,s,c)=>{t.getSystem().isConnected()&&iI(t,s,c)},QB=(t,s,c)=>{c.isDocked()&&ob(t,s,c)};var uI=Object.freeze({__proto__:null,refresh:Yx,reset:QB,isDocked:(t,s,c)=>c.isDocked(),getModes:(t,s,c)=>c.getModes(),setModes:(t,s,c,i)=>c.setModes(i)}),dI=Object.freeze({__proto__:null,events:(t,s)=>Bt([Zr(Jf(),(c,i)=>{t.contextual.each(d=>{Ts(c.element,d.transitionClass)&&(fc(c.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(c)),i.stop()})}),fe(e0(),(c,i)=>{Yx(c,t,s)}),fe(tg(),(c,i)=>{QB(c,t,s)})])}),eT=[Vr("contextual",[Qo("fadeInClass"),Qo("fadeOutClass"),Qo("transitionClass"),Fi("lazyContext"),Gt("onShow"),Gt("onShown"),Gt("onHide"),Gt("onHidden")]),es("lazyViewport",Ac),Hi("modes",["top","bottom"],ho),Gt("onDocked"),Gt("onUndocked")],mI=Object.freeze({__proto__:null,init:t=>{const s=Ye(!1),c=Ye(!0),i=Kn(),d=Ye(t.modes),g=()=>`docked:  ${s.get()}, visible: ${c.get()}, modes: ${d.get().join(",")}`;return dc({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:c.get,setVisible:c.set,getModes:d.get,setModes:d.set,readState:g})}});const Nr=ts({fields:eT,name:"docking",active:dI,apis:uI,state:mI}),tT=te(Ke("toolbar-height-change")),gu={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},nM="tox-tinymce--toolbar-sticky-on",oM="tox-tinymce--toolbar-sticky-off",sM=(t,s)=>{const c=Yc(s),d=Zd(s).dom.innerHeight,g=Ka(c),b=ze.fromDom(t.elm),C=sc(b),S=Jo(b),E=C.y,T=E+S,O=Ro(s),N=Jo(s),P=O.top,z=P+N,j=Math.abs(P-g.top)<2,oe=Math.abs(z-(g.top+d))<2;if(j&&E<z)ay(g.left,E-N,c);else if(oe&&T>P){const Y=E-d+S+N;ay(g.left,Y,c)}},nT=(t,s)=>qo(Nr.getModes(t),s),Th=t=>{const s=i=>Dl(i)+(parseInt(we(i,"margin-top"),10)||0)+(parseInt(we(i,"margin-bottom"),10)||0),c=t.element;Ud(c).each(i=>{const d="padding-"+Nr.getModes(t)[0];if(Nr.isDocked(t)){const g=Bo(i);Tt(c,"width",g+"px"),Tt(i,d,s(c)+"px")}else Vt(c,"width"),Vt(i,d)})},rM=(t,s)=>{s?(Vn(t,gu.fadeOutClass),mc(t,[gu.transitionClass,gu.fadeInClass])):(Vn(t,gu.fadeInClass),mc(t,[gu.fadeOutClass,gu.transitionClass]))},cM=(t,s)=>{const c=ze.fromDom(t.getContainer());s?(ds(c,nM),Vn(c,oM)):(ds(c,oM),Vn(c,nM))},oT=(t,s)=>{const c=Yc(s);yr(c).filter(i=>!Wn(s,i)).filter(i=>Wn(i,ze.fromDom(c.dom.body))||Af(t,i)).each(()=>Qi(s))},aM=(t,s)=>Ta(t).orThunk(()=>s().toOptional().bind(c=>Ta(c.element))),fI=(t,s,c)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{c().each(Nr.reset)}),t.on("ResizeWindow ResizeEditor",()=>{c().each(Th)}),t.on("SkinLoaded",()=>{c().each(i=>{Nr.isDocked(i)?Nr.reset(i):Nr.refresh(i)})}),t.on("FullscreenStateChanged",()=>{c().each(Nr.reset)})),t.on("AfterScrollIntoView",i=>{c().each(d=>{Nr.refresh(d);const g=d.element;bc(g)&&sM(i,g)})}),t.on("PostRender",()=>{cM(t,!1)})},gI=t=>t().map(Nr.isDocked).getOr(!1),hI=()=>[na.config({channels:{[tT()]:{onReceive:Th}}})],iM=(t,s)=>{const c=Kn(),i=s.getSink,d=C=>{i().each(S=>C(S.element))},g=C=>{t.inline||Th(C),cM(t,Nr.isDocked(C)),C.getSystem().broadcastOn([su()],{}),i().each(S=>S.getSystem().broadcastOn([su()],{}))},b=t.inline?[]:hI();return[ht.config({}),Nr.config({contextual:{lazyContext:C=>{const S=Dl(C.element),E=t.inline?t.getContentAreaContainer():t.getContainer(),T=qn(ze.fromDom(E)),O=T.height-S,N=T.y+(nT(C,"top")?0:S);return A.some(xs(T.x,N,T.width,O))},onShow:()=>{d(C=>rM(C,!0))},onShown:C=>{d(S=>fc(S,[gu.transitionClass,gu.fadeInClass])),c.get().each(S=>{oT(C.element,S),c.clear()})},onHide:C=>{aM(C.element,i).fold(c.clear,c.set),d(S=>rM(S,!1))},onHidden:()=>{d(C=>fc(C,[gu.transitionClass]))},...gu},lazyViewport:C=>{const S=Ac(),E=_O(t),T=S.y+(nT(C,"top")?E:0),O=S.height-(nT(C,"bottom")?E:0);return xs(S.x,T,S.width,O)},modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...b]};var pI=Object.freeze({__proto__:null,setup:fI,isDocked:gI,getBehaviours:iM});const bI=t=>{const s=t.editor,c=t.sticky?iM:UB;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:Me(c(s,t.sharedBackstage))}},vI=ot([xo,us("items",Vb([Zb([Wv,hr("items",ho)]),ho]))].concat(Kv)),yI=t=>jt("GroupToolbarButton",vI,t),CI=[pr("text"),pr("tooltip"),pr("icon"),Qc("search",!1,Vb([wa,ot([pr("placeholder")])],t=>Ai(t)?t?A.some({placeholder:A.none()}):A.none():A.some(t))),Fi("fetch"),es("onSetup",()=>X)],lM=ot([xo,...CI]),Jx=t=>jt("menubutton",lM,t),sT=ot([xo,jv,al,Bd,Y4,PN,dh,Li("presets","normal",["normal","color","listpreview"]),J4(1),uh,F1]),wI=t=>jt("SplitButton",sT,t);var rT=Pc({factory:(t,s)=>{const c=(d,g)=>{const b=Ae(g,C=>{const S={type:"menubutton",text:C.text,fetch:T=>{T(C.getItems())}},E=Jx(S).mapError(T=>Nu(T)).getOrDie();return RA(E,"tox-mbtn",s.backstage,A.some("menuitem"))});Dt.set(d,b)},i={focus:rt.focusIn,setMenus:c};return{uid:t.uid,dom:t.dom,components:[],behaviours:Me([Dt.config({}),Lt("menubar-events",[bo(d=>{t.onSetup(d)}),fe(ti(),(d,g)=>{Uo(d.element,".tox-mbtn--active").each(b=>{ms(g.event.target,".tox-mbtn").each(C=>{Wn(b,C)||d.getSystem().getByDom(b).each(S=>{d.getSystem().getByDom(C).each(E=>{Pa.expand(E),Pa.close(S),ht.focus(E)})})})})}),fe(og(),(d,g)=>{g.event.prevFocus.bind(b=>d.getSystem().getByDom(b).toOptional()).each(b=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{Pa.isOpen(b)&&(Pa.expand(C),Pa.close(b))})})})]),rt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),A.some(!0))}),Oo.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[pe("dom"),pe("uid"),pe("onEscape"),pe("backstage"),ee("onSetup",X)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,c)=>{t.setMenus(s,c)}}});const xI="\u26A1\uFE0FUpgrade",E2="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",Qx=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:E2,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:xI}}]}),_h=(t,s)=>s.getAnimationRoot.fold(()=>t.element,c=>c(t)),Id=t=>t.dimension.property,Oh=(t,s)=>t.dimension.getDimension(s),eS=(t,s)=>{const c=_h(t,s);fc(c,[s.shrinkingClass,s.growingClass])},cT=(t,s)=>{Vn(t.element,s.openClass),ds(t.element,s.closedClass),Tt(t.element,Id(s),"0px"),ku(t.element)},tS=(t,s)=>{Vn(t.element,s.closedClass),ds(t.element,s.openClass),Vt(t.element,Id(s))},aT=(t,s,c,i)=>{c.setCollapsed(),Tt(t.element,Id(s),Oh(s,t.element)),eS(t,s),cT(t,s),s.onStartShrink(t),s.onShrunk(t)},SI=(t,s,c,i)=>{const d=i.getOrThunk(()=>Oh(s,t.element));c.setCollapsed(),Tt(t.element,Id(s),d),ku(t.element);const g=_h(t,s);Vn(g,s.growingClass),ds(g,s.shrinkingClass),cT(t,s),s.onStartShrink(t)},uM=(t,s,c)=>{const i=Oh(s,t.element);(i==="0px"?aT:SI)(t,s,c,A.some(i))},A2=(t,s,c)=>{const i=_h(t,s),d=Ts(i,s.shrinkingClass),g=Oh(s,t.element);tS(t,s);const b=Oh(s,t.element);(d?()=>{Tt(t.element,Id(s),g),ku(t.element)}:()=>{cT(t,s)})(),Vn(i,s.shrinkingClass),ds(i,s.growingClass),tS(t,s),Tt(t.element,Id(s),b),c.setExpanded(),s.onStartGrow(t)},nS=(t,s,c)=>{if(c.isExpanded()){Vt(t.element,Id(s));const i=Oh(s,t.element);Tt(t.element,Id(s),i)}},kI=(t,s,c)=>{c.isExpanded()||A2(t,s,c)},EI=(t,s,c)=>{c.isExpanded()&&uM(t,s,c)},AI=(t,s,c)=>{c.isExpanded()&&aT(t,s,c)},TI=(t,s,c)=>c.isExpanded(),iT=(t,s,c)=>c.isCollapsed(),oS=(t,s,c)=>{const i=_h(t,s);return Ts(i,s.growingClass)===!0},lT=(t,s,c)=>{const i=_h(t,s);return Ts(i,s.shrinkingClass)===!0};var _I=Object.freeze({__proto__:null,refresh:nS,grow:kI,shrink:EI,immediateShrink:AI,hasGrown:TI,hasShrunk:iT,isGrowing:oS,isShrinking:lT,isTransitioning:(t,s,c)=>oS(t,s)||lT(t,s),toggleGrow:(t,s,c)=>{(c.isExpanded()?uM:A2)(t,s,c)},disableTransitions:eS,immediateGrow:(t,s,c)=>{c.isExpanded()||(tS(t,s),Tt(t.element,Id(s),Oh(s,t.element)),eS(t,s),c.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),OI=Object.freeze({__proto__:null,exhibit:(t,s,c)=>{const i=s.expanded;return eo(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:Hl(s.dimension.property,"0px")})},events:(t,s)=>Bt([Zr(Jf(),(c,i)=>{i.event.raw.propertyName===t.dimension.property&&(eS(c,t),s.isExpanded()&&Vt(c.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(c))})])}),DI=[pe("closedClass"),pe("openClass"),pe("shrinkingClass"),pe("growingClass"),nn("getAnimationRoot"),Gt("onShrunk"),Gt("onStartShrink"),Gt("onGrown"),Gt("onStartGrow"),ee("expanded",!1),us("dimension",Dc("property",{width:[Mn("property","width"),Mn("getDimension",t=>Bo(t)+"px")],height:[Mn("property","height"),Mn("getDimension",t=>Jo(t)+"px")]}))],Lz=Object.freeze({__proto__:null,init:t=>{const s=Ye(t.expanded),c=()=>"expanded: "+s.get();return dc({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:en(s.set,!1),setExpanded:en(s.set,!0),readState:c})}});const hl=ts({fields:DI,name:"sliding",active:OI,apis:_I,state:Lz}),uT="container",RI=[Fo("slotBehaviours",[])],dT=t=>"<alloy.field."+t+">",BI=t=>{const s=(()=>{const g=[];return{slot:(C,S)=>(g.push(C),vd(uT,dT(C),S)),record:te(g)}})(),c=t(s),i=s.record(),d=Ae(i,g=>js({name:g,pname:dT(g)}));return Ra(uT,RI,d,MI,c)},MI=(t,s)=>{const c=j=>yd(t),i=(j,oe)=>_n(j,t,oe),d=(j,oe)=>(Y,se)=>_n(Y,t,se).map(Le=>j(Le,se)).getOr(oe),g=j=>(oe,Y)=>{R(Y,se=>j(oe,se))},b=(j,oe)=>Yn(j.element,"aria-hidden")!=="true",C=(j,oe)=>{if(!b(j)){const Y=j.element;Vt(Y,"display"),Cs(Y,"aria-hidden"),lt(j,sg(),{name:oe,visible:!0})}},S=(j,oe)=>{if(b(j)){const Y=j.element;Tt(Y,"display","none"),Ot(Y,"aria-hidden","true"),lt(j,sg(),{name:oe,visible:!1})}},E=d(b,!1),T=d(S),O=g(T),N=j=>O(j,c()),P=d(C),z={getSlotNames:c,getSlot:i,isShowing:E,hideSlot:T,hideAllSlots:N,showSlot:P};return{uid:t.uid,dom:t.dom,components:s,behaviours:Hm(t.slotBehaviours),apis:z}},pl={...Lo({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,c)=>t.getSlot(s,c),isShowing:(t,s,c)=>t.isShowing(s,c),hideSlot:(t,s,c)=>t.hideSlot(s,c),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,c)=>t.showSlot(s,c)},t=>Ap(t)),sketch:BI},$I=ot([al,jv,es("onShow",X),es("onHide",X),dh]),mM=t=>jt("sidebar",$I,t),NI=t=>{const{sidebars:s}=t.ui.registry.getAll();R(ko(s),c=>{const i=s[c],d=()=>Kc(A.from(t.queryCommandValue("ToggleSidebar")),c);t.ui.registry.addToggleButton(c,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,c),g.setActive(d())},onSetup:g=>{g.setActive(d());const b=()=>g.setActive(d());return t.on("ToggleSidebar",b),()=>{t.off("ToggleSidebar",b)}}})})},PI=t=>({element:()=>t.element.dom}),FI=(t,s)=>{const c=Ae(ko(s),i=>{const d=s[i],g=Ja(mM(d));return{name:i,getApi:PI,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ae(c,i=>{const d=Ye(X);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Jm.unnamedEvents([t2(i,d),n2(i,d),fe(sg(),(g,b)=>{const C=b.event;Yt(c,E=>E.name===C.name).each(E=>{(C.visible?E.onShow:E.onHide)(E.getApi(g))})})])})})},zz=t=>pl.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:FI(s,t),slotBehaviours:Jm.unnamedEvents([bo(c=>pl.hideAllSlots(c))])})),Vz=(t,s,c)=>{Ut.getCurrent(t).each(d=>{Dt.set(d,[zz(s)]);const g=c==null?void 0:c.toLowerCase();wn(g)&&tn(s,g)&&Ut.getCurrent(d).each(b=>{pl.showSlot(b,g),hl.immediateGrow(d),Vt(d.element,"width")})})},fM=(t,s)=>{Ut.getCurrent(t).each(i=>{Ut.getCurrent(i).each(g=>{hl.hasGrown(i)?pl.isShowing(g,s)?hl.shrink(i):(pl.hideAllSlots(g),pl.showSlot(g,s)):(pl.hideAllSlots(g),pl.showSlot(g,s),hl.grow(i))})})},gM=t=>Ut.getCurrent(t).bind(c=>hl.isGrowing(c)||hl.hasGrown(c)?Ut.getCurrent(c).bind(g=>Yt(pl.getSlotNames(g),b=>pl.isShowing(g,b))):A.none()),mT=Ke("FixSizeEvent"),fT=Ke("AutoSizeEvent"),Ha=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Me([Oo.config({}),ht.config({}),hl.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Ut.getCurrent(s).each(pl.hideAllSlots),mn(s,fT)},onGrown:s=>{mn(s,fT)},onStartGrow:s=>{lt(s,mT,{width:Ps(s.element,"width").getOr("")})},onStartShrink:s=>{lt(s,mT,{width:Bo(s.element)+"px"})}}),Dt.config({}),Ut.config({find:s=>{const c=Dt.contents(s);return Oi(c)}})])}],behaviours:Me([Ia.childAt(0),Lt("sidebar-sliding-events",[fe(mT,(s,c)=>{Tt(s.element,"width",c.event.width)}),fe(fT,(s,c)=>{Vt(s.element,"width")})])])});var hM=Object.freeze({__proto__:null,block:(t,s,c,i)=>{Ot(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=Me([rt.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),ht.config({})]),b=i(d,g),C=d.getSystem().build(b);Dt.append(d,Bc(C)),C.hasConfigured(rt)&&s.focus&&rt.focusIn(C),c.isBlocked()||s.onBlock(t),c.blockWith(()=>Dt.remove(d,C))},unblock:(t,s,c)=>{Cs(t.element,"aria-busy"),c.isBlocked()&&s.onUnblock(t),c.clear()}}),LI=[es("getRoot",A.none),ic("focus",!0),Gt("onBlock"),Gt("onUnblock")],HI=Object.freeze({__proto__:null,init:()=>{const t=qk(),s=c=>{t.set({destroy:c})};return dc({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Ci=ts({fields:LI,name:"blocking",apis:hM,state:HI}),zI=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Xs(s,(c,i)=>i.name==="class"?c:{...c,[i.name]:i.value},{})},cS=t=>Array.prototype.slice.call(t.dom.classList,0),lf=t=>{const s=ze.fromHtml(t),c=To(s),i=zI(s),d=cS(s),g=c.length===0?{}:{innerHtml:Wi(s)};return{tag:bn(s),classes:d,attributes:i,...g}},wi=t=>(s,c)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:lf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),pM=t=>Ut.getCurrent(t).each(s=>Qi(s.element)),aS=(t,s)=>{const c="tabindex",i=`data-mce-${c}`;A.from(t.iframeElement).map(ze.fromDom).each(d=>{s?(Or(d,c).each(g=>Ot(d,i,g)),Ot(d,c,-1)):(Cs(d,c),Or(d,i).each(g=>{Ot(d,c,g),Cs(d,i)}))})},bM=(t,s,c,i)=>{const d=s.element;if(aS(t,c),c)Ci.block(s,wi(i)),Vt(d,"display"),Cs(d,"aria-hidden"),t.hasFocus()&&pM(s);else{const g=Ut.getCurrent(s).exists(b=>O0(b.element));Ci.unblock(s),Tt(d,"display","none"),Ot(d,"aria-hidden","true"),g&&t.focus()}},VI=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Me([Dt.config({}),Ci.config({focus:!1}),Ut.config({find:s=>Oi(s.components())})]),components:[]}),ZI=t=>t.type==="focusin",UI=t=>ZI(t)?(t.composed?Oi(t.composedPath()):A.from(t.target)).map(ze.fromDom).filter(Ao).exists(c=>Ts(c,"mce-pastebin")):!1,WI=(t,s,c)=>{const i=Ye(!1),d=Kn(),g=C=>{i.get()&&!UI(C)&&(C.preventDefault(),pM(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const b=C=>{C!==i.get()&&(i.set(C),bM(t,s(),C,c.providers),JD(t,C))};t.on("ProgressState",C=>{if(d.on(clearTimeout),_i(C.time)){const S=O1.setEditorTimeout(t,()=>b(C.state),C.time);d.set(S)}else b(C.state),d.clear()})},jI=(t,s)=>Xs(t,(d,g)=>s(g,d.len).fold(te(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,gT=(t,s,c)=>({within:t,extra:s,withinWidth:c}),vM=(t,s,c)=>{const i=jI(t,(C,S)=>{const E=c(C);return A.some({element:C,start:S,finish:S+E,width:E})}),d=Xt(i,C=>C.finish<=s),g=Ks(d,(C,S)=>C+S.width,0),b=i.slice(d.length);return{within:d,extra:b,withinWidth:g}},T2=t=>Ae(t,s=>s.element),yM=(t,s,c)=>{const i=T2(t.concat(s));return gT(i,[],c)},CM=(t,s,c,i)=>{const d=T2(t).concat([c]);return gT(d,T2(s),i)},GI=(t,s,c)=>gT(T2(t),[],c),wM=(t,s,c)=>{const i=vM(s,t,c);return i.extra.length===0?A.some(i):A.none()},qI=(t,s,c,i)=>{const d=wM(t,s,c).getOrThunk(()=>vM(s,t-c(i),c)),g=d.within,b=d.extra,C=d.withinWidth;return b.length===1&&b[0].width<=c(i)?yM(g,b,C):b.length>=1?CM(g,b,i,C):GI(g,b,C)},xM=(t,s)=>{const c=Ae(s,i=>Bc(i));gl.setGroups(t,c)},KI=t=>Fr(t,s=>Ta(s.element).bind(c=>s.getSystem().getByDom(c).toOptional())),SM=(t,s,c)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Da(t,s,"primary"),g=co.getCoupled(t,"overflowGroup");Tt(d.element,"visibility","hidden");const b=i.concat([g]),C=KI(b);c([]),xM(d,b);const S=Bo(d.element),E=qI(S,s.builtGroups.get(),T=>Bo(T.element),g);E.extra.length===0?(Dt.remove(d,g),c([])):(xM(d,E.within),c(E.extra)),Vt(d.element,"visibility"),ku(d.element),C.each(ht.focus)},kM=te([Fo("splitToolbarBehaviours",[co]),nr("builtGroups",()=>Ye([]))]),XI=te([Qu(["overflowToggledClass"]),Vo("getOverflowBounds"),pe("lazySink"),nr("overflowGroups",()=>Ye([]))].concat(kM())),YI=te([js({factory:gl,schema:Ah(),name:"primary"}),ra({schema:Ah(),name:"overflow"}),ra({name:"overflow-button"}),ra({name:"overflow-group"})]),hT=te((t,s)=>{Dr(t,Math.floor(s))}),JI=te([Qu(["toggledClass"]),pe("lazySink"),Fi("fetch"),Vo("getBounds"),Vr("fireDismissalEventInstead",[ee("event",Ul())]),Xl()]),QI=te([ra({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Me([Qt.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),ra({factory:gl,schema:Ah(),name:"toolbar",overrides:t=>({toolbarBehaviours:Me([rt.config({mode:"cyclic",onEscape:s=>(_n(s,t,"button").each(ht.focus),A.none())})])})})]),EM=(t,s)=>{const c=co.getCoupled(t,"toolbarSandbox");It.isOpen(c)?It.close(c):It.open(c,s.toolbar())},pT=(t,s,c,i)=>{const d=c.getBounds.map(b=>b()),g=c.lazySink(t).getOrDie();wr.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:hT()}}},d)},AM=(t,s,c,i,d)=>{gl.setGroups(s,d),pT(t,s,c,i),Qt.on(t)},TM=(t,s,c)=>{const i=g0(),d=(b,C)=>{c.fetch().get(S=>{AM(t,C,c,s.layouts,S),i.link(t.element),rt.focusIn(C)})},g=()=>{Qt.off(t),ht.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:Me([rt.config({mode:"special",onEscape:b=>(It.close(b),A.some(!0))}),It.config({onOpen:d,onClose:g,isPartOf:(b,C,S)=>Wl(C,S)||Wl(t,S),getAttachPoint:()=>c.lazySink(t).getOrDie()}),na.config({channels:{...Fm({isExtraPart:kn,...c.fireDismissalEventInstead.map(b=>({fireEventInstead:{event:b.event}})).getOr({})}),...sa({doReposition:()=>{It.getState(co.getCoupled(t,"toolbarSandbox")).each(b=>{pT(t,b,c,s.layouts)})}})}})])}},Ld=Sr({name:"FloatingToolbarButton",factory:(t,s,c,i)=>({...qr.sketch({...i.button(),action:d=>{EM(d,i)},buttonBehaviours:pc.augment({dump:i.button().buttonBehaviours},[co.config({others:{toolbarSandbox:d=>TM(d,c,t)}})])}),apis:{setGroups:(d,g)=>{It.getState(co.getCoupled(d,"toolbarSandbox")).each(b=>{AM(d,b,t,c.layouts,g)})},reposition:d=>{It.getState(co.getCoupled(d,"toolbarSandbox")).each(g=>{pT(d,g,t,c.layouts)})},toggle:d=>{EM(d,i)},getToolbar:d=>It.getState(co.getCoupled(d,"toolbarSandbox")),isOpen:d=>It.isOpen(co.getCoupled(d,"toolbarSandbox"))}}),configFields:JI(),partFields:QI(),apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),eL=te([pe("items"),Qu(["itemSelector"]),Fo("tgroupBehaviours",[rt])]),tL=te([Vm({name:"items",unit:"item"})]),_M=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:hs(t.tgroupBehaviours,[rt.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),iS=Sr({name:"ToolbarGroup",configFields:eL(),partFields:tL(),factory:_M}),OM=t=>Ae(t,s=>Bc(s)),DM=(t,s,c)=>{SM(t,c,i=>{c.overflowGroups.set(i),s.getOpt(t).each(d=>{Ld.setGroups(d,OM(i))})})},RM=(t,s,c,i)=>{const d=Pn(Ld.sketch({fetch:()=>Gs.nu(g=>{g(OM(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Os,zs],onRtl:()=>[zs,Os],onBottomLtr:()=>[Un,sr],onBottomRtl:()=>[sr,Un]},getBounds:c.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()}}));return{uid:t.uid,dom:t.dom,components:s,behaviours:hs(t.splitToolbarBehaviours,[co.config({others:{overflowGroup:()=>iS.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,b)=>{t.builtGroups.set(Ae(b,g.getSystem().build)),DM(g,d,t)},refresh:g=>DM(g,d,t),toggle:g=>{d.getOpt(g).each(b=>{Ld.toggle(b)})},isOpen:g=>d.getOpt(g).map(Ld.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(b=>{Ld.reposition(b)})},getOverflow:g=>d.getOpt(g).bind(Ld.getToolbar)},domModification:{attributes:{role:"group"}}}},BM=Sr({name:"SplitFloatingToolbar",configFields:XI(),partFields:YI(),factory:RM,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),nL=te([Qu(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Gt("onOpened"),Gt("onClosed")].concat(kM())),vT=te([js({factory:gl,schema:Ah(),name:"primary"}),js({factory:gl,schema:Ah(),name:"overflow",overrides:t=>({toolbarBehaviours:Me([hl.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{_n(s,t,"overflow-button").each(c=>{Qt.off(c),ht.focus(c)}),t.onClosed(s)},onGrown:s=>{rt.focusIn(s),t.onOpened(s)},onStartGrow:s=>{_n(s,t,"overflow-button").each(Qt.on)}}),rt.config({mode:"acyclic",onEscape:s=>(_n(s,t,"overflow-button").each(ht.focus),A.some(!0))})])})}),ra({name:"overflow-button",overrides:t=>({buttonBehaviours:Me([Qt.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),ra({name:"overflow-group"})]),oL=(t,s)=>_n(t,s,"overflow").map(hl.hasGrown).getOr(!1),MM=(t,s)=>{_n(t,s,"overflow-button").bind(()=>_n(t,s,"overflow")).each(c=>{lS(t,s),hl.toggleGrow(c)})},lS=(t,s)=>{_n(t,s,"overflow").each(c=>{SM(t,s,i=>{const d=Ae(i,g=>Bc(g));gl.setGroups(c,d)}),_n(t,s,"overflow-button").each(i=>{hl.hasGrown(c)&&Qt.on(i)}),hl.refresh(c)})},sL=(t,s,c,i)=>{const d="alloy.toolbar.toggle",g=(b,C)=>{const S=Ae(C,b.getSystem().build);t.builtGroups.set(S)};return{uid:t.uid,dom:t.dom,components:s,behaviours:hs(t.splitToolbarBehaviours,[co.config({others:{overflowGroup:b=>iS.sketch({...i["overflow-group"](),items:[qr.sketch({...i["overflow-button"](),action:C=>{mn(b,d)}})]})}}),Lt("toolbar-toggle-events",[fe(d,b=>{MM(b,t)})])]),apis:{setGroups:(b,C)=>{g(b,C),lS(b,t)},refresh:b=>lS(b,t),toggle:b=>MM(b,t),isOpen:b=>oL(b,t)},domModification:{attributes:{role:"group"}}}},uS=Sr({name:"SplitSlidingToolbar",configFields:nL(),partFields:vT(),factory:sL,apis:{setGroups:(t,s,c)=>{t.setGroups(s,c)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),$M=t=>{const s=t.title.fold(()=>({}),c=>({attributes:{title:c}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[iS.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Me([Oo.config({}),ht.config({})])}},_2=t=>iS.sketch($M(t)),NM=(t,s)=>{const c=bo(i=>{const d=Ae(t.initGroups,_2);gl.setGroups(i,d)});return Me([Hc.toolbarButton(t.providers.isDisabled),os(),rt.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),Lt("toolbar-events",[c])])},PM=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":$M({title:A.none(),items:[]}),"overflow-button":K5({name:"more",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("More..."),primary:!1,buttonType:A.none(),borderless:!1},A.none(),t.providers)},splitToolbarBehaviours:NM(t,s)}},rL=t=>{const s=PM(t),c=4,i=BM.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return BM.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=sc(d),b=Xh(d),C=sc(b),S=Math.max(b.dom.scrollHeight,C.height);return xs(g.x+c,C.y,g.width-c*2,S)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"}})},FM=t=>{const s=uS.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),c=uS.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=PM(t);return uS.sketch({...i,components:[s,c],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([tT()],{type:"opened"})},onClosed:d=>{d.getSystem().broadcastOn([tT()],{type:"closed"})}})},dS=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return gl.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Na.scrolling?["tox-toolbar--scrolling"]:[])},components:[gl.parts.groups({})],toolbarBehaviours:NM(t,s)})},cL=(t,s,c)=>{const i={getSocket:d=>Zc.getPart(d,t,"socket"),setSidebar:(d,g,b)=>{Zc.getPart(d,t,"sidebar").each(C=>Vz(C,g,b))},toggleSidebar:(d,g)=>{Zc.getPart(d,t,"sidebar").each(b=>fM(b,g))},whichSidebar:d=>Zc.getPart(d,t,"sidebar").bind(gM).getOrNull(),getHeader:d=>Zc.getPart(d,t,"header"),getToolbar:d=>Zc.getPart(d,t,"toolbar"),setToolbar:(d,g)=>{Zc.getPart(d,t,"toolbar").each(b=>{const C=Ae(g,_2);b.getApis().setGroups(b,C)})},setToolbars:(d,g)=>{Zc.getPart(d,t,"multiple-toolbar").each(b=>{const C=Ae(g,S=>Ae(S,_2));VB.setItems(b,C)})},refreshToolbar:d=>{Zc.getPart(d,t,"toolbar").each(b=>b.getApis().refresh(b))},toggleToolbarDrawer:d=>{Zc.getPart(d,t,"toolbar").each(g=>{Pt(g.getApis().toggle,b=>b(g))})},isToolbarDrawerToggled:d=>Zc.getPart(d,t,"toolbar").bind(g=>A.from(g.getApis().isOpen).map(b=>b(g))).getOr(!1),getThrobber:d=>Zc.getPart(d,t,"throbber"),focusToolbar:d=>{Zc.getPart(d,t,"toolbar").orThunk(()=>Zc.getPart(d,t,"multiple-toolbar")).each(b=>{rt.focusIn(b)})},setMenubar:(d,g)=>{Zc.getPart(d,t,"menubar").each(b=>{rT.setMenus(b,g)})},focusMenubar:d=>{Zc.getPart(d,t,"menubar").each(g=>{rT.focus(g)})}};return{uid:t.uid,dom:t.dom,components:s,apis:i,behaviours:t.behaviours}},aL=Eh.optional({factory:rT,name:"menubar",schema:[pe("backstage")]}),yT=t=>t.type===Na.sliding?FM:t.type===Na.floating?rL:dS,CT=Eh.optional({factory:{sketch:t=>VB.sketch({uid:t.uid,dom:t.dom,listBehaviours:Me([rt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>dS({type:t.type,uid:Ke("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),A.some(!0))}),setupItem:(s,c,i,d)=>{gl.setGroups(c,i)},shell:!0})},name:"multiple-toolbar",schema:[pe("dom"),pe("onEscape")]}),iL=Eh.optional({factory:{sketch:t=>{const s=yT(t),c={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),A.some(!0)),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(c)}},name:"toolbar",schema:[pe("dom"),pe("onEscape"),pe("getSink")]}),lL=Eh.optional({factory:{sketch:bI},name:"header",schema:[pe("dom")]}),uL=Eh.optional({factory:{sketch:Qx},name:"promotion",schema:[pe("dom")]}),dL=Eh.optional({name:"socket",schema:[pe("dom")]}),mL=Eh.optional({factory:{sketch:Ha},name:"sidebar",schema:[pe("dom")]}),fL=Eh.optional({factory:{sketch:VI},name:"throbber",schema:[pe("dom")]});var ao=Sr({name:"OuterContainer",factory:cL,configFields:[pe("dom"),pe("behaviours")],partFields:[lL,aL,iL,CT,dL,mL,uL,fL],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,c,i)=>{t.setSidebar(s,c,i)},toggleSidebar:(t,s,c)=>{t.toggleSidebar(s,c)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,c)=>{t.setToolbar(s,c)},setToolbars:(t,s,c)=>{t.setToolbars(s,c)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,c)=>{t.setMenubar(s,c)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)}}});const gL="file edit view insert format tools table help",wT={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},mS=(t,s,c)=>{const i=B4(c).split(/[ ,]/);return{text:t.title,getItems:()=>So(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:In(i,b=>b===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},O2=t=>t.split(" "),xT=(t,s)=>{const c={...wT,...s.menus},i=ko(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?O2(gL):O2(s.menubar===!1?"":s.menubar),g=Xt(d,C=>{const S=tn(wT,C);return i?S||at(s.menus,C).exists(E=>tn(E,"items")):S}),b=Ae(g,C=>{const S=c[C];return mS({title:S.title,items:O2(S.items)},s,t)});return Xt(b,C=>{const S=E=>wn(E)||E.type!=="separator";return C.getItems().length>0&&In(C.getItems(),S)})},Dh=t=>{const s=()=>{t._skinLoaded=!0,vP(t)};return()=>{t.initialized?s():t.on("init",s)}},IM=(t,s)=>()=>yP(t,{message:s}),LM=(t,s,c)=>(t.on("remove",()=>c.unload(s)),c.load(s)),hL=(t,s)=>{const c=s+"/skin.min.css";return LM(t,c,t.ui.styleSheetLoader)},pL=(t,s)=>{if(YS(ze.fromDom(t.getElement()))){const i=s+"/skin.shadowdom.min.css";return LM(t,i,Fv.DOM.styleSheetLoader)}else return Promise.resolve()},HM=(t,s)=>{const c=VO(s);c&&s.contentCSS.push(c+(t?"/content.inline":"/content")+".min.css"),!$4(s)&&wn(c)?Promise.all([hL(s,c),pL(s,c)]).then(Dh(s),IM(s,"Skin could not be loaded")):Dh(s)()},bL=en(HM,!1),vL=en(HM,!0),fS=(t,s)=>c=>{const i=cd(),d=()=>{c.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,c.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},D2=(t,s,c)=>i=>{const d=()=>c(i),g=()=>{c(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},zM=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},za=(t,s)=>()=>t.execCommand(s),VM=(t,s,c)=>{const i=(C,S,E,T)=>{const O=s.shared.providers.translate(C.title);if(C.type==="separator")return A.some({type:"separator",text:O});if(C.type==="submenu"){const N=So(C.getStyleItems(),P=>d(P,S,T));return S===0&&N.length<=0?A.none():A.some({type:"nestedmenuitem",text:O,enabled:N.length>0,getSubmenuItems:()=>So(C.getStyleItems(),P=>d(P,S,T))})}else return A.some({type:"togglemenuitem",text:O,icon:C.icon,active:C.isSelected(T),enabled:!E,onAction:c.onAction(C),...C.getStylePreview().fold(()=>({}),N=>({meta:{style:N}}))})},d=(C,S,E)=>{const T=C.type==="formatter"&&c.isInvalid(C);return S===0?T?[]:i(C,S,!1,E).toArray():i(C,S,T,E).toArray()},g=C=>{const S=c.getCurrentValue(),E=c.shouldHide?0:1;return So(C,T=>d(T,E,S))};return{validateItems:g,getFetch:(C,S)=>(E,T)=>{const O=S(),N=g(O),P=kh(N,cl.CLOSE_ON_EXECUTE,C,{isHorizontalMenu:!1,search:A.none()});T(P)}}},sb=(t,s,c)=>{const i=c.dataset,d=i.type==="basic"?()=>Ae(i.data,g=>kB(g,c.isSelectedFor,c.getPreviewFor)):i.getData;return{items:VM(t,s,c),getStyleItems:d}},R2=(t,s,c)=>{const{items:i,getStyleItems:d}=sb(t,s,c),g=C=>({getComponent:te(C)}),b=D2(t,"NodeChange",C=>{const S=C.getComponent();c.updateText(S)});return yA({text:c.icon.isSome()?A.none():c.text,icon:c.icon,tooltip:A.from(c.tooltip),role:A.none(),fetch:i.getFetch(s,d),onSetup:b,getApi:g,columns:1,presets:"normal",classes:c.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},yL=t=>Ae(t,s=>{let c=s,i=s;const d=s.split("=");return d.length>1&&(c=d[0],i=d[1]),{title:c,format:i}}),CL=t=>({type:"basic",data:t});var rb;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(rb||(rb={}));const wL=(t,s)=>s===rb.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),gS=(t,s,c)=>{const i=t.options.get(s);return{type:"basic",data:yL(wL(i,c))}},hS=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],ST=t=>{const s=()=>Yt(hS,C=>t.formatter.match(C.format)),c=C=>()=>t.formatter.match(C),i=C=>A.none,d=C=>{const E=s().fold(te("left"),T=>T.title.toLowerCase());lt(C,O5,{icon:`align-${E}`})},g=CL(hS),b=C=>()=>Yt(hS,S=>S.format===C.format).each(S=>t.execCommand(S.command));return{tooltip:"Align",text:A.none(),icon:A.some("align-left"),isSelectedFor:c,getCurrentValue:A.none,getPreviewFor:i,onAction:b,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!t.formatter.canApply(C.format)}},xL=(t,s)=>R2(t,s,ST(t)),ZM=(t,s)=>{const c=sb(t,s,ST(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},UM=(t,s)=>{const c=s(),i=Ae(c,d=>d.format);return A.from(t.formatter.closest(i)).bind(d=>Yt(c,g=>g.format===d)).orThunk(()=>Ir(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},WM=t=>{const s="Paragraph",c=b=>()=>t.formatter.match(b),i=b=>()=>{const C=t.formatter.get(b);return C?A.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(b))}):A.none()},d=b=>{const S=UM(t,()=>g.data).fold(te(s),E=>E.title);lt(b,eb,{text:S})},g=gS(t,"block_formats",rb.SemiColon);return{tooltip:"Blocks",text:A.some(s),icon:A.none(),isSelectedFor:c,getCurrentValue:A.none,getPreviewFor:i,onAction:zM(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:b=>!t.formatter.canApply(b.format)}},SL=(t,s)=>R2(t,s,WM(t)),jM=(t,s)=>{const c=sb(t,s,WM(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},kL=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],kT=t=>{const s=t.split(/\s*,\s*/);return Ae(s,c=>c.replace(/^['"]+|['"]+$/g,""))},EL=t=>{const s=()=>{const c=kT(t.toLowerCase());return Ys(kL,i=>c.indexOf(i.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},GM=t=>{const s="System Font",c=()=>{const E=z=>z?kT(z)[0]:"",T=t.queryCommandValue("FontName"),O=S.data,N=T?T.toLowerCase():"";return{matchOpt:Yt(O,z=>{const j=z.format;return j.toLowerCase()===N||E(j).toLowerCase()===E(N).toLowerCase()}).orThunk(()=>Ir(EL(N),{title:s,format:N})),font:T}},i=E=>T=>T.exists(O=>O.format===E),d=()=>{const{matchOpt:E}=c();return E},g=E=>()=>A.some({tag:"div",styles:E.indexOf("dings")===-1?{"font-family":E}:{}}),b=E=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,E.format)})},C=E=>{const{matchOpt:T,font:O}=c(),N=T.fold(te(O),P=>P.title);lt(E,eb,{text:N})},S=gS(t,"font_family_formats",rb.SemiColon);return{tooltip:"Fonts",text:A.some(s),icon:A.none(),isSelectedFor:i,getCurrentValue:d,getPreviewFor:g,onAction:b,updateText:C,dataset:S,shouldHide:!1,isInvalid:kn}},AL=(t,s)=>R2(t,s,GM(t)),TL=(t,s)=>{const c=sb(t,s,GM(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},_L={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},qM={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},OL=(t,s)=>{const c=Math.pow(10,s);return Math.round(t*c)/c},DL=(t,s)=>/[0-9.]+px$/.test(t)?OL(parseInt(t,10)*72/96,s||0)+"pt":at(qM,t).getOr(t),RL=t=>at(_L,t).getOr(""),KM=t=>{const s=()=>{let S=A.none();const E=C.data,T=t.queryCommandValue("FontSize");if(T)for(let O=3;S.isNone()&&O>=0;O--){const N=DL(T,O),P=RL(N);S=Yt(E,z=>z.format===T||z.format===N||z.format===P)}return{matchOpt:S,size:T}},c=S=>E=>E.exists(T=>T.format===S),i=()=>{const{matchOpt:S}=s();return S},d=te(A.none),g=S=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,S.format)})},b=S=>{const{matchOpt:E,size:T}=s(),O=E.fold(te(T),N=>N.title);lt(S,eb,{text:O})},C=gS(t,"font_size_formats",rb.Space);return{tooltip:"Font sizes",text:A.some("12pt"),icon:A.none(),isSelectedFor:c,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:b,dataset:C,shouldHide:!1,isInvalid:kn}},BL=(t,s)=>R2(t,s,KM(t)),ML=(t,s)=>{const c=sb(t,s,KM(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>c.items.validateItems(c.getStyleItems())})},XM=(t,s)=>{const c="Paragraph",i=b=>()=>t.formatter.match(b),d=b=>()=>{const C=t.formatter.get(b);return C!==void 0?A.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(b))}):A.none()},g=b=>{const C=O=>wB(O)?So(O.items,C):xB(O)?[{title:O.title,format:O.format}]:[],S=So(UA(t),C),T=UM(t,te(S)).fold(te(c),O=>O.title);lt(b,eb,{text:T})};return{tooltip:"Formats",text:A.some(c),icon:A.none(),isSelectedFor:i,getCurrentValue:A.none,getPreviewFor:d,onAction:zM(t),updateText:g,shouldHide:R4(t),isInvalid:b=>!t.formatter.canApply(b.format),dataset:s}},YM=(t,s)=>{const c={type:"advanced",...s.styles};return R2(t,s,XM(t,c))},$L=(t,s)=>{const c={type:"advanced",...s.styles},i=sb(t,s,XM(t,c));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})};var JM=Object.freeze({__proto__:null,events:(t,s)=>{const c=(i,d)=>{t.updateState.each(g=>{const b=g(i,d);s.set(b)}),t.renderComponents.each(g=>{const b=g(d,s.get());(t.reuseDom?Aw:Bv)(i,b)})};return Bt([fe(Sa(),(i,d)=>{const g=d;if(!g.universal){const b=t.channel;qo(g.channels,b)&&c(i,g.data)}}),bo((i,d)=>{t.initialData.each(g=>{c(i,g)})})])}}),QM=Object.freeze({__proto__:null,getState:(t,s,c)=>c}),e$=[pe("channel"),nn("renderComponents"),nn("updateState"),nn("initialData"),ic("reuseDom",!0)],NL=Object.freeze({__proto__:null,init:()=>{const t=Ye(A.none()),s=()=>t.set(A.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Uc=ts({fields:e$,name:"reflecting",active:JM,apis:QM,state:NL}),B2=te([pe("toggleClass"),pe("fetch"),jl("onExecute"),ee("getHotspot",A.some),ee("getAnchorOverrides",te({})),Xl(),jl("onItemExecute"),nn("lazySink"),pe("dom"),Gt("onOpen"),Fo("splitDropdownBehaviours",[co,rt,ht]),ee("matchWidth",!1),ee("useMinWidth",!1),ee("eventOrder",{}),nn("role")].concat(BE())),PL=js({factory:qr,schema:[pe("dom")],name:"arrow",defaults:()=>({buttonBehaviours:Me([ht.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(uc)},buttonBehaviours:Me([Qt.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),FL=js({factory:qr,schema:[pe("dom")],name:"button",defaults:()=>({buttonBehaviours:Me([ht.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(c=>{t.onExecute(c,s)})}})}),IL=te([PL,FL,Nc({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[pe("text")],name:"aria-descriptor"}),ra({schema:[pg()],name:"menu",defaults:t=>({onExecute:(s,c)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,c)})}})}),yR()]),LL=(t,s,c,i)=>{const d=T=>{Ut.getCurrent(T).each(O=>{cn.highlightFirst(O),rt.focusIn(O)})},g=T=>{DE(t,Wt,T,i,d,lr.HighlightMenuAndItem).get(X)},b=T=>(g(T),A.some(!0)),C=T=>{const O=Da(T,t,"button");return uc(O),A.some(!0)},S={...Bt([bo((T,O)=>{_n(T,t,"aria-descriptor").each(P=>{const z=Ke("aria");Ot(P.element,"id",z),Ot(T.element,"aria-describedby",z)})})]),...Dw(A.some(g))},E={repositionMenus:T=>{Qt.isOn(T)&&xR(T)}};return{uid:t.uid,dom:t.dom,components:s,apis:E,eventOrder:{...t.eventOrder,[lc()]:["disabling","toggling","alloy.base.behaviour"]},events:S,behaviours:hs(t.splitDropdownBehaviours,[co.config({others:{sandbox:T=>{const O=Da(T,t,"arrow");return RE(t,T,{onOpen:()=>{Qt.on(O),Qt.on(T)},onClose:()=>{Qt.off(O),Qt.off(T)}})}}}),rt.config({mode:"special",onSpace:C,onEnter:C,onDown:b}),ht.config({}),Qt.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},pS=Sr({name:"SplitDropdown",configFields:B2(),partFields:IL(),factory:LL,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),HL=t=>({isEnabled:()=>!st.isDisabled(t),setEnabled:s=>st.set(t,!s)}),zL=t=>({setActive:s=>{Qt.set(t,s)},isActive:()=>Qt.isOn(t),isEnabled:()=>!st.isDisabled(t),setEnabled:s=>st.set(t,!s)}),t$=(t,s)=>t.map(c=>({"aria-label":s.translate(c),title:s.translate(c)})).getOr({}),bS=Ke("focus-button"),ET=(t,s,c,i,d,g)=>({dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:t$(c,g)},components:o2([t.map(b=>Sh(b,g.icons)),s.map(b=>$x(b,"tox-tbtn",g))]),eventOrder:{[Hs()]:["focusing","alloy.base.behaviour","common-button-display-events"]},buttonBehaviours:Me([Hc.toolbarButton(g.isDisabled),os(),Lt("common-button-display-events",[fe(Hs(),(b,C)=>{C.event.prevent(),mn(b,bS)})])].concat(i.map(b=>Uc.config({channel:b,initialData:{icon:t,text:s},renderComponents:(C,S)=>o2([C.icon.map(E=>Sh(E,g.icons)),C.text.map(E=>$x(E,"tox-tbtn",g))])})).toArray()).concat(d.getOr([])))}),VL=(t,s,c,i)=>{const d=s.shared;return Ld.sketch({lazySink:d.getSink,fetch:()=>Gs.nu(g=>{g(Ae(c(t.items),_2))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:ET(t.icon,t.text,t.tooltip,A.none(),A.none(),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},n$=(t,s,c)=>{const i=Ye(X),d=ET(t.icon,t.text,t.tooltip,A.none(),A.none(),c);return qr.sketch({dom:d.dom,components:d.components,eventOrder:Mx,buttonBehaviours:Me([Lt("toolbar-button-events",[_5({onAction:t.onAction,getApi:s.getApi}),t2(s,i),n2(s,i)]),Hc.toolbarButton(()=>!t.enabled||c.isDisabled()),os()].concat(s.toolbarButtonBehaviours))})},o$=(t,s)=>s$(t,s,[]),s$=(t,s,c)=>n$(t,{toolbarButtonBehaviours:c.length>0?[Lt("toolbarButtonWith",c)]:[],getApi:HL,onSetup:t.onSetup},s),ZL=(t,s)=>r$(t,s,[]),r$=(t,s,c)=>n$(t,{toolbarButtonBehaviours:[Dt.config({}),Qt.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(c.length>0?[Lt("toolbarToggleButtonWith",c)]:[]),getApi:zL,onSetup:t.onSetup},s),UL=(t,s,c)=>i=>Gs.nu(d=>s.fetch(d)).map(d=>A.from(ME(ro(wE(Ke("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,cl.CLOSE_ON_EXECUTE,s.select.getOr(kn),c),{movement:ux(s.columns,s.presets),menuBehaviours:Jm.unnamedEvents(s.columns!=="auto"?[]:[bo((g,b)=>{Xv(g,4,YO(s.presets)).each(({numRows:C,numColumns:S})=>{rt.setGridSize(g,C,S)})})])})))),WL=(t,s)=>{const c=Ke("channel-update-split-dropdown-display"),i=b=>({isEnabled:()=>!st.isDisabled(b),setEnabled:C=>st.set(b,!C),setIconFill:(C,S)=>{Uo(b.element,'svg path[id="'+C+'"], rect[id="'+C+'"]').each(E=>{Ot(E,"fill",S)})},setActive:C=>{Ot(b.element,"aria-pressed",C),Uo(b.element,"span").each(S=>{b.getSystem().getByDom(S).each(E=>Qt.set(E,C))})},isActive:()=>Uo(b.element,"span").exists(C=>b.getSystem().getByDom(C).exists(Qt.isOn))}),d=Ye(X),g={getApi:i,onSetup:t.onSetup};return pS.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...t$(t.tooltip,s.providers)}},onExecute:b=>{t.onAction(i(b))},onItemExecute:(b,C,S)=>{},splitDropdownBehaviours:Me([Hc.splitButton(s.providers.isDisabled),os(),Lt("split-dropdown-events",[fe(bS,ht.focus),t2(g,d),n2(g,d)]),G1.config({})]),eventOrder:{[Vi()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:UL(i,t,s.providers),parts:{menu:Zv(!1,t.columns,t.presets)},components:[pS.parts.button(ET(t.icon,t.text,A.none(),A.some(c),A.some([Qt.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),pS.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:E4("chevron-down",s.providers.icons)},buttonBehaviours:Me([Hc.splitButton(s.providers.isDisabled),os(),Pv()])}),pS.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},jL=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],uf=(t,s)=>(c,i,d)=>{const g=t(c).mapError(b=>Nu(b)).getOrDie();return s(g,i,d)},GL={button:uf(mD,(t,s)=>o$(t,s.shared.providers)),togglebutton:uf(fD,(t,s)=>ZL(t,s.shared.providers)),menubutton:uf(Jx,(t,s)=>RA(t,"tox-tbtn",s,A.none())),splitbutton:uf(wI,(t,s)=>WL(t,s.shared)),grouptoolbarbutton:uf(yI,(t,s,c)=>{const i=c.ui.registry.getAll().buttons,d=b=>yS(c,{buttons:i,toolbar:b,allowToolbarGroups:!1},s,A.none()),g={[nl]:s.shared.header.isPositionedAtTop()?tl.TopToBottom:tl.BottomToTop};switch(ch(c)){case Na.floating:return VL(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},vS=(t,s,c)=>at(GL,t.type).fold(()=>(console.error("skipping button defined by",t),A.none()),i=>A.some(i(t,s,c))),M2={styles:YM,fontsize:BL,fontfamily:AL,blocks:SL,align:xL},AT=t=>{const s=Ae(jL,c=>{const i=Xt(c.items,d=>tn(t,d)||tn(M2,d));return{name:c.name,items:i}});return Xt(s,c=>c.items.length>0)},qL=t=>{const s=t.split("|");return Ae(s,c=>({items:c.trim().split(" ")}))},KL=t=>Sl(t,s=>tn(s,"name")&&tn(s,"items")),XL=t=>{const s=t.toolbar,c=t.buttons;return s===!1?[]:s===void 0||s===!0?AT(c):wn(s)?qL(s):KL(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},YL=(t,s,c,i,d,g)=>at(s,c.toLowerCase()).orThunk(()=>g.bind(b=>Fr(b,C=>at(s,C+c.toLowerCase())))).fold(()=>at(M2,c.toLowerCase()).map(b=>b(t,d)),b=>b.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${c}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):vS(b,d,t)),yS=(t,s,c,i)=>{const d=XL(s),g=Ae(d,b=>{const C=So(b.items,S=>S.trim().length===0?[]:YL(t,s.buttons,S,s.allowToolbarGroups,c,i).toArray());return{title:A.from(t.translate(b.name)),items:C}});return Xt(g,b=>b.items.length>0)},c$=(t,s,c,i)=>{const d=s.outerContainer,g=c.toolbar,b=c.buttons;if(Sl(g,wn)){const C=g.map(S=>{const E={toolbar:S,buttons:b,allowToolbarGroups:c.allowToolbarGroups};return yS(t,E,i,A.none())});ao.setToolbars(d,C)}else ao.setToolbar(d,yS(t,c,i,A.none()))},$2=nc(),a$=$2.os.isiOS()&&$2.os.version.major<=12,i$=(t,s)=>{const c=t.dom;let i=t.getWin();const d=t.getDoc().documentElement,g=Ye(zn(i.innerWidth,i.innerHeight)),b=Ye(zn(d.offsetWidth,d.offsetHeight)),C=()=>{const N=g.get();(N.left!==i.innerWidth||N.top!==i.innerHeight)&&(g.set(zn(i.innerWidth,i.innerHeight)),fE(t))},S=()=>{const N=t.getDoc().documentElement,P=b.get();(P.left!==N.offsetWidth||P.top!==N.offsetHeight)&&(b.set(zn(N.offsetWidth,N.offsetHeight)),fE(t))},E=N=>{XD(t,N)};c.bind(i,"resize",C),c.bind(i,"scroll",E);const T=wC(ze.fromDom(t.getBody()),"load",S),O=s.uiMothership.element;t.on("hide",()=>{Tt(O,"display","none")}),t.on("show",()=>{Vt(O,"display")}),t.on("NodeChange",S),t.on("remove",()=>{T.unbind(),c.unbind(i,"resize",C),c.unbind(i,"scroll",E),i=null})};var l$=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const g=Ye(0),b=s.outerContainer;bL(t);const C=ze.fromDom(d.targetNode),S=kb(tc(C));HC(C,s.mothership),oa(S,s.uiMothership),t.on("PostRender",()=>{ao.setSidebar(b,c.sidebar,HO(t)),c$(t,s,c,i),g.set(t.getWin().innerWidth),ao.setMenubar(b,xT(t,c)),i$(t,s)});const E=ao.getSocket(b).getOrDie("Could not find expected socket element");if(a$){Mi(E.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const P=tF(()=>{t.dispatch("ScrollContent")},20),z=rr(E.element,"scroll",P.throttle);t.on("remove",z.unbind)}ax(t,s),t.addCommand("ToggleSidebar",(P,z)=>{ao.toggleSidebar(b,z),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var P;return(P=ao.whichSidebar(b))!==null&&P!==void 0?P:""});const T=ch(t),O=()=>{ao.refreshToolbar(s.outerContainer)};(T===Na.sliding||T===Na.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const P=t.getWin().innerWidth;P!==g.get()&&(O(),g.set(P))});const N={setEnabled:P=>{cx(s,!P)},isEnabled:()=>!st.isDisabled(b)};return{iframeContainer:E.element.dom,editorContainer:b.element.dom,api:N}}});const TT=t=>/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none(),CS=t=>_i(t)?t+"px":t,wS=(t,s,c)=>{const i=s.filter(g=>t<g),d=c.filter(g=>t>g);return i.or(d).getOr(t)},QL=t=>{const s=_4(t),c=Od(t),i=D4(t);return TT(s).map(d=>wS(d,c,i))},eH=t=>QL(t).getOr(_4(t)),u$=t=>{const s=O4(t),c=Hv(t),i=Pw(t);return TT(s).map(d=>wS(d,c,i))},tH=t=>u$(t).getOr(O4(t)),{ToolbarLocation:_T,ToolbarMode:d$}=vN,m$=(t,s,c,i,d)=>{const{uiMothership:g,outerContainer:b}=c,C=Fv.DOM,S=Vv(t),E=ah(t),T=Pw(t).or(u$(t)),O=i.shared.header,N=O.isPositionedAtTop,P=ch(t),z=P===d$.sliding||P===d$.floating,j=Ye(!1),oe=()=>j.get()&&!t.removed,Y=on=>z?on.fold(te(0),ct=>ct.components().length>1?Jo(ct.components()[1].element):0):0,se=on=>{switch(M4(t)){case _T.auto:const ct=ao.getToolbar(b),sn=Y(ct),an=Jo(on.element)-sn,rn=qn(s);if(rn.y>an)return"top";{const qe=Xh(s),xt=Math.max(qe.dom.scrollHeight,Jo(qe));return rn.bottom<xt-an||Ac().bottom<rn.bottom-an?"bottom":"top"}case _T.bottom:return"bottom";case _T.top:default:return"top"}},Le=on=>{d.on(ct=>{Nr.setModes(ct,[on]),O.setDockingMode(on);const sn=N()?tl.TopToBottom:tl.BottomToTop;Ot(ct.element,nl,sn)})},ue=()=>{d.on(on=>{const ct=T.getOrThunk(()=>{const sn=TT(we(er(),"margin-left")).getOr(0);return Bo(er())-Ro(s).left+sn});Tt(on.element,"max-width",ct+"px")})},Ve=()=>{d.on(on=>{const ct=ao.getToolbar(b),sn=Y(ct),an=qn(s),rn=N()?Math.max(an.y-Jo(on.element)+sn,0):an.bottom;Mi(b.element,{position:"absolute",top:Math.round(rn)+"px",left:Math.round(an.x)+"px"})})},Xe=()=>{g.broadcastOn([su()],{})},Ze=(on=!1)=>{if(!!oe()){if(S||ue(),z&&ao.refreshToolbar(b),S||Ve(),E){const ct=on?Nr.reset:Nr.refresh;d.on(ct)}Xe()}},it=(on=!0)=>{S||!E||!oe()||d.on(ct=>{const sn=O.getDockingMode(),an=se(ct);an!==sn&&(Le(an),on&&Ze(!0))})};return{isVisible:oe,isPositionedAtTop:N,show:()=>{j.set(!0),Tt(b.element,"display","flex"),C.addClass(t.getBody(),"mce-edit-focus"),Vt(g.element,"display"),it(!1),Ze()},hide:()=>{j.set(!1),c.outerContainer&&(Tt(b.element,"display","none"),C.removeClass(t.getBody(),"mce-edit-focus")),Tt(g.element,"display","none")},update:Ze,updateMode:it,repositionPopups:Xe}},f$=(t,s)=>{const c=qn(t);return{pos:s?c.y:c.bottom,bounds:c}},nH=(t,s,c,i)=>{const d=Ye(f$(s,c.isPositionedAtTop())),g=C=>{const{pos:S,bounds:E}=f$(s,c.isPositionedAtTop()),{pos:T,bounds:O}=d.get(),N=E.height!==O.height||E.width!==O.width;d.set({pos:S,bounds:E}),N&&fE(t,C),c.isVisible()&&(T!==S?c.update(!0):N&&(c.updateMode(),c.repositionPopups()))};i||(t.on("activate",c.show),t.on("deactivate",c.hide)),t.on("SkinLoaded ResizeWindow",()=>c.update(!0)),t.on("NodeChange keydown",C=>{requestAnimationFrame(()=>g(C))}),t.on("ScrollWindow",()=>c.updateMode());const b=cd();b.set(wC(ze.fromDom(t.getBody()),"load",C=>g(C.raw))),t.on("remove",()=>{b.clear()})};var oH=Object.freeze({__proto__:null,render:(t,s,c,i,d)=>{const{mothership:g,uiMothership:b,outerContainer:C}=s,S=Kn(),E=ze.fromDom(d.targetNode),T=m$(t,E,s,i,S),O=R1(t);vL(t);const N=()=>{if(S.isSet()){T.show();return}S.set(ao.getHeader(C).getOrDie());const z=P4(t);oa(z,g),oa(z,b),c$(t,s,c,i),ao.setMenubar(C,xT(t,c)),T.show(),nH(t,E,T,O),t.nodeChanged()};t.on("show",N),t.on("hide",T.hide),O||(t.on("focus",N),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||O)&&N()}),ax(t,s);const P={show:N,hide:T.hide,setEnabled:z=>{cx(s,!z)},isEnabled:()=>!st.isDisabled(C)};return{editorContainer:C.element.dom,api:P}}});const sH="contexttoolbar-show",Rh="contexttoolbar-hide",OT=t=>({hide:()=>mn(t,pp()),getValue:()=>Ie.getValue(t)}),g$=(t,s)=>fe(pA,(c,i)=>{const d=t.get(c),g=OT(d);s.onAction(g,i.event.buttonApi)}),rH=(t,s,c)=>{const{primary:i,...d}=s.original,g=Ja(mD({...d,type:"button",onAction:X}));return s$(g,c,[g$(t,s)])},h$=(t,s,c)=>{const{primary:i,...d}=s.original,g=Ja(fD({...d,type:"togglebutton",onAction:X}));return r$(g,c,[g$(t,s)])},DT=t=>t.type==="contextformtogglebutton",p$=(t,s,c)=>DT(s)?h$(t,s,c):rH(t,s,c),b$=(t,s,c)=>{const i=Ae(s,b=>Pn(p$(t,b,c)));return{asSpecs:()=>Ae(i,b=>b.asSpec()),findPrimary:b=>Fr(s,(C,S)=>C.primary?A.from(i[S]).bind(E=>E.getOpt(b)).filter(Se(st.isDisabled)):A.none())}},v$=(t,s)=>{const c=t.label.fold(()=>({}),g=>({"aria-label":g})),i=Pn(N1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:Me([rt.config({mode:"special",onEnter:g=>d.findPrimary(g).map(b=>(uc(b),!0)),onLeft:(g,b)=>(b.cut(),A.none()),onRight:(g,b)=>(b.cut(),A.none())})])})),d=b$(i,t.commands,s);return[{title:A.none(),items:[i.asSpec()]},{title:A.none(),items:d.asSpecs()}]},xS={renderContextForm:(t,s,c)=>dS({type:t,uid:Ke("context-toolbar"),initGroups:v$(s,c),onEscape:A.none,cyclicKeying:!0,providers:c}),buildInitGroups:v$},SS=(t,s,c=.01)=>s.bottom-t.y>=c&&t.bottom-s.y>=c,y$=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const c=xb(ze.fromDom(t.startContainer),t.startOffset).element;return(Di(c)?ba(c):A.some(c)).filter(Ao).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},kS=t=>{const s=t.selection.getRng(),c=y$(s);if(t.inline){const i=Ka();return xs(i.left+c.left,i.top+c.top,c.width,c.height)}else{const i=sc(ze.fromDom(t.getBody()));return xs(i.x+c.left,i.y+c.top,c.width,c.height)}},C$=(t,s)=>s.filter(c=>Hr(c)&&ha(c)).map(sc).getOrThunk(()=>kS(t)),cH=(t,s,c)=>{const i=Math.max(t.x+c,s.x),d=Math.min(t.right-c,s.right);return{x:i,width:d-i}},aH=(t,s,c,i,d,g)=>{const b=ze.fromDom(t.getContainer()),C=Uo(b,".tox-editor-header").getOr(b),S=qn(C),E=S.y>=s.bottom,T=i&&!E;if(t.inline&&T)return{y:Math.max(S.bottom+g,c.y),bottom:c.bottom};if(t.inline&&!T)return{y:c.y,bottom:Math.min(S.y-g,c.bottom)};const O=d==="line"?qn(b):s;return T?{y:Math.max(S.bottom+g,c.y),bottom:Math.min(O.bottom-g,c.bottom)}:{y:Math.max(O.y+g,c.y),bottom:Math.min(S.y-g,c.bottom)}},w$=(t,s,c,i=0)=>{const d=$l(window),g=qn(ze.fromDom(t.getContentAreaContainer())),b=M1(t)||zw(t)||zv(t),{x:C,width:S}=cH(g,d,i);if(t.inline&&!b)return xs(C,d.y,S,d.height);{const E=s.header.isPositionedAtTop(),{y:T,bottom:O}=aH(t,g,d,E,c,i);return xs(C,T,S,O-T)}},ES=12,x$={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},RT={maxHeightFunction:Sg(),maxWidthFunction:hT()},AS=(t,s)=>{const c=t.selection.getRng(),i=xb(ze.fromDom(c.startContainer),c.startOffset);return c.startContainer===c.endContainer&&c.startOffset===c.endOffset-1&&Wn(i.element,s)},S$=(t,s,c)=>{const i=Ps(t,"position");Tt(t,"position",s);const d=c(t);return i.each(g=>Tt(t,"position",g)),d},BT=t=>t==="node",MT=(t,s,c,i,d)=>{const g=kS(t),b=i.lastElement().exists(C=>Wn(c,C));if(AS(t,c))return b?dB:fu;if(b)return S$(s,i.getMode(),()=>SS(g,qn(s))&&!i.isReposition()?TF:dB);{const C=i.getMode()==="fixed"?d.y+Ka().top:d.y,S=Jo(s)+ES;return C+S<=g.y?fu:k2}},iH=(t,s,c,i)=>{const d=S=>(E,T,O,N,P)=>{const z=MT(t,N,S,c,P),j={...E,y:P.y,height:P.height};return{...z(j,T,O,N,P),alwaysFit:!0}},g=S=>BT(i)?[d(S)]:[];return s?{onLtr:S=>[gs,zs,Os,sr,Un,Vs].concat(g(S)),onRtl:S=>[gs,Os,zs,Un,sr,Vs].concat(g(S))}:{onLtr:S=>[Vs,gs,sr,zs,Un,Os].concat(g(S)),onRtl:S=>[Vs,gs,Un,Os,sr,zs].concat(g(S))}},k$=(t,s,c,i)=>s==="line"?{bubble:ql(ES,0,x$),layouts:{onLtr:()=>[Fp],onRtl:()=>[Ip]},overrides:RT}:{bubble:ql(0,ES,x$,1/ES),layouts:iH(t,c,i,s),overrides:RT},$T=(t,s)=>{const c=Xt(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=gb(c,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},lH=t=>{if(t.length<=1)return t;{const s=g=>In(t,b=>b.position===g),c=g=>Xt(t,b=>b.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=c("node"),b=Ae(c("selection"),C=>({...C,position:"node"}));return g.concat(b)}else return c(i?"selection":"node");else return c("line")}},E$=t=>{if(t.length<=1)return t;{const s=i=>Yt(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>Xt(t,d=>d.position===i))}},A$=(t,s,c)=>{const i=$T(t,s);if(i.contextForms.length>0)return A.some({elem:t,toolbars:[i.contextForms[0]]});{const d=$T(t,c);if(d.contextForms.length>0)return A.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=lH(i.contextToolbars.concat(d.contextToolbars));return A.some({elem:t,toolbars:g})}else return A.none()}},uH=(t,s,c)=>t(s)?A.none():jf(s,i=>{if(Ao(i)){const{contextToolbars:d,contextForms:g}=$T(i,c.inNodeScope),b=g.length>0?g:E$(d);return b.length>0?A.some({elem:i,toolbars:b}):A.none()}else return A.none()},t),dH=(t,s)=>{const c=ze.fromDom(s.getBody()),i=b=>Wn(b,c),d=b=>!i(b)&&!Af(c,b),g=ze.fromDom(s.selection.getNode());return d(g)?A.none():A$(g,t.inNodeScope,t.inEditorScope).orThunk(()=>uH(i,g,t))},mH=(t,s)=>{const c={},i=[],d=[],g={},b={},C=(T,O)=>{const N=Ja(yD(O));c[T]=N,N.launch.map(P=>{g["form:"+T]={...O.launch,type:P.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(N)}}}),N.scope==="editor"?d.push(N):i.push(N),b[T]=N},S=(T,O)=>{UN(O).each(N=>{O.scope==="editor"?d.push(N):i.push(N),b[T]=N})},E=ko(t);return R(E,T=>{const O=t[T];O.type==="contextform"?C(T,O):O.type==="contexttoolbar"&&S(T,O)}),{forms:c,inNodeScope:i,inEditorScope:d,lookupTable:b,formNavigators:g}},NT=Ke("forward-slide"),PT=Ke("backward-slide"),FT=Ke("change-slide-event"),IT="tox-pop--resizing",T$=t=>{const s=Ye([]);return wo.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:c=>{s.set([]),wo.getContent(c).each(i=>{Vt(i.element,"visibility")}),Vn(c.element,IT),Vt(c.element,"width")},inlineBehaviours:Me([Lt("context-toolbar-events",[Zr(Jf(),(c,i)=>{i.event.raw.propertyName==="width"&&(Vn(c.element,IT),Vt(c.element,"width"))}),fe(FT,(c,i)=>{const d=c.element;Vt(d,"width");const g=Bo(d);wo.setContent(c,i.event.contents),ds(d,IT);const b=Bo(d);Tt(d,"width",g+"px"),wo.getContent(c).each(C=>{i.event.focus.bind(S=>(Qi(S),Ta(d))).orThunk(()=>(rt.focusIn(C),yr(tc(d))))}),setTimeout(()=>{Tt(c.element,"width",b+"px")},0)}),fe(NT,(c,i)=>{wo.getContent(c).each(d=>{s.set(s.get().concat([{bar:d,focus:yr(tc(c.element))}]))}),lt(c,FT,{contents:i.event.forwardContents,focus:A.none()})}),fe(PT,(c,i)=>{ga(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),lt(c,FT,{contents:Bc(d.bar),focus:d.focus})})})]),rt.config({mode:"special",onEscape:c=>ga(s.get()).fold(()=>t.onEscape(),i=>(mn(c,PT),A.some(!0)))})]),lazySink:()=>St.value(t.sink)})},LT="tox-pop--transition",fH=(t,s,c,i)=>{const d=i.backstage,g=d.shared,b=nc().deviceType.isTouch,C=Kn(),S=Kn(),E=Kn(),T=br(T$({sink:c,onEscape:()=>(t.focus(),A.some(!0))})),O=()=>{const ft=E.get().getOr("node"),Ht=BT(ft)?1:0;return w$(t,g,ft,Ht)},N=()=>!t.removed&&!(b()&&d.isContextMenuOpen()),P=ft=>Kc(Eo(ft,C.get(),Wn),!0),z=()=>{if(N()){const ft=O(),Ht=Kc(E.get(),"node")?C$(t,C.get()):kS(t);return ft.height<=0||!SS(Ht,ft)}else return!0},j=()=>{C.clear(),S.clear(),E.clear(),wo.hide(T)},oe=()=>{if(wo.isOpen(T)){const ft=T.element;Vt(ft,"display"),z()?Tt(ft,"display","none"):(S.set(0),wo.reposition(T))}},Y=ft=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[ft],behaviours:Me([rt.config({mode:"acyclic"}),Lt("pop-dialog-wrap-events",[bo(Ht=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>rt.focusIn(Ht))}),ka(Ht=>{t.shortcuts.remove("ctrl+F9")})])])}),se=is(()=>mH(s,ft=>{const Ht=Ve([ft]);lt(T,NT,{forwardContents:Y(Ht)})})),Le=(ft,Ht)=>yS(t,{buttons:ft,toolbar:Ht.items,allowToolbarGroups:!1},i.backstage,A.some(["form:"])),ue=(ft,Ht)=>xS.buildInitGroups(ft,Ht),Ve=ft=>{const{buttons:Ht}=t.ui.registry.getAll(),on=se(),ct={...Ht,...on.formNavigators},sn=ch(t)===Na.scrolling?Na.scrolling:Na.default,an=ve(Ae(ft,rn=>rn.type==="contexttoolbar"?Le(ct,rn):ue(rn,g.providers)));return dS({type:sn,uid:Ke("context-toolbar"),initGroups:an,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},Xe=(ft,Ht)=>{const on=ft==="node"?g.anchors.node(Ht):g.anchors.cursor(),ct=k$(t,ft,b(),{lastElement:C.get,isReposition:()=>Kc(S.get(),0),getMode:()=>wr.getMode(c)});return ro(on,ct)},Ze=(ft,Ht)=>{if(it.cancel(),!N())return;const on=Ve(ft),ct=ft[0].position,sn=Xe(ct,Ht);E.set(ct),S.set(1);const an=T.element;Vt(an,"display"),P(Ht)||(Vn(an,LT),wr.reset(c,T)),wo.showWithinBounds(T,Y(on),{anchor:sn,transition:{classes:[LT],mode:"placement"}},()=>A.some(O())),Ht.fold(C.clear,C.set),z()&&Tt(an,"display","none")},it=EA(()=>{if(!(!t.hasFocus()||t.removed))if(Ts(T.element,LT))it.throttle();else{const ft=se();dH(ft,t).fold(j,Ht=>{Ze(Ht.toolbars,A.some(Ht.elem))})}},17);t.on("init",()=>{t.on("remove",j),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",oe),t.on("click keyup focus SetContent",it.throttle),t.on(Rh,j),t.on(sH,ft=>{const Ht=se();at(Ht.lookupTable,ft.toolbarKey).each(on=>{Ze([on],Ir(ft.target!==t,ft.target)),wo.getContent(T).each(rt.focusIn)})}),t.on("focusout",ft=>{O1.setEditorTimeout(t,()=>{Ta(c.element).isNone()&&Ta(T.element).isNone()&&j()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&j()}),t.on("AfterProgressState",ft=>{ft.state?j():t.hasFocus()&&it.throttle()}),t.on("NodeChange",ft=>{Ta(T.element).fold(it.throttle,X)})})},gH=t=>{R([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],c=>{t.ui.registry.addToggleButton(c.name,{tooltip:c.text,icon:c.icon,onAction:za(t,c.cmd),onSetup:fS(t,c.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:za(t,"JustifyNone")})},hH={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},pH=(()=>{const t="[0-9]+",c="[eE]"+("[+-]?"+t),i="\\.",d=C=>`(?:${C})?`,b=`[+-]?(?:${["Infinity",t+i+d(t)+d(c),i+t+d(c),t+d(c)].join("|")})`;return new RegExp(`^(${b})(.*)$`)})(),HT=(t,s)=>In(s,c=>In(hH[c],i=>t===i)),bH=(t,s)=>A.from(pH.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return HT(g,s)?A.some({value:d,unit:g}):A.none()}),vH=(t,s)=>bH(t,s).map(({value:c,unit:i})=>c+i),TS=(t,s)=>{const c=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Kn();return Ae(i,b=>({type:"togglemenuitem",text:s.display(b),onSetup:C=>{const S=T=>{T&&(g.on(O=>O.setActive(!1)),g.set(C)),C.setActive(T)};S(Kc(d,s.hash(b)));const E=s.watcher(t,b,S);return()=>{g.clear(),E()}},onAction:()=>s.setCurrent(t,b)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(c()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:c,onSetup:s.onMenuSetup})},_$={name:"lineheight",text:"Line height",icon:"line-height",getOptions:ZO,hash:t=>vH(t,["fixed","relative","empty"]).getOr(t),display:Wt,watcher:(t,s,c)=>t.formatter.formatChanged("lineheight",c,!1,{value:s}).unbind,getCurrent:t=>A.from(t.queryCommandValue("LineHeight")),setCurrent:(t,s)=>t.execCommand("LineHeight",!1,s)},O$=t=>A.from(AO(t)).map(c=>({name:"language",text:"Language",icon:"language",getOptions:te(c),hash:i=>Jr(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var b;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(b=d.customCode)!==null&&b!==void 0?b:null}).unbind},getCurrent:i=>{const d=ze.fromDom(i.selection.getNode());return Gf(d,g=>A.some(g).filter(Ao).bind(b=>Or(b,"lang").map(S=>{const E=Or(b,"data-mce-lang").getOrUndefined();return{code:S,customCode:E,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=cd();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),d.clear}})),yH=t=>{TS(t,_$),O$(t).each(s=>TS(t,s))},CH=(t,s)=>{ZM(t,s),TL(t,s),$L(t,s),jM(t,s),ML(t,s)},wH=t=>D2(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent"))}),xH=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:wH(t),onAction:za(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:za(t,"indent")})},SH=t=>{xH(t)},zT=(t,s)=>c=>{c.setActive(s.get());const i=d=>{s.set(d.state),c.setActive(d.state)};return t.on("PastePlainTextToggle",i),()=>t.off("PastePlainTextToggle",i)},kH=t=>{const s=Ye(LO(t)),c=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:c,onSetup:zT(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:c,onSetup:zT(t,s)})},_S=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},EH=t=>{cf.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,c)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:fS(t,s.name),onAction:_S(t,s.name)})});for(let s=1;s<=6;s++){const c="h"+s;t.ui.registry.addToggleButton(c,{text:c.toUpperCase(),tooltip:"Heading "+s,onSetup:fS(t,c),onAction:_S(t,c)})}},AH=t=>{cf.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:za(t,s.action)})})},VT=t=>{cf.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:za(t,s.action),onSetup:fS(t,s.name)})})},D$=t=>{EH(t),AH(t),VT(t)},R$=t=>{cf.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:za(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:_S(t,"code")})},ZT=t=>{D$(t),R$(t)},OS=(t,s)=>D2(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",c=>{c.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),TH=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:OS(t,"hasUndo"),onAction:za(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:OS(t,"hasRedo"),onAction:za(t,"redo")})},_H=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:OS(t,"hasUndo"),onAction:za(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:OS(t,"hasRedo"),onAction:za(t,"redo")})},OH=t=>{TH(t),_H(t)},B$=t=>D2(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),DH=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:B$(t),onAction:za(t,"mceToggleVisualAid")})},RH=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:za(t,"mceToggleVisualAid")})},BH=t=>{RH(t),DH(t)},MH=(t,s)=>{gH(t),ZT(t),CH(t,s),OH(t),AP(t),BH(t),SH(t),yH(t),kH(t)},$H=t=>wn(t)?t.split(/[ ,]/):t,M$=t=>s=>s.options.get(t),NH=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:c=>c===!1?{value:[],valid:!0}:wn(c)||Sl(c,wn)?{value:$H(c),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},$$=M$("contextmenu_never_use_native"),N$=M$("contextmenu_avoid_overlap"),PH=t=>UT(t).length===0,UT=t=>{const s=t.ui.registry.getAll().contextMenus,c=t.options.get("contextmenu");return t.options.isSet("contextmenu")?c:Xt(c,i=>tn(s,i))},P2=(t,s)=>({type:"makeshift",x:t,y:s}),FH=(t,s,c)=>P2(t.x+s,t.y+c),P$=t=>t.type==="longpress"||t.type.indexOf("touch")===0,Bh=t=>{if(P$(t)){const s=t.touches[0];return P2(s.pageX,s.pageY)}else return P2(t.pageX,t.pageY)},F$=t=>{if(P$(t)){const s=t.touches[0];return P2(s.clientX,s.clientY)}else return P2(t.clientX,t.clientY)},IH=(t,s)=>{const c=Fv.DOM.getPos(t);return FH(s,c.x,c.y)},LH=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?Bh(s):IH(t.getContentAreaContainer(),F$(s)):I$(t),I$=t=>({type:"selection",root:ze.fromDom(t.selection.getNode())}),HH=t=>({type:"node",node:A.some(ze.fromDom(t.selection.getNode())),root:ze.fromDom(t.getBody())}),WT=(t,s,c)=>{switch(c){case"node":return HH(t);case"point":return LH(t,s);case"selection":return I$(t)}},zH=(t,s,c,i,d,g)=>{const b=c(),C=WT(t,s,g);kh(b,cl.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:A.none()}).map(S=>{s.preventDefault(),wo.showMenuAt(d,{anchor:C},{menu:{markers:fi("normal")},data:S})})},VH={onLtr:()=>[gs,zs,Os,sr,Un,Vs,fu,k2,S2,Hx,x2,Lx],onRtl:()=>[gs,Os,zs,Un,sr,Vs,fu,k2,x2,Lx,S2,Hx]},ZH=12,UH={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},WH=(t,s)=>{const c=t.selection;if(c.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=c.getRng();return Bg(t.getWin(),Rg.domRange(d)).exists(b=>b.left<=i.clientX&&b.right>=i.clientX&&b.top<=i.clientY&&b.bottom>=i.clientY)}},jH=t=>{const s=t.selection.getRng(),c=()=>{O1.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",c);const i=b=>{b.preventDefault(),b.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",c),t.off("longpresscancel",d),t.off("mousedown",i)}},GH=(t,s,c)=>{const i=WT(t,s,c);return{bubble:ql(0,c==="point"?ZH:0,UH),layouts:VH,overrides:{maxWidthFunction:hT(),maxHeightFunction:Sg()},...i}},qH=(t,s,c,i,d,g,b)=>{const C=GH(t,s,g);kh(c,cl.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:A.none()}).map(S=>{s.preventDefault();const E=b?lr.HighlightMenuAndItem:lr.HighlightNone;wo.showMenuWithinBounds(d,{anchor:C},{menu:{markers:fi("normal"),highlightOnOpen:E},data:S,type:"horizontal"},()=>A.some(w$(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(Rh)})},L$=(t,s,c,i,d,g)=>{const b=nc(),C=b.os.isiOS(),S=b.os.isMacOS(),E=b.os.isAndroid(),T=b.deviceType.isTouch(),O=()=>!(E||C||S&&T),N=()=>{const P=c();qH(t,s,P,i,d,g,O())};if((S||C)&&g!=="node"){const P=()=>{jH(t),N()};WH(t,s)?P():(t.once("selectionchange",P),t.once("touchend",()=>t.off("selectionchange",P)))}else N()},jT=t=>wn(t)?t==="|":t.type==="separator",GT={type:"separator"},cb=t=>{const s=c=>({text:c.text,icon:c.icon,enabled:c.enabled,shortcut:c.shortcut});if(wn(t))return t;switch(t.type){case"separator":return GT;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return wn(i)?i:Ae(i,cb)}};default:const c=t;return{type:"menuitem",...s(c),onAction:hn(c.onAction)}}},H$=(t,s)=>{if(s.length===0)return t;const i=ga(t).filter(d=>!jT(d)).fold(()=>[],d=>[GT]);return t.concat(i).concat(s).concat([GT])},KH=(t,s,c)=>{const i=Xs(s,(d,g)=>at(t,g.toLowerCase()).map(b=>{const C=b.update(c);if(wn(C))return H$(d,C.split(" "));if(C.length>0){const S=Ae(C,cb);return H$(d,S)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&jT(i[i.length-1])&&i.pop(),i},qT=(t,s)=>s.ctrlKey&&!$$(t),XH=t=>t.type==="longpress"||tn(t,"touches"),z$=(t,s)=>!XH(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),V$=(t,s)=>z$(t,s)?t.selection.getStart(!0):s.target,YH=(t,s)=>{const c=N$(t),i=z$(t,s)?"selection":"point";if(xf(c)){const d=V$(t,s);return U1(ze.fromDom(d),c)?"node":i}else return i},JH=(t,s,c)=>{const d=nc().deviceType.isTouch,g=br(wo.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>c.setContextMenuState(!0),onHide:()=>c.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:Me([Lt("dismissContextMenu",[fe(Ul(),(S,E)=>{It.close(S),t.focus()})])])})),b=()=>wo.hide(g),C=S=>{if($$(t)&&S.preventDefault(),qT(t,S)||PH(t))return;const E=YH(t,S),T=()=>{const N=V$(t,S),P=t.ui.registry.getAll(),z=UT(t);return KH(P.contextMenus,z,N)};(d()?L$:zH)(t,S,T,c,g,E)};t.on("init",()=>{const S="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(S,b),t.on("longpress contextmenu",C)})},KT=Es.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),DS=t=>s=>s.translate(-t.left,-t.top),RS=t=>s=>s.translate(t.left,t.top),Hd=t=>(s,c)=>Xs(t,(i,d)=>d(i),zn(s,c)),BS=(t,s,c)=>t.fold(Hd([RS(c),DS(s)]),Hd([DS(s)]),Hd([])),ab=(t,s,c)=>t.fold(Hd([RS(c)]),Hd([]),Hd([RS(s)])),Z$=(t,s,c)=>t.fold(Hd([]),Hd([DS(c)]),Hd([RS(s),DS(c)])),QH=(t,s,c,i,d,g)=>{const b=ab(t,d,g),C=ab(s,d,g);return Math.abs(b.left-C.left)<=c&&Math.abs(b.top-C.top)<=i},e9=(t,s,c,i,d,g)=>{const b=ab(t,d,g),C=ab(s,d,g),S=Math.abs(b.left-C.left),E=Math.abs(b.top-C.top);return zn(S,E)},U$=(t,s,c)=>{const i=t.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-c.left+"px"),top:A.some(g-c.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...i}},t9=(t,s,c)=>t.fold((i,d)=>Mh(i+s,d+c),(i,d)=>df(i+s,d+c),(i,d)=>$h(i+s,d+c)),XT=(t,s,c,i)=>{const d=(g,b)=>(C,S)=>{const E=g(s,c,i);return b(C.getOr(E.left),S.getOr(E.top))};return t.fold(d(Z$,Mh),d(ab,df),d(BS,$h))},Mh=KT.offset,df=KT.absolute,$h=KT.fixed,W$=(t,s)=>{const c=Yn(t,s);return Jr(c)?NaN:parseInt(c,10)},n9=(t,s)=>{const c=t.element,i=W$(c,s.leftAttr),d=W$(c,s.topAttr);return isNaN(i)||isNaN(d)?A.none():A.some(zn(i,d))},o9=(t,s,c)=>{const i=t.element;Ot(i,s.leftAttr,c.left+"px"),Ot(i,s.topAttr,c.top+"px")},s9=(t,s)=>{const c=t.element;Cs(c,s.leftAttr),Cs(c,s.topAttr)},j$=(t,s,c,i)=>n9(t,s).fold(()=>c,d=>$h(d.left+i.left,d.top+i.top)),r9=(t,s,c,i,d,g)=>{const b=j$(t,s,c,i),C=s.mustSnap?a9(t,s,b,d,g):i9(t,s,b,d,g),S=BS(b,d,g);return o9(t,s,S),C.fold(()=>({coord:$h(S.left,S.top),extra:A.none()}),E=>({coord:E.output,extra:E.extra}))},c9=(t,s)=>{s9(t,s)},G$=(t,s,c,i)=>Fr(t,d=>{const g=d.sensor;return QH(s,g,d.range.left,d.range.top,c,i)?A.some({output:XT(d.output,s,c,i),extra:d.extra}):A.none()}),a9=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return G$(g,c,i,d).orThunk(()=>Xs(g,(S,E)=>{const T=E.sensor,O=e9(c,T,E.range.left,E.range.top,i,d);return S.deltas.fold(()=>({deltas:A.some(O),snap:A.some(E)}),N=>{const P=(O.left+O.top)/2,z=(N.left+N.top)/2;return P<=z?{deltas:A.some(O),snap:A.some(E)}:S})},{deltas:A.none(),snap:A.none()}).snap.map(S=>({output:XT(S.output,c,i,d),extra:S.extra})))},i9=(t,s,c,i,d)=>{const g=s.getSnapPoints(t);return G$(g,c,i,d)},YT=(t,s,c)=>({coord:XT(t.output,t.output,s,c),extra:t.extra});var u9=Object.freeze({__proto__:null,snapTo:(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Yc(t.element),b=Ka(g),C=jB(d),S=YT(i,b,C),E=U$(S.coord,b,C);as(d,E)}}});const JT="data-initial-z-index",d9=t=>{ba(t.element).filter(Ao).each(s=>{Or(s,JT).fold(()=>Vt(s,"z-index"),c=>Tt(s,"z-index",c)),Cs(s,JT)})},m9=t=>{ba(t.element).filter(Ao).each(s=>{Ps(s,"z-index").each(c=>{Ot(s,JT,c)}),Tt(s,"z-index",we(t.element,"z-index"))})},q$=(t,s)=>{t.getSystem().addToGui(s),m9(s)},f9=t=>{d9(t),t.getSystem().removeFromGui(t)},K$=(t,s,c)=>t.getSystem().build($d.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:c}));var g9=Vr("snaps",[pe("getSnapPoints"),Gt("onSensor"),pe("leftAttr"),pe("topAttr"),ee("lazyViewport",Ac),ee("mustSnap",!1)]);const QT=[ee("useFixed",kn),pe("blockerClass"),ee("getTarget",Wt),ee("onDrag",X),ee("repositionTarget",!0),ee("onDrop",X),es("getBounds",Ac),g9],h9=t=>Bn(Ps(t,"left"),Ps(t,"top"),Ps(t,"position"),(s,c,i)=>(i==="fixed"?$h:Mh)(parseInt(s,10),parseInt(c,10))).getOrThunk(()=>{const s=Ro(t);return df(s.left,s.top)}),p9=(t,s,c,i,d)=>{const g=d.bounds,b=ab(s,c,i),C=jr(b.left,g.x,g.x+g.width-d.width),S=jr(b.top,g.y,g.y+g.height-d.height),E=df(C,S);return s.fold(()=>{const T=Z$(E,c,i);return Mh(T.left,T.top)},te(E),()=>{const T=BS(E,c,i);return $h(T.left,T.top)})},b9=(t,s,c,i,d,g,b)=>{const C=s.fold(()=>{const S=t9(c,g.left,g.top),E=BS(S,i,d);return $h(E.left,E.top)},S=>{const E=r9(t,S,c,g,i,d);return E.extra.each(T=>{S.onSensor(t,T)}),E.coord});return p9(t,C,i,d,b)},v9=(t,s,c,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=Yc(t.element),b=Ka(g),C=jB(d),S=h9(d),E=b9(t,s.snaps,S,b,C,i,c),T=U$(E,b,C);as(d,T)}s.onDrag(t,d,i)},X$=(t,s)=>({bounds:t.getBounds(),height:Dl(s.element),width:Mo(s.element)}),e_=(t,s,c,i,d)=>{const g=c.update(i,d),b=c.getStartData().getOrThunk(()=>X$(s,t));g.each(C=>{v9(t,s,b,C)})},Y$=(t,s,c,i)=>{s.each(f9),c.snaps.each(g=>{c9(t,g)});const d=c.getTarget(t.element);i.reset(),c.onDrop(t,d)},t_=t=>(s,c)=>{const i=d=>{c.setStartData(X$(s,d))};return Bt([fe(e0(),d=>{c.getStartData().each(()=>i(d))}),...t(s,c,i)])},y9=t=>Bt([fe(Hs(),t.forceDrop),fe(gp(),t.drop),fe(ei(),(s,c)=>{t.move(c.event)}),fe(rm(),t.delayDrop)]);var J$=Object.freeze({__proto__:null,getData:t=>A.from(zn(t.x,t.y)),getDelta:(t,s)=>zn(s.left-t.left,s.top-t.top)});const mf=(t,s,c)=>[fe(Hs(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const b=()=>Y$(i,A.some(E),t,s),C=AR(b,200),S={drop:b,delayDrop:C.schedule,forceDrop:b,move:O=>{C.cancel(),e_(i,t,s,J$,O)}},E=K$(i,t.blockerClass,y9(S));(()=>{c(i),q$(i,E)})()})],C9=[...QT,Mn("dragger",{handlers:t_(mf)})],n_=t=>Bt([fe(Qa(),t.forceDrop),fe(Br(),t.drop),fe(Kf(),t.drop),fe(qf(),(s,c)=>{t.move(c.event)})]),MS=t=>{const s=t[0];return A.some(zn(s.clientX,s.clientY))};var Q$=Object.freeze({__proto__:null,getData:t=>{const c=t.raw.touches;return c.length===1?MS(c):A.none()},getDelta:(t,s)=>zn(s.left-t.left,s.top-t.top)});const e6=(t,s,c)=>{const i=Kn(),d=g=>{Y$(g,i.get(),t,s),i.clear()};return[fe(Qa(),(g,b)=>{b.stop();const C=()=>d(g),S={drop:C,delayDrop:X,forceDrop:C,move:O=>{e_(g,t,s,Q$,O)}},E=K$(g,t.blockerClass,n_(S));i.set(E),(()=>{c(g),q$(g,E)})()}),fe(qf(),(g,b)=>{b.stop(),e_(g,t,s,Q$,b.event)}),fe(Br(),(g,b)=>{b.stop(),d(g)}),fe(Kf(),d)]},w9=[...QT,Mn("dragger",{handlers:t_(e6)})],Nh=(t,s,c)=>[...mf(t,s,c),...e6(t,s,c)],t6=[...QT,Mn("dragger",{handlers:t_(Nh)})];var x9=Object.freeze({__proto__:null,mouse:C9,touch:w9,mouseOrTouch:t6}),S9=Object.freeze({__proto__:null,init:()=>{let t=A.none(),s=A.none();const c=()=>{t=A.none(),s=A.none()},i=(S,E)=>{const T=t.map(O=>S.getDelta(O,E));return t=A.some(E),T},d=(S,E)=>S.getData(E).bind(T=>i(S,T)),g=S=>{s=A.some(S)},b=()=>s,C=te({});return dc({readState:C,reset:c,update:d,getStartData:b,setStartData:g})}});const Ph=uC({branchKey:"mode",branches:x9,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:A.from(t.extra)})},state:S9,apis:u9}),o_=40,ib=o_/2,lb=(t,s,c,i,d,g)=>t.fold(()=>Ph.snap({sensor:df(c-ib,i-ib),range:zn(d,g),output:df(A.some(c),A.some(i)),extra:{td:s}}),b=>{const C=c-ib,S=i-ib,E=o_,T=o_,O=b.element.dom.getBoundingClientRect();return Ph.snap({sensor:df(C,S),range:zn(E,T),output:df(A.some(c-O.width/2),A.some(i-O.height/2)),extra:{td:s}})}),$S=(t,s,c)=>{const i=(d,g)=>d.exists(b=>Wn(b,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const b=g.td;i(s.get(),b)||(s.set(b),c(b))},mustSnap:!0}},F2=t=>Pn(qr.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Me([Ph.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),G1.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),Fh=(t,s)=>{const c=Ye([]),i=Ye([]),d=Ye(!1),g=Kn(),b=Kn(),C=Ze=>{const it=sc(Ze);return lb(P.getOpt(s),Ze,it.x,it.y,it.width,it.height)},S=()=>Ae(c.get(),Ze=>C(Ze)),E=Ze=>{const it=sc(Ze);return lb(z.getOpt(s),Ze,it.right,it.bottom,it.width,it.height)},T=()=>Ae(i.get(),Ze=>E(Ze)),O=$S(S,g,Ze=>{b.get().each(it=>{t.dispatch("TableSelectorChange",{start:Ze,finish:it})})}),N=$S(T,b,Ze=>{g.get().each(it=>{t.dispatch("TableSelectorChange",{start:it,finish:Ze})})}),P=F2(O),z=F2(N),j=br(P.asSpec()),oe=br(z.asSpec()),Y=(Ze,it,ft,Ht)=>{const on=it.dom.getBoundingClientRect();Vt(Ze.element,"display");const ct=Zd(ze.fromDom(t.getBody())).dom.innerHeight,sn=ft(on),an=Ht(on,ct);(sn||an)&&Tt(Ze.element,"display","none")},se=(Ze,it,ft,Ht)=>{const on=ft(it);Ph.snapTo(Ze,on),Y(Ze,it,an=>an[Ht]<0,(an,rn)=>an[Ht]>rn)},Le=Ze=>se(j,Ze,C,"top"),ue=()=>g.get().each(Le),Ve=Ze=>se(oe,Ze,E,"bottom"),Xe=()=>b.get().each(Ve);nc().deviceType.isTouch()&&(t.on("TableSelectionChange",Ze=>{d.get()||(Ql(s,j),Ql(s,oe),d.set(!0)),g.set(Ze.start),b.set(Ze.finish),Ze.otherCells.each(it=>{c.set(it.upOrLeftCells),i.set(it.downOrRightCells),Le(Ze.start),Ve(Ze.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{ue(),Xe()}),t.on("TableSelectionClear",()=>{d.get()&&(Ws(j),Ws(oe),d.set(!1)),g.clear(),b.clear()}))};var NS=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const k9=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",n6=(t,s,c)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"\u203A",g=(E,T,O)=>qr.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":O,"aria-level":O+1}},components:[vo(E)],action:N=>{t.focus(),t.selection.select(T),t.nodeChanged()},buttonBehaviours:Me([Hc.button(c.isDisabled),os()])}),b=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[vo(` ${d} `)]}),C=E=>Xs(E,(T,O,N)=>{const P=g(O.name,O.element,N);return N===0?T.concat([P]):T.concat([b(),P])},[]),S=E=>{const T=[];let O=E.length;for(;O-- >0;){const N=E[O];if(N.nodeType===1&&!k9(N)){const P=gE(t,N);if(P.isDefaultPrevented()||T.push({name:P.name,element:N}),P.isPropagationStopped())break}}return T};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Me([rt.config({mode:"flow",selector:"div[role=button]"}),st.config({disabled:c.isDisabled}),os(),Oo.config({}),Dt.config({}),Lt("elementPathEvents",[bo((E,T)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>rt.focusIn(E)),t.on("NodeChange",O=>{const N=S(O.parents),P=N.length>0?C(N):[];Dt.set(E,P)})})])]),components:[]}};var ff;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(ff||(ff={}));const o6=(t,s,c,i,d)=>{const g={height:wS(i+s.top,Od(t),D4(t))};return c===ff.Both&&(g.width=wS(d+s.left,Hv(t),Pw(t))),g},s6=(t,s,c)=>{const i=ze.fromDom(t.getContainer()),d=o6(t,s,c,Jo(i),Bo(i));Xo(d,(g,b)=>{_i(g)&&Tt(i,b,CS(g))}),z1(t)},E9=t=>{const s=IO(t);return s===!1?ff.None:s==="both"?ff.Both:ff.Vertical},PS=(t,s,c,i)=>{const g=zn(c*20,i*20);return s6(t,g,s),A.some(!0)},r6=(t,s)=>{const c=E9(t);return c===ff.None?A.none():A.some(rl("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize")},behaviours:[Ph.config({mode:"mouse",repositionTarget:!1,onDrag:(i,d,g)=>s6(t,g,c),blockerClass:"tox-blocker"}),rt.config({mode:"special",onLeft:()=>PS(t,c,-1,0),onRight:()=>PS(t,c,1,0),onUp:()=>PS(t,c,0,-1),onDown:()=>PS(t,c,0,1)}),Oo.config({}),ht.config({})]},s.icons))},c6=(t,s)=>{const c=(i,d,g)=>Dt.set(i,[vo(s.translate(["{0} "+g,d[g]]))]);return qr.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Me([Hc.button(s.isDisabled),os(),Oo.config({}),Dt.config({}),Ie.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Lt("wordcount-events",[Ui(i=>{const d=Ie.getValue(i),g=d.mode==="words"?"characters":"words";Ie.setValue(i,{mode:g,count:d.count}),c(i,d.count,g)}),bo(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=Ie.getValue(i);Ie.setValue(i,{mode:g,count:d.wordCount}),c(i,d.wordCount,g)})})])]),eventOrder:{[lc()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},s_=(t,s)=>{const c=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":mi.translate(["Powered by {0}","Tiny"])},innerHtml:NS.trim()},behaviours:Me([ht.config({})])}]}),i=()=>{const g=[];return PO(t)&&g.push(n6(t,{},s)),t.hasPlugin("wordcount")&&g.push(c6(t,s)),FO(t)&&g.push(c()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=i(),b=r6(t,s);return g.concat(b.toArray())})()}},a6=t=>t.get().getOrDie("UI has not been rendered"),A9=t=>{const s=t.inline,c=s?oH:l$,i=ah(t)?pI:oI,d=Kn(),g=Kn(),b=Kn(),C=Kn(),O=nc().deviceType.isTouch()?["tox-platform-touch"]:[],N=N4(t),P=ch(t),z=Pn({dom:{tag:"div",classes:["tox-anchorbar"]}}),j=()=>g.get().bind(ao.getHeader),oe=()=>St.fromOption(d.get(),"UI has not been rendered"),Y=()=>g.get().bind(rn=>z.getOpt(rn)).getOrDie("Could not find a anchor bar element"),se=()=>g.get().bind(rn=>ao.getToolbar(rn)).getOrDie("Could not find more toolbar element"),Le=()=>g.get().bind(rn=>ao.getThrobber(rn)).getOrDie("Could not find throbber element"),ue=YF(oe,t,Y),Ve=()=>{const rn={attributes:{[nl]:N?tl.BottomToTop:tl.TopToBottom}},$e=ao.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:ue,onEscape:()=>{t.focus()}}),qe=ao.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:oe,providers:ue.shared.providers,onEscape:()=>{t.focus()},type:P,lazyToolbar:se,lazyHeader:()=>j().getOrDie("Could not find header element"),...rn}),xt=ao.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:ue.shared.providers,onEscape:()=>{t.focus()},type:P}),zt=zv(t),Tn=zw(t),uo=M1(t),Pr=zO(t),Yr=Xe(),zh=()=>zt?[xt]:Tn?[qe]:[],WS=Pr?[Yr,$e]:[$e];return ao.parts.header({dom:{tag:"div",classes:["tox-editor-header"],...rn},components:ve([uo?WS:[],zh(),Vv(t)?[]:[z.asSpec()]]),sticky:ah(t),editor:t,sharedBackstage:ue.shared})},Xe=()=>ao.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Ze=()=>{const rn=ao.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),$e=ao.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[rn,$e]}},it=()=>{const rn=P4(t),$e=Wn(er(),rn)&&we(rn,"display")==="grid",qe={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(O),attributes:{...mi.isRtl()?{dir:"rtl"}:{}}},behaviours:Me([wr.config({useFixed:()=>i.isDocked(j)})])},xt={dom:{styles:{width:document.body.clientWidth+"px"}},events:Bt([fe(tg(),uo=>{Tt(uo.element,"width",document.body.clientWidth+"px")})])},zt=br(ro(qe,$e?xt:{})),Tn=RR(zt);return d.set(zt),C.set(Tn),{sink:zt,uiMothership:Tn}},ft=()=>{const rn=Ve(),$e=Ze(),qe=ao.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:ue}),xt=NO(t)&&!s?A.some(s_(t,ue.shared.providers)):A.none(),zt=ve([N?[]:[rn],s?[]:[$e],N?[rn]:[]]),uo=ve([[{dom:{tag:"div",classes:["tox-editor-container"]},components:zt}],s?[]:xt.toArray(),[qe]]),Pr=F4(t),Yr={role:"application",...mi.isRtl()?{dir:"rtl"}:{},...Pr?{"aria-hidden":"true"}:{}},zh=br(ao.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(s?["tox-tinymce-inline"]:[]).concat(N?["tox-tinymce--toolbar-bottom"]:[]).concat(O),styles:{visibility:"hidden",...Pr?{opacity:"0",border:"0"}:{}},attributes:Yr},components:uo,behaviours:Me([os(),st.config({disableClass:"tox-tinymce--disabled"}),rt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),WS=RR(zh);return g.set(zh),b.set(WS),{mothership:WS,outerContainer:zh}},Ht=rn=>{const $e=CS(eH(t)),qe=CS(tH(t));return t.inline||(Ab("div","width",qe)&&Tt(rn.element,"width",qe),Ab("div","height",$e)?Tt(rn.element,"height",$e):Tt(rn.element,"height","400px")),$e},on=rn=>{t.addShortcut("alt+F9","focus menubar",()=>{ao.focusMenubar(rn)}),t.addShortcut("alt+F10","focus toolbar",()=>{ao.focusToolbar(rn)}),t.addCommand("ToggleToolbarDrawer",()=>{ao.toggleToolbarDrawer(rn)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>ao.isToolbarDrawerToggled(rn))};return{getMothership:()=>a6(b),getUiMothership:()=>a6(C),backstage:ue,renderUI:()=>{const{mothership:rn,outerContainer:$e}=ft(),{uiMothership:qe,sink:xt}=it();Lo(Iw(t),(LV,HV)=>{t.ui.registry.addGroupToolbarButton(HV,LV)});const{buttons:zt,menuItems:Tn,contextToolbars:uo,sidebars:Pr}=t.ui.registry.getAll(),Yr=Vw(t),zh={menuItems:Tn,menus:WO(t),menubar:Lw(t),toolbar:Yr.getOrThunk(()=>B1(t)),allowToolbarGroups:P===Na.floating,buttons:zt,sidebar:Pr};on($e),HB(t,rn,qe),i.setup(t,ue.shared,j),MH(t,ue),JH(t,oe,ue),NI(t),WI(t,Le,ue.shared),fH(t,uo,xt,{backstage:ue}),Fh(t,xt);const WS=t.getElement(),PV=Ht($e),FV={mothership:rn,uiMothership:qe,outerContainer:$e,sink:xt},IV={targetNode:WS,height:PV};return c.render(t,FV,zh,ue,IV)}}},T9=(t,s)=>{const c=A.from(Yn(t,"id")).fold(()=>{const i=Ke("dialog-describe");return Ot(s,"id",i),i},Wt);Ot(t,"aria-describedby",c)},i6=(t,s)=>{const c=Or(t,"id").fold(()=>{const i=Ke("dialog-label");return Ot(s,"id",i),i},Wt);Ot(t,"aria-labelledby",c)},_9=te([pe("lazySink"),nn("dragBlockClass"),es("getBounds",Ac),ee("useTabstopAt",dt),ee("eventOrder",{}),Fo("modalBehaviours",[rt]),Wr("onExecute"),$p("onEscape")]),r_={sketch:Wt},O9=te([Nc({name:"draghandle",overrides:(t,s)=>({behaviours:Me([Ph.config({mode:"mouse",getTarget:c=>gg(c,'[role="dialog"]').getOr(c),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),js({schema:[pe("dom")],name:"title"}),js({factory:r_,schema:[pe("dom")],name:"close"}),js({factory:r_,schema:[pe("dom")],name:"body"}),Nc({factory:r_,schema:[pe("dom")],name:"footer"}),ra({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[ee("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ee("components",[])],name:"blocker"})]),c_=(t,s,c,i)=>{const d=Kn(),g=P=>{d.set(P);const z=t.lazySink(P).getOrDie(),j=i.blocker(),oe=z.getSystem().build({...j,components:j.components.concat([Bc(P)]),behaviours:Me([ht.config({}),Lt("dialog-blocker-events",[Zr(Vl(),()=>{rt.focusIn(P)})])])});Ql(z,oe),rt.focusIn(P)},b=P=>{d.clear(),ba(P.element).each(z=>{P.getSystem().getByDom(z).each(j=>{Ws(j)})})},C=P=>Da(P,t,"body"),S=P=>Da(P,t,"footer"),E=(P,z)=>{Ci.block(P,z)},T=P=>{Ci.unblock(P)},O=Ke("modal-events"),N={...t.eventOrder,[Vi()]:[O].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:b,getBody:C,getFooter:S,setIdle:T,setBusy:E},eventOrder:N,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:hs(t.modalBehaviours,[Dt.config({}),rt.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),Ci.config({getRoot:d.get}),Lt(O,[bo(P=>{i6(P.element,Da(P,t,"title").element),T9(P.element,Da(P,t,"body").element)})])])}},Io=Sr({name:"ModalDialog",configFields:_9(),partFields:O9(),factory:c_,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,c)=>{t.setBusy(s,c)},setIdle:(t,s)=>{t.setIdle(s)}}}),D9=ot([xo,Wv].concat(vc)),l6=wa,u6=[mh("button"),al,Li("align","end",["start","end"]),qv,gi,Iu("buttonType",["primary","secondary"])],d6=[...u6,Rd],FS=[em("type",["submit","cancel","custom"]),...d6],R9=[em("type",["menu"]),Bd,jv,al,hr("items",D9),...u6],B9=Dc("type",{submit:FS,cancel:FS,custom:FS,menu:R9}),Ih=[xo,Rd,em("level",["info","warn","error","success"]),cD,ee("url","")],m6=ot(Ih),M9=t=>[xo,t],IS=[xo,Rd,gi,mh("button"),al,FN,Iu("buttonType",["primary","secondary","toolbar"]),qv],ub=ot(IS),zd=[xo,Wv],xi=zd.concat([tx]),LS=zd.concat([ex,gi]),Cc=ot(LS),HS=wa,f6=xi.concat([J4("auto")]),g6=ot(f6),$9=Zb([lh,Rd,cD]),gf=ot(xi),oV=ho,h6=ot(xi),db=ho,zS=zd.concat([ac("tag","textarea"),Qo("scriptId"),Qo("scriptUrl"),qb("settings",void 0)]),p6=zd.concat([ac("tag","textarea"),Fi("init")]),N9=Qd(t=>jt("customeditor.old",Rr(p6),t).orThunk(()=>jt("customeditor.new",Rr(zS),t))),P9=ho,F9=ot(xi),mb=Mu(),cV=t=>[xo,xa("columns"),t],I9=[xo,Qo("html"),Li("presets","presentation",["presentation","document"])],L9=ot(I9),aV=xi.concat([ic("sandboxed",!0),ic("transparent",!0)]),H9=ot(aV),z9=ho,I2=ot(zd.concat([pr("height")])),V9=ot([Qo("url"),Fu("zoom"),Fu("cachedWidth"),Fu("cachedHeight")]),Z9=xi.concat([pr("inputMode"),pr("placeholder"),ic("maximized",!1),gi]),b6=ot(Z9),U9=ho,iV=t=>[xo,ex,t],e=[Rd,lh],n=[Rd,hr("items",wy("items",()=>o))],o=Vb([ot(e),ot(n)]),r=xi.concat([hr("items",o),gi]),a=ot(r),u=ho,f=xi.concat([dp("items",[Rd,lh]),Gb("size",1),gi]),p=ot(f),y=ho,x=xi.concat([ic("constrain",!0),gi]),_=ot(x),M=ot([Qo("width"),Qo("height")]),B=zd.concat([ex,Gb("min",0),Gb("max",0)]),H=ot(B),V=Vf,I=[xo,hr("header",ho),hr("cells",Ss(ho))],Z=ot(I),U=xi.concat([pr("placeholder"),ic("maximized",!1),gi]),K=ot(U),J=ho,de=xi.concat([Li("filetype","file",["image","media","file"]),gi]),he=ot(de),De=ot([lh,nx]),be=t=>ks("items","items",zr(),Ss(Qd(s=>jt(`Checking item of ${t}`,ae,s).fold(c=>St.error(Nu(c)),c=>St.value(c))))),ae=_c(()=>Il("type",{alertbanner:m6,bar:ot(M9(be("bar"))),button:ub,checkbox:Cc,colorinput:gf,colorpicker:h6,dropzone:F9,grid:ot(cV(be("grid"))),iframe:H9,input:b6,listbox:a,selectbox:p,sizeinput:_,slider:H,textarea:K,urlinput:he,customeditor:N9,htmlpanel:L9,imagepreview:I2,collection:g6,label:ot(iV(be("label"))),table:Z,panel:Re})),ie=[xo,ee("classes",[]),hr("items",ae)],Re=ot(ie),Je=[mh("tab"),rD,hr("items",ae)],tt=[xo,dp("tabs",Je)],kt=ot(tt),qt=d6,fn=B9,Dn=ot([Qo("title"),us("body",Il("type",{panel:Re,tabpanel:kt})),ac("size","normal"),hr("buttons",fn),ee("initialData",{}),es("onAction",X),es("onChange",X),es("onSubmit",X),es("onClose",X),es("onCancel",X),es("onTabChange",X)]),Ms=t=>jt("dialog",Dn,t),_e=ot([em("type",["cancel","custom"]),...qt]),At=ot([Qo("title"),Qo("url"),Fu("height"),Fu("width"),tm("buttons",_e),es("onAction",X),es("onCancel",X),es("onClose",X),es("onMessage",X)]),$t=t=>jt("dialog",At,t),vt=t=>qc(t)?[t].concat(So(En(t),vt)):Ei(t)?So(t,vt):[],Do=t=>wn(t.type)&&wn(t.name),je={checkbox:HS,colorinput:oV,colorpicker:db,dropzone:mb,input:U9,iframe:z9,imagepreview:V9,selectbox:y,sizeinput:M,slider:V,listbox:u,size:M,textarea:J,urlinput:De,customeditor:P9,collection:$9,togglemenuitem:l6},yt=t=>A.from(je[t.type]),ut=t=>Xt(vt(t),Do),Pe=t=>{const s=ut(t),c=So(s,i=>yt(i).fold(()=>[],d=>[us(i.name,d)]));return ot(c)},Nt=t=>{var s;const c=Ja(Ms(t)),i=Pe(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:c,dataValidator:i,initialData:d}},_t={open:(t,s)=>{const c=Nt(s);return t(c.internalDialog,c.initialData,c.dataValidator)},openUrl:(t,s)=>{const c=Ja($t(s));return t(c)},redial:t=>Nt(t)},pt=t=>{const s=[],c={};return Xo(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{c[d]=g})}),s.length>0?St.error(s):St.value(c)},wt=(t,s,c)=>{const i=Pn(J1.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ae(t.items,g=>$A(d,g,s,c))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:Me([rt.config({mode:"acyclic",useTabstopAt:Se(h2)}),Ia.memento(i),La.memento(i,{postprocess:d=>pt(d).fold(g=>(console.error(g),{}),Wt)})])}},Sn=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:Dw(t.action),behaviours:hs(t.tabButtonBehaviours,[ht.config({}),rt.config({mode:"execution",useSpace:!0,useEnter:!0}),Ie.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),An=Pc({name:"TabButton",configFields:[ee("uid",void 0),pe("value"),ks("dom","dom",Hf(()=>({attributes:{role:"tab",id:Ke("aria"),"aria-selected":"false"}})),Oc()),nn("action"),ee("domModification",{}),Fo("tabButtonBehaviours",[ht,rt,Ie]),pe("view")],factory:Sn}),rs=te([pe("tabs"),pe("dom"),ee("clickToDismiss",!1),Fo("tabbarBehaviours",[cn,rt]),Qu(["tabClass","selectedClass"])]),to=Vm({factory:An,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{cn.dehighlight(i,d),lt(i,Ay(),{tabbar:i,button:d})},c=(i,d)=>{cn.highlight(i,d),lt(i,Cp(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=cn.isHighlighted(d,i);(()=>g&&t.clickToDismiss?s:g?X:c)()(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),Xn=te([to]),Go=(t,s,c,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:hs(t.tabbarBehaviours,[cn.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{Ot(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Ot(g.element,"aria-selected","false")}}),rt.config({mode:"flow",getInitial:d=>cn.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),qs=Sr({name:"Tabbar",configFields:rs(),partFields:Xn(),factory:Go}),cs=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:hs(t.tabviewBehaviours,[Dt.config({})]),domModification:{attributes:{role:"tabpanel"}}}),bl=Pc({name:"Tabview",configFields:[Fo("tabviewBehaviours",[Dt])],factory:cs}),Va=te([ee("selectFirst",!0),Gt("onChangeTab"),Gt("onDismissTab"),ee("tabs",[]),Fo("tabSectionBehaviours",[])]),vl=js({factory:qs,schema:[pe("dom"),cc("markers",[pe("tabClass"),pe("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),yl=js({factory:bl,name:"tabview"}),Cl=te([vl,yl]),wl=(t,s,c,i)=>{const d=b=>{const C=Ie.getValue(b);_n(b,t,"tabview").each(S=>{Yt(t.tabs,T=>T.value===C).each(T=>{const O=T.view();Or(b.element,"id").each(N=>{Ot(S.element,"aria-labelledby",N)}),Dt.set(S,O),t.onChangeTab(S,b,O)})})},g=(b,C)=>{_n(b,t,"tabbar").each(S=>{C(S).each(uc)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Hm(t.tabSectionBehaviours),events:Bt(ve([t.selectFirst?[bo((b,C)=>{g(b,cn.getFirst)})]:[],[fe(Cp(),(b,C)=>{const S=C.event.button;d(S)}),fe(Ay(),(b,C)=>{const S=C.event.button;t.onDismissTab(b,S)})]])),apis:{getViewItems:b=>_n(b,t,"tabview").map(C=>Dt.contents(C)).getOr([]),showTab:(b,C)=>{g(b,E=>{const T=cn.getCandidates(E);return Yt(T,N=>Ie.getValue(N)===C).filter(N=>!cn.isHighlighted(E,N))})}}}},io=Sr({name:"TabSection",configFields:Va(),partFields:Cl(),factory:wl,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,c)=>{t.showTab(s,c)}}}),Za=(t,s,c)=>Ae(t,(i,d)=>{Dt.set(c,t[d].view());const g=s.dom.getBoundingClientRect();return Dt.set(c,[]),g.height}),xl=t=>Oi(Ko(t,(s,c)=>s>c?-1:s<c?1:0)),Lh=(t,s,c)=>{const i=Xh(t).dom,d=gg(t,".tox-dialog-wrap").getOr(t),g=we(d,"position")==="fixed";let b;g?b=Math.max(i.clientHeight,window.innerHeight):b=Math.max(i.offsetHeight,i.scrollHeight);const C=Jo(s),E=s.dom.offsetLeft>=c.dom.offsetLeft+Bo(c)?Math.max(Jo(c),C):C,T=parseInt(we(t,"margin-top"),10)||0,O=parseInt(we(t,"margin-bottom"),10)||0,P=Jo(t)+T+O-E;return b-P},Si=(t,s)=>{Oi(t).each(c=>io.showTab(s,c.value))},Wc=(t,s)=>{Tt(t,"height",s+"px"),Tt(t,"flex-basis",s+"px")},ur=(t,s,c)=>{gg(t,'[role="dialog"]').each(i=>{Uo(i,'[role="tablist"]').each(d=>{c.get().map(g=>(Tt(s,"height","0"),Tt(s,"flex-basis","0"),Math.min(g,Lh(i,s,d)))).each(g=>{Wc(s,g)})})})},da=t=>Uo(t,'[role="tabpanel"]'),ma=t=>{const s=Kn();return{extraEvents:[bo(d=>{const g=d.element;da(g).each(b=>{Tt(b,"visibility","hidden"),d.getSystem().getByDom(b).toOptional().each(C=>{const S=Za(t,b,C);xl(S).fold(s.clear,s.set)}),ur(g,b,s),Vt(b,"visibility"),Si(t,d),requestAnimationFrame(()=>{ur(g,b,s)})})}),fe(tg(),d=>{const g=d.element;da(g).each(b=>{ur(g,b,s)})}),fe(LE,(d,g)=>{const b=d.element;da(b).each(C=>{const S=yr(tc(C));Tt(C,"visibility","hidden");const E=Ps(C,"height").map(N=>parseInt(N,10));Vt(C,"height"),Vt(C,"flex-basis");const T=C.dom.getBoundingClientRect().height;E.forall(N=>T>N)?(s.set(T),ur(b,C,s)):E.each(N=>{Wc(C,N)}),Vt(C,"visibility"),S.each(Qi)})})],selectFirst:!1}},hf="send-data-to-section",L2="send-data-to-view",Vd=(t,s,c)=>{const i=Ye({}),d=E=>{const T=Ie.getValue(E),O=pt(T).getOr({}),N=i.get(),P=ro(N,O);i.set(P)},g=E=>{const T=i.get();Ie.setValue(E,T)},b=Ye(null),C=Ae(t.tabs,E=>({value:E.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[vo(c.shared.providers.translate(E.title))],view:()=>[J1.sketch(T=>({dom:{tag:"div",classes:["tox-form"]},components:Ae(E.items,O=>$A(T,O,s,c)),formBehaviours:Me([rt.config({mode:"acyclic",useTabstopAt:Se(h2)}),Lt("TabView.form.events",[bo(g),ka(d)]),na.config({channels:om([{key:hf,value:{onReceive:d}},{key:L2,value:{onReceive:g}}])})])}))]})),S=ma(C);return io.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(E,T,O)=>{const N=Ie.getValue(T);lt(E,IE,{name:N,oldName:b.get()}),b.set(N)},tabs:C,components:[io.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[qs.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Me([Oo.config({})])}),io.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:S.selectFirst,tabSectionBehaviours:Me([Lt("tabpanel",S.extraEvents),rt.config({mode:"acyclic"}),Ut.config({find:E=>Oi(io.getViewItems(E))}),La.withComp(A.none(),E=>(E.getSystem().broadcastOn([hf],{}),i.get()),(E,T)=>{i.set(T),E.getSystem().broadcastOn([L2],{})})])})},hu=Ke("update-dialog"),H2=Ke("update-title"),VS=Ke("update-body"),z2=Ke("update-footer"),ZS=Ke("body-send-message"),US=(t,s,c,i,d)=>{const g=S=>{const E=S.body;switch(E.type){case"tabpanel":return[Vd(E,S.initialData,i)];default:return[wt(E,S.initialData,i)]}},b=(S,E)=>A.some({isTabPanel:()=>E.body.type==="tabpanel"}),C={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...c.map(S=>({id:S})).getOr({}),...d?C:{}}},components:[],behaviours:Me([Ia.childAt(0),Uc.config({channel:`${VS}-${s}`,updateState:b,renderComponents:g,initialData:t})])}},pf=(t,s,c,i,d)=>US(t,s,A.some(c),i,d),Hh=(t,s,c)=>{const i=US(t,s,A.none(),c,!1);return Io.parts.body(i)},ne=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[fA({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:Me([Oo.config({}),ht.config({})])})]}],behaviours:Me([rt.config({mode:"acyclic",useTabstopAt:Se(h2)})])};return Io.parts.body(s)},re=D1.deviceType.isTouch(),Ee=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),xe=(t,s)=>Io.parts.close(qr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:Me([Oo.config({})])})),et=()=>Io.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Kt=(t,s)=>Io.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:lf(`<p>${s.translate(t)}</p>`)}]}]}),jn=t=>Io.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),Gn=(t,s)=>[$d.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),$d.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],wc=t=>{const s="tox-dialog",c=s+"-wrap",i=c+"__backdrop",d=s+"__disable-scroll";return Io.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),A.some(!0)),useTabstopAt:g=>!h2(g),dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:lf(`<div class="${c}"></div>`),components:[{dom:{tag:"div",classes:re?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:c,modalBehaviours:Me([ht.config({}),Lt("dialog-events",t.dialogEvents.concat([Zr(Vl(),(g,b)=>{rt.focusIn(g)})])),Lt("scroll-lock",[bo(()=>{ds(er(),d)}),ka(()=>{Vn(er(),d)})]),...t.extraBehaviours]),eventOrder:{[lc()]:["dialog-events"],[Vi()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[ea()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},fb=t=>qr.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[rl("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:s=>{mn(s,bh)}}),a_=(t,s,c,i)=>{const d=g=>[vo(i.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...c.map(g=>({id:g})).getOr({})}},components:[],behaviours:Me([Uc.config({channel:`${H2}-${s}`,initialData:t,renderComponents:d})])}},i_=()=>({dom:lf('<div class="tox-dialog__draghandle"></div>')}),v6=(t,s,c,i)=>$d.sketch({dom:lf('<div class="tox-dialog__header"></div>'),components:[a_(t,s,A.some(c),i),i_(),fb(i)],containerBehaviours:Me([Ph.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>ms(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),W9=(t,s,c)=>{const i=Io.parts.title(a_(t,s,A.none(),c)),d=Io.parts.draghandle(i_()),g=Io.parts.close(fb(c)),b=[i].concat(t.draggable?[d]:[]).concat([g]);return $d.sketch({dom:lf('<div class="tox-dialog__header"></div>'),components:b})},Rt=(t,s,c)=>W9({title:c.shared.providers.translate(t),draggable:c.dialog.isDraggableModal()},s,c.shared.providers),ce=(t,s,c)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":c.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:s,components:[{dom:lf('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),Ge=(t,s,c)=>({onClose:()=>c.closeWindow(),onBlock:i=>{Io.setBusy(t(),(d,g)=>ce(i.message,g,s))},onUnblock:()=>{Io.setIdle(t())}}),bt=(t,s,c,i)=>{const d=(g,b)=>A.some(b);return br(wc({...t,lazySink:i.shared.getSink,extraBehaviours:[Uc.config({channel:`${hu}-${t.id}`,updateState:d,initialData:s}),La.memory({}),...t.extraBehaviours],onEscape:g=>{mn(g,bh)},dialogEvents:c,eventOrder:{[Sa()]:[Uc.name(),na.name()],[Vi()]:["scroll-lock",Uc.name(),"messages","dialog-events","alloy.base.behaviour"],[ea()]:["alloy.base.behaviour","dialog-events","messages",Uc.name(),"scroll-lock"]}}))},lo=t=>{const s=c=>{const i=Ae(c.items,d=>{const g=Ye(!1);return{...d,storage:g}});return{...c,items:i}};return Ae(t,c=>c.type==="menu"?s(c):c)},jc=t=>Xs(t,(s,c)=>c.type==="menu"?Xs(c.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),Xr=(t,s)=>[lm(Vl(),F7),t(u2,(c,i)=>{s.onClose(),i.onClose()}),t(bh,(c,i,d,g)=>{i.onCancel(c),mn(g,u2)}),fe(Qm,(c,i)=>s.onUnblock()),fe(W1,(c,i)=>s.onBlock(i.event))],Er={initUrlDialog:(t,s)=>{const c=(d,g)=>fe(d,(b,C)=>{i(b,(S,E)=>{g(t(),S,C.event,b)})}),i=(d,g)=>{Uc.getState(d).get().each(b=>{g(b,d)})};return[...Xr(c,s),c(Nd,(d,g,b)=>{g.onAction(d,{name:b.name})})]},initDialog:(t,s,c)=>{const i=(g,b)=>fe(g,(C,S)=>{d(C,(E,T)=>{b(t(),E,S.event,C)})}),d=(g,b)=>{Uc.getState(g).get().each(C=>{b(C.internalDialog,g)})};return[...Xr(i,s),i(hx,(g,b)=>b.onSubmit(g)),i(zc,(g,b,C)=>{b.onChange(g,{name:C.name})}),i(Nd,(g,b,C,S)=>{const E=()=>rt.focusIn(S),T=P=>Wd(P,"disabled")||Or(P,"aria-disabled").exists(z=>z==="true"),O=tc(S.element),N=yr(O);b.onAction(g,{name:C.name,value:C.value}),yr(O).fold(E,P=>{T(P)||N.exists(z=>Af(P,z)&&T(z))?E():c().toOptional().filter(z=>!Af(z.element,P)).each(E)})}),i(IE,(g,b,C)=>{b.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),ka(g=>{const b=t();Ie.setValue(g,b.getData())})]}},y6=(t,s)=>y2(t,t.type,s),j9=(t,s,c)=>Yt(s,i=>i.name===c).bind(i=>i.memento.getOpt(t)),G9=(t,s)=>{const c=s.map(C=>C.footerButtons).getOr([]),i=gb(c,C=>C.align==="start"),d=(C,S)=>$d.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:Ae(S,E=>E.memento.asSpec())}),g=d("start",i.pass),b=d("end",i.fail);return[g,b]},q9=(t,s,c)=>{const i=(d,g)=>{const b=Ae(g.buttons,S=>{const E=Pn(y6(S,c));return{name:S.name,align:S.align,memento:E}}),C=S=>j9(d,b,S);return A.some({lookupByName:C,footerButtons:b})};return{dom:lf('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Me([Uc.config({channel:`${z2}-${s}`,initialData:t,updateState:i,renderComponents:G9})])}},vV=(t,s,c)=>q9(t,s,c),lV=(t,s,c)=>Io.parts.footer(q9(t,s,c)),uV=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=Ut.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return J1.getField(i,s).orThunk(()=>{const d=t.getFooter();return Uc.getState(d).get().bind(b=>b.lookupByName(s))})}else return A.none()},yV=(t,s)=>{const c=t.getRoot();return Uc.getState(c).get().map(i=>Ja(jt("data",i.dataValidator,s))).getOr(s)},dV=(t,s,c)=>{const i=z=>{const j=t.getRoot();j.getSystem().isConnected()&&z(j)},P={getData:()=>{const z=t.getRoot(),j=z.getSystem().isConnected()?t.getFormWrapper():z,oe=Ie.getValue(j),Y=Lo(c,se=>se.get());return{...oe,...Y}},setData:z=>{i(j=>{const oe=P.getData(),Y=ro(oe,z),se=yV(t,Y),Le=t.getFormWrapper();Ie.setValue(Le,se),Xo(c,(ue,Ve)=>{tn(Y,Ve)&&ue.set(Y[Ve])})})},setEnabled:(z,j)=>{uV(t,z).each(j?st.enable:st.disable)},focus:z=>{uV(t,z).each(ht.focus)},block:z=>{if(!wn(z))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(j=>{lt(j,W1,{message:z})})},unblock:()=>{i(z=>{mn(z,Qm)})},showTab:z=>{i(j=>{const oe=t.getBody();Uc.getState(oe).get().exists(se=>se.isTabPanel())&&Ut.getCurrent(oe).each(se=>{io.showTab(se,z)})})},redial:z=>{i(j=>{const oe=t.getId(),Y=s(z);j.getSystem().broadcastOn([`${hu}-${oe}`],Y),j.getSystem().broadcastOn([`${H2}-${oe}`],Y.internalDialog),j.getSystem().broadcastOn([`${VS}-${oe}`],Y.internalDialog),j.getSystem().broadcastOn([`${z2}-${oe}`],Y.internalDialog),P.setData(Y.initialData)})},close:()=>{i(z=>{mn(z,u2)})}};return P},CV=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},wV=(t,s,c)=>{const i=Ke("dialog"),d=t.internalDialog,g=Rt(d.title,i,c),b=Hh({body:d.body,initialData:d.initialData},i,c),C=lo(d.buttons),S=jc(C),E=lV({buttons:C},i,c),T=Er.initDialog(()=>j,Ge(()=>P,c.shared.providers,s),c.shared.getSink),O=CV(d.size),N={id:i,header:g,body:b,footer:A.some(E),extraClasses:O,extraBehaviours:[],extraStyles:{}},P=bt(N,t,T,c),z=(()=>{const oe=()=>{const Y=Io.getBody(P);return Ut.getCurrent(Y).getOr(Y)};return{getId:te(i),getRoot:te(P),getBody:()=>Io.getBody(P),getFooter:()=>Io.getFooter(P),getFormWrapper:oe}})(),j=dV(z,s.redial,S);return{dialog:P,instanceApi:j}},xV=(t,s,c,i)=>{const d=Ke("dialog"),g=Ke("dialog-label"),b=Ke("dialog-content"),C=t.internalDialog,S=(Y,se)=>A.some(se),E=Pn(v6({title:C.title,draggable:!0},d,g,c.shared.providers)),T=Pn(pf({body:C.body,initialData:C.initialData},d,b,c,i)),O=lo(C.buttons),N=jc(O),P=Pn(vV({buttons:O},d,c)),z=Er.initDialog(()=>oe,{onBlock:Y=>{Ci.block(j,(se,Le)=>ce(Y.message,Le,c.shared.providers))},onUnblock:()=>{Ci.unblock(j)},onClose:()=>s.closeWindow()},c.shared.getSink),j=br({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:{role:"dialog",["aria-labelledby"]:g,["aria-describedby"]:b}},eventOrder:{[Sa()]:[Uc.name(),na.name()],[lc()]:["execute-on-form"],[Vi()]:["reflecting","execute-on-form"]},behaviours:Me([rt.config({mode:"cyclic",onEscape:Y=>(mn(Y,u2),A.some(!0)),useTabstopAt:Y=>!h2(Y)&&(bn(Y)!=="button"||Yn(Y,"disabled")!=="disabled")}),Uc.config({channel:`${hu}-${d}`,updateState:S,initialData:t}),ht.config({}),Lt("execute-on-form",z.concat([Zr(Vl(),(Y,se)=>{rt.focusIn(Y)})])),Ci.config({getRoot:()=>A.some(j)}),Dt.config({}),La.memory({})]),components:[E.asSpec(),T.asSpec(),P.asSpec()]}),oe=dV({getId:te(d),getRoot:te(j),getFooter:()=>P.get(j),getBody:()=>T.get(j),getFormWrapper:()=>{const Y=T.get(j);return Ut.getCurrent(Y).getOr(Y)}},s.redial,N);return{dialog:j,instanceApi:oe}};var K9=tinymce.util.Tools.resolve("tinymce.util.URI");const SV=t=>{const s=b=>{t.getSystem().isConnected()&&b(t)};return{block:b=>{if(!wn(b))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{lt(C,W1,{message:b})})},unblock:()=>{s(b=>{mn(b,Qm)})},close:()=>{s(b=>{mn(b,u2)})},sendMessage:b=>{s(C=>{C.getSystem().broadcastOn([ZS],b)})}}},kV=["insertContent","setContent","execCommand","close","block","unblock"],mV=t=>qc(t)&&kV.indexOf(t.mceAction)!==-1,EV=t=>!mV(t)&&qc(t)&&tn(t,"mceAction"),AV=(t,s,c)=>{switch(c.mceAction){case"insertContent":t.insertContent(c.content);break;case"setContent":t.setContent(c.content);break;case"execCommand":const i=Ai(c.ui)?c.ui:!1;t.execCommand(c.cmd,i,c.value);break;case"close":s.close();break;case"block":s.block(c.message);break;case"unblock":s.unblock();break}},TV=(t,s,c,i)=>{const d=Ke("dialog"),g=Rt(t.title,d,i),b=ne(t),C=t.buttons.bind(se=>se.length===0?A.none():A.some(lV({buttons:se},d,i))),S=Er.initUrlDialog(()=>Y,Ge(()=>oe,i.shared.providers,s)),E={...t.height.fold(()=>({}),se=>({height:se+"px","max-height":se+"px"})),...t.width.fold(()=>({}),se=>({width:se+"px","max-width":se+"px"}))},T=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],O=new K9(t.url,{base_uri:new K9(window.location.href)}),N=`${O.protocol}://${O.host}${O.port?":"+O.port:""}`,P=cd(),z=[Lt("messages",[bo(()=>{const se=rr(ze.fromDom(window),"message",Le=>{if(O.isSameOrigin(new K9(Le.raw.origin))){const ue=Le.raw.data;mV(ue)?AV(c,Y,ue):EV(ue)&&t.onMessage(Y,ue)}});P.set(se)}),ka(P.clear)]),na.config({channels:{[ZS]:{onReceive:(se,Le)=>{Uo(se.element,"iframe").each(ue=>{const Ve=ue.dom.contentWindow;Ar(Ve)&&Ve.postMessage(Le,N)})}}}})],oe=bt({id:d,header:g,body:b,footer:C,extraClasses:T,extraBehaviours:z,extraStyles:E},t,S,i),Y=SV(oe);return{dialog:oe,instanceApi:Y}},_V=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{Io.hide(E),d()},b=Pn(y2({name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",t)),C=et(),S=xe(g,s.providers),E=br(wc({lazySink:()=>s.getSink(),header:Ee(C,S),body:Kt(i,s.providers),footer:A.some(jn(Gn([],[b.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[fe(bh,g)],eventOrder:{}}));Io.show(E);const T=b.get(E);ht.focus(T)}}},OV=t=>{const s=t.shared;return{open:(i,d)=>{const g=N=>{Io.hide(T),d(N)},b=Pn(y2({name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",t)),C=y2({name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",t),S=et(),E=xe(()=>g(!1),s.providers),T=br(wc({lazySink:()=>s.getSink(),header:Ee(S,E),body:Kt(i,s.providers),footer:A.some(jn(Gn([],[C,b.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[fe(bh,()=>g(!1)),fe(hx,()=>g(!0))],eventOrder:{}}));Io.show(T);const O=b.get(T);ht.focus(O)}}},DV=(t,s)=>Ja(jt("data",s,t)),RV=t=>U1(t,".tox-alert-dialog")||U1(t,".tox-confirm-dialog"),BV=(t,s,c)=>s&&c?[]:[Nr.config({contextual:{lazyContext:()=>A.some(qn(ze.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})],MV=t=>{const s=t.backstage,c=t.editor,i=ah(c),d=_V(s),g=OV(s),b=(z,j,oe)=>j!==void 0&&j.inline==="toolbar"?T(z,s.shared.anchors.inlineDialog(),oe,j.ariaAttrs):j!==void 0&&j.inline==="cursor"?T(z,s.shared.anchors.cursor(),oe,j.ariaAttrs):E(z,oe),C=(z,j)=>S(z,j),S=(z,j)=>{const oe=Y=>{const se=TV(Y,{closeWindow:()=>{Io.hide(se.dialog),j(se.instanceApi)}},c,s);return Io.show(se.dialog),se.instanceApi};return _t.openUrl(oe,z)},E=(z,j)=>{const oe=(Y,se,Le)=>{const ue=se,Xe=wV({dataValidator:Le,initialData:ue,internalDialog:Y},{redial:_t.redial,closeWindow:()=>{Io.hide(Xe.dialog),j(Xe.instanceApi)}},s);return Io.show(Xe.dialog),Xe.instanceApi.setData(ue),Xe.instanceApi};return _t.open(oe,z)},T=(z,j,oe,Y=!1)=>{const se=(Le,ue,Ve)=>{const Xe=DV(ue,Ve),Ze=Kn(),it=s.shared.header.isPositionedAtTop(),ft={dataValidator:Ve,initialData:Xe,internalDialog:Le},Ht=()=>Ze.on(sn=>{wo.reposition(sn),Nr.refresh(sn)}),on=xV(ft,{redial:_t.redial,closeWindow:()=>{Ze.on(wo.hide),c.off("ResizeEditor",Ht),Ze.clear(),oe(on.instanceApi)}},s,Y),ct=br(wo.sketch({lazySink:s.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...it?{}:{fireRepositionEventInstead:{}},inlineBehaviours:Me([Lt("window-manager-inline-events",[fe(Ul(),(sn,an)=>{mn(on.dialog,bh)})]),...BV(c,i,it)]),isExtraPart:(sn,an)=>RV(an)}));return Ze.set(ct),wo.showWithin(ct,Bc(on.dialog),{anchor:j},A.some(er())),(!i||!it)&&(Nr.refresh(ct),c.on("ResizeEditor",Ht)),on.instanceApi.setData(Xe),rt.focusIn(on.dialog),on.instanceApi};return _t.open(se,z)};return{open:b,openUrl:C,alert:(z,j)=>{d.open(z,j)},close:z=>{z.close()},confirm:(z,j)=>{g.open(z,j)}}},$V=t=>{kO(t),CP(t),NH(t)};var NV=()=>{bu.add("silver",t=>{$V(t);const{getUiMothership:s,backstage:c,renderUI:i}=A9(t);a8.register(t,c.shared);const d=MV({editor:t,backstage:c});return{renderUI:i,getWindowManagerImpl:te(d),getNotificationManagerImpl:()=>A4(t,{backstage:c},s())}})};NV()})();const UV=[".tox-tinymce",".tox-tinymce-aux",".moxman-window",".tam-assetmanager-root"].join(", "),WV=Rn=>{hV.init({add_form_submit_trigger:!1,branding:!1,content_css:!1,content_style:VV.toString()+`
`+ZV.toString(),promotion:!1,selector:Rn,skin:!1}),$(document).on("focusin",$s=>{$($s.target).closest(UV).length&&$s.stopImmediatePropagation()})},jV=()=>{hV.triggerSave()},GV=(Rn,$s)=>{for(const Gc in $s)if(Object.hasOwnProperty.call($s,Gc)){const Sc=document.createElement("div");Sc.classList.add("invalid-feedback"),Sc.innerText=$s[Gc];const ki=Rn.querySelector(`[name="${Gc}"]`);ki&&(ki.classList.add("is-invalid"),ki.parentNode.appendChild(Sc))}},pV=Rn=>{Rn.querySelectorAll(".invalid-feedback").forEach($s=>{$s.remove()}),Rn.querySelectorAll(".is-invalid").forEach($s=>{$s.classList.remove("is-invalid")})},jS=document.getElementById("mail-create-form"),qV=Rn=>{Rn.dataset.text=Rn.innerText,Rn.disabled=!0,Rn.innerHTML='<span class="fa fa-spin fa-spinner"></span>'},KV=Rn=>{Rn.disabled=!1,Rn.innerText=Rn.dataset.text},XV=Rn=>{Rn.status===200&&location.reload()},YV=Rn=>{Rn.response.status===422&&GV(jS,Rn.response.data.errors)},JV=()=>{const Rn=new FormData(jS);return+Rn.get("send_to_all")||fV().forEach(Gc=>{Rn.append("job_seekers[][id]",Gc)}),Rn};jS.addEventListener("submit",Rn=>{Rn.preventDefault(),pV(jS),qV(Rn.submitter),jV();const $s=JV(),Gc={headers:{"Content-Type":"multipart/form-data"}};return zV.post("/admin/mails",$s,Gc).then(Sc=>{XV(Sc)}).catch(Sc=>{YV(Sc)}).then(()=>{KV(Rn.submitter)}),!1});const QV=Rn=>{jS.querySelector('input[name="send_to_all"]').value=Number(Rn)},eZ=()=>{jS.reset()},tZ=document.getElementById("mail-empty-modal"),X9=document.getElementById("mail-create-modal"),nZ=document.querySelectorAll('button[data-action="show-mail-create-modal"]');nZ.forEach(Rn=>{Rn.addEventListener("click",$s=>{const Gc=$s.target.hasAttribute("data-send-mail-to-all");QV(Gc),Gc||fV().length?$(X9).modal("show"):$(tZ).modal("show")})});$(X9).on("hidden.bs.modal",()=>{eZ(),pV(X9)});WV('#mail-create-modal textarea[name="contents"]');
